name: CI

on:
  pull_request:

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master

      - name: "Build Awesome Bevy"
        run: cd generate-awesome && ./generate_awesome.sh

      - name: "Build and deploy website"
        uses: shalzz/zola-deploy-action@master
        env:
          PAGES_BRANCH: gh-pages
          BUILD_DIR: .
          TOKEN: ${{ secrets.CART_PAT }}
