<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Bevy 0.2" property=og:title><meta content=website property=og:type><meta content=https://bevy.org//news/bevy-0-2/ property=og:url><meta content=https://bevy.org/assets/bevy_logo_fill.png property=og:image><meta content="Bevy is a refreshingly simple data-driven game engine built in Rust. It is free and open-source forever!" property=og:description><link rel="shortcut icon" href=/assets/favicon.png type=image/png><link href=/site.css rel=stylesheet><link href=/atom.xml rel=alternate type=application/atom+xml><title>Bevy 0.2</title><script defer src=/highlight-intrapage-link.js></script><body><div class=layout><input class=hidden id=mobile-menu-state type=checkbox><header class="layout__header header print:hidden" data-mobile-menu-state-container><div class=header__content><label class=main-menu-backdrop for=mobile-menu-state></label><label class="header__hamburger button-square button-square--header" for=mobile-menu-state><img alt="Three horizontal lines stacked on top of eachother" height=16 src=/assets/icon-hamburger.svg width=20></label><div class=header__left-block><a class=header__logo href=/> <picture class=logo><img alt="Bevy logo" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><div class=header__message>News</div></div><input checked class=hidden id=page-menu-switch-state type=checkbox><nav class="header__menu main-menu main-menu--with-page-menu" data-page-menu-switch-state-container role=navigation><div class=main-menu__header><a href=/> <picture class=logo><img alt="Bevy Engine" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><label class="button-square button-square--header" for=mobile-menu-state><img alt="A saltire or x-cross" height=16 src=/assets/icon-times.svg width=16></label></div><div class=main-menu__page-menu-switch><label class=menu-switch for=page-menu-switch-state><div class="menu-switch__option menu-switch__option--main-menu">Main Menu</div> <div class="menu-switch__option menu-switch__option--page-menu">Post</div></label></div><div class=main-menu__content><div class=main-menu__page-menu><ul class=tree-menu data-highlight-intrapage-link><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#async-task-system>Async Task System</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#initial-web-platform-support>Initial Web Platform Support</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#parallel-queries>Parallel Queries</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#transform-system-rewrite>Transform System Rewrite</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#joystick-gamepad-input>Joystick/Gamepad Input</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#bevy-ecs-performance-improvements>Bevy ECS Performance Improvements</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#change-log>Change Log</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#contributors>Contributors</a></div></ul></div><ul class=main-menu__menu><li class="main-menu__entry main-menu__entry--getting-started"><a class=main-menu__link href=/learn/quick-start/getting-started/> <span>Getting Started</span> </a><li class=main-menu__entry><a class=main-menu__link href=/learn/> <span>Learn</span> </a><li class=main-menu__entry><a class="main-menu__link main-menu__link--active" href=/news/> <span>News</span> </a><li class=main-menu__entry><a class=main-menu__link href=/community/> <span>Community</span> </a><li class=main-menu__entry><a class=main-menu__link href=/foundation/> <span>Foundation</span> </a><li class=main-menu__entry><a class=main-menu__link href=/assets/> <span>Assets</span> </a><li class=main-menu__entry><a class=main-menu__link href=/examples/> <span>Examples</span> </a></ul></div></nav><div class=header__cta-container><a class="button button--pink header__cta" href=/donate>Donate <img alt="heart icon" class=button__icon height=512 src=/assets/heart.svg width=512> </a><a class="header__cta header__cta--github" href=https://github.com/bevyengine/bevy> <img alt="GitHub repo" height=96 src=/assets/github-mark-white.svg width=98> </a></div></div></header><main class=layout__content><div class=container><div class="page-with-menu page-with-menu--news"><div class="page-with-menu__menu-wrapper print:hidden"><div class=page-with-menu__menu><ul class=tree-menu data-highlight-intrapage-link><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#async-task-system>Async Task System</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#initial-web-platform-support>Initial Web Platform Support</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#parallel-queries>Parallel Queries</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#transform-system-rewrite>Transform System Rewrite</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#joystick-gamepad-input>Joystick/Gamepad Input</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#bevy-ecs-performance-improvements>Bevy ECS Performance Improvements</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#change-log>Change Log</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-2/#contributors>Contributors</a></div></ul></div></div><div class=page-with-menu__content><h1 class=news-title>Bevy 0.2</h1><h2 class=news-subtitle>Posted on September 19, 2020 by Carter Anderson <span class=news-social-links> ( <img alt="A silhouette of a figure with cat ears waving a tentacle, or Octocat: GitHub's mascot and logo" class=news-social-icon height=512 src=/assets/github_grey.svg width=496> <span class=media-content> <a class=news-social-link href=https://www.github.com/cart>@cart</a></span> <img alt="A triangle pointing right in a rounded rectangle; Youtube's logo" class=news-social-icon height=512 src=/assets/youtube_grey.svg width=576> <span class=media-content> <a class=news-social-link href=https://www.youtube.com/cartdev>cartdev</a> </span> ) </span></h2><div class="media-content news-content news-content__hero-image"><img alt="Matching Squares by @TheNeikos" style="aspect-ratio:auto 16/9" src=matching_squares.png><div class=news-image-subtitle><a href=https://github.com/TheNeikos/bevy_squares>Matching Squares by @TheNeikos</a></div></div><div class="media-content news-content"><p>A month after the initial Bevy release, and thanks to <strong>87</strong> contributors, <strong>174</strong> pull requests, and our <a href=https://github.com/sponsors/cart><strong>generous sponsors</strong></a>, I'm happy to announce the <strong>Bevy 0.2</strong> release on <a href=https://crates.io/crates/bevy>crates.io</a>!<p>For those who don't know, Bevy is a refreshingly simple data-driven game engine built in Rust. You can check out <a href=/learn/quick-start/introduction/>The Quick Start Guide</a> to get started. Bevy is also free and open source forever! You can grab the full <a href=https://github.com/bevyengine/bevy>source code</a> on GitHub.<p>Here are some of the highlights from this release:</p><span id=continue-reading></span><h2 id=async-task-system>Async Task System <a class=anchor-link href=#async-task-system>#</a></h2><div class=release-feature-authors>authors: @lachlansneff and @aclysma</div><p>Bevy uses multi-threading throughout the engine: ECS scheduling, asset loading, rendering, etc. Before this release it used <a href=https://github.com/rayon-rs/rayon>Rayon</a> for almost all of these tasks. Rayon is nice because it is generally as simple as calling <code>some_list.par_iter().for_each(|x| do_something(x))</code>. Rayon then automatically breaks the <code>for_each</code> into tasks and runs them on as many cores as it can. Rayon is a great choice if you want to easily parallelize code, but it has the downside of being pretty cpu-hungry.<p>Bevy (and a number of other rust game engines and ecs frameworks using rayon) have received feedback that they were overly cpu hungry / usage was not proportional to "real" work done.<p>We decided to resolve this problem by building a custom async-friendly task system, which enables the creation of context-specific task pools. For example, you might have separate pools for compute, IO, networking, etc. This also gives us the flexibility to load balance work appropriately according to work type and/or priority. The cpu usage wins have been huge:<h3 id=total-combined-percent-cpu-usage-8-core-machine-smaller-is-better>Total Combined Percent CPU Usage - 8 Core Machine (smaller is better) <a class=anchor-link href=#total-combined-percent-cpu-usage-8-core-machine-smaller-is-better>#</a></h3><img alt="threading cpu usage 8 core" class=invertable src=bevy_tasks_1.svg><h3 id=total-combined-percent-cpu-usage-32-core-machine-smaller-is-better>Total Combined Percent CPU Usage - 32 Core Machine (smaller is better) <a class=anchor-link href=#total-combined-percent-cpu-usage-32-core-machine-smaller-is-better>#</a></h3><img alt="threading cpu usage 32 core" class=invertable src=bevy_tasks_2.svg><h2 id=initial-web-platform-support>Initial Web Platform Support <a class=anchor-link href=#initial-web-platform-support>#</a></h2><div class=release-feature-authors>authors: @smokku</div><p>(A subset of) Bevy now runs on the web using WebAssembly/WASM! Specifically, Bevy apps can run Bevy ECS schedules, react to input events, create an empty canvas (using winit), and a few other things. This is a huge first step, but it is important to call out that there are still a number of missing pieces, such as 2D/3D rendering, multi-threading, and sound.<p>Those limitations haven't stopped @mrk-its from building the first WASM Bevy game!<h3 id=bevy-robbo-playable-here><a href=https://github.com/mrk-its/bevy-robbo>bevy-robbo</a> (<a href=https://mrk.sed.pl/bevy-robbo/ascii/>playable here</a>) <a class=anchor-link href=#bevy-robbo-playable-here>#</a></h3><p><img alt=bevy-robbo src=https://bevy.org/news/bevy-0-2/bevy-robbo.png><p>They use Bevy for game logic and cleverly work around the render limitations by passing ASCII art game state from <a href=https://github.com/mrk-its/bevy-robbo/blob/ascii/src/systems/js_render.rs>this Bevy system</a> to <a href=https://github.com/mrk-its/bevy-robbo/blob/ascii/wasm/render.js>this JavaScript function</a>.<p>You can play around with some Bevy WASM examples by <a href=https://github.com/bevyengine/bevy/tree/v0.2.0/examples#wasm>following the instructions here</a>.<h2 id=parallel-queries>Parallel Queries <a class=anchor-link href=#parallel-queries>#</a></h2><div class=release-feature-authors>authors: @GrantMoyer</div><p>Bevy ECS Queries are a flexible way to retrieve data from the Entity Component System. Systems that <em>use</em> queries already run in parallel, but before this change the queries themselves could not be <em>iterated</em> in parallel. <strong>Bevy 0.2</strong> adds the ability to easily iterate queries in parallel:<pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">pool</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComputeTaskPool<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Transform<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">32</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">for_each</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>pool<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">transform</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">      transform<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">translate</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>This provides a nice functional API (similar to Rayon) that runs on top of the new <code>bevy_tasks</code> system. It breaks the query up into 32 "batches" and runs each batch as a different task in the bevy task system.<h2 id=transform-system-rewrite>Transform System Rewrite <a class=anchor-link href=#transform-system-rewrite>#</a></h2><div class=release-feature-authors>authors: @MarekLg</div><pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> old
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">translation</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>Translation, <span class="z-variable z-parameter z-rust">rotation</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>Rotation, <span class="z-variable z-parameter z-rust">scale</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>Scale</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span> <span class="z-constant z-other z-placeholder z-rust">{}</span> <span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> translation<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> rotation<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> scale<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> new
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">transform</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>Transform</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span> <span class="z-constant z-other z-placeholder z-rust">{}</span> <span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> transform<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">translation</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> transform<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">rotation</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> transform<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">scale</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Bevy's old transform system used separate <code>Translation</code>, <code>Rotation</code>, and <code>Scale</code> components as the "source of truth". Users modified with these components in their systems, after which they were synced to a <code>LocalTransform</code> component, which was in turn synced to a global <code>Transform</code> component, taking hierarchy into account. This was nice for a couple of reasons:<ul><li>Slightly more cache efficient to retrieve individual components like <code>Translation</code> (because less data needs to be accessed)<li>Theoretically more parallel-friendly. Systems that only access <code>Translation</code> won't block systems accessing <code>Rotation</code>.</ul><p>However this approach also has some pretty serious downsides:<ul><li>The "individual components" are the source of truth, so <code>LocalTransform</code> is out of date when user systems are running. If an up to date "full transform" is needed, it must be manually constructed by accessing all three components.<li>Very hard to reason about. There are 5 components users need to think about and they all interact with each other differently.<li>Setting a Transform to a specific matrix value (ex: <code>Mat4::look_at()</code>) was extremely cumbersome, and the value would be immediately overwritten unless the user explicitly disabled component syncing.</ul><p>Given these issues, we decided to move to a single unified local-to-parent <code>Transform</code> component as the source of truth, and a computed <code>GlobalTransform</code> component for world-space transforms. We think this API will be much easier to use and to reason about. <a href=https://gist.github.com/joeante/79d25ec3a0e86436e53eb74f3ac82c0c>Unity is also considering a similar Transform rework for their ECS</a> and a lot of discussion on this topic happened in this <a href=https://community.amethyst.rs/t/legion-transform-design-discussion>Amethyst Forum Thread</a>.<h2 id=joystick-gamepad-input>Joystick/Gamepad Input <a class=anchor-link href=#joystick-gamepad-input>#</a></h2><div class=release-feature-authors>authors: @simpuid</div><p>The Bevy Input plugin now has cross-platform support for most controllers thanks to the <a href=https://gitlab.com/gilrs-project/gilrs>gilrs</a> library!<pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">button_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">gamepads</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Gamepad<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">button_input</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Input<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>GamepadButton<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> gamepad <span class="z-keyword z-operator z-rust">in</span> gamepads<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> button_input<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">just_pressed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>GamepadButton<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">*</span>gamepad<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">GamepadButtonType<span class="z-punctuation z-accessor z-rust">::</span></span>RightTrigger</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Pressed right trigger!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=bevy-ecs-performance-improvements>Bevy ECS Performance Improvements <a class=anchor-link href=#bevy-ecs-performance-improvements>#</a></h2><div class=release-feature-authors>authors: @cart</div><h3 id=generational-entity-ids>Generational Entity IDs <a class=anchor-link href=#generational-entity-ids>#</a></h3><p>We changed Entity IDs from being random UUIDs to incrementing generational indices. Random UUIDs were nice because they could be created anywhere, were unique across game runs, and could be safely persisted to files or reused across networks. I was really hoping we could make them work, but they ended up being too slow relative to the alternatives. The randomness had a measurable cost and entity locations had to be looked up using a hash map.<p>By moving to generational indices (we use the hecs implementation), we can directly use entity ids as array indices, which makes entity location lookups lightning fast.<h3 id=read-only-queries>Read Only Queries <a class=anchor-link href=#read-only-queries>#</a></h3><p>I implemented "read only" traits for queries that don't mutate anything. This allows us to guarantee that a query won't mutate anything.<h3 id=removed-locking-from-world-apis>Removed locking from World APIs <a class=anchor-link href=#removed-locking-from-world-apis>#</a></h3><p>This gives us a really nice speed boost. We can do this safely due to a combination of the new "read only queries" and changing World mutation APIs to be a mutable World borrow.<p>This is not yet enabled for <code>Queries</code> in systems because a system could have multiple <code>Queries</code>, which could be simultaneously accessed in a way that doesn't make mutable access unique. I think thats a solve-able problem, but it will take a bit more work. Fortunately "for-each" systems don't have any collision risk, so we now use lock-less queries there.<h3 id=direct-component-lookup-in-nanoseconds-smaller-is-better>Direct component lookup (in nanoseconds, smaller is better) <a class=anchor-link href=#direct-component-lookup-in-nanoseconds-smaller-is-better>#</a></h3><p>As a result of these optimizations, direct component lookup is <em>much</em> faster than it used to be:<p><img alt="get_component graph" src=https://bevy.org/news/bevy-0-2/get_component.svg><p>Note that this benchmark used <code>world.get::&LTT>(entity)</code>. <code>query.get::&LTT>(entity)</code> should have results similar to the <code>hecs</code> results because it still uses a lock. Eventually I'm hoping that we can remove locks from system queries too.<h2 id=change-log>Change Log <a class=anchor-link href=#change-log>#</a></h2><h3 id=added>Added <a class=anchor-link href=#added>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/384>Task System for Bevy</a> <ul><li>Replaces rayon with a custom designed task system that consists of several "TaskPools".<li>Exports <code>IOTaskPool</code>, <code>ComputePool</code>, and <code>AsyncComputePool</code> in <code>bevy_tasks</code> crate.</ul><li><a href=https://github.com/bevyengine/bevy/pull/292>Parallel queries for distributing work over with the <code>ParallelIterator</code> trait.</a> <ul><li>e.g. <code>query.iter().par_iter(batch_size).for_each(/* ... */)</code></ul><li><a href=https://github.com/bevyengine/bevy/pull/280>Added gamepad support using Gilrs</a><li><a href=https://github.com/bevyengine/bevy/pull/503>Implement WASM support for bevy_winit</a><li><a href=https://github.com/bevyengine/bevy/pull/506>Create winit canvas under WebAssembly</a><li><a href=https://github.com/bevyengine/bevy/pull/496>Implement single threaded task scheduler for WebAssembly</a><li><a href=https://github.com/bevyengine/bevy/pull/271>Support for binary glTF (.glb).</a><li><a href=https://github.com/bevyengine/bevy/pull/358>Support for <code>Or</code> in ECS queries.</a><li><a href=https://github.com/bevyengine/bevy/pull/339>Added methods <code>unload()</code> and <code>unload_sync()</code> on <code>SceneSpawner</code> for unloading scenes.</a>.<li><a href=https://github.com/bevyengine/bevy/pull/145>Custom rodio source for audio.</a> <ul><li><code>AudioOuput</code> is now able to play anything <code>Decodable</code>.</ul><li><a href=https://github.com/bevyengine/bevy/pull/362><code>Color::hex</code></a> for creating <code>Color</code> from string hex values. <ul><li>Accepts the forms RGB, RGBA, RRGGBB, and RRGGBBAA.</ul><li><a href=https://github.com/bevyengine/bevy/pull/381><code>Color::rgb_u8</code> and <code>Color::rgba_u8</code>.</a><li><a href=https://github.com/bevyengine/bevy/pull/396>Added <code>bevy_render::pass::ClearColor</code> to prelude.</a><li><a href=https://github.com/bevyengine/bevy/pull/430><code>SpriteResizeMode</code> may choose how <code>Sprite</code> resizing should be handled. <code>Automatic</code> by default.</a><li><a href=https://github.com/bevyengine/bevy/pull/428>Added methods on <code>Input&LTT></code></a> for iterator access to keys. <ul><li><code>get_pressed()</code>, <code>get_just_pressed()</code>, <code>get_just_released()</code></ul><li><a href=https://github.com/bevyengine/bevy/pull/270>Derived <code>Copy</code> for <code>MouseScrollUnit</code>.</a><li><a href=https://github.com/bevyengine/bevy/pull/390>Derived <code>Clone</code> for UI component bundles.</a><li><a href=https://github.com/bevyengine/bevy/pull/332>Some examples of documentation</a><li><a href=https://github.com/bevyengine/bevy/pull/451>Update docs for Updated, Changed and Mutated</a><li>Tips for faster builds on macOS: <a href=https://github.com/bevyengine/bevy/pull/312>#312</a>, <a href=https://github.com/bevyengine/bevy/pull/314>#314</a>, <a href=https://github.com/bevyengine/bevy/pull/433>#433</a><li>Added and documented cargo features <ul><li><a href=https://github.com/bevyengine/bevy/pull/249>Created document <code>docs/cargo_features.md</code>.</a><li><a href=https://github.com/bevyengine/bevy/pull/249>Added features for x11 and wayland display servers.</a><li><a href=https://github.com/bevyengine/bevy/pull/363>and added a feature to disable libloading.</a> (helpful for WASM support)</ul><li>Added more instructions for Linux dependencies <ul><li><a href=https://github.com/bevyengine/bevy/pull/275>Arch / Manjaro</a>, <a href=https://github.com/bevyengine/bevy/pull/290>NixOS</a>, <a href=https://github.com/bevyengine/bevy/pull/463>Ubuntu</a> and <a href=https://github.com/bevyengine/bevy/pull/331>Solus</a></ul><li><a href=https://github.com/bevyengine/bevy/pull/491>Provide shell.nix for easier compiling with nix-shell</a><li><a href=https://github.com/bevyengine/bevy/pull/505>Add <code>AppBuilder::add_startup_stage_|before/after</code></a></ul><h3 id=changed>Changed <a class=anchor-link href=#changed>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/374>Transform rewrite</a><li><a href=https://github.com/bevyengine/bevy/pull/504>Use generational entity ids and other optimizations</a><li><a href=https://github.com/bevyengine/bevy/pull/417>Optimize transform systems to only run on changes.</a><li><a href=https://github.com/bevyengine/bevy/pull/323>Send an AssetEvent when modifying using <code>get_id_mut</code></a><li><a href=https://github.com/bevyengine/bevy/pull/332>Rename <code>Assets::get_id_mut</code> -> <code>Assets::get_with_id_mut</code></a><li><a href=https://github.com/bevyengine/bevy/pull/183>Support multiline text in <code>DrawableText</code></a><li><a href=https://github.com/bevyengine/bevy/pull/324>iOS: use shaderc-rs for glsl to spirv compilation</a><li><a href=https://github.com/bevyengine/bevy/pull/304>Changed the default node size to Auto instead of Undefined to match the Stretch implementation.</a><li><a href=https://github.com/bevyengine/bevy/pull/478>Load assets from root path when loading directly</a><li><a href=https://github.com/bevyengine/bevy/pull/485>Add <code>render</code> feature</a>, which makes the entire render pipeline optional.</ul><h3 id=fixed>Fixed <a class=anchor-link href=#fixed>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/361>Properly track added and removed RenderResources in RenderResourcesNode.</a> <ul><li>Fixes issues where entities vanished or changed color when new entities were spawned/despawned.</ul><li><a href=https://github.com/bevyengine/bevy/pull/385>Fixed sprite clipping at same depth</a> <ul><li>Transparent sprites should no longer clip.</ul><li><a href=https://github.com/bevyengine/bevy/pull/345>Check asset path existence</a><li><a href=https://github.com/bevyengine/bevy/pull/376>Fixed deadlock in hot asset reloading</a><li><a href=https://github.com/bevyengine/bevy/pull/394>Fixed hot asset reloading on Windows</a><li><a href=https://github.com/bevyengine/bevy/pull/406>Allow glTFs to be loaded that don't have uvs and normals</a><li><a href=https://github.com/bevyengine/bevy/pull/383>Fixed archetypes_generation being incorrectly updated for systems</a><li><a href=https://github.com/bevyengine/bevy/pull/386>Remove child from parent when it is despawned</a><li><a href=https://github.com/bevyengine/bevy/pull/444>Initialize App.schedule systems when running the app</a><li><a href=https://github.com/bevyengine/bevy/pull/486>Fix missing asset info path for synchronous loading</a><li><a href=https://github.com/bevyengine/bevy/pull/495>fix font atlas overflow</a><li><a href=https://github.com/bevyengine/bevy/pull/490>do not assume font handle is present in assets</a></ul><h3 id=internal-improvements>Internal Improvements <a class=anchor-link href=#internal-improvements>#</a></h3><p>Many improvements to Bevy's CI: <a href=https://github.com/bevyengine/bevy/pull/325>#325</a>, <a href=https://github.com/bevyengine/bevy/pull/349>#349</a>, <a href=https://github.com/bevyengine/bevy/pull/357>#357</a>, <a href=https://github.com/bevyengine/bevy/pull/373>#373</a>, <a href=https://github.com/bevyengine/bevy/pull/423>#423</a>.<h2 id=contributors>Contributors <a class=anchor-link href=#contributors>#</a></h2><p>A huge thanks to the <strong>87 contributors</strong> that made this release (and associated docs) possible!<ul><li>0x22fe<li>8bit-pudding<li>aarongeorge<li>ablakey<li>aclysma<li>adekau<li>aevyrie<li>AmionSky<li>andreheringer<li>AngelOnFira<li>ashneverdawn<li>BafDyce<li>BimDav<li>bitshifter<li>Bobox214<li>Boiethios<li>caelunshun<li>cart<li>CleanCut<li>dallenng<li>DGriffin91<li>Dispersia<li>DJMcNab<li>eliaspekkala<li>EllenNyan<li>eXodiquas<li>figsoda<li>Fishrock123<li>FSMaxB<li>GabLotus<li>GrantMoyer<li>guimcaballero<li>Halfwhit<li>hannobraun<li>IceSentry<li>ifletsomeclaire<li>Incipium<li>io12<li>jakerr<li>jamadazi<li>joejoepie<li>JohnDoneth<li>julhe<li>kaflu<li>karroffel<li>lachlansneff<li>lberrymage<li>logannc<li>Lowentwickler<li>MarekLg<li>MatteoGgl<li>memoryruins<li>mfrancis107<li>MGlolenstine<li>MichaelHills<li>MilanVasko<li>Moxinilian<li>mrk-its<li>mtsr<li>multun<li>naithar<li>ncallaway<li>ndarilek<li>OptimisticPeach<li>PrototypeNM1<li>reidbhuntley<li>RobDavenport<li>saicu<li>simpuid<li>SmiteWindows<li>smokku<li>StarArawn<li>stefee<li>tarkah<li>TehPers<li>Telzhaak<li>TheNeikos<li>thirdsgames<li>TomBebb<li>tristanpemble<li>verzuz<li>VitalyAnkh<li>w1th0utnam3<li>Waridley<li>wyhaya<li>Xavientois<li>zicklag</ul></div><script type=module>import{enable_image_compare as a}from"/components.js";document.addEventListener(`DOMContentLoaded`,(()=>{a()}))</script></div></div></div></main><footer class=print:hidden><div class=footer__social-container><a class=footer__social href=https://github.com/bevyengine/bevy title=GitHub> <img alt="GitHub logo" height=24 src=/assets/github-mark-white.svg width=24> </a><a class=footer__social href=https://discord.gg/bevy title=Discord> <img alt="Discord logo" height=24 src=/assets/discord.svg width=24> </a><a class=footer__social href=https://bsky.app/profile/bevy.org title=Bluesky> <img alt="Bluesky logo" height=24 src=/assets/bluesky.svg width=24> </a><a class=footer__social href=https://mastodon.social/@bevy title=Mastodon> <img alt="Mastodon logo" height=24 src=/assets/mastodon-logo-purple.svg width=24> </a><a class=footer__social href=https://www.reddit.com/r/bevy/ title=Reddit> <img alt="Reddit logo" height=24 src=/assets/reddit.svg width=24> </a><a class=footer__social href=https://itch.io/games/tag-bevy title=itch.io> <img alt="itch.io logo" height=24 src=/assets/itchio-textless.svg width=24> </a><a title="Bevy news feed" class=footer__social href=/atom.xml> <img alt="Bevy news feed" height=24 src=/assets/feed.svg width=24> </a></div></footer></div><script>const search_params=new URLSearchParams(window.location.search);if(search_params.has(`show_drafts`)||document.cookie.indexOf(`show_drafts`)>=0){let a=`show_drafts`;if(search_params.get(a)===`0`){document.cookie=`show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC`}else{document.cookie=`show_drafts=1;path=/`;document.body.classList.add(a)}}</script>