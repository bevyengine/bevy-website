<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Bevy 0.8" property=og:title><meta content=website property=og:type><meta content=https://bevy.org//news/bevy-0-8/ property=og:url><meta content=https://bevy.org/assets/bevy_logo_fill.png property=og:image><meta content="Bevy is a refreshingly simple data-driven game engine built in Rust. It is free and open-source forever!" property=og:description><link rel="shortcut icon" href=/assets/favicon.png type=image/png><link href=/site.css rel=stylesheet><link href=/atom.xml rel=alternate type=application/atom+xml><title>Bevy 0.8</title><script defer src=/highlight-intrapage-link.js></script><body><div class=layout><input class=hidden id=mobile-menu-state type=checkbox><header class="layout__header header print:hidden" data-mobile-menu-state-container><div class=header__content><label class=main-menu-backdrop for=mobile-menu-state></label><label class="header__hamburger button-square button-square--header" for=mobile-menu-state><img alt="Three horizontal lines stacked on top of eachother" height=16 src=/assets/icon-hamburger.svg width=20></label><div class=header__left-block><a class=header__logo href=/> <picture class=logo><img alt="Bevy logo" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><div class=header__message>News</div></div><input checked class=hidden id=page-menu-switch-state type=checkbox><nav class="header__menu main-menu main-menu--with-page-menu" data-page-menu-switch-state-container role=navigation><div class=main-menu__header><a href=/> <picture class=logo><img alt="Bevy Engine" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><label class="button-square button-square--header" for=mobile-menu-state><img alt="A saltire or x-cross" height=16 src=/assets/icon-times.svg width=16></label></div><div class=main-menu__page-menu-switch><label class=menu-switch for=page-menu-switch-state><div class="menu-switch__option menu-switch__option--main-menu">Main Menu</div> <div class="menu-switch__option menu-switch__option--page-menu">Post</div></label></div><div class=main-menu__content><div class=main-menu__page-menu><ul class=tree-menu data-highlight-intrapage-link><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#new-material-system>New Material System</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#camera-driven-rendering>Camera-Driven Rendering</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#spotlights>Spotlights</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#visibility-inheritance>Visibility Inheritance</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#built-in-shader-modularization>Built-in Shader Modularization</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#wgpu-0-13-new-wgsl-shader-syntax>wgpu 0.13: New WGSL Shader Syntax</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#scene-bundle>Scene Bundle</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#parallel-frustum-culling>Parallel Frustum Culling</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#automatic-mesh-tangent-generation>Automatic Mesh Tangent Generation</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#default-to-linear-texture-filtering>Default to Linear Texture Filtering</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#new-globaltransform-matrix-representation>New GlobalTransform Matrix Representation</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#shadertype-derive>ShaderType derive</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#render-phase-sorting-optimization>Render Phase Sorting Optimization</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#vertex-colors>Vertex Colors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#regular-polygon-and-circle-mesh-primitives>Regular Polygon and Circle Mesh Primitives</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#scripting-and-modding-progress-untyped-ecs-apis>Scripting and Modding Progress: Untyped ECS APIs</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#query-intoiter>Query IntoIter</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#query-iter-many>Query::iter_many</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#convert-mutable-queries-to-read-only>Convert Mutable Queries to Read-only</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ecs-lifetimed-pointers>ECS "lifetimed pointers"</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ecs-query-internals-refactors>ECS Query Internals Refactors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ecs-optimizations>ECS Optimizations</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#label-optimizations>Label Optimizations</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#hierarchy-commands>Hierarchy Commands</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#bevy-reflection-improvements>Bevy Reflection Improvements</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#render-world-extract>Render World Extract</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#extractresource-trait-and-plugin>ExtractResource Trait and Plugin</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#taffy-migration-a-refreshed-ui-layout-library>Taffy migration: a refreshed UI layout library</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ecs-soundness-correctness-improvements>ECS Soundness / Correctness Improvements</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#android-progress-we-aren-t-there-yet-but-we-re-closer>Android Progress: We aren't there yet, but we're closer!</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ci-build-system-improvements>CI / Build System Improvements</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#example-post-processing>Example: Post Processing</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#example-many-animated-foxes>Example: Many Animated Foxes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#wasm-example-build-tool>WASM Example Build Tool</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#website-improved-examples-page>Website: Improved Examples Page</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#bevy-org-changes>Bevy Org Changes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#what-s-next>What's Next?</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#support-bevy>Support Bevy</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#contributors>Contributors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#full-change-log>Full Change Log</a></div></ul></div><ul class=main-menu__menu><li class="main-menu__entry main-menu__entry--getting-started"><a class=main-menu__link href=/learn/quick-start/getting-started/> <span>Getting Started</span> </a><li class=main-menu__entry><a class=main-menu__link href=/learn/> <span>Learn</span> </a><li class=main-menu__entry><a class="main-menu__link main-menu__link--active" href=/news/> <span>News</span> </a><li class=main-menu__entry><a class=main-menu__link href=/community/> <span>Community</span> </a><li class=main-menu__entry><a class=main-menu__link href=/foundation/> <span>Foundation</span> </a><li class=main-menu__entry><a class=main-menu__link href=/assets/> <span>Assets</span> </a><li class=main-menu__entry><a class=main-menu__link href=/examples/> <span>Examples</span> </a></ul></div></nav><div class=header__cta-container><a class="button button--pink header__cta" href=/donate>Donate <img alt="heart icon" class=button__icon height=512 src=/assets/heart.svg width=512> </a><a class="header__cta header__cta--github" href=https://github.com/bevyengine/bevy> <img alt="GitHub repo" height=96 src=/assets/github-mark-white.svg width=98> </a></div></div></header><main class=layout__content><div class=container><div class="page-with-menu page-with-menu--news"><div class="page-with-menu__menu-wrapper print:hidden"><div class=page-with-menu__menu><ul class=tree-menu data-highlight-intrapage-link><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#new-material-system>New Material System</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#camera-driven-rendering>Camera-Driven Rendering</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#spotlights>Spotlights</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#visibility-inheritance>Visibility Inheritance</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#built-in-shader-modularization>Built-in Shader Modularization</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#wgpu-0-13-new-wgsl-shader-syntax>wgpu 0.13: New WGSL Shader Syntax</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#scene-bundle>Scene Bundle</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#parallel-frustum-culling>Parallel Frustum Culling</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#automatic-mesh-tangent-generation>Automatic Mesh Tangent Generation</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#default-to-linear-texture-filtering>Default to Linear Texture Filtering</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#new-globaltransform-matrix-representation>New GlobalTransform Matrix Representation</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#shadertype-derive>ShaderType derive</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#render-phase-sorting-optimization>Render Phase Sorting Optimization</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#vertex-colors>Vertex Colors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#regular-polygon-and-circle-mesh-primitives>Regular Polygon and Circle Mesh Primitives</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#scripting-and-modding-progress-untyped-ecs-apis>Scripting and Modding Progress: Untyped ECS APIs</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#query-intoiter>Query IntoIter</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#query-iter-many>Query::iter_many</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#convert-mutable-queries-to-read-only>Convert Mutable Queries to Read-only</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ecs-lifetimed-pointers>ECS "lifetimed pointers"</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ecs-query-internals-refactors>ECS Query Internals Refactors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ecs-optimizations>ECS Optimizations</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#label-optimizations>Label Optimizations</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#hierarchy-commands>Hierarchy Commands</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#bevy-reflection-improvements>Bevy Reflection Improvements</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#render-world-extract>Render World Extract</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#extractresource-trait-and-plugin>ExtractResource Trait and Plugin</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#taffy-migration-a-refreshed-ui-layout-library>Taffy migration: a refreshed UI layout library</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ecs-soundness-correctness-improvements>ECS Soundness / Correctness Improvements</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#android-progress-we-aren-t-there-yet-but-we-re-closer>Android Progress: We aren't there yet, but we're closer!</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#ci-build-system-improvements>CI / Build System Improvements</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#example-post-processing>Example: Post Processing</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#example-many-animated-foxes>Example: Many Animated Foxes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#wasm-example-build-tool>WASM Example Build Tool</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#website-improved-examples-page>Website: Improved Examples Page</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#bevy-org-changes>Bevy Org Changes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#what-s-next>What's Next?</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#support-bevy>Support Bevy</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#contributors>Contributors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-8/#full-change-log>Full Change Log</a></div></ul></div></div><div class=page-with-menu__content><h1 class=news-title>Bevy 0.8</h1><h2 class=news-subtitle>Posted on July 30, 2022 by Carter Anderson <span class=news-social-links> ( <img alt="A silhouette of a figure with cat ears waving a tentacle, or Octocat: GitHub's mascot and logo" class=news-social-icon height=512 src=/assets/github_grey.svg width=496> <span class=media-content> <a class=news-social-link href=https://www.github.com/cart>@cart</a></span> <img alt="A triangle pointing right in a rounded rectangle; Youtube's logo" class=news-social-icon height=512 src=/assets/youtube_grey.svg width=576> <span class=media-content> <a class=news-social-link href=https://www.youtube.com/cartdev>cartdev</a> </span> ) </span></h2><div class="media-content news-content news-content__hero-image"><img alt="Bevy-shaped mountains in a Bevy-based Witcher 3 terrain texturing tool built by rmemr" style="aspect-ratio:auto 16/9" src=bevy_terrain.jpg><div class=news-image-subtitle><a href=https://codeberg.org/rmemr/w3.terrain-texturing>Bevy-shaped mountains in a Bevy-based Witcher 3 terrain texturing tool built by rmemr</a></div></div><div class="media-content news-content"><p>Thanks to <strong>130</strong> contributors, <strong>461</strong> pull requests, community reviewers, and our <a href=https://github.com/sponsors/cart><strong>generous sponsors</strong></a>, I'm happy to announce the <strong>Bevy 0.8</strong> release on <a href=https://crates.io/crates/bevy>crates.io</a>!<p>For those who don't know, Bevy is a refreshingly simple data-driven game engine built in Rust. You can check out our <a href=/learn/quick-start/introduction>Quick Start Guide</a> to try it today. It's free and open source forever! You can grab the full <a href=https://github.com/bevyengine/bevy>source code</a> on GitHub. Check out <a href=https://bevy.org/assets>Bevy Assets</a> for a collection of community-developed plugins, games, and learning resources.<p>To update an existing Bevy App or Plugin to <strong>Bevy 0.8</strong>, check out our <a href=/learn/migration-guides/0.7-0.8/>0.7 to 0.8 Migration Guide</a>.<p>Since our last release a few months ago we've added a <em>ton</em> of new features, bug fixes, and quality of life tweaks, but here are some of the highlights:<ul><li><strong>New Material System</strong>: Custom shaders are now <em>much</em> easier to define, thanks to the new Material trait and AsBindGroup derive.<li><strong>Camera-driven Rendering</strong>: Each Camera now configures what it renders and how it renders it. Easily layer camera renders on top of each other, do split screen, or render to a texture in just a few lines of code.<li><strong>Built-in Shader Modularization</strong>: Many built-in shader types and functions are now importable. Notably, custom shaders can now import the PBR shader logic<li><strong>Spot Lights</strong>: A new light type that emits light in a cone shape from a fixed point.<li><strong>Visibility Inheritance</strong>: Hiding an entity now also hides all of its descendants in the hierarchy.<li><strong>Upgraded to wgpu 0.13</strong>: Uses a new, more ergonomic WGSL shader syntax.<li><strong>Automatic Mesh Tangent Generation</strong>: If tangents are missing for a mesh, generate them with mikktspace.<li><strong>Renderer Optimizations</strong>: Parallel frustum culling and unstable sorts for unbatched render phases yielded some big wins!<li><strong>Scene Bundle</strong>: Easily spawn scenes using a normal Bevy bundle and extend them with new components and children.<li><strong>Scripting and Modding Progress: Untyped ECS APIs</strong>: A step toward 3rd party scripting language support! Interact with Bevy ECS internals directly via pointers.<li><strong>ECS Query Ergonomics and Usability</strong>: Queries now implement <code>IntoIter</code> and mutable queries can be converted to immutable queries.<li><strong>ECS Internals Refactors</strong>: Sweeping changes to Bevy ECS internals that make it simpler, safer, and easier to maintain.<li><strong>Reflection Improvements</strong>: Support for reflecting more types, ECS resource reflection, untyped reflection, improved internals.<li><strong>Hierarchy Commands</strong>: Hierarchy updates now use "transactional commands" to ensure hierarchy consistency at all times.<li><strong>Bevy UI Now Uses Taffy</strong>: We've swapped to (and help maintain) a collaborative fork of the now abandoned Stretch UI layout library. Exponential blow-up bug begone!</ul><span id=continue-reading></span><h2 id=new-material-system>New Material System <a class=anchor-link href=#new-material-system>#</a></h2><div class=release-feature-authors>authors: @cart, @Wrapperup, @johanhelsing</div><p>Bevy has a brand new <a href=https://docs.rs/bevy/0.8.0/bevy/pbr/trait.Material.html><code>Material</code></a> system that makes defining custom shaders a breeze. Bevy's previous material system required hundreds of lines of "mid-level" boilerplate. This was never the long term plan, just an intermediate step. In <strong>Bevy 0.8</strong>, custom shader materials are as simple as this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">AsBindGroup<span class="z-punctuation z-separator z-rust">,</span> TypeUuid<span class="z-punctuation z-separator z-rust">,</span> Clone</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">uuid</span> <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>f690fdae-d598-45ab-8225-97e2a3f056e0<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">CoolMaterial</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">uniform</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">0</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">color</span><span class="z-punctuation z-separator z-type z-rust">:</span> Color,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">texture</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">1</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">sampler</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">2</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">color_texture</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Image<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> The Material trait has many optional functions for configuration.
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> In this case, all we need to set is a fragment shader. Ergonomics!
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Material <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">CoolMaterial</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">fragment_shader</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> ShaderRef</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>cool_material.wgsl<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>And the <code>cool_material.wgsl</code> shader:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">CoolMaterial</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">color</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">group</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">binding</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-generic z-rust">var<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>uniform<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> material<span class="z-punctuation z-separator z-rust">:</span> CoolMaterial<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">group</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">binding</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">var color_texture<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">texture_2d<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">group</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">binding</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">2</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">var color_sampler<span class="z-punctuation z-separator z-rust">:</span> sampler<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span>fragment
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">fragment</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    #import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span>mesh_vertex_output
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> </span></span><span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">location</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">return</span> material<span class="z-punctuation z-accessor z-dot z-rust">.</span>color <span class="z-keyword z-operator z-arithmetic z-rust">*</span> textureSample<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color_texture<span class="z-punctuation z-separator z-rust">,</span> color_sampler<span class="z-punctuation z-separator z-rust">,</span> uv</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><p>And just like that, we have a configurable shader material!<p>This can be used to create whatever effects you want! For example: <code>@DGriffin91</code> made this cool "glowing orb" effect:<p><video controls loop><source src=marbles.mp4 type=video/mp4></video><p>They also made a <a href="https://www.youtube.com/watch?v=O6A_nVmpvhc">nice video tutorial</a> outlining how to create this material.<p>This is thanks to the new <a href=https://docs.rs/bevy/0.8.0/bevy/render/render_resource/trait.AsBindGroup.html><code>AsBindGroup</code></a> trait / derive, which does all of the hard work of converting the material to GPU-compatible datatypes, writing them to the GPU, and creating the final <a href=https://docs.rs/bevy/0.8.0/bevy/render/render_resource/struct.BindGroup.html><code>BindGroup</code></a>. The <a href=https://docs.rs/bevy/0.8.0/bevy/render/render_resource/trait.AsBindGroup.html><code>AsBindGroup</code></a> trait is powerful: it supports combining multiple fields into the same uniform binding, configuring texture binding types (2D, 3D, filtering, etc), and more. For details, check out the <a href=https://docs.rs/bevy/0.8.0/bevy/render/render_resource/trait.AsBindGroup.html><code>AsBindGroup</code></a> docs.<p>All built-in materials, such as the PBR <a href=https://docs.rs/bevy/0.8.0/bevy/pbr/struct.StandardMaterial.html><code>StandardMaterial</code></a> have been ported to use this new system. We strive to make Bevy "internals" the same as user code, and this is no exception! <a href=https://docs.rs/bevy/0.8.0/bevy/pbr/trait.Material.html><code>Material</code></a> also works seamlessly with our more advanced shader features, such as <a href=https://github.com/bevyengine/bevy/blob/v0.8.0/examples/shader/shader_defs.rs>shader pipeline specialization</a>.<p>There is also an equivalent <a href=https://docs.rs/bevy/0.8.0/bevy/sprite/trait.Material2d.html><code>Material2d</code></a> trait, which enables custom materials in 2D.<h2 id=camera-driven-rendering>Camera-Driven Rendering <a class=anchor-link href=#camera-driven-rendering>#</a></h2><div class=release-feature-authors>authors: @cart</div><p>In previous versions of Bevy, <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.Camera.html><code>Cameras</code></a> were selected and run as a part of one "global" <a href=https://docs.rs/bevy/0.8.0/bevy/render/render_graph/struct.RenderGraph.html><code>RenderGraph</code></a>. There could only be one "active" camera of a given type, and that camera could only render to one target. The only way to render from multiple perspectives at the same time was to manually extend the render graph with duplicate logic. This was <em>full</em> of complicated low-level renderer boilerplate that wasn't approachable for the average Bevy user.<p>In <strong>Bevy 0.8</strong>, each <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.Camera.html><code>Camera</code></a> now configures what it renders, how it renders, and what it renders to. An enabled camera will start a new run of a <a href=https://docs.rs/bevy/0.8.0/bevy/render/render_graph/struct.RenderGraph.html><code>RenderGraph</code></a> to a specified <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/enum.RenderTarget.html><code>RenderTarget</code></a>. The render graph defines <a href=/news/bevy-0-6/#render-graphs-and-sub-graphs>modular render logic</a> for the given camera and the render target defines the window or texture the graph will render to.<p>This makes scenarios that were previously hundreds (or thousands) of lines of code as simple as setting a few fields on the <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.Camera.html><code>Camera</code></a> entity:<h3 id=render-to-textures>Render to Textures <a class=anchor-link href=#render-to-textures>#</a></h3><p>Rendering a <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.Camera.html><code>Camera</code></a> to a texture is now a single line of code:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">camera<span class="z-punctuation z-accessor z-dot z-rust">.</span>target <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">RenderTarget<span class="z-punctuation z-accessor z-rust">::</span></span>Image<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>image_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>This enables too many scenarios to count: portals, rendering UI to a texture and rendering it in 3d space, in-game security cameras, real-time player portraits rendered in UI widgets ... the sky is the limit!<p>Here is an example of a "portal effect":<p><video controls loop><source src=portals.mp4 type=video/mp4></video><p>This is accomplished by rendering a second camera to a texture, synchronizing its orientation with the main player's camera, and using that texture in the main camera's scene.<h3 id=split-screen>Split Screen <a class=anchor-link href=#split-screen>#</a></h3><p>Each <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.Camera.html><code>Camera</code></a> now has an optional <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.Viewport.html><code>Viewport</code></a>, which if set will draw to a section of a <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/enum.RenderTarget.html><code>RenderTarget</code></a> instead of the whole. If you spawn two active cameras and set each camera's <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.Viewport.html><code>Viewport</code></a> to draw to half of the window, you have simple, painless split screen!<p><img alt="split screen" src=https://bevy.org/news/bevy-0-8/split_screen.jpg><h3 id=layered-rendering>Layered Rendering <a class=anchor-link href=#layered-rendering>#</a></h3><p>Cameras can now be layered on top of each other using the new "camera priority" field:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This camera defaults to priority 0 and is rendered "first" / "at the back" 
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Camera3dBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Camera3dBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    camera_3d<span class="z-punctuation z-separator z-rust">:</span> Camera3d <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> don't clear the color while rendering this camera
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        clear_color<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">ClearColorConfig<span class="z-punctuation z-accessor z-rust">::</span></span>None<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    camera<span class="z-punctuation z-separator z-rust">:</span> Camera <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> renders after / on top of the main camera
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        priority<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>"Priority" determines the order cameras are drawn in. The "portal" effect in the <a href=https://bevy.org/news/bevy-0-8/#render-to-textures>render to textures example above</a> uses priority to render the "portal" camera first, ensuring it is ready to be used by the main camera.<p>Here is a simple example of two cameras rendering to the same window:<p><img alt="camera layering" src=https://bevy.org/news/bevy-0-8/camera_layering.png><p>This can be used for things like "custom UI passes", "minimaps", etc.<h3 id=ergonomic-target-size-access>Ergonomic Target Size Access <a class=anchor-link href=#ergonomic-target-size-access>#</a></h3><p>Cameras now store their <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/enum.RenderTarget.html><code>RenderTarget</code></a> size locally, which makes retrieving the size much simpler:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Much nicer than needing to look up the size on the target Window or Image manually,
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> like you had to in previous Bevy versions!
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> target_size <span class="z-keyword z-operator z-assignment z-rust">=</span> camera<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">logical_target_size</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> viewport_size <span class="z-keyword z-operator z-assignment z-rust">=</span> camera<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">logical_viewport_size</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>This also means that converting world to screen coordinates for a camera is much easier than it used to be:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Bevy 0.7 (old)
</span></span><span class="z-source z-rust">camera<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_to_screen</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>windows<span class="z-punctuation z-separator z-rust">,</span> images<span class="z-punctuation z-separator z-rust">,</span> camera_transform<span class="z-punctuation z-separator z-rust">,</span> world_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Bevy 0.8 (new)
</span></span><span class="z-source z-rust">camera<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_to_viewport</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>camera_transform<span class="z-punctuation z-separator z-rust">,</span> world_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=new-camera-bundles>New Camera Bundles <a class=anchor-link href=#new-camera-bundles>#</a></h3><p>The old <code>OrthographicCameraBundle</code> and <code>PerspectiveCameraBundle</code> have been replaced with <a href=https://docs.rs/bevy/0.8.0/bevy/core_pipeline/core_3d/struct.Camera3dBundle.html><code>Camera3dBundle</code></a> and <a href=https://docs.rs/bevy/0.8.0/bevy/core_pipeline/core_2d/struct.Camera2dBundle.html><code>Camera2dBundle</code></a>. In most cases migration should be as simple as replacing the old names with the new ones. 3D cameras default to "perspective" projections, but they can still be switched to orthographic using the new <a href=https://docs.rs/bevy/0.8.0/bevy/core_pipeline/core_3d/struct.Camera3dBundle.html#structfield.projection><code>Projection</code></a> component in the bundle.<h3 id=no-more-camerauibundle>No More CameraUiBundle! <a class=anchor-link href=#no-more-camerauibundle>#</a></h3><p>Bevy UI now no longer needs a separate camera entity to work. UI "just works" for all camera types and can be enabled or disabled per-camera using the <a href=https://docs.rs/bevy/0.8.0/bevy/ui/entity/struct.UiCameraConfig.html><code>UiCameraConfig</code></a> component.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Camera3dBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>UiCameraConfig <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        show_ui<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-language z-rust">false</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=custom-render-graphs>Custom Render Graphs <a class=anchor-link href=#custom-render-graphs>#</a></h3><p>The default 2D and 3D <a href=https://docs.rs/bevy/0.8.0/bevy/render/render_graph/struct.RenderGraph.html><code>RenderGraphs</code></a> for each <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.Camera.html><code>Camera</code></a> can be overridden by setting the <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.CameraRenderGraph.html><code>CameraRenderGraph</code></a> component:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Camera3dBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    camera_render_graph<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">CameraRenderGraph<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>some_custom_graph</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>This enables you to draw the camera with whatever custom render logic you need! For example, you could replace the built in clustered-forward-rendering with deferred rendering. Note that this generally won't be required: most custom rendering scenarios will be covered by high-level <a href=https://bevy.org/news/bevy-0-8/#new-material-system>Materials</a> or extending the built-in render graphs. And using the default render graph will ensure maximum compatibility with other plugins.<h3 id=enabling-disabling-cameras>Enabling / Disabling Cameras <a class=anchor-link href=#enabling-disabling-cameras>#</a></h3><p>If a camera is "active", it will render to its <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/enum.RenderTarget.html><code>RenderTarget</code></a>. To activate or deactivate a camera, set the new <code>is_active</code> field:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">camera<span class="z-punctuation z-accessor z-dot z-rust">.</span>is_active <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-language z-rust">true</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=renderlayers>RenderLayers <a class=anchor-link href=#renderlayers>#</a></h3><p>Bevy's existing <a href=https://docs.rs/bevy/0.8.0/bevy/render/view/visibility/struct.RenderLayers.html><code>RenderLayers</code></a> system can be used to tell a <a href=https://docs.rs/bevy/0.8.0/bevy/render/camera/struct.Camera.html><code>Camera</code></a> to only render entities on specific layers. <strong>Camera-Driven Rendering</strong> pairs nicely with this feature. This enables rendering one set of entities to one camera and another set of entities to another camera. We've ported the <a href=https://docs.rs/bevy/0.8.0/bevy/render/view/visibility/struct.RenderLayers.html><code>RenderLayers</code></a> system to all entities with <a href=https://docs.rs/bevy/0.8.0/bevy/render/view/struct.Visibility.html><code>Visibility</code></a>, so this will all Just Work™.<h2 id=spotlights>Spotlights <a class=anchor-link href=#spotlights>#</a></h2><div class=release-feature-authors>authors: @robtfm</div><p>Bevy now has a <a href=https://docs.rs/bevy/0.8.0/bevy/pbr/struct.SpotLight.html><code>SpotLight</code></a> entity type, which emits light in a cone shape from a point in space.<p><img alt=spotlight src=https://bevy.org/news/bevy-0-8/spotlight.png><h2 id=visibility-inheritance>Visibility Inheritance <a class=anchor-link href=#visibility-inheritance>#</a></h2><div class=release-feature-authors>authors: @james7132, @cart</div><p>Visibility in entity hierarchies (using the <a href=https://docs.rs/bevy/0.8.0/bevy/render/view/struct.Visibility.html><code>Visibility</code></a> component) now propagates down the hierarchy. This is hugely useful, as entities in a game often have <em>many</em> entities nested beneath them. A "player entity" is often made up of many pieces: the player sprite or mesh, what the player is wearing / holding, visual effects, etc.<p>Visibility inheritance means that you only need to hide the top level "player" entity in your code and everything beneath it will be hidden for you.<p>This "flight helmet" scene consists of many "pieces" nested under the main helmet entity. Hiding all of these "sub entities" is as now as easy as hiding the top level helmet entity.<p><video controls loop><source src=visibility_inheritance.mp4 type=video/mp4></video><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">hide_helmets</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">helmet_visibilities</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Visibility, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Helmet<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> helmet_visibility <span class="z-keyword z-operator z-assignment z-rust">=</span> helmet_visibilities<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">single_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    helmet_visibility<span class="z-punctuation z-accessor z-dot z-rust">.</span>is_visible <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-language z-rust">false</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>In past versions of Bevy, you had to hide each piece manually!<p>The "inherited visibility" is computed in the <a href=https://docs.rs/bevy/0.8.0/bevy/app/enum.CoreStage.html#variant.PostUpdate><code>PostUpdate</code></a> stage and stored on the <a href=https://docs.rs/bevy/0.8.0/bevy/render/view/struct.ComputedVisibility.html><code>ComputedVisibility</code></a> component. <a href=https://docs.rs/bevy/0.8.0/bevy/render/view/struct.ComputedVisibility.html><code>ComputedVisibility</code></a> now has the following functions:<ul><li><code>is_visible_in_hierarchy()</code>: Whether or not the entity is visible according to "visibility inheritance".<li><code>is_visible_in_view()</code>: Whether or not the entity is visible in any view. This is used for culling entities in cases like "frustum culling".<li><code>is_visible()</code>: The canonical place to determine whether or not an entity will be drawn. Combines "view visibility" and "hierarchy visibility".</ul><h3 id=spatialbundle-and-visibilitybundle>SpatialBundle and VisibilityBundle <a class=anchor-link href=#spatialbundle-and-visibilitybundle>#</a></h3><div class=release-feature-authors>authors: @mockersf, @rparrett</div><p>With the addition of <a href=https://bevy.org/news/bevy-0-8/#visibility-inheritance>Visibility Inheritance</a> comes the constraint that visibility propagation requires all elements in the hierarchy to have the appropriate visibility components. When constructing scenes, developers often want to group entities under parent "organizational" entities, which exist solely to group entities together, reposition them, and hide them as a unit. These "organizational" entities still require visibility components to propagate the <a href=https://docs.rs/bevy/0.8.0/bevy/transform/components/struct.Transform.html><code>Transform</code></a> and <a href=https://docs.rs/bevy/0.8.0/bevy/render/view/struct.Visibility.html><code>Visibility</code></a> to <a href=https://docs.rs/bevy/0.8.0/bevy/transform/components/struct.GlobalTransform.html><code>GlobalTransform</code></a> and <a href=https://docs.rs/bevy/0.8.0/bevy/render/view/struct.ComputedVisibility.html><code>ComputedVisibility</code></a> (respectively).<p>To make this easy, we've added a new <a href=https://docs.rs/bevy/0.8.0/bevy/render/prelude/struct.SpatialBundle.html><code>SpatialBundle</code></a>, which adds the components mentioned above. This allows the entity to configure and propagate visibility and transform data without incurring the cost of actually rendering it.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This entity controls the position and visibility of the entities beneath it.
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>SpatialBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        transform<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_xyz<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">10.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">20.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">30.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        visibility<span class="z-punctuation z-separator z-rust">:</span> Visibility <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            is_visible<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-language z-rust">true</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_children</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">parent</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">        parent
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">TableBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">ShopKeeperBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">PotionBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>To ensure visibility and transforms are propagated, make sure the whole hierarchy (root -> leaf) has these components:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">SpatialBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_children</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">parent</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">        parent
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">SpatialBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_children</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">parent</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">                parent<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">SpatialBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>If you know you don't need <a href=https://docs.rs/bevy/0.8.0/bevy/transform/components/struct.Transform.html><code>Transform</code></a> propagation (or your entity already has those components), you can instead use the new <a href=https://docs.rs/bevy/0.8.0/bevy/render/view/struct.VisibilityBundle.html><code>VisibilityBundle</code></a>, which only adds the components required for visibility propagation.<h2 id=built-in-shader-modularization>Built-in Shader Modularization <a class=anchor-link href=#built-in-shader-modularization>#</a></h2><div class=release-feature-authors>authors: Rob Swain (@superdump)</div><p>In <strong>Bevy 0.8</strong>, we've started modularizing our built-in shaders. Notably, this means you can now import and run the built-in PBR shader / lighting logic:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span>utils
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span>clustered_forward
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span>lighting
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span>shadows
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span>pbr_types
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span>pbr_functions
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span>fragment
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">fragment</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">in</span><span class="z-punctuation z-separator z-rust">:</span> FragmentInput</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> </span></span><span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">location</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    var pbr_input<span class="z-punctuation z-separator z-rust">:</span> PbrInput <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">pbr_input_new</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> set the base color to red
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    pbr_input<span class="z-punctuation z-accessor z-dot z-rust">.</span>material<span class="z-punctuation z-accessor z-dot z-rust">.</span>base_color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> set other PbrInput fields here <span class="z-punctuation z-definition z-comment z-rust">*/</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">return</span> <span class="z-support z-function z-rust">tone_mapping</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-function z-rust">pbr</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>pbr_input</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><p>We've also modularized our mesh and view binding shader logic. When paired with the <a href=https://bevy.org/news/bevy-0-8/#new-material-system>New Material System</a>, users can now reasonably write custom PBR materials without re-defining all of the PBR logic in their shaders. The new <a href=https://github.com/bevyengine/bevy/blob/v0.8.0/examples/shader/array_texture.rs>Array Texture Example</a> illustrates how to define a custom PBR shader material using these new APIs:<p><img alt="array texture" src=https://bevy.org/news/bevy-0-8/array_texture.png><p>We also plan on evolving the user experience here. Now that we've broken everything up and modularized it, we'll work on reducing the amount of boilerplate required to extend this logic (cutting down on imports, removing the need to set all PbrInput fields, etc).<h2 id=wgpu-0-13-new-wgsl-shader-syntax>wgpu 0.13: New WGSL Shader Syntax <a class=anchor-link href=#wgpu-0-13-new-wgsl-shader-syntax>#</a></h2><div class=release-feature-authors>authors: @mockersf, wgpu and naga contributors</div><p>We've updated to the latest and greatest wgpu version. wgpu 0.13 brings plenty of fixes and improvements, but the most visible change is the new more ergonomic WGSL "attribute" syntax:<p>Bindings now look like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> wgpu 0.12 (old)
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-support z-function z-rust">group</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-function z-rust">binding</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-generic z-rust">var<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>uniform<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> material<span class="z-punctuation z-separator z-rust">:</span> Material<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> wgpu 0.13 (new)
</span></span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">group</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">binding</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-generic z-rust">var<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>uniform<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> material<span class="z-punctuation z-separator z-rust">:</span> Material<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>Shader stage entry points and inputs now look like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> wgpu 0.12 (old)
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-support z-function z-rust">stage</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>vertex</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">vertex</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>[[location<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust">0</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>]] <span class="z-variable z-parameter z-rust">position</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">vec3<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, [[location<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust">1</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>]] <span class="z-variable z-parameter z-rust">normal</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">vec3<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> VertexOutput</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> wgpu 0.13 (new)
</span></span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span>vertex
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">vertex</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>@location<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust">0</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-variable z-parameter z-rust">position</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">vec3<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, @location<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust">1</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-variable z-parameter z-rust">normal</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">vec3<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> VertexOutput</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Much easier on the eyes! (and the fingers!)<h2 id=scene-bundle>Scene Bundle <a class=anchor-link href=#scene-bundle>#</a></h2><div class=release-feature-authors>authors: @mockersf</div><p>In previous versions of Bevy scenes were spawned like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_scene</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>some.gltf#Scene0<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>This worked, but it made it difficult to actually use the scene in practice. Repositioning the scene required either manually grabbing the scene's entity id and then repositioning it when it spawns, or creating a parent entity with the relevant transform components and "spawning the scene as a child". Additionally, it was challenging to extend scenes with new components.<p>In <strong>Bevy 0.8</strong>, we've added a <a href=https://docs.rs/bevy/0.8.0/bevy/scene/struct.SceneBundle.html><code>SceneBundle</code></a>, which brings scene spawning in line with our other entity construction APIs:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>SceneBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    scene<span class="z-punctuation z-separator z-rust">:</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>some.gltf#Scene0<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>When the scene loads, it will automatically spawn underneath the entity created by the <code>spawn_bundle</code> command. This makes it much easier to transform the scene and add new components at the "root":<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>SceneBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        scene<span class="z-punctuation z-separator z-rust">:</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>player.gltf#Scene0<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        transform<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_xyz<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">10.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">20.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">30.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Player<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h2 id=parallel-frustum-culling>Parallel Frustum Culling <a class=anchor-link href=#parallel-frustum-culling>#</a></h2><div class=release-feature-authors>authors: @aevyrie</div><p>Bevy uses <a href=/news/bevy-0-6/#visibility-and-frustum-culling>"frustum culling"</a> to skip drawing entities that are outside of the camera's view. In <strong>Bevy 0.8</strong>, frustum culling is now done in parallel. When culling thousands of entities, this yields significant performance improvements:<h3 id=frustum-culling-system-time-vs-number-of-entities-culled-lower-is-better>frustum culling system time vs number of entities culled (lower is better) <a class=anchor-link href=#frustum-culling-system-time-vs-number-of-entities-culled-lower-is-better>#</a></h3><p><img alt="parallel frustum culling" src=https://bevy.org/news/bevy-0-8/parallel_frustum_culling.png><p>Note that "parallel b" stand for "parallel batch size" (number of entities in each batch). We selected 1024 as our batch size in <strong>Bevy 0.8</strong>, as that performs better.<h2 id=automatic-mesh-tangent-generation>Automatic Mesh Tangent Generation <a class=anchor-link href=#automatic-mesh-tangent-generation>#</a></h2><div class=release-feature-authors>authors: Rob Swain (@superdump), @jakobhellermann, @DJMcNab</div><p>Vertex tangents are used in tandem with normal maps to give meshes more detailed normals when rendering them. Some imported meshes have normal maps, but don't have vertex tangents calculated. Bevy can now automatically generate vertex tangents for <a href=https://docs.rs/bevy/0.8.0/bevy/render/mesh/struct.Mesh.html><code>Meshes</code></a> that are missing them using the defacto industry-standard MikkTSpace library / algorithm (Godot, Unity, Unreal, and Blender all use this).<p>We have started maintaining <a href=https://github.com/bevyengine/bevy/tree/v0.8.0/crates/bevy_mikktspace>our own fork</a> of the <a href=https://github.com/gltf-rs/mikktspace>gltf-rs/mikktspace crate</a> so we can:<ul><li>update dependencies at the speed required for Bevy;<li><a href=https://github.com/bevyengine/bevy/pull/4932>start reining in the unsafe code</a>, as it currently uses unsafe Rust code auto-generated from the original <code>mikktspace.h</code> written in C.</ul><h2 id=default-to-linear-texture-filtering>Default to Linear Texture Filtering <a class=anchor-link href=#default-to-linear-texture-filtering>#</a></h2><div class=release-feature-authors>authors: @aevyrie, @cart</div><p>Images in Bevy now use linear texture filtering by default, which is more in line with the rest of the gamedev ecosystem (Unity and Godot both default to filtered textures).<p>This means that textures that require unfiltered pixels (such as "pixel art" sprites) must override this default, either per-image:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">image<span class="z-punctuation z-accessor z-dot z-rust">.</span>sampler_descriptor <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">ImageSampler<span class="z-punctuation z-accessor z-rust">::</span></span>nearest<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>or globally using the new <a href=https://docs.rs/bevy/0.8.0/bevy/render/texture/struct.ImageSettings.html><code>ImageSettings</code></a> resource:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">ImageSettings<span class="z-punctuation z-accessor z-rust">::</span></span>default_nearest<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>With that, we get crisp pixel art:<p><img alt=sprite src=https://bevy.org/news/bevy-0-8/sprite.png><h2 id=new-globaltransform-matrix-representation>New GlobalTransform Matrix Representation <a class=anchor-link href=#new-globaltransform-matrix-representation>#</a></h2><div class=release-feature-authors>authors: @HackerFoo</div><p>The internal representation of the <a href=https://docs.rs/bevy/0.8.0/bevy/transform/components/struct.GlobalTransform.html><code>GlobalTransform</code></a> component (representing the "world space" transform for an entity) has been changed from a "similarity" (translation <a href=https://docs.rs/bevy/0.8.0/bevy/math/struct.Vec3.html><code>Vec3</code></a> / rotation <a href=https://docs.rs/bevy/0.8.0/bevy/math/struct.Quat.html><code>Quat</code></a> / scale <a href=https://docs.rs/bevy/0.8.0/bevy/math/struct.Vec3.html><code>Vec3</code></a>) to an "affine 3D transform" (<a href=https://docs.rs/bevy/0.8.0/bevy/math/struct.Mat3A.html><code>Mat3A</code></a> and a <a href=https://docs.rs/bevy/0.8.0/bevy/math/struct.Vec3.html><code>Vec3</code></a> translation).<p>Notably, this allows for shear to be represented. Shear is a controversial topic. Engine and physics programmers tend to hate it. Artists tend to love it. Given that most artist tools and game engines support shear in their equivalent types, we believe it is important to provide this as an option.<h2 id=shadertype-derive>ShaderType derive <a class=anchor-link href=#shadertype-derive>#</a></h2><div class=release-feature-authors>authors: @teoxoy</div><p><strong>Bevy 0.8</strong> now uses the <a href=https://docs.rs/bevy/0.8.0/bevy/render/render_resource/trait.ShaderType.html><code>ShaderType</code></a> trait / derive (provided by the <a href=https://github.com/teoxoy/encase>encase</a> crate) to easily convert Rust data types to GPU-compatible shader data types.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ShaderType requires each field to implement ShaderType,
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> which Bevy's math types and Color type implement.
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">ShaderType</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">SpriteData</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">position</span><span class="z-punctuation z-separator z-type z-rust">:</span> Vec2,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">color</span><span class="z-punctuation z-separator z-type z-rust">:</span> Color,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>And on the WGSL shader side it looks like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">SpriteData</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">position</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">vec2<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">color</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">group</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">@</span><span class="z-support z-function z-rust">binding</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-generic z-rust">var<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>uniform<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> sprite_data<span class="z-punctuation z-separator z-rust">:</span> SpriteData<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>This trait can be used in the <a href=https://bevy.org/news/bevy-0-8/#new-material-system>new Material system</a> if you need to define custom shader uniform or buffer bindings.<p><a href=https://docs.rs/bevy/0.8.0/bevy/render/render_resource/trait.ShaderType.html><code>ShaderType</code></a> replaces the <code>AsStd140</code> and <code>AsStd430</code> traits / derives (provided by the <a href=https://github.com/LPGhatguy/crevice>crevice</a> crate) used in previous Bevy versions. This simplifies (and clarifies) the "how to transfer data to the GPU" story in Bevy, while also adding new features, such as support for unbounded Rust vecs (for storage buffers) and configurable dynamic offsets for uniform and storage buffers.<p>For example, Bevy's built-in lighting pipeline was adjusted to take advantage of this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">ShaderType</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">GpuPointLightsStorage</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">size</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">runtime</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">data</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>GpuPointLight<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=render-phase-sorting-optimization>Render Phase Sorting Optimization <a class=anchor-link href=#render-phase-sorting-optimization>#</a></h2><div class=release-feature-authors>authors: @james7132, Rob Swain (@superdump)</div><p>Bevy uses "render phases" to collect per-entity render logic for a render pass. These phases can be sorted to control draw order for a variety of reasons: back-to-front depth sorting for transparency correctness and front-to-back sorting for early fragment discarding during opaque rendering.<p>When possible, <strong>Bevy 0.8</strong> now uses "unstable sorts" (currently "radix sort"), which yields a significant performance improvement:<h3 id=many-cubes-stress-test-opaque-phase-sort-times-in-milliseconds-less-is-better>many_cubes stress test "opaque phase" sort times (in milliseconds, less is better) <a class=anchor-link href=#many-cubes-stress-test-opaque-phase-sort-times-in-milliseconds-less-is-better>#</a></h3><img alt="unstable sort" class=invertable src=unstable_sort.svg><h2 id=vertex-colors>Vertex Colors <a class=anchor-link href=#vertex-colors>#</a></h2><div class=release-feature-authors>authors: @HackerFoo, @thebracket</div><p>Bevy's 2D and 3D pipelines and <a href=https://docs.rs/bevy/0.8.0/bevy/pbr/trait.Material.html><code>Materials</code></a> now support vertex colors, if a given <a href=https://docs.rs/bevy/0.8.0/bevy/render/mesh/struct.Mesh.html><code>Mesh</code></a> provides them. The PBR <a href=https://docs.rs/bevy/0.8.0/bevy/pbr/struct.StandardMaterial.html><code>StandardMaterial</code></a> and the 2D <a href=https://docs.rs/bevy/0.8.0/bevy/sprite/struct.ColorMaterial.html><code>ColorMaterial</code></a> build on this and will use the vertex colors if they are set:<p><img alt="vertex colors" src=https://bevy.org/news/bevy-0-8/vertex_colors.png><h2 id=regular-polygon-and-circle-mesh-primitives>Regular Polygon and Circle Mesh Primitives <a class=anchor-link href=#regular-polygon-and-circle-mesh-primitives>#</a></h2><div class=release-feature-authors>authors: @rparrett</div><p>Bevy now has <a href=https://docs.rs/bevy/0.8.0/bevy/prelude/shape/struct.Circle.html><code>Circle</code></a> and <a href=https://docs.rs/bevy/0.8.0/bevy/prelude/shape/struct.RegularPolygon.html><code>RegularPolygon</code></a> <a href=https://docs.rs/bevy/0.8.0/bevy/render/mesh/struct.Mesh.html><code>Mesh</code></a> shapes:<p><img alt=shapes src=https://bevy.org/news/bevy-0-8/shapes.png><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> pentagon <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">RegularPolygon<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">10.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> handle <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Mesh<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>pentagon</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>ColorMesh2dBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    mesh<span class="z-punctuation z-separator z-rust">:</span> handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h2 id=scripting-and-modding-progress-untyped-ecs-apis>Scripting and Modding Progress: Untyped ECS APIs <a class=anchor-link href=#scripting-and-modding-progress-untyped-ecs-apis>#</a></h2><div class=release-feature-authors>authors: @jakobhellermann</div><p>Bevy officially only supports Rust as the "one true way to define app logic". We have <a href=https://github.com/bevyengine/bevy/issues/114#issuecomment-672397351>very good reasons for this</a> and that philosophy likely won't change any time soon. But we <em>do</em> want to provide the tools needed for the community to build 3rd party scripting / modding plugins for their languages of choice.<p>When we <a href=https://bevy.org/news/bevy-0-5/#bevy-ecs-v2>released Bevy ECS V2</a>, we intentionally built our internal ECS storage with these cases in mind. But we didn't expose public APIs that made it possible to interact with ECS data without normal Rust types.<p><strong>Bevy 0.8</strong> adds public "untyped" ECS APIs that enable retrieving <a href=https://bevy.org/news/bevy-0-8/#ecs-lifetimed-pointers>lifetimed pointers</a> to component and resource data using <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/component/struct.ComponentId.html><code>ComponentId</code></a> instead of actual Rust types.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> health_ptr<span class="z-punctuation z-separator z-rust">:</span> Ptr <span class="z-keyword z-operator z-assignment z-rust">=</span> world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>player</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get_by_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>heath_component_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>These, when combined with our reflection APIs, provide the tools needed to start building scripting support!<p><code>@jakobhellermann</code> has <a href=https://github.com/jakobhellermann/bevy_mod_js_scripting/blob/main/assets/scripts/debug.ts>started building their own JavaScript / TypeScript plugin for Bevy</a>. Note that:<ol><li>This plugin is still very much a work in progress and is not ready to be used in projects.<li>This is an unofficial community effort. Bevy will not be adding official JavaScript/TypeScript support.</ol><p>Here is a TypeScript snippet from their repository that queries Bevy ECS data from the script:<pre class="language-typescript z-code" data-lang=typescript><code class=language-typescript data-lang=typescript><span class="z-source z-ts"><span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">const</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-constant z-ts">ballQuery</span></span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">world</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-entity z-name z-function z-ts">query</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-objectliteral z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
</span></span></span><span class="z-source z-ts"><span class="z-meta z-var z-expr z-ts"><span class="z-meta z-objectliteral z-ts">    <span class="z-meta z-object z-member z-ts"><span class="z-meta z-object-literal z-key z-ts">components</span></span><span class="z-meta z-object z-member z-ts"><span class="z-meta z-object-literal z-key z-ts"><span class="z-punctuation z-separator z-key-value z-ts">:</span></span><span class="z-meta z-array z-literal z-ts"> <span class="z-meta z-brace z-square z-ts">[</span><span class="z-variable z-other z-readwrite z-ts">ballId</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-variable z-other z-readwrite z-ts">transformId</span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-variable z-other z-readwrite z-ts">velocityId</span><span class="z-meta z-brace z-square z-ts">]</span></span></span><span class="z-punctuation z-separator z-comma z-ts">,</span>
</span></span></span><span class="z-source z-ts"><span class="z-meta z-var z-expr z-ts"><span class="z-meta z-objectliteral z-ts"><span class="z-punctuation z-definition z-block z-ts">}</span></span><span class="z-meta z-brace z-round z-ts">)</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
</span><span class="z-source z-ts"><span class="z-keyword z-control z-loop z-ts">for</span> <span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">const</span> <span class="z-meta z-var-single-variable z-expr z-ts"><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-constant z-ts">item</span></span> </span></span><span class="z-keyword z-operator z-expression z-of z-ts">of</span> <span class="z-variable z-other z-readwrite z-ts">ballQuery</span><span class="z-meta z-brace z-round z-ts">)</span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts">    <span class="z-meta z-var z-expr z-ts"><span class="z-storage z-type z-ts">let</span> <span class="z-meta z-array-binding-pattern-variable z-ts"><span class="z-punctuation z-definition z-binding-pattern z-array z-ts">[</span><span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">ball</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">transform</span></span><span class="z-punctuation z-separator z-comma z-ts">,</span> <span class="z-meta z-definition z-variable z-ts"><span class="z-variable z-other z-readwrite z-ts">velocity</span></span><span class="z-punctuation z-definition z-binding-pattern z-array z-ts">]</span> </span><span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-variable z-other z-object z-ts">item</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-variable z-property z-dom z-ts">components</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts">    <span class="z-variable z-other z-readwrite z-ts">velocity</span> <span class="z-keyword z-operator z-assignment z-ts">=</span> <span class="z-variable z-other z-readwrite z-ts">velocity</span><span class="z-meta z-array z-literal z-ts"><span class="z-meta z-brace z-square z-ts">[</span><span class="z-constant z-numeric z-decimal z-ts">0</span><span class="z-meta z-brace z-square z-ts">]</span></span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts">
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts">    <span class="z-meta z-function-call z-ts"><span class="z-entity z-name z-function z-ts">info</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-function-call z-ts"><span class="z-variable z-other z-object z-ts">velocity</span><span class="z-punctuation z-accessor z-ts">.</span><span class="z-support z-function z-ts">toString</span></span><span class="z-meta z-brace z-round z-ts">(</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-meta z-brace z-round z-ts">)</span><span class="z-punctuation z-terminator z-statement z-ts">;</span>
</span></span><span class="z-source z-ts"><span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">}</span></span>
</span></code></pre><h2 id=query-intoiter>Query IntoIter <a class=anchor-link href=#query-intoiter>#</a></h2><div class=release-feature-authors>authors: @TheRawMeatball</div><p>Bevy ECS <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Query.html><code>Queries</code></a> now implement the <a href=https://doc.rust-lang.org/std/iter/trait.IntoIterator.html><code>IntoIterator</code></a> trait, which provides access to Rust's nicer iteration syntax:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> In previous Bevy versions, iter/iter_mut had to be called manually:
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">players</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> player <span class="z-keyword z-operator z-rust">in</span> players<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-storage z-modifier z-rust">mut</span> player <span class="z-keyword z-operator z-rust">in</span> players<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> In Bevy 0.8, you have the option to use this syntax:
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">players</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> player <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>players <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-storage z-modifier z-rust">mut</span> player <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> players <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=query-iter-many>Query::iter_many <a class=anchor-link href=#query-iter-many>#</a></h2><div class=release-feature-authors>authors: @devil-ira</div><p>It is now possible to pass a list of entities to a <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Query.html><code>Query</code></a> to iterate over using <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Query.html#method.iter_many><code>Query::iter_many</code></a>, which is significantly more ergonomic than calling <code>get(entity)</code> on each individual entity:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Component</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">BlueTeam</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">members</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Entity<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">blue_team</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>BlueTeam<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">players</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Blue Team Assemble!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> player <span class="z-keyword z-operator z-rust">in</span> players<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter_many</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>blue_team<span class="z-punctuation z-accessor z-dot z-rust">.</span>members</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>{}<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> player<span class="z-punctuation z-accessor z-dot z-rust">.</span>name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>    
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>There is also a <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Query.html#method.iter_many_mut><code>Query::iter_many_mut</code></a>, which provides similar functionality for mutable queries. But to ensure aliased mutability is not allowed, it does not implement iterator. Instead, use this pattern:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> iter <span class="z-keyword z-operator z-assignment z-rust">=</span> players<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter_many_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>blue_team<span class="z-punctuation z-accessor z-dot z-rust">.</span>members</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">while</span> <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> player</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> iter<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">fetch_next</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    player<span class="z-punctuation z-accessor z-dot z-rust">.</span>score <span class="z-keyword z-operator z-assignment z-rust">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><h2 id=convert-mutable-queries-to-read-only>Convert Mutable Queries to Read-only <a class=anchor-link href=#convert-mutable-queries-to-read-only>#</a></h2><div class=release-feature-authors>authors: @harudagondi</div><p>Mutable <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Query.html><code>Queries</code></a> can now be converted to their read-only versions, which makes it easier to build and use abstractions over queries:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">players</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-storage z-modifier z-rust">mut</span> player <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> players <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> mutate players here
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-function z-rust">log_players</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>players<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_readonly</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">log_players</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">players</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>Players<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> player <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>players <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>{player:?}<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=ecs-lifetimed-pointers>ECS "lifetimed pointers" <a class=anchor-link href=#ecs-lifetimed-pointers>#</a></h2><div class=release-feature-authors>authors: @TheRawMeatball, @BoxyUwU, @jakobhellermann</div><p>Bevy ECS has been refactored to use lifetimed, type-erased pointers instead of "raw pointers", which significantly improved the safety and legibility of our internals without compromising performance or flexibility.<p>From a high level, this enables us to "retain" the lifetime of World borrows throughout our internals while still using type-erased APIs to support scenarios like <a href=https://bevy.org/news/bevy-0-8/#scripting-and-modding-progress-untyped-ecs-apis>3rd party scripting languages</a>.<p>By retaining this lifetime, we can rely more on Rust's borrow checker to yell at us when we are doing something unsound. And, as it happens, this caught a number of soundness bugs!<h2 id=ecs-query-internals-refactors>ECS Query Internals Refactors <a class=anchor-link href=#ecs-query-internals-refactors>#</a></h2><div class=release-feature-authors>authors: @BoxyUwU</div><p><code>@BoxyUwU</code> has been hard at work refactoring our <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Query.html><code>Query</code></a> internals to be simpler and easier to read:<ul><li><code>ReadOnlyFetch</code> was replaced with <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/query/trait.ReadOnlyWorldQuery.html><code>ReadOnlyWorldQuery</code></a>, moving this trait constraint "up a level", making it easier to express in the type system.<li>"QF Fetch generics" were removed from <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Query.html><code>Query</code></a> and <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/query/struct.QueryState.html><code>QueryState</code></a> methods and types in favor of <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/query/trait.WorldQuery.html><code>WorldQuery</code></a> usage, making filters and normal fetches consistent in the type system and simpler to express.</ul><p>We have more changes in this vein planned for the next release. Bevy ECS internals are becoming considerably easier to understand!<h2 id=ecs-optimizations>ECS Optimizations <a class=anchor-link href=#ecs-optimizations>#</a></h2><div class=release-feature-authors>authors: @DJMcNab, @james7132</div><p>Bevy ECS had a number of optimizations this time around:<ul><li><code>@james7132</code> sped up entity moves between tables by reducing the number of copies conducted. For larger components, this is a huge win. The <code>many_cubes</code> stress test saw a ~16% speed boost in the <code>prepare_uniform_components</code> system, which relies heavily on commands / table moves.<li><code>@DJMcNab</code> removed no-op drop function calls for ECS storage internals, which reduced the dropping time for the <code>many_cubes</code> stress test from ~150μs to ~80μs.<li><code>@james7132</code> changed <a href=http://docs.rs/bevy/0.8.0/bevy/ecs/storage/struct.ComponentSparseSet.html><code>ComponentSparseSet</code></a> indices from <code>usize</code> to <code>u32</code>, which makes them use less space / making some operations more cache friendly. Sparse Set iteration became ~15% faster with this change.</ul><h2 id=label-optimizations>Label Optimizations <a class=anchor-link href=#label-optimizations>#</a></h2><div class=release-feature-authors>authors: @JoJoJet</div><p>Bevy relies on "labels" to identify things like systems, stages, and apps. This is useful for things like <a href=/news/bevy-0-5/#explicit-system-dependencies-and-system-labels>defining system dependencies</a>. The traits <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/schedule/trait.SystemLabel.html><code>SystemLabel</code></a>, <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/schedule/trait.StageLabel.html><code>StageLabel</code></a>, and <a href=https://docs.rs/bevy/0.8.0/bevy/app/derive.AppLabel.html><code>AppLabel</code></a> build on the same underlying "typed label" system. It enables developers to define custom labels while retaining type safety. Much better than using something like a string or an integer label!<p>In <strong>Bevy 0.8</strong> we've optimized the internal representation of labels by removing boxing / trait objects in favor of a single cheap-to-copy-and-compare "system label id" type.<p>This new representation sped up schedule construction by ~30%!<h3 id=time-to-prepare-and-compute-schedule-with-100-systems-in-milliseconds-less-is-better>time to prepare and compute schedule with 100 systems (in milliseconds, less is better) <a class=anchor-link href=#time-to-prepare-and-compute-schedule-with-100-systems-in-milliseconds-less-is-better>#</a></h3><img alt="label bench" class=invertable src=label_bench.svg><p>This change also removed a number of trait requirements from our label derives:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Old (Bevy 0.7)
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">SystemLabel<span class="z-punctuation z-separator z-rust">,</span> Debug<span class="z-punctuation z-separator z-rust">,</span> Clone<span class="z-punctuation z-separator z-rust">,</span> Copy<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Hash</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">MovementSystem</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Velocity<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Gravity<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> New (Bevy 0.8)
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">SystemLabel<span class="z-punctuation z-separator z-rust">,</span> Clone</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">MovementSystem</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Velocity<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Gravity<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=hierarchy-commands>Hierarchy Commands <a class=anchor-link href=#hierarchy-commands>#</a></h2><div class=release-feature-authors>authors: @james7132</div><p>Bevy's entity hierarchy system is based on two components: <a href=https://docs.rs/bevy/0.8.0/bevy/hierarchy/struct.Parent.html><code>Parent</code></a> (which points to an entity's parent) and <a href=https://docs.rs/bevy/0.8.0/bevy/hierarchy/struct.Children.html><code>Children</code></a> (which points to a list of the entity's children). This separation is important, as it makes it easy and cheap to query for "hierarchy roots":<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">roots</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Entity, <span class="z-meta z-generic z-rust">Without<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Parent<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>In past versions of Bevy, we built a complex system to "maintain" the integrity of the hierarchy. As <a href=https://docs.rs/bevy/0.8.0/bevy/hierarchy/struct.Parent.html><code>Parent</code></a> / <a href=https://docs.rs/bevy/0.8.0/bevy/hierarchy/struct.Children.html><code>Children</code></a> components were added/removed/changed for an entity, we would do our best to sync everything up across the hierarchy.<p>However this meant that for a given point in time, the hierarchy could be "out of sync" and incorrect.<p>Our solution to this problem is to remove the deferred "hierarchy maintenance system" in favor of making hierarchy changes "transactional". Hierarchy changes are now done via transactional <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Commands.html><code>Commands</code></a>, and directly modifying the component fields individually is no longer possible. This ensures that for a given point in time, the hierarchy is "correct".<p>For most Bevy developers this is a non-breaking change, as most hierarchies are already constructed using <code>with_children</code> commands:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">SpatialBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_children</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">parent</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">        parent<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>SpriteBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            texture<span class="z-punctuation z-separator z-rust">:</span> player_texture<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">        parent<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn_bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>SpriteBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            texture<span class="z-punctuation z-separator z-rust">:</span> hat_texture<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>However for logic that adds/removes child entities from parents at runtime, the following commands must be used:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> removes the given children from the parent
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>some_parent</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">remove_children</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>child1<span class="z-punctuation z-separator z-rust">,</span> child2<span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> pushes the given children to the "end" of the parent's Children list
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>some_parent</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">push_children</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>child3<span class="z-punctuation z-separator z-rust">,</span> child4<span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> inserts the given children into the parent's Children list at the given index 
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>some_parent</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_children</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>child5<span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>We've also added <a href=https://docs.rs/bevy/0.8.0/bevy/hierarchy/enum.HierarchyEvent.html><code>HierarchyEvent</code></a>, which makes it possible for developers to track changes in the hierarchy.<p>There are still a couple of small holes to close, but staying on the "happy path" is much easier now:<ul><li>removing only one of the components is possible (although heavily discouraged)<li>adding default values of only one of the components manually is still possible (although heavily discouraged)</ul><p>We're discussing ways to resolve this class of problem, such as <a href=https://github.com/bevyengine/bevy/issues/1481>Archetype Rules / Invariants</a>.<h2 id=bevy-reflection-improvements>Bevy Reflection Improvements <a class=anchor-link href=#bevy-reflection-improvements>#</a></h2><p>Bevy's "Rust reflection" system <code>bevy_reflect</code> is a core, foundational piece of Bevy's scene system. It provides a way to dynamically interact with Rust types at run-time without knowing their actual types. We've invested heavily in it this release to prepare for scripting support and scene system improvements.<p><a href=https://crates.io/crates/bevy_reflect><code>bevy_reflect</code></a> aims to be a "generic" Rust reflection system. It can be used without Bevy. We believe it fills a very real gap in the Rust ecosystem and we encourage the wider Rust community to use it (and contribute!).<h3 id=untyped-reflection>"Untyped" Reflection <a class=anchor-link href=#untyped-reflection>#</a></h3><div class=release-feature-authors>authors: @jakobhellermann</div><p>The <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> derives now automatically add a new <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/struct.ReflectFromPtr.html><code>ReflectFromPtr</code></a> struct to the <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/struct.TypeRegistry.html><code>TypeRegistry</code></a> for each reflected type. This enables using the new <a href=https://bevy.org/news/bevy-0-8/#scripting-and-modding-progress-untyped-ecs-apis>untyped ECS APIs</a> in combination with the reflection system. This helps enable things like 3rd party scripting and modding.<h3 id=default-trait-reflection>Default Trait Reflection <a class=anchor-link href=#default-trait-reflection>#</a></h3><div class=release-feature-authors>authors: @jakobhellermann</div><p>It is now possible to construct <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> types using their <a href=https://doc.rust-lang.org/std/default/trait.Default.html><code>Default</code></a> trait impl, provided they register it as part of the <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> derive:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect<span class="z-punctuation z-separator z-rust">,</span> Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyStruct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">foo</span><span class="z-punctuation z-separator z-type z-rust">:</span> String,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">bar</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">usize</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> registration <span class="z-keyword z-operator z-assignment z-rust">=</span> type_registry<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">TypeId<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">of<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyStruct<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> reflect_default <span class="z-keyword z-operator z-assignment z-rust">=</span> registration<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">data<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ReflectDefault<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This contains a MyStruct instance with default values
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> my_struct<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>dyn Reflect<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> reflect_default<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>This enables constructing components for entities without <em>any</em> compile time information, which is useful for dynamic scenarios like scripting and scenes.<h3 id=array-reflection>Array Reflection <a class=anchor-link href=#array-reflection>#</a></h3><div class=release-feature-authors>authors: @NathanSWard, @MrGVSV</div><p>Bevy's reflection system now supports reflecting Rust arrays, which can be interacted with in a type-erased manner using the new <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Array.html><code>Array</code></a> trait.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Sprite</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">position</span><span class="z-punctuation z-separator z-type z-rust">:</span> [<span class="z-storage z-type z-rust">f32</span>; 2],
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> sprite <span class="z-keyword z-operator z-assignment z-rust">=</span> Sprite <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    position<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">1</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">2</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> position <span class="z-keyword z-operator z-assignment z-rust">=</span> sprite<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">field</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>position<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-meta z-path z-rust">ReflectRef<span class="z-punctuation z-accessor z-rust">::</span></span>Array<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>array</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> position<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">reflect_ref</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> x <span class="z-keyword z-operator z-assignment z-rust">=</span> array<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>x<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">downcast_ref<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><h3 id=static-typeinfo>Static TypeInfo <a class=anchor-link href=#static-typeinfo>#</a></h3><div class=release-feature-authors>authors: @MrGVSV</div><p>The <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> trait provides dynamic access to a <em>specific instance</em> of a type, but some scenarios (such as deserializing) benefit from knowing type information <em>before</em> we have an instance of a type. This opens the doors to building a Reflect-based <code>serde</code> alternative (or at the very least, a serde-less Bevy Scene deserializer).<p><strong>Bevy 0.8</strong> adds the ability to retrieve <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/enum.TypeInfo.html><code>TypeInfo</code></a> for any type implementing <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Foo</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">a</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">b</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">usize</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> info <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Foo<span class="z-punctuation z-accessor z-rust">::</span></span>type_info<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-meta z-path z-rust">TypeInfo<span class="z-punctuation z-accessor z-rust">::</span></span>Struct<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>info</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> info <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">  <span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>info<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">is<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Foo<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">  <span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>info<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">any<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">type_name<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Foo<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">  <span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>info<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">field</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>a<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">is<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">  <span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>info<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">field_at</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">is<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">usize</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><p>Note that <code>type_info()</code> returns <code>&'static TypeInfo</code>: it will lazily allocate and store <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/enum.TypeInfo.html><code>TypeInfo</code></a> the first time it is requested, then reuse that on each subsequent request.<p>Generic types also support <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/enum.TypeInfo.html><code>TypeInfo</code></a>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">Foo</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">value</span><span class="z-punctuation z-separator z-type z-rust">:</span> T
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> info <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Foo<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>type_info<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-meta z-path z-rust">TypeInfo<span class="z-punctuation z-accessor z-rust">::</span></span>Struct<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>info</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> info <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">  <span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>info<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">field</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>value<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">is<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><h3 id=resource-reflection>Resource Reflection <a class=anchor-link href=#resource-reflection>#</a></h3><div class=release-feature-authors>authors: @Shatur</div><p>Bevy ECS resources can now be reflected:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Resource</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Scoreboard</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">points</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">usize</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>This registers a <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/reflect/struct.ReflectResource.html><code>ReflectResource</code></a> in the <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/struct.TypeRegistry.html><code>TypeRegistry</code></a> entry for the type, enabling type-erased read/write operations for the resource in an ECS <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/world/struct.World.html><code>World</code></a>.<h3 id=pretty-reflect-debug-formatting>Pretty Reflect Debug Formatting <a class=anchor-link href=#pretty-reflect-debug-formatting>#</a></h3><div class=release-feature-authors>authors: @MrGVSV</div><p>"Debug printing" <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> references now provides pretty / useful outputs.<p>Consider the following example:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Foo</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">a</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">b</span><span class="z-punctuation z-separator z-type z-rust">:</span> Bar,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Bar</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">x</span><span class="z-punctuation z-separator z-type z-rust">:</span> String,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">y</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">usize</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> foo <span class="z-keyword z-operator z-assignment z-rust">=</span> Foo <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    a<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">42.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    b<span class="z-punctuation z-separator z-rust">:</span> Bar <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        x<span class="z-punctuation z-separator z-rust">:</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>hello<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_string</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        y<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">123</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> foo_reflect<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>dyn Reflect <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>foo<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{:#?}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> foo_reflect<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>In previous versions of Bevy, this would have printed:<pre class="language-txt z-code" data-lang=txt><code class=language-txt data-lang=txt><span class="z-text z-plain">Reflect(my_crate::Foo)
</span></code></pre><p>In <strong>Bevy 0.8</strong>, it prints:<pre class="language-txt z-code" data-lang=txt><code class=language-txt data-lang=txt><span class="z-text z-plain">my_crate::Foo {
</span><span class="z-text z-plain">    a: 42.0,
</span><span class="z-text z-plain">    b: my_crate::Bar {
</span><span class="z-text z-plain">        x: "hello",
</span><span class="z-text z-plain">        y: 123,
</span><span class="z-text z-plain">    },
</span><span class="z-text z-plain">}
</span></code></pre><p>Much better!<h3 id=bevy-reflect-internal-refactors>bevy_reflect Internal Refactors <a class=anchor-link href=#bevy-reflect-internal-refactors>#</a></h3><div class=release-feature-authors>authors: @MrGVSV, @PROMETHIA-27, @jakobhellermann</div><p>Now that <code>bevy_reflect</code> is starting to get some serious investment and usage, we've invested time in reworking the internals to make them easier to maintain and extend:<ul><li><strong><a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> Derive Reorganization</strong>: the derive logic was broken up into smaller, more maintainable pieces. "Metadata structs" were added to collect and organize derive inputs. (<code>@MrGVSV</code>)<li><strong>The <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> trait is now safe to implement</strong>: Soundness no longer hinges on the implementor doing the right thing, thanks to some changes to the <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> interface. As a result, we were able to remove the <code>unsafe</code> keyword from the <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> trait. (<code>@PROMETHIA-27</code>)<li><code>Serialize</code> logic is now implemented using <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/struct.TypeRegistry.html><code>TypeRegistry</code></a> type data like other reflected trait logic, rather than being hard-coded into <a href=https://docs.rs/bevy/0.8.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> impls. (<code>@jakobhellermann</code>)</ul><h2 id=render-world-extract>Render World Extract <a class=anchor-link href=#render-world-extract>#</a></h2><div class=release-feature-authors>authors: @DJMcNab, @cart</div><p>Note: The renderer APIs discussed here are for developers of advanced custom rendering features and core Bevy renderer developers. If this seems verbose or the intent is confusing, don't worry!<p>Bevy's <a href=/news/bevy-0-6/#the-new-bevy-renderer>new renderer</a> "extracts" data needed for rendering from the "main" Bevy app, which enables parallel <a href=/news/bevy-0-6/#pipelined-rendering-extract-prepare-queue-render>pipelined rendering</a>. To facilitate this, in previous versions of Bevy we made the ECS <a href=https://docs.rs/bevy/0.8.0/bevy/render/enum.RenderStage.html#variant.Extract><code>RenderStage::Extract</code></a> "special" (and more than a little bit weird). Systems in that stage ran on the "main" app world, but applied the system <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Commands.html><code>Commands</code></a> to the "render" app world.<p>This accomplished the goal, but it:<ol><li><strong>Was confusing</strong>: render feature developers had to "know" that this stage behaved differently from the other "normal" ECS stages in the schedule. Implicitly, <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Commands.html><code>Commands</code></a> behaved differently and the ECS data access was "flipped". Using "normal" entity spawning APIs <em>would not work as expected</em> because the <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Commands.html><code>Commands</code></a> parameter internally still used the main app's Entities collection.<li><strong>Prevented parallelism</strong>: directly modifying existing "render world" resources required exclusive access to <code>ResMut&LTRenderWorld></code>, which prevented these systems from running in parallel. Making this access parallel required unnecessary allocations using <a href=https://docs.rs/bevy/0.8.0/bevy/ecs/system/struct.Commands.html><code>Commands</code></a>, which for "large" (or incrementally updated) extractions was inefficient.</ol><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Old: Bevy 0.7 (limited parallelism)
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">extract_score</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">score</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Score<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">render_world</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>RenderWorld<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-arithmetic z-rust">*</span>render_world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">resource_mut<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ExtractedScore<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">ExtractedScore<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>score</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Old: Bevy 0.7 (unnecessary allocations / prevents incremental updates)
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">extract_score</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands, <span class="z-variable z-parameter z-rust">score</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Score<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">ExtractedScore<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>score</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>In <strong>Bevy 0.8</strong>, we've made the extract stage "normal". It runs directly on the "render world", just like the other render app stages. To "extract" data from the main app world, just wrap the relevant system parameters in the new <a href=https://docs.rs/bevy/0.8.0/bevy/render/struct.Extract.html><code>Extract</code></a> type to retrieve that parameter from the main app world instead:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> New: Bevy 0.8 (parallel and not weird!)
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">extract_score</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">extracted_score</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ExtractedScore<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">score</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Extract<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Score<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-arithmetic z-rust">*</span>extracted_score <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">ExtractedScore<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>score</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>The extract system is now parallel, the data access is consistent with other renderer ECS stages, and the intent of the system is clearer.<h2 id=extractresource-trait-and-plugin>ExtractResource Trait and Plugin <a class=anchor-link href=#extractresource-trait-and-plugin>#</a></h2><div class=release-feature-authors>authors: Rob Swain (@superdump)</div><p>Some ECS resources have very simple extract logic:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">extract_cool_color</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">extracted_cool_color</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>CoolColor<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">cool_color</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Extract<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>CoolColor<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-arithmetic z-rust">*</span>extracted_cool_color <span class="z-keyword z-operator z-assignment z-rust">=</span> cool_color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Rather than force developers to write this out manually, <strong>Bevy 0.8</strong> now provides the <a href=https://docs.rs/bevy/0.8.0/bevy/render/extract_resource/trait.ExtractResource.html><code>ExtractResource</code></a> trait / derive:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">ExtractResource<span class="z-punctuation z-separator z-rust">,</span> Clone</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">CoolColor</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">color</span><span class="z-punctuation z-separator z-type z-rust">:</span> Color,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Then, just add the <a href=https://docs.rs/bevy/0.8.0/bevy/render/extract_resource/struct.ExtractResourcePlugin.html><code>ExtractResourcePlugin&LTCoolColor></code></a> to your <a href=https://docs.rs/bevy/0.8.0/bevy/app/struct.App.html><code>App</code></a> and the resource will be automatically extracted.<p><a href=https://docs.rs/bevy/0.8.0/bevy/render/extract_resource/trait.ExtractResource.html><code>ExtractResource</code></a> can also be implemented manually if you need custom logic (or the type needs to change):<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">ExtractResource <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">ExtractedCoolColor</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">Source</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> CoolColor<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">extract_resource</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">source</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>CoolColor</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-storage z-type z-rust">Self</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">Self</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            color<span class="z-punctuation z-separator z-rust">:</span> source<span class="z-punctuation z-accessor z-dot z-rust">.</span>color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">as_rgba_linear</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=taffy-migration-a-refreshed-ui-layout-library>Taffy migration: a refreshed UI layout library <a class=anchor-link href=#taffy-migration-a-refreshed-ui-layout-library>#</a></h2><div class=release-feature-authors>authors: @alice-i-cecile, @jkelleyrtp, @Weibye, @TimJentzsch, @colepoirier</div><p>Bevy's moved off the abandoned <a href=https://crates.io/crates/stretch><code>stretch</code></a> UI layout crate and onto its new community-maintained hard fork: <a href=https://crates.io/crates/taffy><code>taffy</code></a>. Together with the <a href=https://dioxuslabs.com/>Dioxus</a> team, we've dramatically cleaned up the code base, solved a critical performance issue with deep UI trees and freshened up the docs.<p>We're looking forward to its continued maintenance and development as the team continues to improve its performance, fix bugs, and add support for alternative layout paradigms.<h2 id=ecs-soundness-correctness-improvements>ECS Soundness / Correctness Improvements <a class=anchor-link href=#ecs-soundness-correctness-improvements>#</a></h2><div class=release-feature-authors>authors: @TheRawMeatball, @BoxyUwU, @SkiFire13, @jakobhellermann</div><p>Bevy ECS received a solid number of soundness and correctness bug fixes this release:<ul><li><strong>Removed <code>EntityMut::get_unchecked</code></strong>: The only way to soundly use this API is already encapsulated within <code>EntityMut::get</code>. Therefore there was no reason to keep this unsafe API around.<li><strong>Fixed unsoundness with some <code>Or</code>/<code>AnyOf</code>/<code>Option</code> component access</strong>: Previous Bevy versions allowed unsound versions of these queries. We now properly prevent those uses.<li><strong>Improve soundness of <code>CommandQueue</code></strong>: It is now sound to store Commands with padding or uninitialized bytes. A "use after move" case was also removed.<li><strong>Fix some memory leaks detected by Miri</strong>: Miri detected a case that leaks in our <code>BlobVec</code> drop impl. That is now fixed.<li><strong>Lint for missing SAFETY comments in <code>bevy_ecs</code></strong>: We now require safety comments for unsafe code blocks in <code>bevy_ecs</code>.</ul><p>As Bevy ECS matures, our bar for unsafe code blocks and soundness must also mature. Bevy ECS will probably never be 100% free of unsafe code blocks because we are modeling parallel data access that Rust cannot reason about without our help. But we are committed to both removing as much unsafe code as we can and improving the quality of the unsafe code that remains.<h2 id=android-progress-we-aren-t-there-yet-but-we-re-closer>Android Progress: We aren't there yet, but we're closer! <a class=anchor-link href=#android-progress-we-aren-t-there-yet-but-we-re-closer>#</a></h2><div class=release-feature-authors>authors: @mockersf</div><p>Bevy now "kind of" runs on Android again!<p>However Android support <em>is not</em> ready yet. There are issues with how we manage render contexts that must be resolved that sometimes break rendering at startup and <em>always</em> break rendering when apps are minimized. Audio also doesn't work yet.<p>Here is the <code>load_gltf</code> Bevy example running on my Pixel 6:<p><img alt=android src=https://bevy.org/news/bevy-0-8/android.png><p>That being said, this is an important step forward, as Bevy developers can now build, deploy, (and in some cases test) Bevy apps on Android!<p>If you are itching to test Bevy on mobile platforms, our <a href=https://github.com/bevyengine/bevy/blob/v0.8.0/examples/README.md#ios>iOS support</a> is much more polished. Bevy developers have already started <a href=https://noumenal.app/>publishing Bevy-based iOS apps to the Apple App Store</a>!<h2 id=ci-build-system-improvements>CI / Build System Improvements <a class=anchor-link href=#ci-build-system-improvements>#</a></h2><div class=release-feature-authors>authors: @mockersf, @NiklasEi</div><p>As always, Bevy's CI had plenty of improvements this cycle:<ul><li>Examples are now run in WASM when validating builds. Screenshots are taken and stored as part of the build outputs to ensure rendering works (<code>@mockersf</code>).<li>The Bevy examples are now run on a Windows VM once per day to ensure they aren't broken (<code>@mockersf</code>).<li>License files are now automatically added to all published crates (<code>@NiklasEi</code>).<li>There is now a workflow to automatically generate a PR with version number bumps for all Bevy crates (<code>@mockersf</code>).<li>To make the occasional nightly Rust breakage less disruptive, we've parameterized the nightly toolchain to make it easier to pin to a specific nightly. (<code>@mockersf</code>)</ul><h2 id=example-post-processing>Example: Post Processing <a class=anchor-link href=#example-post-processing>#</a></h2><div class=release-feature-authors>authors: @Vrixyz</div><p>We've added a new example that shows how to use the new <a href=https://bevy.org/news/bevy-0-8/#camera-driven-rendering>Camera Driven Rendering</a> and <a href=https://bevy.org/news/bevy-0-8/#new-material-system>Shader Materials</a> to build a "chromatic aberration" post processing effects using a full screen quad and "render to texture".<p><img alt="post processing" src=https://bevy.org/news/bevy-0-8/post_processing.png><p>We plan on building more formal post processing APIs in future releases, but this approach is relatively straightforward and opens up a lot of doors. Much simpler than extending the lower level <a href=https://docs.rs/bevy/0.8.0/bevy/render/render_graph/struct.RenderGraph.html><code>RenderGraph</code></a>!<p>Run it by cloning the Bevy repo and running <code>cargo run --release --example post_processing</code>.<h2 id=example-many-animated-foxes>Example: Many Animated Foxes <a class=anchor-link href=#example-many-animated-foxes>#</a></h2><div class=release-feature-authors>authors: @superdump</div><p>This is a fun stress test of our <a href=/news/bevy-0-7/#skeletal-animation>Skeletal Animation System</a> that renders many animated foxes walking around in a circle.<p><img alt="many foxes" src=https://bevy.org/news/bevy-0-8/many_foxes.png><p>Run it by cloning the Bevy repo and running <code>cargo run --release --example many_foxes</code>.<h2 id=wasm-example-build-tool>WASM Example Build Tool <a class=anchor-link href=#wasm-example-build-tool>#</a></h2><div class=release-feature-authors>authors: @mockersf</div><p>We've built a tool to make it easier to build and run Bevy's examples in your browser:<p>In the root of the Bevy repo, run the following command:<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> build-wasm-example<span class="z-keyword z-operator z-end-of-options z-shell"> --</span></span><span class="z-meta z-function-call z-arguments z-shell"> lighting</span>
</span></code></pre><p>This will run the <code>cargo build</code> and <code>wasm-bindgen</code> commands, and place the output in the <code>examples/wasm</code> folder. Run your favorite "local webserver" command there, such as <code>python3 -m http.server</code> and open that url in your browser!<h2 id=website-improved-examples-page>Website: Improved Examples Page <a class=anchor-link href=#website-improved-examples-page>#</a></h2><div class=release-feature-authors>authors: @doup, @ickk</div><p>The <a href=/examples/>Bevy WASM Examples</a> pages have been reworked:<ul><li>They now display loading bars while Bevy App content and assets load<li>The design / layout of the page is now much nicer</ul><p><img alt="examples page" src=https://bevy.org/news/bevy-0-8/examples_page.png><h2 id=bevy-org-changes>Bevy Org Changes <a class=anchor-link href=#bevy-org-changes>#</a></h2><p>As Bevy grows, we are constantly re-evaluating our development process to accommodate an ever-increasing volume of development. We're long past the point where I can make every decision and I've been slowly delegating responsibilities as my trust in the knowledge and experience of our community members grows.<p>This release cycle, there were two major changes to the Bevy Org:<ol><li>All existing developers with "delegated merge rights" (<code>@mockersf</code> and <code>@alice-i-cecile</code>) now have the title "maintainer".<li>Rob Swain (<code>@superdump</code>) is now a maintainer. You will probably recognize them from their work on Bevy's renderer. They've been a veritable force of nature, driving forward clustered forward rendering, directional and point light shadows, visibility / frustum culling, alpha blending, compressed GPU textures, and more. Rob has demonstrated deep understanding of rendering algorithms, Bevy internals, and Bevy project direction. I'm certainly looking forward to what they build next!</ol><p>Being a "maintainer" now works like this:<ol><li><strong>Maintainers now have no (hard) limits on the "area" of PRs they can merge</strong>. No more limits on "docs only", "rendering only", etc. It is now each maintainers' responsibility to evaluate their areas of comfort. This does increase risk to an extent, but I think it's an important step to allow maintainers to grow organically.<li><strong>Maintainers can merge "relatively uncontroversial" PRs with at least two community approvals</strong>. Maintainers will collectively decide and enforce what is uncontroversial. Controversial PRs should be labeled with the <code>S-Controversial</code> label. Note that "two community approvals" is the minimum requirement. Maintainers are responsible for ensuring the appropriate people have approved a PR.<li><strong>Maintainers can merge "completely trivial" PRs without two community approvals</strong>. Some examples of "completely trivial": typo fixes, removing unused dependencies or code, and small "API consistency" fixes.<li><strong>Controversial Decision Making on a Timer</strong>: For all controversial PRs (including RFCs), if two maintainers approve, the PR can be labeled with a <code>S-Ready-For-Final-Review</code> label. As soon as this label is added and I have been pinged, a clock starts. If I have not responded with actionable feedback, a "snooze button" / "we aren't ready for this yet", or a veto within a month and a half (45 days), maintainers are free to merge the PR. This gives me the ability to dictate project direction in areas where that is important while also empowering maintainers to move things forward in parallel when that makes sense. We will be calibrating this approach as we go to make sure we strike the right balance between progress, quality, and consistent vision.<li><strong>I still reserve the right to veto all code changes and make unilateral code changes</strong>. This includes reverting "controversial changes" merged via (4).</ol><p>We've used this process for most of the last cycle and I'm loving how it is working so far: more trust, more eyes on each decision, faster development velocity, no more trivial fixes sitting in limbo. I still get to enforce consistent vision when that matters, but the community is empowered to drive efforts forward.<h2 id=what-s-next>What's Next? <a class=anchor-link href=#what-s-next>#</a></h2><ul><li><strong>Post Processing</strong>: We have a lot of post processing work in the pipeline (some of it almost made it in to this release). The next release will make it easier to write post processing effects (thanks to intermediate HDR textures and a separate tonemapping step), and it will also include built-in effects like bloom and upscaling.<li><strong>Asset Preprocessing</strong>: We will be investing heavily in our asset pipeline, with a focus on: <ol><li>Pre-processing assets to do expensive work "during development time", so Bevy Apps can be deployed with assets that are prettier, smaller, and/or faster to load.<li>Enabling configuring assets with <code>.meta</code> files. For example, you could define a texture compression level, the filter it should use, or the target format.</ol><li><strong>Scene System Improvements</strong>: This release saw a lot of investment in Reflection. We can now build the next iteration of the scene system on top of it, with a nicer scene format, nested scenes, and improved workflows.<li><strong>Bevy UI Improvements</strong>: In preparation for the visual Bevy Editor, we will be improving the capabilities and user experince of Bevy UI.<li><strong>Bevy Jam #2</strong>: <a href=https://itch.io/jam/bevy-jam-1>Bevy Jam #1</a> was a massive success: 74 entries, 1,618 ratings, and lots of good community vibes. Now that <strong>Bevy 0.8</strong> is released, it's time to jam again! We'll release details on this soon. To stay in the loop, follow <a href=https://twitter.com/BevyEngine>@BevyEngine</a> on Twitter and join the <a href=https://discord.gg/bevy>Official Bevy Discord</a>.</ul><h2 id=support-bevy>Support Bevy <a class=anchor-link href=#support-bevy>#</a></h2><p>Sponsorships help make our work on Bevy sustainable. If you believe in Bevy's mission, consider sponsoring us ... every bit helps!<ul><li><strong><a href=https://github.com/sponsors/cart>Carter Anderson (@cart)</a></strong>: Full-time lead developer, project manager, and creator of Bevy. Focused on building out core engine systems, guiding project direction, and managing the community.<li><strong><a href=https://github.com/sponsors/alice-i-cecile>Alice Cecile (@alice-i-cecile)</a></strong>: Full-time technical project manager, mad scientist, and documentation lead. While she regularly leads expeditions into new domains, ECS will always be home base.<li><strong><a href=https://github.com/sponsors/mockersf>François Mockers (@mockersf)</a></strong>: CI whisperer. Making sure everything is running smoothly and improving Bevy one PR at a time.<li><strong>Rob Swain (@superdump)</strong>: Wielder of light. Turning data into shiny with massive parallelism. Currently hobby hacking so please donate to/sponsor the rest of the team. ❤️</ul><h2 id=contributors>Contributors <a class=anchor-link href=#contributors>#</a></h2><p>A huge thanks to the <strong>130 contributors</strong> that made this release (and associated docs) possible! In random order:<ul><li>@spooky-th-ghost<li>@afonsolage<li>@mlodato517<li>@ostwilkens<li>@mattwilkinsonn<li>@geckoxx<li>@SarthakSingh31<li>@zicklag<li>@teoxoy<li>@nsarlin<li>@HackerFoo<li>@elijaharita<li>@inact1v1ty<li>@bjorn3<li>@james-j-obrien<li>@Daniikk1012<li>@nihohit<li>@Ku95<li>@superdump<li>@dilyankostov<li>@SkiFire13<li>@edwardvear<li>@jakobhellermann<li>@KDecay<li>@TheRawMeatball<li>@fadhliazhari<li>@colepoirier<li>@brandon-reinhart<li>@Davier<li>@ManevilleF<li>@Bobox214<li>@RalfJung<li>@robtfm<li>@its-danny<li>@alice-i-cecile<li>@MonaMayrhofer<li>@yilinwei<li>@MrGVSV<li>@ickshonpe<li>@bzm3r<li>@nagisa<li>@fgiordana<li>@DJMcNab<li>@oliverpauffley<li>@64kramsystem<li>@alteous<li>@maniwani<li>@hoshino111<li>@Kanabenki<li>@JoJoJet<li>@x-52<li>@djeedai<li>@BoxyUwU<li>@MDeiml<li>@GarettCooper<li>@hymm<li>@mockersf<li>@nebkor<li>@2ne1ugly<li>@BGR360<li>@SUPERCILEX<li>@CGMossa<li>@infmagic2047<li>@CleanCut<li>@YoshieraHuang<li>@kornelski<li>@mdickopp<li>@SpecificProtagonist<li>@PROMETHIA-27<li>@eiei114<li>@Hoidigan<li>@Wcubed<li>@adsick<li>@nicopap<li>@siph<li>@C-BJ<li>@tamasfe<li>@object71<li>@LegNeato<li>@Elabajaba<li>@bytemuck<li>@AronDerenyi<li>@makspll<li>@cryscan<li>@NiklasEi<li>@grace125<li>@NathanSWard<li>@IceSentry<li>@Vrixyz<li>@Piturnah<li>@its-justus<li>@dataphract<li>@thomas992<li>@Olexorus<li>@ShadowCurse<li>@LoipesMas<li>@ImDanTheDev<li>@johanhelsing<li>@wrapperup<li>@james7132<li>@rebelroad-reinhart<li>@SuperSamus<li>@manokara<li>@Nilirad<li>@NeoRaider<li>@thebracket<li>@sarkahn<li>@MrPicklePinosaur<li>@Shatur<li>@themasch<li>@devil-ira<li>@fluunke<li>@DGriffin91<li>@aevyrie<li>@henryksloan<li>@bwasty<li>@MiniaczQ<li>@rparrett<li>@komadori<li>@ChristopherBiscardi<li>@dtaralla<li>@Sheepyhead<li>@TethysSvensson<li>@Neopallium<li>@FraserLee<li>@cart<li>@Obdzen<li>@oddfacade<li>@CAD97<li>@XBagon</ul><h2 id=full-change-log>Full Change Log <a class=anchor-link href=#full-change-log>#</a></h2><h3 id=added>Added <a class=anchor-link href=#added>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/4939>Callable PBR functions</a><li><a href=https://github.com/bevyengine/bevy/pull/4715>Spotlights</a><li><a href=https://github.com/bevyengine/bevy/pull/4745>Camera Driven Rendering</a><li><a href=https://github.com/bevyengine/bevy/pull/4898>Camera Driven Viewports</a><li><a href=https://github.com/bevyengine/bevy/pull/5310>Visibilty Inheritance, universal <code>ComputedVisibility</code>, and <code>RenderLayers</code> support</a><li><a href=https://github.com/bevyengine/bevy/pull/5053>Better Materials: <code>AsBindGroup</code> trait and derive, simpler <code>Material</code> trait</a><li><a href=https://github.com/bevyengine/bevy/pull/5364>Derive <code>AsBindGroup</code> Improvements: Better errors, more options, update examples</a><li><a href=https://github.com/bevyengine/bevy/pull/5312>Support <code>AsBindGroup</code> for 2d materials as well</a><li><a href=https://github.com/bevyengine/bevy/pull/4489>Parallel Frustum Culling</a><li><a href=https://github.com/bevyengine/bevy/pull/4197>Hierarchy commandization</a><li><a href=https://github.com/bevyengine/bevy/pull/3872>Generate vertex tangents using mikktspace</a><li><a href=https://github.com/bevyengine/bevy/pull/5344>Add a <code>SpatialBundle</code> with <code>Visibility</code> and <code>Transform</code> components</a><li><a href=https://github.com/bevyengine/bevy/pull/3730>Add <code>RegularPolygon</code> and <code>Circle</code> meshes</a><li><a href=https://github.com/bevyengine/bevy/pull/2424>Add a <code>SceneBundle</code> to spawn a scene</a><li><a href=https://github.com/bevyengine/bevy/pull/4833>Allow higher order systems</a><li><a href=https://github.com/bevyengine/bevy/pull/2250>Add global <code>init()</code> and <code>get()</code> accessors for all newtyped <code>TaskPools</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4901>Add reusable shader functions for transforming position/normal/tangent</a><li><a href=https://github.com/bevyengine/bevy/pull/4528>Add support for vertex colors</a><li><a href=https://github.com/bevyengine/bevy/pull/5254>Add support for removing attributes from meshes</a><li><a href=https://github.com/bevyengine/bevy/pull/4999>Add option to center a window</a><li><a href=https://github.com/bevyengine/bevy/pull/4904>Add <code>depth_load_op</code> configuration field to <code>Camera3d</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4948>Refactor <code>Camera</code> methods and add viewport rect</a><li><a href=https://github.com/bevyengine/bevy/pull/5249>Add <code>TextureFormat::R16Unorm</code> support for <code>Image</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5335>Add a <code>VisibilityBundle</code> with <code>Visibility</code> and <code>ComputedVisibility</code> components</a><li><a href=https://github.com/bevyengine/bevy/pull/3745>Add ExtractResourcePlugin</a><li><a href=https://github.com/bevyengine/bevy/pull/4101>Add depth_bias to SpecializedMaterial</a><li><a href=https://github.com/bevyengine/bevy/pull/4836>Added <code>offset</code> parameter to <code>TextureAtlas::from_grid_with_padding</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4048>Add the possibility to create custom 2d orthographic cameras</a><li><a href=https://github.com/bevyengine/bevy/pull/3927>bevy_render: Add <code>attributes</code> and <code>attributes_mut</code> methods to <code>Mesh</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5151>Add helper methods for rotating <code>Transform</code>s</a><li><a href=https://github.com/bevyengine/bevy/pull/5182>Enable wgpu profiling spans when using bevy's trace feature</a><li><a href=https://github.com/bevyengine/bevy/pull/4240>bevy_pbr: rework <code>extract_meshes</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5119>Add <code>inverse_projection</code> and <code>inverse_view_proj</code> fields to shader view uniform</a><li><a href=https://github.com/bevyengine/bevy/pull/5014>Add <code>ViewRangefinder3d</code> to reduce boilerplate when enqueuing standard 3D <code>PhaseItems</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4653>Create <code>bevy_ptr</code> standalone crate</a><li><a href=https://github.com/bevyengine/bevy/pull/4692>Add <code>IntoIterator</code> impls for <code>&Query</code> and <code>&mut Query</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4447>Add untyped APIs for <code>Components</code> and <code>Resources</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4104>Add infallible resource getters for <code>WorldCell</code></a><li><a href=https://github.com/bevyengine/bevy/pull/2539>Add <code>get_change_ticks</code> method to <code>EntityRef</code> and <code>EntityMut</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4211>Add comparison methods to <code>FilteredAccessSet</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4423>Add <code>Commands::new_from_entities</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4841>Add <code>QueryState::get_single_unchecked_manual</code> and its family members</a><li><a href=https://github.com/bevyengine/bevy/pull/4749>Add <code>ParallelCommands</code> system parameter</a><li><a href=https://github.com/bevyengine/bevy/pull/4879>Add methods for querying lists of entities</a><li><a href=https://github.com/bevyengine/bevy/pull/4942>Implement <code>FusedIterator</code> for eligible <code>Iterator</code> types</a><li><a href=https://github.com/bevyengine/bevy/pull/5066>Add <code>component_id()</code> function to <code>World</code> and <code>Components</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5136>Add ability to inspect entity's components</a><li><a href=https://github.com/bevyengine/bevy/pull/5198>Add a more helpful error to help debug panicking command on despawned entity</a><li><a href=https://github.com/bevyengine/bevy/pull/5148>Add <code>ExactSizeIterator</code> implementation for <code>QueryCombinatonIter</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5366>Added the <code>ignore_fields</code> attribute to the derive macros for <code>*Label</code> types</a><li><a href=https://github.com/bevyengine/bevy/pull/3863>Exact sized event iterators</a><li><a href=https://github.com/bevyengine/bevy/pull/4693>Add a <code>clear()</code> method to the <code>EventReader</code> that consumes the iterator</a><li><a href=https://github.com/bevyengine/bevy/pull/5355>Add helpers to send <code>Events</code> from <code>World</code></a><li><a href=https://github.com/bevyengine/bevy/pull/2123>Add file metadata to <code>AssetIo</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4703>Add missing audio/ogg file extensions: .oga, .spx</a><li><a href=https://github.com/bevyengine/bevy/pull/5106>Add <code>reload_asset</code> method to <code>AssetServer</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4618>Allow specifying chrome tracing file path using an environment variable</a><li><a href=https://github.com/bevyengine/bevy/pull/4628>Create a simple tool to compare traces between executions</a><li><a href=https://github.com/bevyengine/bevy/pull/4709>Add a tracing span for run criteria</a><li><a href=https://github.com/bevyengine/bevy/pull/4711>Add tracing spans for <code>Query::par_for_each</code> and its variants.</a><li><a href=https://github.com/bevyengine/bevy/pull/5011>Add a <code>release_all</code> method on <code>Input</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5015>Add a <code>reset_all</code> method on <code>Input</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4776>Add a helper tool to build examples for wasm</a><li><a href=https://github.com/bevyengine/bevy/pull/4475>bevy_reflect: add a <code>ReflectFromPtr</code> type to create <code>&dyn Reflect</code> from a <code>*const ()</code></a><li><a href=https://github.com/bevyengine/bevy/pull/3733>Add a <code>ReflectDefault</code> type and add <code>#[reflect(Default)]</code> to all component types that implement Default and are user facing</a><li><a href=https://github.com/bevyengine/bevy/pull/4540>Add a macro to implement <code>Reflect</code> for struct types and migrate glam types to use this for reflection</a><li><a href=https://github.com/bevyengine/bevy/pull/4701>bevy_reflect: reflect arrays</a><li><a href=https://github.com/bevyengine/bevy/pull/4790>bevy_reflect: reflect char</a><li><a href=https://github.com/bevyengine/bevy/pull/4226>bevy_reflect: add <code>GetTypeRegistration</code> impl for reflected tuples</a><li><a href=https://github.com/bevyengine/bevy/pull/5175>Add reflection for <code>Resources</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4350>bevy_reflect: add <code>as_reflect</code> and <code>as_reflect_mut</code> methods on <code>Reflect</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5201>Add an <code>apply_or_insert</code> method to <code>ReflectResource</code> and <code>ReflectComponent</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4108>bevy_reflect: <code>IntoIter</code> for <code>DynamicList</code> and <code>DynamicMap</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4217>bevy_reflect: Add <code>PartialEq</code> to reflected <code>f32</code>s and <code>f64</code>s</a><li><a href=https://github.com/bevyengine/bevy/pull/4484>Create mutable versions of <code>TypeRegistry</code> methods</a><li><a href=https://github.com/bevyengine/bevy/pull/4120>bevy_reflect: add a <code>get_boxed</code> method to <code>reflect_trait</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4140>bevy_reflect: add <code>#[reflect(default)]</code> attribute for <code>FromReflect</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4042>bevy_reflect: add statically available type info for reflected types</a><li><a href=https://github.com/bevyengine/bevy/pull/5275>Add an <code>assert_is_exclusive_system</code> function</a><li><a href=https://github.com/bevyengine/bevy/pull/5225>bevy_ui: add a multi-windows check for <code>Interaction</code> (we dont yet support multiple windows)</a></ul><h3 id=changed>Changed <a class=anchor-link href=#changed>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/4716>Depend on Taffy (a Dioxus and Bevy-maintained fork of Stretch)</a><li><a href=https://github.com/bevyengine/bevy/pull/3001>Use lifetimed, type erased pointers in bevy_ecs</a><li><a href=https://github.com/bevyengine/bevy/pull/4339>Migrate to <code>encase</code> from <code>crevice</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5168>Update <code>wgpu</code> to 0.13</a><li><a href=https://github.com/bevyengine/bevy/pull/4621>Pointerfication followup: Type safety and cleanup</a><li><a href=https://github.com/bevyengine/bevy/pull/4760>bevy_ptr works in no_std environments</a><li><a href=https://github.com/bevyengine/bevy/pull/4736>Fail to compile on 16-bit platforms</a><li><a href=https://github.com/bevyengine/bevy/pull/5343>Improve ergonomics and reduce boilerplate around creating text elements</a><li><a href=https://github.com/bevyengine/bevy/pull/5389>Don't cull <code>Ui</code> nodes that have a rotation</a><li><a href=https://github.com/bevyengine/bevy/pull/4314>Rename <code>ElementState</code> to <code>ButtonState</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4285>Move <code>Size</code> to <code>bevy_ui</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4276>Move <code>Rect</code> to <code>bevy_ui</code> and rename it to <code>UiRect</code></a><li><a href=https://github.com/bevyengine/bevy/pull/3592>Modify <code>FontAtlas</code> so that it can handle fonts of any size</a><li><a href=https://github.com/bevyengine/bevy/pull/5234>Rename <code>CameraUi</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4705>Remove <code>task_pool</code> parameter from <code>par_for_each(_mut)</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4792>Copy <code>TaskPool</code> resoures to sub-Apps</a><li><a href=https://github.com/bevyengine/bevy/pull/3575>Allow closing windows at runtime</a><li><a href=https://github.com/bevyengine/bevy/pull/5227>Move the configuration of the <code>WindowPlugin</code> to a <code>Resource</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4726>Optionally resize <code>Window</code> canvas element to fit parent element</a><li><a href=https://github.com/bevyengine/bevy/pull/5276>Change window resolution types from tuple to <code>Vec2</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4744>Update time by sending frame <code>Instant</code> through a channel</a><li><a href=https://github.com/bevyengine/bevy/pull/4187>Split time functionality into <code>bevy_time</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4867>Split mesh shader files to make the shaders more reusable</a><li><a href=https://github.com/bevyengine/bevy/pull/4824>Set <code>naga</code> capabilities corresponding to <code>wgpu</code> features</a><li><a href=https://github.com/bevyengine/bevy/pull/4938>Separate out PBR lighting, shadows, clustered forward, and utils from pbr.wgsl</a><li><a href=https://github.com/bevyengine/bevy/pull/5078>Separate PBR and tonemapping into 2 functions</a><li><a href=https://github.com/bevyengine/bevy/pull/4402>Make <code>RenderStage::Extract</code> run on the render world</a><li><a href=https://github.com/bevyengine/bevy/pull/4465>Change default <code>FilterMode</code> of <code>Image</code> to <code>Linear</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4569>bevy_render: Fix KTX2 UASTC format mapping</a><li><a href=https://github.com/bevyengine/bevy/pull/5222>Allow rendering meshes without UV coordinate data</a><li><a href=https://github.com/bevyengine/bevy/pull/5259>Validate vertex attribute format on insertion</a><li><a href=https://github.com/bevyengine/bevy/pull/4379>Use <code>Affine3A</code> for <code>GlobalTransform</code>to allow any affine transformation</a><li><a href=https://github.com/bevyengine/bevy/pull/4944>Recalculate entity <code>AABB</code>s when meshes change</a><li><a href=https://github.com/bevyengine/bevy/pull/4663>Change <code>check_visibility</code> to use thread-local queues instead of a channel</a><li><a href=https://github.com/bevyengine/bevy/pull/5049>Allow unbatched render phases to use unstable sorts</a><li><a href=https://github.com/bevyengine/bevy/pull/5271>Extract resources into their target location</a><li><a href=https://github.com/bevyengine/bevy/pull/5305>Enable loading textures of unlimited size</a><li><a href=https://github.com/bevyengine/bevy/pull/4643>Do not create nor execute render passes which have no <code>PhaseItems</code> to draw</a><li><a href=https://github.com/bevyengine/bevy/pull/4178>Filter material handles on extraction</a><li><a href=https://github.com/bevyengine/bevy/pull/4812>Apply vertex colors to <code>ColorMaterial</code> and <code>Mesh2D</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4508>Make <code>MaterialPipelineKey</code> fields public</a><li><a href=https://github.com/bevyengine/bevy/pull/4041>Simplified API to get NDC from camera and world position</a><li><a href=https://github.com/bevyengine/bevy/pull/4658>Set <code>alpha_mode</code> based on alpha value</a><li><a href=https://github.com/bevyengine/bevy/pull/4660>Make <code>Wireframe</code> respect <code>VisibleEntities</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4602>Use const <code>Vec2</code> in lights cluster and bounding box when possible</a><li><a href=https://github.com/bevyengine/bevy/pull/3906>Make accessors for mesh vertices and indices public</a><li><a href=https://github.com/bevyengine/bevy/pull/4816>Use <code>BufferUsages::UNIFORM</code> for <code>SkinnedMeshUniform</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4085>Place origin of <code>OrthographicProjection</code> at integer pixel when using <code>ScalingMode::WindowSize</code></a><li><a href=https://github.com/bevyengine/bevy/pull/3253>Make <code>ScalingMode</code> more flexible</a><li><a href=https://github.com/bevyengine/bevy/pull/5129>Move texture sample out of branch in <code>prepare_normal</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5212>Make the fields of the <code>Material2dKey</code> public</a><li><a href=https://github.com/bevyengine/bevy/pull/5255>Use collect to build mesh attributes</a><li><a href=https://github.com/bevyengine/bevy/pull/4626>Replace <code>ReadOnlyFetch</code> with <code>ReadOnlyWorldQuery</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4909>Replace <code>ComponentSparseSet</code>'s internals with a <code>Column</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5170>Remove QF generics from all <code>Query/State</code> methods and types</a><li><a href=https://github.com/bevyengine/bevy/pull/4499>Remove <code>.system()</code></a><li><a href=https://github.com/bevyengine/bevy/pull/3956>Make change lifespan deterministic and update docs</a><li><a href=https://github.com/bevyengine/bevy/pull/4650>Make derived <code>SystemParam</code> readonly if possible</a><li><a href=https://github.com/bevyengine/bevy/pull/4807>Merge <code>matches_archetype</code> and <code>matches_table</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5376>Allows conversion of mutable queries to immutable queries</a><li><a href=https://github.com/bevyengine/bevy/pull/4773>Skip <code>drop</code> when <code>needs_drop</code> is <code>false</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4723>Use u32 over usize for <code>ComponentSparseSet</code> indicies</a><li><a href=https://github.com/bevyengine/bevy/pull/4855>Remove redundant <code>ComponentId</code> in <code>Column</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5056>Directly copy moved <code>Table</code> components to the target location</a><li><a href=https://github.com/bevyengine/bevy/pull/4503><code>SystemSet::before</code> and <code>SystemSet::after</code> now take <code>AsSystemLabel</code></a><li><a href=https://github.com/bevyengine/bevy/pull/2774>Converted exclusive systems to parallel systems wherever possible</a><li><a href=https://github.com/bevyengine/bevy/pull/4244>Improve <code>size_hint</code> on <code>QueryIter</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4160>Improve debugging tools for change detection</a><li><a href=https://github.com/bevyengine/bevy/pull/3922>Make <code>RunOnce</code> a non-manual <code>System</code> impl</a><li><a href=https://github.com/bevyengine/bevy/pull/4677>Apply buffers in <code>ParamSet</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4725>Don't allocate for <code>ComponentDescriptors</code> of non-dynamic component types</a><li><a href=https://github.com/bevyengine/bevy/pull/5065>Mark mutable APIs under ECS storage as <code>pub(crate)</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5124>Update <code>ExactSizeIterator</code> impl to support archetypal filters (<code>With</code>, <code>Without</code>)</a><li><a href=https://github.com/bevyengine/bevy/pull/5167>Removed world cell from places where split multable access is not needed</a><li><a href=https://github.com/bevyengine/bevy/pull/5159>Add Events to <code>bevy_ecs</code> prelude</a><li><a href=https://github.com/bevyengine/bevy/pull/5231>Improve <code>EntityMap</code> API</a><li><a href=https://github.com/bevyengine/bevy/pull/5306>Implement <code>From&LTbool></code> for <code>ShouldRun</code>.</a><li><a href=https://github.com/bevyengine/bevy/pull/5286>Allow iter combinations on custom world queries</a><li><a href=https://github.com/bevyengine/bevy/pull/4957>Simplify design for <code>*Label</code>s</a><li><a href=https://github.com/bevyengine/bevy/pull/4713>Tidy up the code of events</a><li><a href=https://github.com/bevyengine/bevy/pull/5383>Rename <code>send_default_event</code> to <code>send_event_default</code> on world</a><li><a href=https://github.com/bevyengine/bevy/pull/5023>enable optional dependencies to stay optional</a><li><a href=https://github.com/bevyengine/bevy/pull/5171>Remove the dependency cycles</a><li><a href=https://github.com/bevyengine/bevy/pull/4794>Enforce type safe usage of Handle::get</a><li><a href=https://github.com/bevyengine/bevy/pull/5359>Export anyhow::error for custom asset loaders</a><li><a href=https://github.com/bevyengine/bevy/pull/5215>Update <code>shader_material_glsl</code> example to include texture sampling</a><li><a href=https://github.com/bevyengine/bevy/pull/5349>Remove unused code in game of life shader</a><li><a href=https://github.com/bevyengine/bevy/pull/5274>Make the contributor birbs bounce to the window height</a><li><a href=https://github.com/bevyengine/bevy/pull/5220>Improve Gamepad D-Pad Button Detection</a><li><a href=https://github.com/bevyengine/bevy/pull/5173>bevy_reflect: support map insertion</a><li><a href=https://github.com/bevyengine/bevy/pull/4218>bevy_reflect: improve debug formatting for reflected types</a><li><a href=https://github.com/bevyengine/bevy/pull/4712>bevy_reflect_derive: big refactor tidying up the code</a><li><a href=https://github.com/bevyengine/bevy/pull/4739>bevy_reflect: small refactor and default <code>Reflect</code> methods</a><li><a href=https://github.com/bevyengine/bevy/pull/5010>Make <code>Reflect</code> safe to implement</a><li><a href=https://github.com/bevyengine/bevy/pull/4782><code>bevy_reflect</code>: put <code>serialize</code> into external <code>ReflectSerialize</code> type</a><li><a href=https://github.com/bevyengine/bevy/pull/4780>Remove <code>Serialize</code> impl for <code>dyn Array</code> and friends</a><li><a href=https://github.com/bevyengine/bevy/pull/4118>Re-enable <code>#[derive(TypeUuid)]</code> for generics</a><li><a href=https://github.com/bevyengine/bevy/pull/4844>Move primitive type registration into <code>bevy_reflect</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5194>Implement reflection for more <code>glam</code> types</a><li><a href=https://github.com/bevyengine/bevy/pull/5210>Make <code>reflect_partial_eq</code> return more accurate results</a><li><a href=https://github.com/bevyengine/bevy/pull/4655>Make public macros more robust with <code>$crate</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4717>Ensure that the parent is always the expected entity</a><li><a href=https://github.com/bevyengine/bevy/pull/4708>Support returning data out of <code>with_children</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4547>Remove <code>EntityMut::get_unchecked</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4924>Diagnostics: meaningful error when graph node has wrong number of inputs</a><li><a href=https://github.com/bevyengine/bevy/pull/5339>Remove redundant <code>Size</code> import</a><li><a href=https://github.com/bevyengine/bevy/pull/5324>Export and register <code>Mat2</code>.</a><li><a href=https://github.com/bevyengine/bevy/pull/5291>Implement <code>Debug</code> for <code>Gamepads</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5269>Update codebase to use <code>IntoIterator</code> where possible.</a><li><a href=https://github.com/bevyengine/bevy/pull/5263>Rename <code>headless_defaults</code> example to <code>no_renderer</code> for clarity</a><li><a href=https://github.com/bevyengine/bevy/pull/5190>Remove dead <code>SystemLabelMarker</code> struct</a><li><a href=https://github.com/bevyengine/bevy/pull/5195>bevy_reflect: remove <code>glam</code> from a test which is active without the glam feature</a><li><a href=https://github.com/bevyengine/bevy/pull/5187>Disable vsync for stress tests</a><li><a href=https://github.com/bevyengine/bevy/pull/5174>Move <code>get_short_name</code> utility method from <code>bevy_reflect</code> into <code>bevy_utils</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5158>Derive <code>Default</code> for enums where possible</a><li><a href=https://github.com/bevyengine/bevy/pull/5048>Implement <code>Eq</code> and <code>PartialEq</code> for <code>MouseScrollUnit</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4668>Some cleanup for <code>bevy_ptr</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4189>Move float_ord from <code>bevy_core</code> to <code>bevy_utils</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4290>Remove unused <code>CountdownEvent</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4604>Some minor cleanups of asset_server</a><li><a href=https://github.com/bevyengine/bevy/pull/4599>Use <code>elapsed()</code> on <code>Instant</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4445>Make paused <code>Timers</code> update <code>just_finished</code> on tick</a><li><a href=https://github.com/bevyengine/bevy/pull/4580>bevy_utils: remove hardcoded log level limit</a><li><a href=https://github.com/bevyengine/bevy/pull/4469>Make <code>Time::update_with_instant</code> public for use in tests</a><li><a href=https://github.com/bevyengine/bevy/pull/4113>Do not impl Component for Task</a><li><a href=https://github.com/bevyengine/bevy/pull/4541>Remove nonexistent <code>WgpuResourceDiagnosticsPlugin</code></a><li><a href=https://github.com/bevyengine/bevy/pull/3624>Update ndk-glue requirement from 0.5 to 0.6</a><li><a href=https://github.com/bevyengine/bevy/pull/4786>Update tracing-tracy requirement from 0.8.0 to 0.9.0</a><li><a href=https://github.com/bevyengine/bevy/pull/4121>update image to 0.24</a><li><a href=https://github.com/bevyengine/bevy/pull/4789>update xshell to 0.2</a><li><a href=https://github.com/bevyengine/bevy/pull/4848>Update gilrs to v0.9</a><li><a href=https://github.com/bevyengine/bevy/pull/4991>bevy_log: upgrade to tracing-tracy 0.10.0</a><li><a href=https://github.com/bevyengine/bevy/pull/5035>update hashbrown to 0.12</a><li><a href=https://github.com/bevyengine/bevy/pull/5031>Update <code>clap</code> to 3.2 in tools using <code>value_parser</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5142>Updated <code>glam</code> to <code>0.21</code>.</a><li><a href=https://github.com/bevyengine/bevy/pull/5396>Update Notify Dependency</a></ul><h3 id=fixed>Fixed <a class=anchor-link href=#fixed>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/4494>bevy_ui: keep <code>Color</code> as 4 <code>f32</code>s</a><li><a href=https://github.com/bevyengine/bevy/pull/5130>Fix issues with bevy on android other than the rendering</a><li><a href=https://github.com/bevyengine/bevy/pull/4689>Update layout/style when scale factor changes too</a><li><a href=https://github.com/bevyengine/bevy/pull/3854>Fix <code>Overflow::Hidden</code> so it works correctly with <code>scale_factor_override</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4099>Fix <code>bevy_ui</code> touch input</a><li><a href=https://github.com/bevyengine/bevy/pull/5055>Fix physical viewport calculation</a><li><a href=https://github.com/bevyengine/bevy/pull/5299>Minimally fix the known unsoundness in <code>bevy_mikktspace</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4608>Make <code>Transform</code> propagation correct in the presence of updated children</a><li><a href=https://github.com/bevyengine/bevy/pull/4557><code>StorageBuffer</code> uses wrong type to calculate the buffer size.</a><li><a href=https://github.com/bevyengine/bevy/pull/4457>Fix confusing near and far fields in Camera</a><li><a href=https://github.com/bevyengine/bevy/pull/4527>Allow minimising window if using a 2d camera</a><li><a href=https://github.com/bevyengine/bevy/pull/5039>WGSL: use correct syntax for matrix access</a><li><a href=https://github.com/bevyengine/bevy/pull/5038>Gltf: do not import <code>IoTaskPool</code> in wasm</a><li><a href=https://github.com/bevyengine/bevy/pull/5095>Fix skinned mesh normal handling in mesh shader</a><li><a href=https://github.com/bevyengine/bevy/pull/5307>Don't panic when <code>StandardMaterial</code> <code>normal_map</code> hasn't loaded yet</a><li><a href=https://github.com/bevyengine/bevy/pull/5300>Fix incorrect rotation in <code>Transform::rotate_around</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5301>Fix <code>extract_wireframes</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4636>Fix type parameter name conflicts of <code>#[derive(Bundle)]</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5137>Remove unnecessary <code>unsafe impl</code> of <code>Send+Sync</code> for <code>ParallelSystemContainer</code></a><li><a href=https://github.com/bevyengine/bevy/pull/5348>Fix line material shader</a><li><a href=https://github.com/bevyengine/bevy/pull/2029>Fix <code>mouse_clicked</code> check for touch</a><li><a href=https://github.com/bevyengine/bevy/pull/4659>Fix unsoundness with <code>Or</code>/<code>AnyOf</code>/<code>Option</code> component access</a><li><a href=https://github.com/bevyengine/bevy/pull/4863>Improve soundness of <code>CommandQueue</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4959>Fix some memory leaks detected by miri</a><li><a href=https://github.com/bevyengine/bevy/pull/4076>Fix Android example icon</a><li><a href=https://github.com/bevyengine/bevy/pull/5009>Fix broken <code>WorldCell</code> test</a><li><a href=https://github.com/bevyengine/bevy/pull/4890>Bugfix <code>State::set</code> transition condition infinite loop</a><li><a href=https://github.com/bevyengine/bevy/pull/4900>Fix crash when using <code>Duration::MAX</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4871>Fix release builds: Move asserts under <code>#[cfg(debug_assertions)]</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4493>Fix frame count being a float</a><li><a href=https://github.com/bevyengine/bevy/pull/4714>Fix "unused" warnings when compiling with <code>render</code> feature but without <code>animation</code></a><li><a href=https://github.com/bevyengine/bevy/pull/2039>Fix re-adding a plugin to a <code>PluginGroup</code></a><li><a href=https://github.com/bevyengine/bevy/pull/4520>Fix torus normals</a><li><a href=https://github.com/bevyengine/bevy/pull/4949>Add <code>NO_STORAGE_BUFFERS_SUPPORT</code> shaderdef when needed</a></ul></div><script type=module>import{enable_image_compare as a}from"/components.js";document.addEventListener(`DOMContentLoaded`,(()=>{a()}))</script></div></div></div></main><footer class=print:hidden><div class=footer__social-container><a class=footer__social href=https://github.com/bevyengine/bevy title=GitHub> <img alt="GitHub logo" height=24 src=/assets/github-mark-white.svg width=24> </a><a class=footer__social href=https://discord.gg/bevy title=Discord> <img alt="Discord logo" height=24 src=/assets/discord.svg width=24> </a><a class=footer__social href=https://bsky.app/profile/bevy.org title=Bluesky> <img alt="Bluesky logo" height=24 src=/assets/bluesky.svg width=24> </a><a class=footer__social href=https://mastodon.social/@bevy title=Mastodon> <img alt="Mastodon logo" height=24 src=/assets/mastodon-logo-purple.svg width=24> </a><a class=footer__social href=https://www.reddit.com/r/bevy/ title=Reddit> <img alt="Reddit logo" height=24 src=/assets/reddit.svg width=24> </a><a class=footer__social href=https://itch.io/games/tag-bevy title=itch.io> <img alt="itch.io logo" height=24 src=/assets/itchio-textless.svg width=24> </a><a title="Bevy news feed" class=footer__social href=/atom.xml> <img alt="Bevy news feed" height=24 src=/assets/feed.svg width=24> </a></div></footer></div><script>const search_params=new URLSearchParams(window.location.search);if(search_params.has(`show_drafts`)||document.cookie.indexOf(`show_drafts`)>=0){let a=`show_drafts`;if(search_params.get(a)===`0`){document.cookie=`show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC`}else{document.cookie=`show_drafts=1;path=/`;document.body.classList.add(a)}}</script>