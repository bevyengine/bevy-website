<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Bevy 0.11" property=og:title><meta content=website property=og:type><meta content=https://bevy.org//news/bevy-0-11/ property=og:url><meta content=https://bevy.org/assets/bevy_logo_fill.png property=og:image><meta content="Bevy is a refreshingly simple data-driven game engine built in Rust. It is free and open-source forever!" property=og:description><link rel="shortcut icon" href=/assets/favicon.png type=image/png><link href=/site.css rel=stylesheet><link href=/atom.xml rel=alternate type=application/atom+xml><title>Bevy 0.11</title><script defer src=/highlight-intrapage-link.js></script><body><div class=layout><input class=hidden id=mobile-menu-state type=checkbox><header class="layout__header header print:hidden" data-mobile-menu-state-container><div class=header__content><label class=main-menu-backdrop for=mobile-menu-state></label><label class="header__hamburger button-square button-square--header" for=mobile-menu-state><img alt="Three horizontal lines stacked on top of eachother" height=16 src=/assets/icon-hamburger.svg width=20></label><div class=header__left-block><a class=header__logo href=/> <picture class=logo><img alt="Bevy logo" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><div class=header__message>News</div></div><input checked class=hidden id=page-menu-switch-state type=checkbox><nav class="header__menu main-menu main-menu--with-page-menu" data-page-menu-switch-state-container role=navigation><div class=main-menu__header><a href=/> <picture class=logo><img alt="Bevy Engine" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><label class="button-square button-square--header" for=mobile-menu-state><img alt="A saltire or x-cross" height=16 src=/assets/icon-times.svg width=16></label></div><div class=main-menu__page-menu-switch><label class=menu-switch for=page-menu-switch-state><div class="menu-switch__option menu-switch__option--main-menu">Main Menu</div> <div class="menu-switch__option menu-switch__option--page-menu">Post</div></label></div><div class=main-menu__content><div class=main-menu__page-menu><ul class=tree-menu data-highlight-intrapage-link><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#screen-space-ambient-occlusion>Screen Space Ambient Occlusion</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#temporal-anti-aliasing>Temporal Anti-Aliasing</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#robust-contrast-adaptive-sharpening>Robust Contrast Adaptive Sharpening</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#morph-targets>Morph Targets</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#parallax-mapping>Parallax Mapping</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#skyboxes>Skyboxes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#webgpu-support>WebGPU Support</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#improved-shader-imports>Improved Shader Imports</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#ui-node-borders>UI Node Borders</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#grid-ui-layout>Grid UI Layout</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#schedule-first-ecs-apis>Schedule-First ECS APIs</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#nested-system-tuples-and-chaining>Nested System Tuples and Chaining</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#gizmos>Gizmos</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#ecs-audio-apis>ECS Audio APIs</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#global-audio-volume>Global Audio Volume</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#resource-support-in-scenes>Resource Support in Scenes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#scene-filtering>Scene Filtering</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#default-font>Default Font</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#ui-texture-atlas-support>UI Texture Atlas Support</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#gamepad-rumble-api>Gamepad Rumble API</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#new-default-tonemapping-method>New Default Tonemapping Method</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#entityref-queries>EntityRef Queries</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#screenshot-api>Screenshot API</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#rendertarget-textureview>RenderTarget::TextureView</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#improved-text-wrapping>Improved Text Wrapping</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#faster-ui-render-batching>Faster UI Render Batching</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#better-reflect-proxies>Better Reflect Proxies</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#fromreflect-ergonomics>FromReflect Ergonomics</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#deref-derive-attribute>Deref Derive Attribute</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#simpler-rendergraph-construction>Simpler RenderGraph Construction</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#reflect-default-on-enum-variant-fields>#[reflect(default)] on Enum Variant Fields</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#delayed-asset-hot-reloading>Delayed Asset Hot Reloading</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#custom-gltf-vertex-attributes>Custom glTF Vertex Attributes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#stable-typepath>Stable TypePath</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#run-if-for-tuples-of-systems>run_if for Tuples of Systems</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#has-queries>Has Queries</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#derive-event>Derive Event</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#cubic-curve-example>Cubic Curve Example</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#size-constraints-example>Size Constraints Example</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#display-and-visibility-example>Display and Visibility Example</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#no-more-bors>No More Bors!</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#new-ci-jobs>New CI Jobs</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#what-s-next>What's Next?</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#support-bevy>Support Bevy</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#contributors>Contributors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#full-changelog>Full Changelog</a></div></ul></div><ul class=main-menu__menu><li class="main-menu__entry main-menu__entry--getting-started"><a class=main-menu__link href=/learn/quick-start/getting-started/> <span>Getting Started</span> </a><li class=main-menu__entry><a class=main-menu__link href=/learn/> <span>Learn</span> </a><li class=main-menu__entry><a class="main-menu__link main-menu__link--active" href=/news/> <span>News</span> </a><li class=main-menu__entry><a class=main-menu__link href=/community/> <span>Community</span> </a><li class=main-menu__entry><a class=main-menu__link href=/foundation/> <span>Foundation</span> </a><li class=main-menu__entry><a class=main-menu__link href=/assets/> <span>Assets</span> </a><li class=main-menu__entry><a class=main-menu__link href=/examples/> <span>Examples</span> </a></ul></div></nav><div class=header__cta-container><a class="button button--pink header__cta" href=/donate>Donate <img alt="heart icon" class=button__icon height=512 src=/assets/heart.svg width=512> </a><a class="header__cta header__cta--github" href=https://github.com/bevyengine/bevy> <img alt="GitHub repo" height=96 src=/assets/github-mark-white.svg width=98> </a></div></div></header><main class=layout__content><div class=container><div class="page-with-menu page-with-menu--news"><div class="page-with-menu__menu-wrapper print:hidden"><div class=page-with-menu__menu><ul class=tree-menu data-highlight-intrapage-link><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#screen-space-ambient-occlusion>Screen Space Ambient Occlusion</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#temporal-anti-aliasing>Temporal Anti-Aliasing</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#robust-contrast-adaptive-sharpening>Robust Contrast Adaptive Sharpening</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#morph-targets>Morph Targets</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#parallax-mapping>Parallax Mapping</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#skyboxes>Skyboxes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#webgpu-support>WebGPU Support</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#improved-shader-imports>Improved Shader Imports</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#ui-node-borders>UI Node Borders</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#grid-ui-layout>Grid UI Layout</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#schedule-first-ecs-apis>Schedule-First ECS APIs</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#nested-system-tuples-and-chaining>Nested System Tuples and Chaining</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#gizmos>Gizmos</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#ecs-audio-apis>ECS Audio APIs</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#global-audio-volume>Global Audio Volume</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#resource-support-in-scenes>Resource Support in Scenes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#scene-filtering>Scene Filtering</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#default-font>Default Font</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#ui-texture-atlas-support>UI Texture Atlas Support</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#gamepad-rumble-api>Gamepad Rumble API</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#new-default-tonemapping-method>New Default Tonemapping Method</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#entityref-queries>EntityRef Queries</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#screenshot-api>Screenshot API</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#rendertarget-textureview>RenderTarget::TextureView</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#improved-text-wrapping>Improved Text Wrapping</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#faster-ui-render-batching>Faster UI Render Batching</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#better-reflect-proxies>Better Reflect Proxies</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#fromreflect-ergonomics>FromReflect Ergonomics</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#deref-derive-attribute>Deref Derive Attribute</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#simpler-rendergraph-construction>Simpler RenderGraph Construction</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#reflect-default-on-enum-variant-fields>#[reflect(default)] on Enum Variant Fields</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#delayed-asset-hot-reloading>Delayed Asset Hot Reloading</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#custom-gltf-vertex-attributes>Custom glTF Vertex Attributes</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#stable-typepath>Stable TypePath</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#run-if-for-tuples-of-systems>run_if for Tuples of Systems</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#has-queries>Has Queries</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#derive-event>Derive Event</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#cubic-curve-example>Cubic Curve Example</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#size-constraints-example>Size Constraints Example</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#display-and-visibility-example>Display and Visibility Example</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#no-more-bors>No More Bors!</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#new-ci-jobs>New CI Jobs</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#what-s-next>What's Next?</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#support-bevy>Support Bevy</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#contributors>Contributors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=https://bevy.org/news/bevy-0-11/#full-changelog>Full Changelog</a></div></ul></div></div><div class=page-with-menu__content><h1 class=news-title>Bevy 0.11</h1><h2 class=news-subtitle>Posted on July 9, 2023 by Bevy Contributors</h2><div class="media-content news-content news-content__hero-image"><img alt="An image representing the article" style="aspect-ratio:auto 16/9" src=with_ssao.png></div><div class="media-content news-content"><p>Thanks to <strong>166</strong> contributors, <strong>522</strong> pull requests, community reviewers, and our <a href=/donate><strong>generous sponsors</strong></a>, we're happy to announce the <strong>Bevy 0.11</strong> release on <a href=https://crates.io/crates/bevy>crates.io</a>!<p>For those who don't know, Bevy is a refreshingly simple data-driven game engine built in Rust. You can check out our <a href=/learn/quick-start/introduction/>Quick Start Guide</a> to try it today. It's free and open source forever! You can grab the full <a href=https://github.com/bevyengine/bevy>source code</a> on GitHub. Check out <a href=https://bevy.org/assets>Bevy Assets</a> for a collection of community-developed plugins, games, and learning resources.<p>To update an existing Bevy App or Plugin to <strong>Bevy 0.11</strong>, check out our <a href=/learn/migration-guides/0.10-0.11/>0.10 to 0.11 Migration Guide</a>.<p>Since our last release a few months ago we've added a <em>ton</em> of new features, bug fixes, and quality of life tweaks, but here are some of the highlights:</p><span id=continue-reading></span><ul><li><strong>Screen Space Ambient Occlusion (SSAO)</strong>: Increase scene render quality by simulating occlusion of "indirect" diffuse light<li><strong>Temporal Anti-Aliasing (TAA)</strong>: A popular anti-aliasing technique that blends the current frame with past frames using motion vectors to smooth out artifacts<li><strong>Morph Targets</strong>: Animate vertex positions on meshes between predefined states. Great for things like character customization!<li><strong>Robust Contrast Adaptive Sharpening (RCAS)</strong>: Intelligently sharpens renders, which pairs nicely with TAA<li><strong>WebGPU Support</strong>: Bevy can now render on the web faster and with more features using the modern WebGPU web API<li><strong>Improved Shader Imports</strong>: Bevy shaders now support granular imports and other new features<li><strong>Parallax Mapping</strong>: Materials now support an optional depth map, giving flat surfaces a feel of depth through parallaxing the material's textures<li><strong>Schedule-First ECS APIs</strong>: A simpler and more ergonomic ECS system scheduling API<li><strong>Immediate Mode Gizmo Rendering</strong>: Easily and efficiently render 2D and 3D shapes for debugging and editor scenarios<li><strong>ECS Audio APIs</strong>: A more intuitive and idiomatic way to play back audio<li><strong>UI Borders</strong>: UI nodes can now have configurable borders!<li><strong>Grid UI Layout</strong>: Bevy UI now supports CSS-style grid layout<li><strong>UI Performance Improvements</strong>: The UI batching algorithm was changed, yielding significant performance wins</ul><h2 id=screen-space-ambient-occlusion>Screen Space Ambient Occlusion <a class=anchor-link href=#screen-space-ambient-occlusion>#</a></h2><div class=release-feature-authors>authors: @JMS55, @danchia, @superdump</div><p class=image-compare-instruction>Drag this image to compare<div class=image-compare-container style=aspect-ratio:1280/720><div data-title-a="Without SSAO" data-title-b="With SSAO" class=image-compare style=aspect-ratio:1280/720><img alt="The Sponza scene without SSAO, it contains a lot of persian-style velvet curtains, they look awkward." class=image-a src=no_ssao.png><img alt="The Sponza scene with SSAO, the curtains look much more realistic and sculptued. SSAO darkens the ridges between the folds, making the curtains much more interesting to look at" class=image-b src=with_ssao.png></div></div><p><strong>SSAO Only</strong> <img alt=ssao_only src=https://bevy.org/news/bevy-0-11/ssao_only.png><p>Bevy now supports Screen Space Ambient Occlusion (SSAO). While Bevy already supported shadows from direct lights (<a href=https://docs.rs/bevy/0.11.0/bevy/pbr/struct.DirectionalLight.html><code>DirectionalLight</code></a>, <a href=https://docs.rs/bevy/0.11.0/bevy/pbr/struct.PointLight.html><code>PointLight</code></a>, <a href=https://docs.rs/bevy/0.11.0/bevy/pbr/struct.SpotLight.html><code>SpotLight</code></a>) via shadow mapping, Bevy now supports shadows from <em>indirect</em> diffuse lighting such as <a href=https://docs.rs/bevy/0.11.0/bevy/pbr/struct.AmbientLight.html><code>AmbientLight</code></a> or <a href=https://docs.rs/bevy/0.11.0/bevy/pbr/struct.EnvironmentMapLight.html><code>EnvironmentMapLight</code></a>.<p>These shadows give scenes a more "grounded" feel, by estimating how much surrounding geometry blocks incoming light via the screen-space depth and normal prepasses. You can try it out in the new <a href=https://github.com/bevyengine/bevy/blob/v0.11.0/examples/3d/ssao.rs>SSAO example</a>.<p>Note that using SSAO with the newly added Temporal Anti-Aliasing leads to a <em>large</em> increase in quality and noise reduction.<p>Platform support is currently limited - Only Vulkan, DirectX12, and Metal are currently supported. WebGPU support will come at a later date. WebGL likely won't be supported because it doesn't have compute shaders.<p>Special thanks to Intel for their open source <a href=https://github.com/GameTechDev/XeGTAO>XeGTAO</a> project, which was a huge help in developing this feature.<h2 id=temporal-anti-aliasing>Temporal Anti-Aliasing <a class=anchor-link href=#temporal-anti-aliasing>#</a></h2><div class=release-feature-authors>authors: @JMS55, @DGriffin91</div><p class=image-compare-instruction>Drag this image to compare<div class=image-compare-container style=aspect-ratio:352/619;height:619px><div class=image-compare data-title-a=MSAA data-title-b=TAA style=aspect-ratio:352/619;--slider-value:39%><img alt="The Helmet model with MSAA, anti-aliasing. The edge between meshes are well aliased, but crenellation is noticeable on sharp shadows and specular highlights" class=image-a src=msaa_helmet.png><img alt="With TAA, little crenellation is visible, but it feels a bit 'smudgy'" class=image-b src=taa_helmet.png></div></div><p>Alongside MSAA and FXAA, Bevy now supports Temporal Anti-aliasing (TAA) as an anti-aliasing option.<p>TAA works by blending the newly rendered frame with past frames in order to smooth out aliasing artifacts in the image. TAA has become increasingly popular in the industry because of its ability to cover up so many rendering artifacts: it smooths out shadows (both global illumination and "casted" shadows), mesh edges, textures, and reduces specular aliasing of light on reflective surfaces. However because the "smoothing" effect is so apparent, some people prefer other methods.<p>Here's a quick rundown of the following advantages and disadvantages of each anti-aliasing method that Bevy supports:<ul><li><strong>Multi-Sample Antialiasing (MSAA)</strong> <ul><li>Does a good job at smoothing the edges of meshes (anti geometric aliasing). Does not help with specular aliasing. Performance cost scales with triangle count, and performs very poorly on scenes with many triangles</ul><li><strong>Fast Approximate Antialiasing (FXAA)</strong> <ul><li>Does a decent job of dealing with both geometric and specular aliasing. Very little performance cost in all scenes. Somewhat blurry and low quality results</ul><li><strong>Temporal Antialiasing (TAA)</strong> <ul><li>Does a very good job at dealing with both geometric and specular aliasing. Does a good job at dealing with temporal aliasing, where high-frequency details flicker over time or as you move the camera around or as things animate. Performance cost is moderate, and scales only with screen resolution. Chance of "ghosting" where meshes or lighting effects may leave trails behind them that fade over time. Although TAA helps with reducing temporal aliasing, it may also introduce additional temporal aliasing, especially on thin geometry or texture detail rendered at a distance. Requires 2 view's worth of additional GPU memory, as well as enabling the motion vector and depth prepasses. Requires accurate motion vector and depth prepasses, which complicates custom materials</ul></ul><p>TAA implementations are a series of tradeoffs and rely on heuristics that are easy to get wrong. In Bevy 0.11, TAA is marked as an experimental feature for the following reasons:<ul><li>TAA does not currently work with the following Bevy features: skinning, morph targets, and parallax mapping<li>TAA currently tends to soften the image a bit, which can be worked around via post-process sharpening<li>Our TAA heuristics are not currently user-configurable (and these heuristics are likely to change and evolve)</ul><p>We will continue to improve quality, compatibility, and performance in future releases. Please report any bugs you encounter!<p>You can compare all of our anti-aliasing methods in Bevy's improved <a href=https://github.com/bevyengine/bevy/blob/v0.11.0/examples/3d/anti_aliasing.rs>anti-aliasing example</a>.<h2 id=robust-contrast-adaptive-sharpening>Robust Contrast Adaptive Sharpening <a class=anchor-link href=#robust-contrast-adaptive-sharpening>#</a></h2><div class=release-feature-authors>authors: @Elabajaba</div><p>Effects like TAA and FXAA can cause the final render to become blurry. Sharpening post processing effects can help counteract that. In <strong>Bevy 0.11</strong> we've added a port of AMD's Robust Contrast Adaptive Sharpening (RCAS).<p class=image-compare-instruction>Drag this image to compare<div class=image-compare-container style=aspect-ratio:1280/720><div class=image-compare data-title-a=TAA data-title-b=TAA+RCAS style=aspect-ratio:1280/720;--slider-value:55%><img alt=TAA class=image-a src=rcas_off.png><img alt=TAA+RCAS class=image-b src=rcas_on.png></div></div><p>Notice that the texture on the leather part of the helmet is much crisper!<h2 id=morph-targets>Morph Targets <a class=anchor-link href=#morph-targets>#</a></h2><div class=release-feature-authors>authors: @nicopap, @cart</div><p>Bevy, since the 0.7 release, supports 3D animations.<p>But it only supported <em>skeletal</em> animations. Leaving on the sidewalk a common animation type called <em>morph targets</em> (aka blendshapes, aka keyshapes, and a slew of other names). This is the grandparent of all 3D character animation! <a href=https://en.wikipedia.org/wiki/Crash_Bandicoot_(video_game)#Gameplay>Crash Bandicoot</a>'s run cycle used morph targets.<p><video controls><source src=morph_targets_video.mp4 type=video/mp4></video><div class=release-feature-authors style=font-size:1rem>Character model by <a href=https://www.artstation.com/zambrah>Samuel Rosario</a> (© all rights reserved), used with permission. Modified by nicopap, using the <a href=https://studio.blender.org/characters/snow/v2/>Snow</a> character texture by Demeter Dzadik for Blender Studios <a href=https://creativecommons.org/licenses/by/4.0/>(🅯 CC-BY)</a>.</div><p>Nowadays, an animation artist will typically use a skeleton rig for wide moves and morph targets to clean up the detailed movements.<p>When it comes to game assets, however, the complex skeleton rigs used by artists for faces and hands are too heavy. Usually, the poses are "baked" into morph poses, and facial expression transitions are handled in the engine through morph targets.<p>Morph targets is a very simple animation method. Take a model, have a base vertex position, move the vertices around to create several poses:<div style=flex-direction:row;justify-content:space-evenly;display:flex><div style=flex-direction:column;align-items:center;width:20%;display:flex><p><b>Default</b></p><img alt="A wireframe rendering of a character's face with a neutral expression" src=default-pose-bw.png></div><div style=flex-direction:column;align-items:center;width:20%;display:flex><p><b>Frown</b></p><img alt="Wireframe rendering of a frowning character" src=frown-pose-bw.png></div><div style=flex-direction:column;align-items:center;width:20%;display:flex><p><b>Smirk</b></p><img alt="Wireframe rendering of a smirking character" src=smirk-pose-bw.png></div></div><p>Store those poses as a difference between the default base mesh and the variant pose, then, at runtime, <em>mix</em> each pose. Now that we have the difference with the base mesh, we can get the variant pose by simply adding to the base vertices positions.<p>That's it, the morph target shader looks like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">morph_vertex</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">vertex</span><span class="z-punctuation z-separator z-rust">:</span> Vertex</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>var i<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">u32</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> 0u<span class="z-punctuation z-terminator z-rust">;</span> i <span class="z-keyword z-operator z-comparison z-rust"><</span> <span class="z-support z-function z-rust">pose_count</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span> i<span class="z-keyword z-operator z-arithmetic z-rust">+</span><span class="z-keyword z-operator z-arithmetic z-rust">+</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> weight <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">weight_for_pose</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>i</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        vertex<span class="z-punctuation z-accessor z-dot z-rust">.</span>position <span class="z-keyword z-operator z-assignment z-rust">+=</span> weight <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-support z-function z-rust">get_difference</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>vertex<span class="z-punctuation z-accessor z-dot z-rust">.</span>index<span class="z-punctuation z-separator z-rust">,</span> position_offset<span class="z-punctuation z-separator z-rust">,</span> i</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        vertex<span class="z-punctuation z-accessor z-dot z-rust">.</span>normal <span class="z-keyword z-operator z-assignment z-rust">+=</span> weight <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-support z-function z-rust">get_difference</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>vertex<span class="z-punctuation z-accessor z-dot z-rust">.</span>index<span class="z-punctuation z-separator z-rust">,</span> normal_offset<span class="z-punctuation z-separator z-rust">,</span> i</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>In Bevy, we store the weights per pose in the <code>MorphWeights</code> component.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">set_weights_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">morph_weights</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> MorphWeights<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-storage z-modifier z-rust">mut</span> entity_weights <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> morph_weights <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> weights <span class="z-keyword z-operator z-assignment z-rust">=</span> entity_weights<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">weights_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        weights<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        weights<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">25</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Now assuming that we have two morph targets, (1) the frown pose, (2) the smirk pose:<div style=flex-direction:row;justify-content:space-evenly;display:flex><div style=flex-direction:column;align-items:center;width:12%;display:flex><p><b>[0.0, 0.0]</b><p style=margin:0;font-size:75%>default pose</p><img alt="Neutral face expression" src=morph_target_default-0.png></div><div style=flex-direction:column;align-items:center;width:12%;display:flex><p><b>[1.0, 0.0]</b><p style=margin:0;font-size:75%>frown only</p><img alt=Frowning src=morph_target_frown-0.png></div><div style=flex-direction:column;align-items:center;width:12%;display:flex><p><b>[0.0, 1.0]</b><p style=margin:0;font-size:75%>smirk only</p><img alt=Smirking src=morph_target_smirk.png></div><div style=flex-direction:column;align-items:center;width:12%;display:flex><p><b>[0.5, 0.0]</b><p style=margin:0;font-size:75%>half frown</p><img alt="Slightly frowning" src=morph_target_frown-half-0.png></div><div style=flex-direction:column;align-items:center;width:12%;display:flex><p><b>[1.0, 1.0]</b><p style=margin:0;font-size:75%>both at max</p><img alt="Making faces" src=morph_target_both-0.png></div><div style=flex-direction:column;align-items:center;width:12%;display:flex><p><b>[0.5, 0.25]</b><p style=margin:0;font-size:75%>bit of both</p><img alt="Slightly frowning/smirking" src=morph_target_smirk-quarter-frown-half-0.png></div></div><p>While conceptually simple, it requires communicating to the GPU a tremendous amount of data. Thousand of vertices, each 288 bits, several model variations, sometimes a hundred.<p>We store the vertex data as pixels in a 3D texture. This allows morph targets to not only run on WebGPU, but also on the WebGL2 wgpu backend.<p>This could be improved in a number of ways, but it is sufficient for an initial implementation.<p><video controls><source src=morph_target_smirk.mp4 type=video/mp4></video><h2 id=parallax-mapping>Parallax Mapping <a class=anchor-link href=#parallax-mapping>#</a></h2><div class=release-feature-authors>author: @nicopap</div><p>Bevy now supports parallax mapping and depth maps. Parallax mapping puts normal maps to shame when it comes to giving "illusion of depth" to a material. The top half of this video uses parallax mapping plus a normal map, whereas the bottom half only uses a normal map:<p><video controls loop><source alt="a rotating view of the earth, the top half of the screen uses parallax mapping, while the bottom half does not" src=earth-parallax.mp4 type=video/mp4></video><div class=release-feature-authors style=font-size:1rem>earth view, elevation & night view by NASA (public domain)</div><p>Notice how it is not merely the shading of pixels that changes, but their actual position on screen. The mountaintops hide mountain ridges behind themselves. High mountains move faster than coastal areas.<p>Parallax mapping moves pixels according to the perspective and depth on the surface of the geometry. Adding true 3D depth to flat surfaces.<p>All of that, without adding a single vertex to the geometry. The whole globe has exactly 648 vertices. Unlike a more primitive shader, such as displacement mapping, parallax mapping only requires an additional grayscale image, called the <code>depth_map</code>.<p>Games often use parallax mapping for cobblestones or brick walls, so let's make a brick wall in Bevy! First, we spawn a mesh:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>PbrBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    mesh<span class="z-punctuation z-separator z-rust">:</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">shape<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">Box<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">30.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">10.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    material<span class="z-punctuation z-separator z-rust">:</span> materials<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>StandardMaterial <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        base_color<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">WHITE</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p><img alt="A 3D desert scene with two flat white walls and a pebble path winding between them" src=https://bevy.org/news/bevy-0-11/parallax_mapping_none_mini.jpg><p>Of course, it's just a flat white box, we didn't add any texture. So let's add a normal map:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">normal_map_texture<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>assets<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>normal_map.png<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></code></pre><p><img alt="The same scene with normal maps" src=https://bevy.org/news/bevy-0-11/parallax_mapping_normals_mini.jpg><p>This is much better. The shading changes according to the light direction too! However, the specular highlights on the corner are overbearing, almost noisy.<p>Let's see how a depth map can help:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">depth_map<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>assets<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>depth_map.png<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></code></pre><p><img alt="The same scene with a depth texture" src=https://bevy.org/news/bevy-0-11/parallax_mapping_depth_mini.jpg><p>We eliminated the noise! There is also that sweet 3D feel reminiscent of 90's games pre-rendered cinematic sequences.<p>So what's going on, why does parallax mapping eliminate the ugly specular lights on the wall?<p>This is because parallax mapping insets the ridges between bricks, so that they are occluded by the bricks themselves.<p><img alt="Illustration of the previous paragraph" src=https://bevy.org/news/bevy-0-11/ridge-light-view-1.svg><p>Since normal maps do not "move" the shaded areas, merely shade them differently, we get those awkward specular highlights. With parallax mapping, they are gone.<p class=image-compare-instruction>Drag this image to compare<div class=image-compare-container style=aspect-ratio:1920/1080><div data-title-a="Normals Only" data-title-b="Parallax & Normal Mapping" class=image-compare style=aspect-ratio:1920/1080;--slider-value:40%><img alt="Normals Only" class=image-a src=parallax_mapping_normals.jpg><img alt="Parallax & Normal Mapping" class=image-b src=parallax_mapping_depth.jpg></div></div><p>Parallax mapping in Bevy is still very limited. The most painful aspect is that it is not a standard glTF feature, meaning that the depth texture needs to be programmatically added to materials if they came from a GLTF file.<p>Additionally, parallax mapping is incompatible with the temporal antialiasing shader, doesn't work well on curved surfaces, and doesn't affect object's silhouettes.<p>However, those are not fundamental limitations of parallax mapping, and may be fixed in the future.<h2 id=skyboxes>Skyboxes <a class=anchor-link href=#skyboxes>#</a></h2><div class=release-feature-authors>authors: @JMS55, @superdump</div><p><img alt=skybox src=https://bevy.org/news/bevy-0-11/skybox.png><p>Bevy now has built-in support for displaying an HDRI environment as your scene background.<p>Simply attach the new <a href=https://docs.rs/bevy/0.11.0/bevy/core_pipeline/struct.Skybox.html><code>Skybox</code></a> component to your <a href=https://docs.rs/bevy/0.11.0/bevy/render/camera/struct.Camera.html><code>Camera</code></a>. It pairs well with the existing <a href=https://docs.rs/bevy/0.11.0/bevy/pbr/struct.EnvironmentMapLight.html><code>EnvironmentMapLight</code></a>, which will use the environment map to light the scene.<p>We also plan to add support for built-in procedural skyboxes sometime in the future!<h2 id=webgpu-support>WebGPU Support <a class=anchor-link href=#webgpu-support>#</a></h2><div class=release-feature-authors>authors: @mockersf, many others throughout Bevy's development</div><p><img alt=webgpu src=https://bevy.org/news/bevy-0-11/webgpu.svg><p>Bevy now supports WebGPU rendering on the web (in addition to WebGL 2). WebGPU support is still rolling out, but if you have <a href=https://caniuse.com/webgpu>a supported web browser</a> you can explore our new <a href=/examples-webgpu>live WebGPU examples</a> page.<h3 id=what-is-webgpu>What is WebGPU? <a class=anchor-link href=#what-is-webgpu>#</a></h3><p>WebGPU is an <a href=https://github.com/gpuweb/gpuweb>exciting new web standard</a> for doing modern GPU graphics and compute. It takes inspiration from Vulkan, Direct3D 12, and Metal. In fact, it is generally implemented on top of these APIs under the hood. WebGPU gives us access to more GPU features than WebGL2 (such as compute shaders) and also has the potential to be much faster. It means that more of Bevy's native renderer features are now also available on the web. It also uses the new <a href=https://www.w3.org/TR/WGSL>WGSL shader language</a>. We're very happy with how WGSL has evolved over time and Bevy uses it internally for our shaders. We also added usability features like imports! But with Bevy you still have the option to use GLSL if you prefer.<h3 id=how-it-works>How it Works <a class=anchor-link href=#how-it-works>#</a></h3><p>Bevy is built on top of the <a href=https://github.com/gfx-rs/wgpu>wgpu</a> library, which is a modern low-level GPU API that can target pretty much every popular API: Vulkan, Direct3D 12, Metal, OpenGL, WebGL2, and WebGPU. The best backend API is selected for a given platform. It is a "native" rendering API, but it generally follows the WebGPU terminology and API design. Unlike WebGPU, it can provide direct access to the native APIs, which means Bevy <a href=/news/bevy-webgpu/#how-it-works>enjoys a "best of all worlds" situation</a>.<h3 id=webgpu-examples>WebGPU Examples <a class=anchor-link href=#webgpu-examples>#</a></h3><p>Click one of the images below to check out our live WebGPU examples (if your <a href=https://caniuse.com/webgpu>browser supports it</a>):<p><a href=/examples-webgpu><img alt="webgpu examples" src=https://bevy.org/news/bevy-0-11/webgpu_examples.png></a><h2 id=improved-shader-imports>Improved Shader Imports <a class=anchor-link href=#improved-shader-imports>#</a></h2><div class=release-feature-authors>authors: @robtfm</div><p>Bevy's rendering engine has a lot of great options and features. For example, the PBR <code>StandardMaterial</code> pipeline supports desktop/webgpu and webgl, 6 optional mesh attributes, 4 optional textures, and a plethora of optional features like fog, skinning, and alpha blending modes, with more coming in every release.<p>Many feature combos need specialized shader variants, and with over 3000 lines of shader code split over 50 files in total, the text-substitution-based shader processor was beginning to creak at the seams.<p>This release we've switched to using <a href=https://github.com/bevyengine/naga_oil>naga_oil</a>, which gives us a module-based shader framework. It compiles each file individually to naga's IR and then combines them into a final shader on demand. This doesn't have much visible impact yet, but it does give a few immediate benefits:<ul><li>The engine's shader code is easier to navigate and less magical. Previously there was only a single global scope, so items could be referenced even if they were only imported indirectly. This sometimes made it hard to locate the actual code behind the reference. Now items must be explicitly imported, so you can always tell where a variable or function originated just by looking at the current file: <br> <img alt="imported items" src=https://bevy.org/news/bevy-0-11/imported_items.png><li>Shaders now have codespan reporting, an error will point you to the shader file and line number, preventing a lot of hair pulling in complex shader codebases: <br> <img alt=codespan src=https://bevy.org/news/bevy-0-11/codespan.png><li>naga_oil's preprocessor supports a few more conditional directives, you can use <code>#else if</code> and <code>#else ifndef</code> as well as <code>#else ifdef</code> which was previously supported<li>Functions, variables and structs are all properly scoped so a shader file doesn't need to use globally unique names to avoid conflicts<li>Shader defs can be added to modules directly. For example, any shader that imports <code>bevy_pbr::mesh_view_types</code> now has <code>MAX_DIRECTIONAL_LIGHTS</code> automatically defined, there's no longer a need to remember to add it for every new pipeline that uses the module.</ul><p>The future possibilities are more exciting. Using naga IR opens the door to a bunch of nice features that we hope to bring in future releases:<ul><li>Automatic bind slot allocation will let plugins extend the core view bindgroup, which means self-contained plugins for features like lighting and shadow methods, common material properties, etc become viable. This will allow us to modularise the core pipelines to make growing the codebase - while keeping support for multiple targets - more sustainable<li>"Virtual" shader functions will allow user modifications to core functions (like lighting), and potentially lead to a template-style material system, where users can provide "hooks" that will be called at the right point in the pipeline<li>Language interop: mix and match glsl and wgsl, so bevy's pbr pipeline features could be accessed from your glsl material shader, or utils written for glsl could be used in wgsl code. We're hopeful that this can extend to spirv (and rust-gpu) as well<li>More cool stuff we haven't thought of yet. Being able to inspect and modify shaders at runtime is very powerful and makes a lot of things possible!</ul><h2 id=ui-node-borders>UI Node Borders <a class=anchor-link href=#ui-node-borders>#</a></h2><div class=release-feature-authors>authors: @ickshonpe</div><p>UI nodes now draws borders, whose color can be configured with the new <a href=https://docs.rs/bevy/0.11.0/bevy/ui/struct.BorderColor.html><code>BorderColor</code></a> component:<p><img alt=borders src=https://bevy.org/news/bevy-0-11/borders.png><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>ButtonBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    style<span class="z-punctuation z-separator z-rust">:</span> Style <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        border<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">UiRect<span class="z-punctuation z-accessor z-rust">::</span></span>all<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Val<span class="z-punctuation z-accessor z-rust">::</span></span>Px<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    border_color<span class="z-punctuation z-separator z-rust">:</span> BorderColor<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">9</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">9</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">9</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>Each side of the border is configurable:<p><img alt="border sides" src=https://bevy.org/news/bevy-0-11/border-sides.png><h2 id=grid-ui-layout>Grid UI Layout <a class=anchor-link href=#grid-ui-layout>#</a></h2><div class=release-feature-authors>authors: @nicoburns</div><p>In Bevy UI we wired up the new <code>grid</code> feature in the layout library we use (<a href=https://github.com/DioxusLabs/taffy>Taffy</a>). This enables CSS-style grid layouts:<p><img alt=grid src=https://bevy.org/news/bevy-0-11/grid.png><p>This can be configured on the <a href=https://docs.rs/bevy/0.11.0/bevy/ui/struct.Style.html><code>Style</code></a> component:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">Style <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> Use grid layout for this node
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    display<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Display<span class="z-punctuation z-accessor z-rust">::</span></span>Grid<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> Make the grid have a 1:1 aspect ratio
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> This means the width will adjust to match the height
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    aspect_ratio<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Add 24px of padding around the grid
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    padding<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">UiRect<span class="z-punctuation z-accessor z-rust">::</span></span>all<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Val<span class="z-punctuation z-accessor z-rust">::</span></span>Px<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">24.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> Set the grid to have 4 columns all with sizes minmax(0, 1fr)
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> This creates 4 exactly evenly sized columns
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    grid_template_columns<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">RepeatedGridTrack<span class="z-punctuation z-accessor z-rust">::</span></span>flex<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">4</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> Set the grid to have 4 rows all with sizes minmax(0, 1fr)
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> This creates 4 exactly evenly sized rows
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    grid_template_rows<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">RepeatedGridTrack<span class="z-punctuation z-accessor z-rust">::</span></span>flex<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">4</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> Set a 12px gap/gutter between rows and columns
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    row_gap<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Val<span class="z-punctuation z-accessor z-rust">::</span></span>Px<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">12.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    column_gap<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Val<span class="z-punctuation z-accessor z-rust">::</span></span>Px<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">12.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></code></pre><h2 id=schedule-first-ecs-apis>Schedule-First ECS APIs <a class=anchor-link href=#schedule-first-ecs-apis>#</a></h2><div class=release-feature-authors>authors: @cart</div><p>In <strong>Bevy 0.10</strong> we introduced <a href=/news/bevy-0-10/#ecs-schedule-v3>ECS Schedule V3</a>, which <em>vastly</em> improved the capabilities of Bevy ECS system scheduling: scheduler API ergonomics, system chaining, the ability to run exclusive systems and apply deferred system operations at any point in a schedule, a single unified schedule, configurable System Sets, run conditions, and a better State system.<p>However it pretty quickly became clear that the new system still had some areas to improve:<ul><li><strong>Base Sets were hard to understand and error prone</strong>: What <em>is</em> a Base Set? When do I use them? Why do they exist? Why is my ordering implicitly invalid due to incompatible Base Set ordering? Why do some schedules have a default Base Set while others don't? <a href=https://github.com/bevyengine/bevy/pull/8079#base-set-confusion>Base Sets were confusing!</a><li><strong>There were too many ways to schedule a System</strong>: We've accumulated too many scheduling APIs. As of Bevy <strong>0.10</strong>, we had <a href=https://github.com/bevyengine/bevy/pull/8079#unify-system-apis><em>SIX</em> different ways to add a system to the "startup" schedule</a>. Thats too many ways!<li><strong>Too much implicit configuration</strong>: There were both default Schedules and default Base Sets. In some cases systems had default schedules or default base sets, but in other cases they didn't! <a href=https://github.com/bevyengine/bevy/pull/8079#schedule-should-be-clear>A system's schedule and configuration should be explicit and clear</a>.<li><strong>Adding Systems to Schedules wasn't ergonomic</strong>: Things like <code>add_system(foo.in_schedule(CoreSchedule::Startup))</code> were not fun to type or read. We created special-case helpers, such as <code>add_startup_system(foo)</code>, but <a href=https://github.com/bevyengine/bevy/pull/8079#ergonomic-system-adding>this required more internal code, user-defined schedules didn't benefit from the special casing, and it completely hid the <code>CoreSchedule::Startup</code> symbol!</a>.</ul><h3 id=unraveling-the-complexity>Unraveling the Complexity <a class=anchor-link href=#unraveling-the-complexity>#</a></h3><p>If your eyes started to glaze over as you tried to wrap your head around this, or phrases like "implicitly added to the <code>CoreSet::Update</code> Base Set" filled you with dread ... don't worry. After <a href=https://github.com/bevyengine/bevy/pull/8079>a lot of careful thought</a> we've unraveled the complexity and built something clear and simple.<p>In <strong>Bevy 0.11</strong> the "scheduling mental model" is <em>much</em> simpler thanks to <strong>Schedule-First ECS APIs</strong>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Startup<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a<span class="z-punctuation z-separator z-rust">,</span> b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>c<span class="z-punctuation z-separator z-rust">,</span> d<span class="z-punctuation z-separator z-rust">,</span> e</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>FixedUpdate<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>f<span class="z-punctuation z-separator z-rust">,</span> g</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>PostUpdate<span class="z-punctuation z-separator z-rust">,</span> h</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>OnEnter<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>Menu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> enter_menu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>OnExit<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>Menu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> exit_menu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><ul><li><strong>There is <em>exactly</em> one way to schedule systems</strong> <ul><li>Call <code>add_systems</code>, state the schedule name, and specify one or more systems</ul><li><strong>Base Sets have been entirely removed in favor of Schedules, which have friendly / short names</strong> <ul><li>Ex: The <code>CoreSet::Update</code> Base Set has become <code>Update</code></ul><li><strong>There is no implicit or implied configuration</strong> <ul><li>Default Schedules and default Base Sets don't exist</ul><li><strong>The syntax is easy on the eyes and ergonomic</strong> <ul><li>Schedules are first so they "line up" when formatted</ul></ul><details><summary>To compare, expand this to see what it used to be!</summary> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Startup system variant 1.
</span></span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Has an implied default StartupSet::Startup base set
</span></span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Has an implied CoreSchedule::Startup schedule
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_startup_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a<span class="z-punctuation z-separator z-rust">,</span> b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Startup system variant 2.
</span></span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Has an implied default StartupSet::Startup base set
</span></span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Has an implied CoreSchedule::Startup schedule
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a<span class="z-punctuation z-separator z-rust">,</span> b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">on_startup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Startup system variant 3.
</span></span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Has an implied default StartupSet::Startup base set
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a<span class="z-punctuation z-separator z-rust">,</span> b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">CoreSchedule<span class="z-punctuation z-accessor z-rust">::</span></span>Startup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Update system variant 1.
</span></span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `CoreSet::Update` base set and `CoreSchedule::Main` are implied
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>c</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Update system variant 2 (note the add_system vs add_systems difference)
</span></span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `CoreSet::Update` base set and `CoreSchedule::Main` are implied
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>d<span class="z-punctuation z-separator z-rust">,</span> e</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> No implied default base set because CoreSchedule::FixedUpdate doesn't have one
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>f<span class="z-punctuation z-separator z-rust">,</span> g</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">CoreSchedule<span class="z-punctuation z-accessor z-rust">::</span></span>FixedUpdate</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `CoreSchedule::Main` is implied, in_base_set overrides the default CoreSet::Update set
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>h<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_base_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">CoreSet<span class="z-punctuation z-accessor z-rust">::</span></span>PostUpdate</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This has no implied default base set
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>enter_menu<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>OnEnter<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>Menu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This has no implied default base set
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>exit_menu<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>OnExit<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppState<span class="z-punctuation z-accessor z-rust">::</span></span>Menu</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre></details><p>Note that normal "system sets" still exist! You can still use sets to organize and order your systems:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>walk<span class="z-punctuation z-separator z-rust">,</span> jump</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Movement</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    collide<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">after</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Movement</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>The <code>configure_set</code> API has also been adjusted for parity:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Bevy 0.10
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">configure_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Foo<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">after</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Bar</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>PostUpdate</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Bevy 0.11
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">configure_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>PostUpdate<span class="z-punctuation z-separator z-rust">,</span> Foo<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">after</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Bar</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><h2 id=nested-system-tuples-and-chaining>Nested System Tuples and Chaining <a class=anchor-link href=#nested-system-tuples-and-chaining>#</a></h2><div class=release-feature-authors>authors: @cart</div><p>It is now possible to infinitely nest tuples of systems in a <code>.add_systems</code> call!<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>b<span class="z-punctuation z-separator z-rust">,</span> c<span class="z-punctuation z-separator z-rust">,</span> d<span class="z-punctuation z-separator z-rust">,</span> e</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> f</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>g<span class="z-punctuation z-separator z-rust">,</span> h</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    i
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>At first glance, this might not seem very useful. But in combination with per-tuple configuration, it allows you to easily and cleanly express schedules:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>attack<span class="z-punctuation z-separator z-rust">,</span> defend</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Combat</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">before</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>check_health</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    check_health<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>handle_death<span class="z-punctuation z-separator z-rust">,</span> respawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">after</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>check_health</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p><code>.chain()</code> has also been adapted to support arbitrary nesting! The ordering in the example above could be rephrased like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>attack<span class="z-punctuation z-separator z-rust">,</span> defend</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Combat</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        check_health<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>handle_death<span class="z-punctuation z-separator z-rust">,</span> respawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">chain</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>This will run <code>attack</code> and <code>defend</code> first (in parallel), then <code>check_health</code>, then <code>handle_death</code> and <code>respawn</code> (in parallel).<p>This allows for powerful and expressive "graph-like" ordering expressions:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>b<span class="z-punctuation z-separator z-rust">,</span> c<span class="z-punctuation z-separator z-rust">,</span> d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">chain</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>e<span class="z-punctuation z-separator z-rust">,</span> f</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">chain</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>This will run <code>a</code> in parallel with <code>b->c->d</code>, then after those have finished running it will run <code>e</code> and <code>f</code> in parallel.<h2 id=gizmos>Gizmos <a class=anchor-link href=#gizmos>#</a></h2><div class=release-feature-authors>authors: @devil-ira, @mtsr, @aevyrie, @jannik4, @lassade, @The5-1, @Toqozz, @nicopap</div><p>It is often helpful to be able to draw simple shapes and lines in 2D and 3D for things like editor controls, and debug views. Game development is a very "spatial" thing and being able to quickly draw shapes is the visual equivalent of "print line debugging". It helps answer questions like "is this ray casting in the right direction?" and "is this collider big enough?"<p>In <strong>Bevy 0.11</strong> we've added an "immediate mode" <a href=https://docs.rs/bevy/0.11.0/bevy/gizmos/gizmos/struct.Gizmos.html><code>Gizmos</code></a> drawing API that makes these things easy and efficient. In 2D and 3D you can draw lines, rects, circles, arcs, spheres, cubes, line strips, and more!<p><strong>2D Gizmos</strong> <img alt="2d gizmos" src=https://bevy.org/news/bevy-0-11/2d_gizmos.png> <strong>3D Gizmos</strong> <img alt="3d gizmos" src=https://bevy.org/news/bevy-0-11/3d_gizmos.png><p>From any system you can spawn shapes into existence (for both 2D and 3D):<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">gizmos</span><span class="z-punctuation z-separator z-rust">:</span> Gizmos</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 2D
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">line_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">10.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">RED</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">circle_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">40.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLUE</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 3D
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">circle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLACK</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">ray</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">5.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLUE</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">sphere</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">IDENTITY</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">2</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLACK</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Because the API is "immediate mode", gizmos will only be drawn on frames where they are "queued up", which means you don't need to worry about cleaning up gizmo state!<p>Gizmos are drawn in batches, which means they are very cheap. You can have hundreds of thousands of them!<h2 id=ecs-audio-apis>ECS Audio APIs <a class=anchor-link href=#ecs-audio-apis>#</a></h2><div class=release-feature-authors>authors: @inodentry</div><p>Bevy's audio playback APIs have been reworked to integrate more cleanly with Bevy's ECS.<p>In previous versions of Bevy you would play back audio like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Resource</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyMusic</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">sink</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>AudioSink<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">play_music</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">asset_server</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>AssetServer<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">audio</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Audio<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">audio_sinks</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>AudioSink<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> weak_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> audio<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">play</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>my_music.ogg<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> strong_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> audio_sinks<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>weak_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyMusic <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        sink<span class="z-punctuation z-separator z-rust">:</span> strong_handle<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>That is a lot of boilerplate just to play a sound! Then to adjust playback you would access the <a href=https://docs.rs/bevy/0.11.0/bevy/audio/struct.AudioSink.html><code>AudioSink</code></a> like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">pause_music</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">my_music</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyMusic<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">audio_sinks</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>AudioSink<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>sink</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> audio_sinks<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>my_music<span class="z-punctuation z-accessor z-dot z-rust">.</span>sink</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        sink<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pause</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Treating audio playback as a resource created a number of problems and notably didn't play well with things like Bevy Scenes. In <strong>Bevy 0.11</strong>, audio playback is represented as an <a href=https://docs.rs/bevy/0.11.0/bevy/ecs/entity/struct.Entity.html><code>Entity</code></a> with <a href=https://docs.rs/bevy/0.11.0/bevy/audio/type.AudioBundle.html><code>AudioBundle</code></a> components:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Component</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyMusic</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">play_music</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands, <span class="z-variable z-parameter z-rust">asset_server</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>AssetServer<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        AudioBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            source<span class="z-punctuation z-separator z-rust">:</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>my_music.ogg<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        MyMusic<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>The <code>mode</code> field in the <a href=https://docs.rs/bevy/0.11.0/bevy/audio/struct.PlaybackSettings.html><code>PlaybackSettings</code></a> struct offers a straightforward way to manage the lifecycle of these audio entities.<p>By passing a <a href=https://docs.rs/bevy/0.11.0/bevy/audio/enum.PlaybackMode.html><code>PlaybackMode</code></a>, you are able to choose whether it plays once or repeatedly, using <code>Once</code> and <code>Loop</code> respectively. If you anticipate that the audio might be played again, you can save resources by temporarily unloading it using <code>Despawn</code>, or free up its memory immediately if it is a one-time effect using <code>Remove</code>.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">AudioBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    source<span class="z-punctuation z-separator z-rust">:</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>hit_sound.ogg<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    settings<span class="z-punctuation z-separator z-rust">:</span> PlaybackSettings <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        mode<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">PlaybackMode<span class="z-punctuation z-accessor z-rust">::</span></span>Despawn<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><p>Much simpler! To adjust playback you can query for the <a href=https://docs.rs/bevy/0.11.0/bevy/audio/struct.AudioSink.html><code>AudioSink</code></a> component:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">pause_music</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query_music</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>AudioSink, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyMusic<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Ok</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>sink</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get_single</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        sink<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pause</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=global-audio-volume>Global Audio Volume <a class=anchor-link href=#global-audio-volume>#</a></h2><div class=release-feature-authors>authors: @mrchantey</div><p>Bevy now has a global volume level which can be configured via the [<code>GlobalVolume</code>] resource:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">GlobalVolume<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">2</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h2 id=resource-support-in-scenes>Resource Support in Scenes <a class=anchor-link href=#resource-support-in-scenes>#</a></h2><div class=release-feature-authors>authors: @Carbonhell, @Davier</div><p>Bevy's scene format is a very useful tool for serializing and deserializing game state to and from scene files.<p>Previously, the captured state was limited to only entities and their components. With <strong>Bevy 0.11</strong>, scenes now support serializing resources as well.<p>This adds a new <code>resources</code> field to the scene format:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    resources<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>my_game::stats::TotalScore<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">            score<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">9001</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    entities<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Entity scene data...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><h2 id=scene-filtering>Scene Filtering <a class=anchor-link href=#scene-filtering>#</a></h2><div class=release-feature-authors>authors: @MrGVSV</div><p>When serializing data to a scene, all components and <a href=https://bevy.org/news/bevy-0-11/#resource-support-in-scenes>resources</a> are serialized by default. In previous versions, you had to use the given <code>TypeRegistry</code> to act as a filter, leaving out the types you don't want included.<p>In 0.11, there's now a dedicated <code>SceneFilter</code> type to make filtering easier, cleaner, and more intuitive. This can be used with <a href=https://docs.rs/bevy/0.11.0/bevy/prelude/struct.DynamicSceneBuilder.html><code>DynamicSceneBuilder</code></a> to have fine-grained control over what actually gets serialized.<p>We can <code>allow</code> a subset of types:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> builder <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">DynamicSceneBuilder<span class="z-punctuation z-accessor z-rust">::</span></span>from_world<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> scene <span class="z-keyword z-operator z-assignment z-rust">=</span> builder
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">allow<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentA<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">allow<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentB<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">extract_entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>Or <code>deny</code> them:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> builder <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">DynamicSceneBuilder<span class="z-punctuation z-accessor z-rust">::</span></span>from_world<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> scene <span class="z-keyword z-operator z-assignment z-rust">=</span> builder
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">deny<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentA<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">deny<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentB<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">extract_entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h2 id=default-font>Default Font <a class=anchor-link href=#default-font>#</a></h2><div class=release-feature-authors>authors: @mockersf</div><p>Bevy now supports a configurable default font and embeds a tiny default font (a minimal version of <a href=https://fonts.google.com/specimen/Fira+Mono>Fira Mono</a>). This is useful if you use a common font throughout your project. And it makes it easier to prototype new changes with a "placeholder font" without worrying about setting it on each node.<p><img alt="default font" src=https://bevy.org/news/bevy-0-11/default_font.png><h2 id=ui-texture-atlas-support>UI Texture Atlas Support <a class=anchor-link href=#ui-texture-atlas-support>#</a></h2><div class=release-feature-authors>authors: @mwbryant</div><p>Previously UI <code>ImageBundle</code> Nodes could only use handles to full images without an ergonomic way to use <code>TextureAtlases</code> in UI. In this release we add support for an <code>AtlasImageBundle</code> UI Node which brings the existing <code>TextureAtlas</code> support into UI.<p>This was achieved by merging the existing mechanisms that allows text rendering to select which glyph to use and the mechanisms that allow for <code>TextureAtlasSprite</code>.<p><video controls><source src=texture_atlas_ui.mp4 type=video/mp4></video><h2 id=gamepad-rumble-api>Gamepad Rumble API <a class=anchor-link href=#gamepad-rumble-api>#</a></h2><div class=release-feature-authors>authors: @johanhelsing, @nicopap</div><p>You can now use the <code>EventWriter&LTGamepadRumbleRequest></code> system parameter to trigger controllers force-feedback motors.<p><a href=https://crates.io/crates/gilrs><code>gilrs</code></a>, the crate Bevy uses for gamepad support, allows controlling force-feedback motors. Sadly, there were no easy way of accessing the force-feedback API in Bevy without tedious bookkeeping.<p>Now Bevy has the <code>GamepadRumbleRequest</code> event to do just that.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">rumble_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">gamepads</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Gamepads<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">rumble_requests</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventWriter<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>GamepadRumbleRequest<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> gamepad <span class="z-keyword z-operator z-rust">in</span> gamepads<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        rumble_requests<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">GamepadRumbleRequest<span class="z-punctuation z-accessor z-rust">::</span></span>Add <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            gamepad<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            duration<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Duration<span class="z-punctuation z-accessor z-rust">::</span></span>from_secs<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            intensity<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">GamepadRumbleIntensity<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">MAX</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>The <code>GamepadRumbleRequest::Add</code> event triggers a force-feedback motor, controlling how long the vibration should last, the motor to activate, and the vibration strength. <code>GamepadRumbleRequest::Stop</code> immediately stops all motors.<h2 id=new-default-tonemapping-method>New Default Tonemapping Method <a class=anchor-link href=#new-default-tonemapping-method>#</a></h2><div class=release-feature-authors>authors: @JMS55</div><p>In <strong>Bevy 0.10</strong> we <a href=/news/bevy-0-10/#more-tonemapping-choices>made tonemapping configurable with a ton of new tonemapping options</a>. In <strong>Bevy 0.11</strong> we've switched the default tonemapping method from "Reinhard luminance" tonemapping to "TonyMcMapface":<p class=image-compare-instruction>Drag this image to compare<div class=image-compare-container style=aspect-ratio:1280/720><div class=image-compare data-title-a=Reinhard-luminance data-title-b=TonyMcMapface style=aspect-ratio:1280/720><img alt=Reinhard-luminance class=image-a src=tm_reinhard_luminance.png><img alt=TonyMcMapface class=image-b src=tm_tonymcmapface.png></div></div><p>TonyMcMapface (<a href=https://github.com/h3r2tic/tony-mc-mapface>created by Tomasz Stachowiak</a>) is a much more neutral display transform that tries to stay as close to the input "light" as possible. This helps retain artistic choices in the scene. Notably, brights desaturate across the entire spectrum (unlike Reinhard luminance). It also works much better with bloom when compared to Reinhard luminance.<h2 id=entityref-queries>EntityRef Queries <a class=anchor-link href=#entityref-queries>#</a></h2><div class=release-feature-authors>authors: @james7132</div><p><a href=https://docs.rs/bevy/0.11.0/bevy/ecs/world/struct.EntityRef.html><code>EntityRef</code></a> now implements <a href=https://docs.rs/bevy/0.11.0/bevy/ecs/query/trait.WorldQuery.html><code>WorldQuery</code></a>, which makes it easier to query for arbitrary components in your ECS systems:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>EntityRef<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> entity <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>query <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>mesh</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> entity<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">get<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Mesh<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-storage z-type z-rust">let</span> transform <span class="z-keyword z-operator z-assignment z-rust">=</span> entity<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">get<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Transform<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Note that <a href=https://docs.rs/bevy/0.11.0/bevy/ecs/world/struct.EntityRef.html><code>EntityRef</code></a> queries access every entity and every component in the entire <a href=https://docs.rs/bevy/0.11.0/bevy/ecs/world/struct.World.html><code>World</code></a> by default. This means that they will conflict with any "mutable" query:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> These queries will conflict, making this system invalid
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>EntityRef<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">enemies</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Enemy<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>To resolve conflicts (or reduce the number of entities accessed), you can add filters:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> These queries will not conflict
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">players</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>EntityRef, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">enemies</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Enemy, <span class="z-meta z-generic z-rust">Without<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> only iterates players
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> entity <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>players <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>mesh</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> entity<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">get<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Mesh<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-storage z-type z-rust">let</span> transform <span class="z-keyword z-operator z-assignment z-rust">=</span> entity<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">get<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Transform<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Note that it will generally still be more ergonomic (and more efficient) to query for the components you want directly:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">players</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span>Transform, <span class="z-keyword z-operator z-rust">&</span><span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Mesh<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span>, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>transform<span class="z-punctuation z-separator z-rust">,</span> mesh</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>players <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=screenshot-api>Screenshot API <a class=anchor-link href=#screenshot-api>#</a></h2><div class=release-feature-authors>authors: @TheRawMeatball</div><p>Bevy now has a simple screenshot API that can save a screenshot of a given window to the disk:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">take_screenshot</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">screenshot_manager</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ScreenshotManager<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">input</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Input<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>KeyCode<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">primary_window</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Entity, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>PrimaryWindow<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> input<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">just_pressed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">KeyCode<span class="z-punctuation z-accessor z-rust">::</span></span>Space</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        screenshot_manager
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">save_screenshot_to_disk</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>primary_window<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">single</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>screenshot.png<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=rendertarget-textureview>RenderTarget::TextureView <a class=anchor-link href=#rendertarget-textureview>#</a></h2><div class=release-feature-authors>authors: @mrchantey</div><p>The <a href=https://docs.rs/bevy/0.11.0/bevy/render/camera/struct.Camera.html><code>Camera</code></a> <a href=https://docs.rs/bevy/0.11.0/bevy/render/camera/enum.RenderTarget.html><code>RenderTarget</code></a> can now be set to a wgpu <a href=https://docs.rs/bevy/0.11.0/bevy/render/render_resource/struct.TextureView.html><code>TextureView</code></a>. This allows 3rd party Bevy Plugins to manage a <a href=https://docs.rs/bevy/0.11.0/bevy/render/camera/struct.Camera.html><code>Camera</code></a>'s texture. One particularly interesting use case that this enables is XR/VR support. A few community members have already <a href=https://github.com/bevyengine/bevy/issues/115#issuecomment-1436749201>proven this out!</a><h2 id=improved-text-wrapping>Improved Text Wrapping <a class=anchor-link href=#improved-text-wrapping>#</a></h2><div class=release-feature-authors>authors: @ickshonpe</div><p>Previous versions of Bevy didn't properly wrap text because it calculated the actual text prior to calculating layout. <strong>Bevy 0.11</strong> adds a "text measurement step" that calculates the text size prior to layout, then computes the actual text <em>after</em> layout.<p><img alt="text wrap" src=https://bevy.org/news/bevy-0-11/text_wrap.png><p>There is also a new <code>NoWrap</code> variant on the <a href=https://docs.rs/bevy/0.11.0/bevy/text/enum.BreakLineOn.html><code>BreakLineOn</code></a> setting, which can disable text wrapping entirely when that is desirable.<h2 id=faster-ui-render-batching>Faster UI Render Batching <a class=anchor-link href=#faster-ui-render-batching>#</a></h2><div class=release-feature-authors>authors: @ickshonpe</div><p>We got a huge UI performance win for some cases by avoiding breaking up UI batches when the texture changes but the next node is untextured.<p>Here is a profile of our "many buttons" stress test. Red is before the optimization and Yellow is after:<p><img alt="ui profile" src=https://bevy.org/news/bevy-0-11/ui_profile.png><h2 id=better-reflect-proxies>Better Reflect Proxies <a class=anchor-link href=#better-reflect-proxies>#</a></h2><div class=release-feature-authors>authors: @MrGVSV</div><p>Bevy's reflection API has a handful of structs which are collectively known as "dynamic" types. These include <a href=https://docs.rs/bevy/0.11.0/bevy/reflect/struct.DynamicStruct.html><code>DynamicStruct</code></a>, <a href=https://docs.rs/bevy/0.11.0/bevy/reflect/struct.DynamicTuple.html><code>DynamicTuple</code></a>, and more, and they are used to dynamically construct types of any shape or form at runtime. These types are also used to create are commonly referred to as "proxies", which are dynamic types that are used to represent an actual concrete type.<p>These proxies are what powers the <a href=https://docs.rs/bevy/0.11.0/bevy/reflect/trait.Reflect.html#tymethod.clone_value><code>Reflect::clone_value</code></a> method, which generates these proxies under the hood in order to construct a runtime clone of the data.<p>Unfortunately, this results in a few <a href=https://github.com/bevyengine/bevy/issues/6601>subtle footguns</a> that could catch users by surprise, such as the hashes of proxies differing from the hashes of the concrete type they represent, proxies not being considered equivalent to their concrete counterparts, and more.<p>While this release does not necessarily fix these issues, it does establish a solid foundation for fixing them in the future. The way it does this is by changing how a proxy is defined.<p>Before 0.11, a proxy was only defined by cloning the concrete type's <a href=https://docs.rs/bevy/0.11.0/bevy/reflect/trait.Reflect.html#tymethod.type_name><code>Reflect::type_name</code></a> string and returning it as its own <code>Reflect::type_name</code>.<p>Now in 0.11, a proxy is defined by copying a reference to the static <a href=https://docs.rs/bevy/0.11.0/bevy/reflect/enum.TypeInfo.html><code>TypeInfo</code></a> of the concrete type. This will allow us to access more of the concrete type's type information dynamically, without requiring the <code>TypeRegistry</code>. In a <a href=https://github.com/bevyengine/bevy/pull/8695>future release</a>, we will make use of this to store hashing and comparison strategies in the <code>TypeInfo</code> directly in order to mitigate the proxy issues mentioned above.<h2 id=fromreflect-ergonomics><code>FromReflect</code> Ergonomics <a class=anchor-link href=#fromreflect-ergonomics>#</a></h2><div class=release-feature-authors>authors: @MrGVSV</div><p>Bevy's <a href=https://docs.rs/bevy_reflect/latest/bevy_reflect/index.html>reflection API</a> commonly passes around data using type-erased <code>dyn Reflect</code> trait objects. This can usually be downcast back to its concrete type using <code>&LTdyn Reflect>::downcast_ref::&LTT></code>; however, this doesn't work if the underlying data has been converted to a "dynamic" representation (e.g. <code>DynamicStruct</code> for struct types, <code>DynamicList</code> for list types, etc.).<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> data<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">i32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">2</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">3</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> reflect<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>dyn Reflect <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>data<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> cloned<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>dyn Reflect<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> reflect<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone_value</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `reflect` really is a `Vec&LTi32>`
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reflect<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">is<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">i32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reflect<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">represents<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">i32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `cloned` is a `DynamicList`, but represents a `Vec&LTi32>`
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>cloned<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">is<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>DynamicList<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>cloned<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">represents<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">i32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `cloned` is equivalent to the original `reflect`, despite not being a `Vec&LTi32>`
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>cloned<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">reflect_partial_eq</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reflect</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap_or_default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>To account for this, the <a href=https://docs.rs/bevy_reflect/latest/bevy_reflect/trait.FromReflect.html><code>FromReflect</code></a> trait can be used to convert any <code>dyn Reflect</code> trait object back into its concrete type— whether it is actually that type or a dynamic representation of it. And it can even be called dynamically using the <a href=https://docs.rs/bevy_reflect/latest/bevy_reflect/struct.ReflectFromReflect.html><code>ReflectFromReflect</code></a> type data.<p>Before 0.11, users had to be manually derive <code>FromReflect</code> for every type that needed it, as well as manually register the <code>ReflectFromReflect</code> type data. This made it cumbersome to use and also meant that it was often forgotten about, resulting in reflection conversions difficulties for users downstream.<p>Now in 0.11, <code>FromReflect</code> is automatically derived and <code>ReflectFromReflect</code> is automatically registered for all types that derive <code>Reflect</code>. This means most types will be <code>FromReflect</code>-capable by default, thus reducing boilerplate and empowering logic centered around <code>FromReflect</code>.<p>Users can still opt out of this behavior by adding the <a href=https://docs.rs/bevy_reflect/latest/bevy_reflect/derive.Reflect.html#reflectfrom_reflect--false><code>#[reflect(from_reflect = false)]</code></a> attribute to their type.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Foo</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">from_reflect <span class="z-keyword z-operator z-rust">=</span> false</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Bar</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">test</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-separator z-rust">:</span> FromReflect<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">value</span><span class="z-punctuation z-separator z-rust">:</span> T</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-support z-function z-rust">test</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Foo</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> &LT-- OK!
</span></span><span class="z-source z-rust"><span class="z-support z-function z-rust">test</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Bar</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> &LT-- ERROR! `Bar` does not implement trait `FromReflect`
</span></span></code></pre><h2 id=deref-derive-attribute>Deref Derive Attribute <a class=anchor-link href=#deref-derive-attribute>#</a></h2><div class=release-feature-authors>authors: @MrGVSV</div><p>Bevy code tends to make heavy use of the <a href=https://doc.rust-lang.org/rust-by-example/generics/new_types.html>newtype</a> pattern, which is why we have dedicated derives for <a href=https://docs.rs/bevy/latest/bevy/prelude/derive.Deref.html><code>Deref</code></a> and <a href=https://docs.rs/bevy/latest/bevy/prelude/derive.DerefMut.html><code>DerefMut</code></a>.<p>This previously only worked for structs with a single field:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Resource<span class="z-punctuation z-separator z-rust">,</span> Deref<span class="z-punctuation z-separator z-rust">,</span> DerefMut</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Score</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-rust">i32</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>For 0.11, we've improved these derives by adding the <code>#[deref]</code> attribute, which allows them to be used on structs with multiple fields. This makes working with generic newtypes much easier:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Component<span class="z-punctuation z-separator z-rust">,</span> Deref<span class="z-punctuation z-separator z-rust">,</span> DerefMut</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">Health</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-separator z-rust">:</span> Character<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">deref</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> &LT- use the `health` field as the `Deref` and `DerefMut` target
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">health</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">u16</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">_character_type</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">PhantomData<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=simpler-rendergraph-construction>Simpler RenderGraph Construction <a class=anchor-link href=#simpler-rendergraph-construction>#</a></h2><div class=release-feature-authors>authors: @IceSentry, @cart</div><p>Adding <code>Node</code>s to the <code>RenderGraph</code> requires a lot of boilerplate. In this release, we tried to reduce this for most common operations. No existing APIs have been removed, these are only helpers made to simplify working with the <code>RenderGraph</code>.<p>We added the <code>RenderGraphApp</code> trait to the <code>App</code>. This trait contains various helper functions to reduce the boilerplate with adding nodes and edges to a graph.<p>Another pain point of <code>RenderGraph</code> <code>Node</code>s is passing the view entity through each node and manually updating the query on that view. To fix this we added a <code>ViewNode</code> trait and <code>ViewNodeRunner</code> that will automatically take care of running the <code>Query</code> on the view entity. We also made the view entity a first-class concept of the <code>RenderGraph</code>. So you can now access the view entity the graph is currently running on from anywhere in the graph without passing it around between each <code>Node</code>.<p>All these new APIs assume that your Node implements <code>FromWorld</code> or <code>Default</code>.<p>Here's what it looks like in practice for the <code>BloomNode</code>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Adding the node to the 3d graph
</span></span><span class="z-source z-rust">render_app
</span><span class="z-source z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> To run a ViewNode you need to create a ViewNodeRunner
</span></span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">add_render_graph_node<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">ViewNodeRunner<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>BloomNode<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        <span class="z-constant z-other z-rust">CORE_3D</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">core_3d<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">graph<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">node<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLOOM</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Defining the node
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">BloomNode</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This can replace your `impl Node` block of any existing `Node` that operated on a view
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">ViewNode <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">BloomNode</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> You need to define your view query as an associated type
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">ViewQuery</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> ExtractedCamera<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> ViewTarget<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> BloomSettings<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> You don't need Node::input() or Node::update() anymore. If you still need these they are still available but they have an empty default implementation.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">run</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">&</span><span class="z-variable z-parameter z-rust">self</span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">graph</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> RenderGraphContext,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">render_context</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> RenderContext,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This is the result of your query. If it is empty the run function will not be called
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-variable z-parameter z-rust">camera</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">view_target</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">bloom_settings</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>: <span class="z-meta z-generic z-rust">QueryItem<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>ViewQuery<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">world</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>World,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    </span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-punctuation z-section z-group z-end z-rust">)</span>, NodeRunError<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> When using the ViewNode you probably won't need the view entity but here's how to get it if you do
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> view_entity <span class="z-keyword z-operator z-assignment z-rust">=</span> graph<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">view_entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Run the node
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=reflect-default-on-enum-variant-fields><code>#[reflect(default)]</code> on Enum Variant Fields <a class=anchor-link href=#reflect-default-on-enum-variant-fields>#</a></h2><div class=release-feature-authors>authors: @MrGVSV</div><p>When using the <code>FromReflect</code> trait, fields marked <code>#[reflect(default)]</code> will be set to their <code>Default</code> value if they don't exist on the reflected object.<p>Previously, this was only supported on struct fields. Now, it is also supported on all enum variant fields.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">MyEnum</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Data <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        a<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">u32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        b<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">u32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> data <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">DynamicStruct<span class="z-punctuation z-accessor z-rust">::</span></span>default <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">data<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>b<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> dynamic_enum <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">DynamicEnum<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Data<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> data</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> my_enum <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">MyEnum<span class="z-punctuation z-accessor z-rust">::</span></span>from_reflect<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span> dynamic_enum</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-rust">u32</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> my_enum<span class="z-punctuation z-accessor z-dot z-rust">.</span>a</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h2 id=delayed-asset-hot-reloading>Delayed Asset Hot Reloading <a class=anchor-link href=#delayed-asset-hot-reloading>#</a></h2><div class=release-feature-authors>authors: @JMS55</div><p>Bevy now waits 50 milliseconds after an "asset changed on filesystem" event before reloading an asset. Reloading without a delay resulted in reading invalid asset contents on some systems. The wait time is configurable.<h2 id=custom-gltf-vertex-attributes>Custom glTF Vertex Attributes <a class=anchor-link href=#custom-gltf-vertex-attributes>#</a></h2><div class=release-feature-authors>authors: @komadori</div><p>It is now possible to load meshes with custom vertex attributes from glTF files. Custom attributes can be mapped to Bevy's <a href=https://docs.rs/bevy/0.11.0/bevy/render/mesh/struct.MeshVertexAttribute.html><code>MeshVertexAttribute</code></a> format used by the <a href=https://docs.rs/bevy/0.11.0/bevy/render/mesh/struct.Mesh.html><code>Mesh</code></a> type in the <a href=https://docs.rs/bevy/0.11.0/bevy/gltf/struct.GltfPlugin.html><code>GltfPlugin</code></a> settings. These attrtibutes can then be used in Bevy shaders. For an example, check out our <a href=https://github.com/bevyengine/bevy/blob/v0.11.0/examples/2d/custom_gltf_vertex_attribute.rs>new example</a>.<p><img alt="custom vertex attribute" src=https://bevy.org/news/bevy-0-11/custom_vertex.png><h2 id=stable-typepath>Stable TypePath <a class=anchor-link href=#stable-typepath>#</a></h2><div class=release-feature-authors>authors: @soqb, @tguichaoua</div><p>Bevy has historically used <a href=https://doc.rust-lang.org/std/any/fn.type_name.html><code>std::any::type_name</code></a> to identify Rust types with friendly names in a number of places: Bevy Reflect, Bevy Scenes, Bevy Assets, Bevy ECS, and others. Unfortunately, Rust makes no guarantees about the stability or format of <a href=https://doc.rust-lang.org/std/any/fn.type_name.html><code>type_name</code></a>, which makes it theoretically shakey ground to build on (although in practice it has been stable so far).<p>There is also no built in way to retrieve "parts" of a type name. If you want the short name, the name of a generic type without its inner types, the module name, or the crate name, you must do string operations on the <a href=https://doc.rust-lang.org/std/any/fn.type_name.html><code>type_name</code></a> (which can be error prone / nontrivial).<p>Additionally, <a href=https://doc.rust-lang.org/std/any/fn.type_name.html><code>type_name</code></a> cannot be customized. In some cases an author might choose to identify a type with something other than its full module path (ex: if they prefer a shorter path or want to abstract out private / internal modules).<p>For these reasons, we've developed a new stable <a href=https://docs.rs/bevy/0.11.0/bevy/reflect/trait.TypePath.html><code>TypePath</code></a>, which is automatically implemented for any type deriving <a href=https://docs.rs/bevy/0.11.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a>. Additionally, it can be manually derived in cases where <a href=https://docs.rs/bevy/0.11.0/bevy/reflect/trait.Reflect.html><code>Reflect</code></a> isn't derived.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-module z-rust"><span class="z-storage z-type z-module z-rust">mod</span> <span class="z-entity z-name z-module z-rust">my_mod</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-module z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-module z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyType</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-module z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> prints: "my_crate::my_mod::MyType"
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">MyType<span class="z-punctuation z-accessor z-rust">::</span></span>type_path<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> prints: "MyType"
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">MyType<span class="z-punctuation z-accessor z-rust">::</span></span>short_type_path<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> prints: "my_crate"
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">MyType<span class="z-punctuation z-accessor z-rust">::</span></span>crate_name<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> prints: "my_crate::my_mod"
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">MyType<span class="z-punctuation z-accessor z-rust">::</span></span>module_path<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>This also works for generics, which can come in handy:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> prints: "Option&LTMyType>"
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-type z-rust">Option</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyType<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>short_type_path<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> prints: "Option"
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-type z-rust">Option</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyType<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>type_ident<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p><a href=https://docs.rs/bevy/0.11.0/bevy/reflect/trait.TypePath.html><code>TypePath</code></a> can be customized by type authors:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">TypePath</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">type_path</span> <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>some_crate::some_module<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyType</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>We are in the process of porting Bevy's internal <a href=https://doc.rust-lang.org/std/any/fn.type_name.html><code>type_name</code></a> usage over to <a href=https://docs.rs/bevy/0.11.0/bevy/reflect/trait.TypePath.html><code>TypePath</code></a>, which should land in <strong>Bevy 0.12</strong>.<h2 id=run-if-for-tuples-of-systems><code>run_if</code> for Tuples of Systems <a class=anchor-link href=#run-if-for-tuples-of-systems>#</a></h2><div class=release-feature-authors>authors: @geieredgar</div><p>It is now possible to add <a href=/news/bevy-0-10/#run-conditions>"run conditions"</a> to tuples of systems:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>run<span class="z-punctuation z-separator z-rust">,</span> jump</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-function z-rust">in_state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">GameState<span class="z-punctuation z-accessor z-rust">::</span></span>Playing</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>This will evaluate the "run condition" exactly once and use the result for each system in the tuple.<p>This allowed us to remove the <code>OnUpdate</code> system set for states (which was previously used to run groups of systems when they are in a given state).<h2 id=has-queries><code>Has</code> Queries <a class=anchor-link href=#has-queries>#</a></h2><div class=release-feature-authors>authors: @wainwrightmark</div><p>You can now use <code>Has&LTComponent></code> in queries, which will return true if that component exists and false if it does not:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Has<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> has_player <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>query <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> has_player <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> do something
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h2 id=derive-event>Derive <code>Event</code> <a class=anchor-link href=#derive-event>#</a></h2><div class=release-feature-authors>authors: @CatThingy</div><p>The Bevy <a href=https://docs.rs/bevy/0.11.0/bevy/ecs/event/trait.Event.html><code>Event</code></a> trait is now derived instead of being auto-impled for everything:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Event</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Collision</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">a</span><span class="z-punctuation z-separator z-type z-rust">:</span> Entity,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">b</span><span class="z-punctuation z-separator z-type z-rust">:</span> Entity,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>This prevents some classes of error, makes <a href=https://docs.rs/bevy/0.11.0/bevy/ecs/event/trait.Event.html><code>Event</code></a> types more self-documenting, and provides consistency with other Bevy ECS traits like Components and Resources. It also opens the doors to configuring the <a href=https://docs.rs/bevy/0.11.0/bevy/ecs/event/trait.Event.html><code>Event</code></a> storage type, which we plan to do in future releases.<h2 id=cubic-curve-example>Cubic Curve Example <a class=anchor-link href=#cubic-curve-example>#</a></h2><div class=release-feature-authors>authors: @Kjolnyr</div><p>An example that shows how to draw a 3D curve and move an object along the path:<p><img alt=cubic_curve src=https://bevy.org/news/bevy-0-11/cubic_curve.png><h2 id=size-constraints-example>Size Constraints Example <a class=anchor-link href=#size-constraints-example>#</a></h2><div class=release-feature-authors>authors: @ickshonpe</div><p>An interactive example that shows how the various <a href=https://docs.rs/bevy/0.11.0/bevy/ui/struct.Style.html><code>Style</code></a> size constraints affect UI nodes.<p><img alt="size constraints" src=https://bevy.org/news/bevy-0-11/size_constraints.png><h2 id=display-and-visibility-example>Display and Visibility Example <a class=anchor-link href=#display-and-visibility-example>#</a></h2><div class=release-feature-authors>authors: @ickshonpe</div><p>An example that shows how display and visibility settings affect UI nodes.<p><img alt="display and visibility" src=https://bevy.org/news/bevy-0-11/display_and_visibility.png><h2 id=no-more-bors>No More Bors! <a class=anchor-link href=#no-more-bors>#</a></h2><div class=release-feature-authors>authors: @cart, @mockersf</div><p>Bevy has historically used the Bors merge system to ensure we never merge a pull request on GitHub that breaks our CI validation. This was a critical piece of infrastructure that ensured we could collaborate safely and effectively. Fortunately GitHub has <em>finally</em> rolled out <a href=https://github.blog/changelog/2023-02-08-pull-request-merge-queue-public-beta/>Merge Queues</a>, which solve the same problems as Bors, with the benefit of being more tightly integrated with GitHub.<p>For this release cycle we migrated to Merge Queues and we're very happy with the experience!<h2 id=new-ci-jobs>New CI Jobs <a class=anchor-link href=#new-ci-jobs>#</a></h2><div class=release-feature-authors>authors: @mockersf</div><p>We've added a number of new CI jobs that improve the Bevy development experience:<ul><li>A daily job that runs Bevy's mobile examples on real Android and iOS devices! This helps protect against regressions that might not be caught by the compiler<li>Added the ability to take screenshots in CI, which can be used to validate the results of Bevy example runs<li>A job that leaves a GitHub comment on PRs that are missing a feature or example doc update</ul><h2 id=what-s-next><a name=what-s-next></a>What's Next? <a class=anchor-link href=#what-s-next>#</a></h2><p>We have plenty of work that is pretty much finished and is therefore very likely to land in <strong>Bevy 0.12</strong>:<ul><li><strong>Bevy Asset V2</strong>: A brand new asset system that adds "asset preprocessing", optional asset .meta files, recursive asset dependency tracking and events, async asset IO, better asset handles, more efficient asset storage, and a variety of usability improvements! The work here is <a href=https://github.com/bevyengine/bevy/pull/8624>pretty much finished</a>. It <em>almost</em> made it in to Bevy 0.11 but it needed a bit more time to cook.<li><strong>PBR Material Light Transmission</strong>: Transmission / screen space refractions allows for simulating materials like glass, plastics, liquids and gels, gemstones, wax, etc. This one is also pretty much <a href=https://github.com/bevyengine/bevy/pull/8015>ready to go</a>!<li><strong>TAA Improvements</strong>: We have a number of changes in the works for TAA that will improve its quality, speed, and support within the engine.<li><strong>GPU Picking</strong>: Efficiently and correctly <a href=https://github.com/bevyengine/bevy/pull/8784>select entities on the GPU</a> by using color ids to identify meshes in renders.<li><strong>PCF For Directional and Spotlight Shadows</strong>: <a href=https://github.com/bevyengine/bevy/pull/8006>Reduce aliasing on the edges of shadows</a><li><strong>UI Node Border Radius and Shadows</strong>: Add <a href=https://github.com/bevyengine/bevy/pull/8973>curvature and "drop shadows"</a> to your UI nodes!<li><strong>Deferred Rendering</strong>: Bevy already does "mixed mode" forward rendering by having optional separate passes for depth and normals. We are currently experimenting with supporting "fully deferred" rendering as well, which opens the doors to new effects and different performance tradeoffs.</ul><p>From a high level, we plan to focus on the Asset System, UI, Render Features, and Scenes during the next cycle.<p>Check out the <a href=https://github.com/bevyengine/bevy/milestone/14><strong>Bevy 0.12 Milestone</strong></a> for an up-to-date list of current work being considered for <strong>Bevy 0.12</strong>.<h2 id=support-bevy>Support Bevy <a class=anchor-link href=#support-bevy>#</a></h2><p>Sponsorships help make our work on Bevy sustainable. If you believe in Bevy's mission, consider <a href=/donate>sponsoring us</a> ... every bit helps!<p><a class="button button--pink header__cta" href=/donate>Donate <img alt="heart icon" class=button__icon src=/assets/heart.svg></a><h2 id=contributors>Contributors <a class=anchor-link href=#contributors>#</a></h2><p>Bevy is made by a <a href=/community/people/>large group of people</a>. A huge thanks to the 166 contributors that made this release (and associated docs) possible! In random order:<ul><li>@TheBlek<li>@hank<li>@TimJentzsch<li>@Suficio<li>@SmartManLudo<li>@BlondeBurrito<li>@lewiszlw<li>@paul-hansen<li>@boringsan<li>@superdump<li>@JonahPlusPlus<li>@airingursb<li>@Sheepyhead<li>@nakedible<li>@Testare<li>@andresovela<li>@SkiFire13<li>@doup<li>@BlackPhlox<li>@nicoburns<li>@wpederzoli<li>@adtennant<li>@LoopyAshy<li>@KernelFreeze<li>@ickshonpe<li>@jim-ec<li>@mrchantey<li>@frengor<li>@Joakker<li>@arendjr<li>@MJohnson459<li>@TheTacBanana<li>@IceSentry<li>@ItsDoot<li>@Anti-Alias<li>@mwbryant<li>@inodentry<li>@LiamGallagher737<li>@robtfm<li>@mockersf<li>@ndarilek<li>@samtenna<li>@Estus-Dev<li>@InnocentusLime<li>@p-hueber<li>@B-Reif<li>@Adamkob12<li>@payload<li>@JohnTheCoolingFan<li>@djeedai<li>@SludgePhD<li>@s-lambert<li>@kjolnyr<li>@Skovrup1<li>@Ababwa<li>@Illiux<li>@Carter0<li>@luca-della-vedova<li>@Neo-Zhixing<li>@coreh<li>@helvieq499<li>@Carbonhell<li>@BrandonDyer64<li>@hymm<li>@JMS55<li>@iiYese<li>@mtsr<li>@jannik4<li>@natasria<li>@Trouv<li>@minchopaskal<li>@chrisjuchem<li>@marlyx<li>@valaphee<li>@hankjordan<li>@rparrett<li>@Selene-Amanita<li>@opstic<li>@loganbenjamin<li>@MrGunflame<li>@pyrotechnick<li>@mjhostet<li>@VitalyAnkh<li>@CatThingy<li>@maniwani<li>@Themayu<li>@SET001<li>@jakobhellermann<li>@MrGVSV<li>@nicopap<li>@Wcubed<li>@aevyrie<li>@NiklasEi<li>@bonsairobo<li>@cart<li>@TotalKrill<li>@raffaeleragni<li>@Aceeri<li>@Shatur<li>@orzogc<li>@UncleScientist<li>@Elabajaba<li>@vyb<li>@komadori<li>@jnhyatt<li>@harudagondi<li>@konsti219<li>@james7132<li>@mvlabat<li>@neithanmo<li>@dgunay<li>@Shfty<li>@hate<li>@B-head<li>@MinerSebas<li>@chescock<li>@BorMor<li>@lupan<li>@CrazyRoka<li>@bzm3r<li>@Sixmorphugus<li>@JoJoJet<li>@eltociear<li>@gakit<li>@geieredgar<li>@tjamaan<li>@alice-i-cecile<li>@NoahShomette<li>@james-j-obrien<li>@tinrab<li>@Olle-Lukowski<li>@TheRawMeatball<li>@sarkahn<li>@RobWalt<li>@johanhelsing<li>@SneakyBerry<li>@beeryt<li>@Vrixyz<li>@wainwrightmark<li>@EliasPrescott<li>@konsolas<li>@ameknite<li>@Connor-McMillin<li>@Weibye<li>@SpecificProtagonist<li>@danchia<li>@vallrand<li>@atornity<li>@soqb<li>@devil-ira<li>@AnthonyKalaitzis<li>@yyogo<li>@NiseVoid<li>@gajop<li>@Gingeh<li>@zendril<li>@ezekg<li>@ickk<li>@Leonss23<li>@kellencataldo<li>@akappel<li>@hazelsparrow<li>@mattfbacon<li>@gianzellweger<li>@lakrsv<li>@laundmo</ul><h2 id=full-changelog>Full Changelog <a class=anchor-link href=#full-changelog>#</a></h2><h3 id=rendering>Rendering <a class=anchor-link href=#rendering>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/8336>Webgpu support</a><li><a href=https://github.com/bevyengine/bevy/pull/5703>improve shader import model</a><li><a href=https://github.com/bevyengine/bevy/pull/7402>Screen Space Ambient Occlusion (SSAO) MVP</a><li><a href=https://github.com/bevyengine/bevy/pull/7291>Temporal Antialiasing (TAA)</a><li><a href=https://github.com/bevyengine/bevy/pull/6529>Immediate Mode Line/Gizmo Drawing</a><li><a href=https://github.com/bevyengine/bevy/pull/8109>Make render graph slots optional for most cases</a><li><a href=https://github.com/bevyengine/bevy/pull/8090>Split opaque and transparent phases</a><li><a href=https://github.com/bevyengine/bevy/pull/8275>Built-in skybox</a><li><a href=https://github.com/bevyengine/bevy/pull/5928>Add parallax mapping to bevy PBR</a><li><a href=https://github.com/bevyengine/bevy/pull/7422>Add port of AMD's Robust Contrast Adaptive Sharpening</a><li><a href=https://github.com/bevyengine/bevy/pull/8007>Add RenderGraphApp to simplify adding render nodes</a><li><a href=https://github.com/bevyengine/bevy/pull/7163>Add screenshot API</a><li><a href=https://github.com/bevyengine/bevy/pull/8158>Add morph targets</a><li><a href=https://github.com/bevyengine/bevy/pull/8455>Screenshots in wasm</a><li><a href=https://github.com/bevyengine/bevy/pull/8118>Add ViewNode to simplify render node management</a><li><a href=https://github.com/bevyengine/bevy/pull/7614>Bias texture mipmaps</a><li><a href=https://github.com/bevyengine/bevy/pull/8427>Instanced line rendering for gizmos based on <code>bevy_polyline</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8042>Add <code>RenderTarget::TextureView</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8685>Change default tonemapping method</a><li><a href=https://github.com/bevyengine/bevy/pull/6815>Allow custom depth texture usage</a><li><a href=https://github.com/bevyengine/bevy/pull/8231>Use the prepass normal texture in main pass when possible</a><li><a href=https://github.com/bevyengine/bevy/pull/8122>Left-handed y-up cubemap coordinates</a><li><a href=https://github.com/bevyengine/bevy/pull/7772>Allow SPIR-V shaders to process when shader defs are present</a><li><a href=https://github.com/bevyengine/bevy/pull/8299>Remove unnecesssary values Vec from DynamicUniformBuffer and DynamicStorageBuffer</a><li><a href=https://github.com/bevyengine/bevy/pull/6697>Add <code>MAY_DISCARD</code> shader def, enabling early depth tests for most cases</a><li><a href=https://github.com/bevyengine/bevy/pull/7885>Add <code>Aabb</code> calculation for <code>Sprite</code>, <code>TextureAtlasSprite</code> and <code>Mesh2d</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8041>Color::Lcha constructors</a><li><a href=https://github.com/bevyengine/bevy/pull/8040>Fix Color::as_rgba_linear for Color::Lcha</a><li><a href=https://github.com/bevyengine/bevy/pull/8070>Added Globals struct to prepass shader</a><li><a href=https://github.com/bevyengine/bevy/pull/8121>Derive Copy and Clone for Collision</a><li><a href=https://github.com/bevyengine/bevy/pull/8151>Fix crash when enabling HDR on 2d cameras</a><li><a href=https://github.com/bevyengine/bevy/pull/7977>Dither fix</a><li><a href=https://github.com/bevyengine/bevy/pull/8460>Compute <code>vertex_count</code> for indexed meshes on <code>GpuMesh</code></a><li><a href=https://github.com/bevyengine/bevy/pull/9024>Run update_previous_view_projections in PreUpdate schedule</a><li><a href=https://github.com/bevyengine/bevy/pull/8220>Added <code>WebP</code> image format support</a><li><a href=https://github.com/bevyengine/bevy/pull/8601>Add support for pnm textures</a><li><a href=https://github.com/bevyengine/bevy/pull/8316>fix invalid bone weights</a><li><a href=https://github.com/bevyengine/bevy/pull/8412>Fix pbr shader breaking on missing UVs</a><li><a href=https://github.com/bevyengine/bevy/pull/8878>Fix Plane UVs / texture flip</a><li><a href=https://github.com/bevyengine/bevy/pull/7817>Fix look_to resulting in NaN rotations</a><li><a href=https://github.com/bevyengine/bevy/pull/8627>Fix look_to variable naming</a><li><a href=https://github.com/bevyengine/bevy/pull/8223>Fix segfault with 2d gizmos</a><li><a href=https://github.com/bevyengine/bevy/pull/8298>Use RenderGraphApp in more places</a><li><a href=https://github.com/bevyengine/bevy/pull/8323>Fix viewport change detection</a><li><a href=https://github.com/bevyengine/bevy/pull/8301>Remove capacity fields from all Buffer wrapper types</a><li><a href=https://github.com/bevyengine/bevy/pull/8380>Sync pbr_types.wgsl StandardMaterial values</a><li><a href=https://github.com/bevyengine/bevy/pull/8180>Avoid spawning gizmo meshes when no gizmos are being drawn</a><li><a href=https://github.com/bevyengine/bevy/pull/9030>Use a consistent seed for AABB gizmo colors</a><li><a href=https://github.com/bevyengine/bevy/pull/8444>bevy_pbr: Do not cull meshes without Aabbs from cascades</a><li><a href=https://github.com/bevyengine/bevy/pull/8330>Handle vertex_uvs if they are present in default prepass fragment shader</a><li><a href=https://github.com/bevyengine/bevy/pull/7867>Changed (Vec2, Vec2) to Rect in Camera::logical_viewport_rect</a><li><a href=https://github.com/bevyengine/bevy/pull/8491>make glsl and spirv support optional</a><li><a href=https://github.com/bevyengine/bevy/pull/8978>fix prepass normal_mapping</a><li><a href=https://github.com/bevyengine/bevy/pull/8564>conversions between [u8; 4] and Color</a><li><a href=https://github.com/bevyengine/bevy/pull/8952>Add option to disable gizmo rendering for specific cameras</a><li><a href=https://github.com/bevyengine/bevy/pull/9013>Fix morph target prepass shader</a><li><a href=https://github.com/bevyengine/bevy/pull/8631>Fix bloom wasm support</a><li><a href=https://github.com/bevyengine/bevy/pull/8926>Fix black spots appearing due to NANs when SSAO is enabled</a><li><a href=https://github.com/bevyengine/bevy/pull/8890>fix normal prepass</a><li><a href=https://github.com/bevyengine/bevy/pull/8977>Refs #8975 -- Add return to RenderDevice::poll()</a><li><a href=https://github.com/bevyengine/bevy/pull/8508>Fix WebGL mode for Adreno GPUs</a><li><a href=https://github.com/bevyengine/bevy/pull/9003>Fix parallax mapping</a><li><a href=https://github.com/bevyengine/bevy/pull/8575>Added Vec append to BufferVec - Issue #3531</a><li><a href=https://github.com/bevyengine/bevy/pull/8993>Fix CAS shader with explicit FullscreenVertexOutput import</a><li><a href=https://github.com/bevyengine/bevy/pull/8643>Make <code>TextureAtlas::texture_handles</code> <code>pub</code> instead of <code>pub(crate)</code> (#8633)</a><li><a href=https://github.com/bevyengine/bevy/pull/8642>Make Material2d pipeline systems public</a><li><a href=https://github.com/bevyengine/bevy/pull/8701>Fix screenshots on Wayland + Nvidia</a><li><a href=https://github.com/bevyengine/bevy/pull/8704>Apply codebase changes in preparation for <code>StandardMaterial</code> transmission</a><li><a href=https://github.com/bevyengine/bevy/pull/8732>Use ViewNode for TAA</a><li><a href=https://github.com/bevyengine/bevy/pull/8753>Change Camera3dBundle::tonemapping to Default</a><li><a href=https://github.com/bevyengine/bevy/pull/8804>Remove <code>Component</code> derive for AlphaMode</a><li><a href=https://github.com/bevyengine/bevy/pull/8408>Make setup of Opaque3dPrepass and AlphaMask3dPrepass phase items consistent with others</a><li><a href=https://github.com/bevyengine/bevy/pull/8744>Rename <code>Plane</code> struct to <code>HalfSpace</code></a><li><a href=https://github.com/bevyengine/bevy/pull/6974>Expand <code>FallbackImage</code> to include a <code>GpuImage</code> for each possible <code>TextureViewDimension</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8877>Cascaded shadow maps: Fix prepass ortho depth clamping</a><li><a href=https://github.com/bevyengine/bevy/pull/8910>Fix gizmos in WebGPU</a><li><a href=https://github.com/bevyengine/bevy/pull/8868>Fix AsBindGroup derive, texture attribute, visibility flag parsing</a><li><a href=https://github.com/bevyengine/bevy/pull/8802>Disable camera on window close</a><li><a href=https://github.com/bevyengine/bevy/pull/8283>Reflect <code>Component</code> and <code>Default</code> of <code>BloomSettings</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8428>Add Reflection Macros to TextureAtlasSprite</a><li><a href=https://github.com/bevyengine/bevy/pull/8801>Implement Reflect on NoFrustumCulling</a></ul><h3 id=audio>Audio <a class=anchor-link href=#audio>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/8424>ECS-based API redesign</a><li><a href=https://github.com/bevyengine/bevy/pull/7706>Ability to set a Global Volume</a><li><a href=https://github.com/bevyengine/bevy/pull/8145>Expose <code>AudioSink::empty()</code></a></ul><h3 id=diagnostics>Diagnostics <a class=anchor-link href=#diagnostics>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/8677>Allow systems using Diagnostics to run in parallel</a><li><a href=https://github.com/bevyengine/bevy/pull/8272>add a feature for memory tracing with tracy</a><li><a href=https://github.com/bevyengine/bevy/pull/8362>Re-add the "frame" span for tracy comparisons</a><li><a href=https://github.com/bevyengine/bevy/pull/8886>log to stderr instead of stdout</a></ul><h3 id=scenes>Scenes <a class=anchor-link href=#scenes>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/6793>bevy_scene: Add SceneFilter</a><li><a href=https://github.com/bevyengine/bevy/pull/6846>(De) serialize resources in scenes</a><li><a href=https://github.com/bevyengine/bevy/pull/8065>add position to scene errors</a><li><a href=https://github.com/bevyengine/bevy/pull/7951>Bugfix: Scene reload fix (nonbreaking)</a><li><a href=https://github.com/bevyengine/bevy/pull/8512>avoid panic with parented scenes on deleted entities</a></ul><h3 id=transform-hierarchy>Transform + Hierarchy <a class=anchor-link href=#transform-hierarchy>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/7264>Fix transform propagation of orphaned entities</a></ul><h3 id=gizmo>Gizmo <a class=anchor-link href=#gizmo>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/8468>Add a bounding box gizmo</a><li><a href=https://github.com/bevyengine/bevy/pull/8448>Added <code>arc_2d</code> function for gizmos</a><li><a href=https://github.com/bevyengine/bevy/pull/8960>Use AHash to get color from entity in bevy_gizmos</a><li><a href=https://github.com/bevyengine/bevy/pull/8434>do not crash when rendering only one gizmo</a></ul><h3 id=reflection>Reflection <a class=anchor-link href=#reflection>#</a></h3><ul><li><a href=https://github.com/bevyengine/bevy/pull/7184>reflect: stable type path v2</a><li><a href=https://github.com/bevyengine/bevy/pull/6971>bevy_reflect: Better proxies</a><li><a href=https://github.com/bevyengine/bevy/pull/6056>bevy_reflect: FromReflect Ergonomics Implementation</a><li><a href=https://github.com/bevyengine/bevy/pull/8514>bevy_reflect: Allow <code>#[reflect(default)]</code> on enum variant fields</a><li><a href=https://github.com/bevyengine/bevy/pull/8776>Add FromReflect where Reflect is used</a><li><a href=https://github.com/bevyengine/bevy/pull/8691>Add get_at_mut to bevy_reflect::Map trait</a><li><a href=https://github.com/bevyengine/bevy/pull/8764>Reflect now requires DynamicTypePath. Remove Reflect::get_type_path()</a><li><a href=https://github.com/bevyengine/bevy/pull/8495>bevy_ui: Add <code>FromReflect</code> derives</a><li><a href=https://github.com/bevyengine/bevy/pull/8531>Add Reflect and FromReflect for AssetPath</a><li><a href=https://github.com/bevyengine/bevy/pull/8014>bevy_reflect: Fix trailing comma breaking derives</a><li><a href=https://github.com/bevyengine/bevy/pull/8184>Fix Box<dyn reflect> struct with a hashmap in it panicking when clone_value is called on it <li><a href=https://github.com/bevyengine/bevy/pull/8496>bevy_reflect: Add <code>ReflectFromReflect</code> to the prelude</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8723>bevy_reflect: Allow construction of MapIter outside of the bevy_reflect crate.</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8761>bevy_reflect: Disambiguate type bounds in where clauses.</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7454>adding reflection for Cow<'static, [T]></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8891>Do not require mut on ParsedPath::element_mut</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8905>Reflect UUID</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7112>Don't ignore additional entries in <code>UntypedReflectDeserializerVisitor</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7407>Construct Box<dyn reflect> from world for ReflectComponent <li><a href=https://github.com/bevyengine/bevy/pull/8957>reflect: avoid deadlock in GenericTypeCell</a></li> <h3 id=app>App <a class=anchor-link href=#app>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8097>Allow tuples and single plugins in <code>add_plugins</code>, deprecate <code>add_plugin</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8585>Merge ScheduleRunnerSettings into ScheduleRunnerPlugin</a><li><a href=https://github.com/bevyengine/bevy/pull/8740>correctly setup everything in the default run_once runner</a><li><a href=https://github.com/bevyengine/bevy/pull/8103>Fix <code>Plugin::build</code> detection</a><li><a href=https://github.com/bevyengine/bevy/pull/9054>Fix not calling App::finish and App::cleanup in <code>ScheduleRunnerPlugin</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8961>Relaxed runner type from Fn to FnOnce</a><li><a href=https://github.com/bevyengine/bevy/pull/8982>Relax FnMut to FnOnce in app::edit_schedule</a></ul> <h3 id=windowing-reflection>Windowing + Reflection <a class=anchor-link href=#windowing-reflection>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/7993>Register missing types in bevy_window</a><li><a href=https://github.com/bevyengine/bevy/pull/8771>bevy_reflect: implement Reflect for SmolStr</a></ul> <h3 id=hierarchy>Hierarchy <a class=anchor-link href=#hierarchy>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8346>fix panic when moving child</a><li><a href=https://github.com/bevyengine/bevy/pull/8476>Remove <code>Children</code> component when calling <code>despawn_descendants</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8928>Change <code>despawn_descendants</code> to return <code>&mut Self</code></a></ul> <h3 id=time>Time <a class=anchor-link href=#time>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8467>Fix timer with zero duration</a></ul> <h3 id=assets>Assets <a class=anchor-link href=#assets>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8503>Delay asset hot reloading</a><li><a href=https://github.com/bevyengine/bevy/pull/5370>Add support for custom glTF vertex attributes.</a><li><a href=https://github.com/bevyengine/bevy/pull/8485>Fix panic when using debug_asset_server</a><li><a href=https://github.com/bevyengine/bevy/pull/7938><code>unused_variables</code> warning when building with <code>filesystem_watcher</code> feature disabled</a><li><a href=https://github.com/bevyengine/bevy/pull/8470>bevy_asset: Add <code>LoadContext::get_handle_untyped</code></a></ul> <h3 id=windowing>Windowing <a class=anchor-link href=#windowing>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/7988>Move cursor position to internal state</a><li><a href=https://github.com/bevyengine/bevy/pull/7966>Set cursor hittest during window creation</a><li><a href=https://github.com/bevyengine/bevy/pull/7996>do not set hit test unconditionally on window creation</a><li><a href=https://github.com/bevyengine/bevy/pull/8722>Add winit's <code>wayland-csd-adwaita</code> feature to Bevy's <code>wayland</code> feature</a><li><a href=https://github.com/bevyengine/bevy/pull/8593>Support to set window theme and expose system window theme changed event</a><li><a href=https://github.com/bevyengine/bevy/pull/8791>Touchpad magnify and rotate events</a><li><a href=https://github.com/bevyengine/bevy/pull/8903>Fix windows not being centered properly when system interface is scaled</a><li><a href=https://github.com/bevyengine/bevy/pull/9016>Expose WindowDestroyed events</a></ul> <h3 id=animation>Animation <a class=anchor-link href=#animation>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/9023>Register bevy_animation::PlayingAnimation</a></ul> <h3 id=ui>UI <a class=anchor-link href=#ui>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/7795>Ui Node Borders</a><li><a href=https://github.com/bevyengine/bevy/pull/8026>Add CSS Grid support to <code>bevy_ui</code></a><li><a href=https://github.com/bevyengine/bevy/pull/7779><code>text_system</code> split</a><li><a href=https://github.com/bevyengine/bevy/pull/8549>Replace the local text queues in the text systems with flags stored in a component</a><li><a href=https://github.com/bevyengine/bevy/pull/8947><code>NoWrap</code> <code>Text</code> feature</a><li><a href=https://github.com/bevyengine/bevy/pull/8445>add a default font</a><li><a href=https://github.com/bevyengine/bevy/pull/8822>UI texture atlas support</a><li><a href=https://github.com/bevyengine/bevy/pull/8793>Improved UI render batching</a><li><a href=https://github.com/bevyengine/bevy/pull/8306>Consistent screen-space coordinates</a><li><a href=https://github.com/bevyengine/bevy/pull/8199><code>UiImage</code> helper functions</a><li><a href=https://github.com/bevyengine/bevy/pull/7819>Perform text scaling calculations per text, not per glyph</a><li><a href=https://github.com/bevyengine/bevy/pull/8197>Fix size of clipped text glyphs.</a><li><a href=https://github.com/bevyengine/bevy/pull/8545>Apply scale factor to <code>ImageMeasure</code> sizes</a><li><a href=https://github.com/bevyengine/bevy/pull/8933>Fix WebGPU error in "ui_pipeline" by adding a flat interpolate attribute</a><li><a href=https://github.com/bevyengine/bevy/pull/9027>Rename Interaction::Clicked -> Interaction::Pressed</a><li><a href=https://github.com/bevyengine/bevy/pull/8548>Flatten UI <code>Style</code> properties that use <code>Size</code> + remove <code>Size</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8095>Split UI <code>Overflow</code> by axis</a><li><a href=https://github.com/bevyengine/bevy/pull/7930>Add methods for calculating the size and postion of UI nodes</a><li><a href=https://github.com/bevyengine/bevy/pull/7809>Skip the UV calculations for untextured UI nodes</a><li><a href=https://github.com/bevyengine/bevy/pull/8425>Fix text measurement algorithm</a><li><a href=https://github.com/bevyengine/bevy/pull/8720>Divide by UiScale when converting UI coordinates from physical to logical</a><li><a href=https://github.com/bevyengine/bevy/pull/8402><code>MeasureFunc</code> improvements</a><li><a href=https://github.com/bevyengine/bevy/pull/8522>Expose sorting methods in <code>Children</code></a><li><a href=https://github.com/bevyengine/bevy/pull/7948>Fix min and max size using size value</a><li><a href=https://github.com/bevyengine/bevy/pull/8019>Fix the <code>Text2d</code> text anchor's incorrect horizontal alignment</a><li><a href=https://github.com/bevyengine/bevy/pull/7485>Remove <code>Val::Undefined</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8137><code>Val</code> viewport unit variants</a><li><a href=https://github.com/bevyengine/bevy/pull/8294>Remove the corresponding measure from Taffy when a <code>CalculatedSize</code> component is removed.</a><li><a href=https://github.com/bevyengine/bevy/pull/7656><code>UiRect</code> axes constructor</a><li><a href=https://github.com/bevyengine/bevy/pull/8195>Fix the UV calculations for clipped and flipped ImageNodes</a><li><a href=https://github.com/bevyengine/bevy/pull/8422>Fix text systems broken when resolving merge conflicts in #8026</a><li><a href=https://github.com/bevyengine/bevy/pull/8437>Allow <code>bevy_ui</code> crate to compile without the <code>text</code> feature enabled</a><li><a href=https://github.com/bevyengine/bevy/pull/8264>Fix the double leaf node updates in <code>flex_node_system</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8456>also import the default handle when feature disabled</a><li><a href=https://github.com/bevyengine/bevy/pull/8466><code>measure_text_system</code> text query fix</a><li><a href=https://github.com/bevyengine/bevy/pull/8497>Fix panic in example: text_wrap_debug.rs</a><li><a href=https://github.com/bevyengine/bevy/pull/8521>UI layout tree debug print</a><li><a href=https://github.com/bevyengine/bevy/pull/8551>Fix <code>Node::physical_rect</code> and add a <code>physical_size</code> method</a><li><a href=https://github.com/bevyengine/bevy/pull/8795>Perform <code>relative_cursor_position</code> calculation vectorwise in <code>ui_focus_system</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8866>Add <code>UiRect::px()</code> and <code>UiRect::percent()</code> utils</a><li><a href=https://github.com/bevyengine/bevy/pull/8920>Add missing dependencies to <code>bevy_text</code> feature</a><li><a href=https://github.com/bevyengine/bevy/pull/8907>Remove "bevy_text" feature attributes on imports used by non-text systems</a><li><a href=https://github.com/bevyengine/bevy/pull/8931>Growing UI nodes Fix</a></ul> <h3 id=ecs>ECS <a class=anchor-link href=#ecs>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8079>Schedule-First: the new and improved add_systems</a><li><a href=https://github.com/bevyengine/bevy/pull/7936>Add OnTransition schedule that is ran between OnExit and OnEnter</a><li><a href=https://github.com/bevyengine/bevy/pull/7676><code>run_if</code> for <code>SystemConfigs</code> via anonymous system sets</a><li><a href=https://github.com/bevyengine/bevy/pull/8260>Remove OnUpdate system set</a><li><a href=https://github.com/bevyengine/bevy/pull/8726>Rename apply_system_buffers to apply_deferred</a><li><a href=https://github.com/bevyengine/bevy/pull/8814>Rename Command's "write" method to "apply"</a><li><a href=https://github.com/bevyengine/bevy/pull/7086>Require <code>#[derive(Event)]</code> on all Events</a><li><a href=https://github.com/bevyengine/bevy/pull/6960>Implement WorldQuery for EntityRef</a><li><a href=https://github.com/bevyengine/bevy/pull/7085>Improve or-with disjoint checks</a><li><a href=https://github.com/bevyengine/bevy/pull/8849>Add a method to run read-only systems using <code>&World</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8053>Reduce branching when inserting components</a><li><a href=https://github.com/bevyengine/bevy/pull/8030>Make <code>#[system_param(ignore)]</code> and <code>#[world_query(ignore)]</code> unnecessary</a><li><a href=https://github.com/bevyengine/bevy/pull/8265>Remove <code>#[system_param(ignore)]</code> and <code>#[world_query(ignore)]</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8119>Extend the <code>WorldQuery</code> macro to tuple structs</a><li><a href=https://github.com/bevyengine/bevy/pull/8009>Make state private and only accessible through getter for State resource</a><li><a href=https://github.com/bevyengine/bevy/pull/8668>implement <code>Deref</code> for <code>State&LTS></code></a><li><a href=https://github.com/bevyengine/bevy/pull/8083>Inline more ECS functions</a><li><a href=https://github.com/bevyengine/bevy/pull/8387>Add a <code>scope</code> API for world schedules</a><li><a href=https://github.com/bevyengine/bevy/pull/8377>Simplify system piping and make it more flexible</a><li><a href=https://github.com/bevyengine/bevy/pull/8326>Add <code>any_component_removed</code> condition</a><li><a href=https://github.com/bevyengine/bevy/pull/8174>Use <code>UnsafeWorldCell</code> to increase code quality for <code>SystemParam</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8292>Improve safety for the multi-threaded executor using <code>UnsafeWorldCell</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8833>Migrate the rest of the engine to <code>UnsafeWorldCell</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8721>Make the <code>Condition</code> trait generic</a><li><a href=https://github.com/bevyengine/bevy/pull/8714>Add or_else combinator to run_conditions.rs</a><li><a href=https://github.com/bevyengine/bevy/pull/8772>Add iter_many_manual QueryState method</a><li><a href=https://github.com/bevyengine/bevy/pull/8987>Provide access to world storages via UnsafeWorldCell</a><li><a href=https://github.com/bevyengine/bevy/pull/8844>Added Has<t> WorldQuery type <li><a href=https://github.com/bevyengine/bevy/pull/8951>Add/fix <code>track_caller</code> attribute on panicking entity accessor methods</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7905>Increase type safety and clarity for change detection</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7964>Make <code>WorldQuery</code> meta types unnameable</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7931>Add a public constructor for <code>Mut&LTT></code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7902>Remove ChangeTrackers</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/9020>Derive Eq, PartialEq for Tick</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7911>Initialize empty schedules when calling <code>.in_schedule</code> if they do not already exist</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8001>Replace multiple calls to <code>add_system</code> with <code>add_systems</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7950>don't panic on unknown ambiguity</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8060>add Clone to common conditions</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8068>Make BundleInfo's fields not pub(crate)</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8029>Pass query change ticks to <code>QueryParIter</code> instead of always using change ticks from <code>World</code>.</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8108>Remove redundant bounds check in <code>Entities::get</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8028>Add World::try_run_schedule</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8105>change not implemation to custom system struct</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8012>Fix name conflicts caused by the <code>SystemParam</code> and <code>WorldQuery</code> macros</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8154>Check for conflicting accesses in <code>assert_is_system</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8163>Fix field visibility for read-only <code>WorldQuery</code> types</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8212><code>Or&LTT></code> should be a new type of <code>PhantomData&LTT></code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8249>Make standard commands more ergonomic (in niche cases)</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8269>Remove base set error variants of <code>ScheduleBuildError</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8274>Replace some unsafe system executor code with safe code</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8295>Update <code>increment_change_tick</code> to return a strongly-typed <code>Tick</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7732>Move event traces to detailed_trace!</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8359>Only trigger state transitons if <code>next_state != old_state</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8364>Fix panics and docs when using World schedules</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8000>Improve warning for Send resources marked as non_send</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8419>Reorganize system modules</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8436>Fix boxed labels</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8403>Simplify world schedule methods</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8494>Just print out name string, not the entire Name struct</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8529>Manually implement common traits for <code>EventId</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8567>Replace remaining uses of <code>&T, Changed&LTT></code> with <code>Ref</code> in UI system queries</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8588>Rename <code>UnsafeWorldCell::read_change_tick</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8725>Improve encapsulation for commands and add docs</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8743>Fix all_tuples + added docs.</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8797>Add <code>new</code> and <code>map</code> methods to <code>Ref</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8817>Allow unsized types as mapped value in <code>Ref::map</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8826>Implement <code>Clone</code> for <code>CombinatorSystem</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8818>Add get_ref to EntityRef</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8848>Make <code>QueryParIter::for_each_unchecked</code> private</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8845>Simplify the <code>ComponentIdFor</code> type</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8803>Add last_changed_tick and added_tick to ComponentTicks</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8832>Require read-only queries in <code>QueryState::par_iter</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8939>Fix any_component_removed</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8843>Deprecate type aliases for <code>WorldQuery::Fetch</code></a></li> <li><a href=https://github.com/bevyengine/bevy/pull/7204>bevy_ecs: add untyped methods for inserting components and bundles</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8901>Move AppTypeRegistry to bevy_ecs</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8760>skip check change tick for apply_deferred systems</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8834>Split the bevy_ecs reflect.rs module</a></li> <li><a href=https://github.com/bevyengine/bevy/pull/8687>Make function pointers of ecs Reflect* public</a></li> <h3 id=rendering-reflection-scenes>Rendering + Reflection + Scenes <a class=anchor-link href=#rendering-reflection-scenes>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8088>fix: register Cascade in the TypeRegistry</a></ul> <h3 id=tasks>Tasks <a class=anchor-link href=#tasks>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/6690>Add optional single-threaded feature to bevy_ecs/bevy_tasks</a></ul> <h3 id=math>Math <a class=anchor-link href=#math>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8232>Re-export glam_assert feature</a><li><a href=https://github.com/bevyengine/bevy/pull/8049>Fix CubicCurve::iter_samples iteration count</a><li><a href=https://github.com/bevyengine/bevy/pull/7984>Add integer equivalents for <code>Rect</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8711>Add <code>CubicCurve::segment_count</code> + <code>iter_samples</code> adjustment</a></ul> <h3 id=rendering-assets-meta>Rendering + Assets + Meta <a class=anchor-link href=#rendering-assets-meta>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/7855>Add depending bevy features for higher level one</a></ul> <h3 id=ecs-scenes>ECS + Scenes <a class=anchor-link href=#ecs-scenes>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/7335>Make scene handling of entity references robust</a><li><a href=https://github.com/bevyengine/bevy/pull/7570>Rename map_entities and map_specific_entities</a></ul> <h3 id=util>Util <a class=anchor-link href=#util>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8552>bevy_derive: Add <code>#[deref]</code> attribute</a></ul> <h3 id=input>Input <a class=anchor-link href=#input>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8398>Add gamepad rumble support to bevy_input</a><li><a href=https://github.com/bevyengine/bevy/pull/8792>Rename keys like <code>LAlt</code> to <code>AltLeft</code></a><li><a href=https://github.com/bevyengine/bevy/pull/8852>Add window entity to mouse and keyboard events</a><li><a href=https://github.com/bevyengine/bevy/pull/8871>Add get_unclamped to Axis</a></ul> <h3 id=upgrades>Upgrades <a class=anchor-link href=#upgrades>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/7959>Upgrade Taffy requirement to v0.3.5</a><li><a href=https://github.com/bevyengine/bevy/pull/8622>Update ruzstd and basis universal</a><li><a href=https://github.com/bevyengine/bevy/pull/8446>Updated to wgpu 0.16.0, wgpu-hal 0.16.0 and naga 0.12.0</a><li><a href=https://github.com/bevyengine/bevy/pull/8650>Update sysinfo requirement from 0.28.1 to 0.29.0</a><li><a href=https://github.com/bevyengine/bevy/pull/8649>Update libloading requirement from 0.7 to 0.8</a><li><a href=https://github.com/bevyengine/bevy/pull/8573>update syn, encase, glam and hexasphere</a><li><a href=https://github.com/bevyengine/bevy/pull/7925>Update android_log-sys requirement from 0.2.0 to 0.3.0</a><li><a href=https://github.com/bevyengine/bevy/pull/8728>update bitflags to 2.3</a><li><a href=https://github.com/bevyengine/bevy/pull/8755>Update ruzstd requirement from 0.3.1 to 0.4.0</a><li><a href=https://github.com/bevyengine/bevy/pull/8757>Update notify requirement from 5.0.0 to 6.0.0</a><li><a href=https://github.com/bevyengine/bevy/pull/8904>Bump hashbrown to 0.14</a><li><a href=https://github.com/bevyengine/bevy/pull/8623>update ahash and hashbrown</a><li><a href=https://github.com/bevyengine/bevy/pull/8655>Bump accesskit and accesskit_winit</a></ul> <h3 id=examples>Examples <a class=anchor-link href=#examples>#</a></h3> <ul><li><a href=https://github.com/bevyengine/bevy/pull/8561>new example showcase tool</a><li><a href=https://github.com/bevyengine/bevy/pull/8194>Adding a bezier curve example</a><li><a href=https://github.com/bevyengine/bevy/pull/6909>Add low level post process example using a custom render pass</a><li><a href=https://github.com/bevyengine/bevy/pull/8909>Add example to demonstrate manual generation and UV mapping of 3D mesh (generate_custom_mesh) solve #4922</a><li><a href=https://github.com/bevyengine/bevy/pull/8198>Add <code>overflow_debug</code> example</a><li><a href=https://github.com/bevyengine/bevy/pull/7761>UI text wrapping and <code>LineBreakOn</code> example</a><li><a href=https://github.com/bevyengine/bevy/pull/7956>Size Constraints Example</a><li><a href=https://github.com/bevyengine/bevy/pull/7629>UI Display and Visibility Example</a></ul> <script type=module>import{enable_image_compare as a}from"/components.js";document.addEventListener(`DOMContentLoaded`,(()=>{a()}))</script> <footer class=print:hidden><div class=footer__social-container><a class=footer__social href=https://github.com/bevyengine/bevy title=GitHub> <img alt="GitHub logo" height=24 src=/assets/github-mark-white.svg width=24> </a><a class=footer__social href=https://discord.gg/bevy title=Discord> <img alt="Discord logo" height=24 src=/assets/discord.svg width=24> </a><a class=footer__social href=https://bsky.app/profile/bevy.org title=Bluesky> <img alt="Bluesky logo" height=24 src=/assets/bluesky.svg width=24> </a><a class=footer__social href=https://mastodon.social/@bevy title=Mastodon> <img alt="Mastodon logo" height=24 src=/assets/mastodon-logo-purple.svg width=24> </a><a class=footer__social href=https://www.reddit.com/r/bevy/ title=Reddit> <img alt="Reddit logo" height=24 src=/assets/reddit.svg width=24> </a><a class=footer__social href=https://itch.io/games/tag-bevy title=itch.io> <img alt="itch.io logo" height=24 src=/assets/itchio-textless.svg width=24> </a><a title="Bevy news feed" class=footer__social href=/atom.xml> <img alt="Bevy news feed" height=24 src=/assets/feed.svg width=24> </a></div></footer> <script>const search_params=new URLSearchParams(window.location.search);if(search_params.has(`show_drafts`)||document.cookie.indexOf(`show_drafts`)>=0){let a=`show_drafts`;if(search_params.get(a)===`0`){document.cookie=`show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC`}else{document.cookie=`show_drafts=1;path=/`;document.body.classList.add(a)}}</script> 