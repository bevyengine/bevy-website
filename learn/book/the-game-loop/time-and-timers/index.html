<!doctype html><html class=light-mode lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Bevy Book: Time and Timers" property=og:title><meta content=website property=og:type><meta content=https://bevy.org//learn/book/the-game-loop/time-and-timers/ property=og:url><meta content=https://bevy.org/assets/bevy_logo_fill.png property=og:image><meta content="Responding to the passage of time is essential for gameplay, animations and audio.
But doing so correctly is surprisingly subtle.
The Time resource inâ€¦" property=og:description><link rel="shortcut icon" href=/assets/favicon.png type=image/png><link href=/site.css rel=stylesheet><link href=/atom.xml rel=alternate type=application/atom+xml><title>Bevy Book: Time and Timers</title><script src=/optional-helpers.js></script><script defer src=/highlight-intrapage-link.js></script><script defer src=/clipboard.js></script><body><div class=layout><input class=hidden id=mobile-menu-state type=checkbox><header class="layout__header header print:hidden" data-mobile-menu-state-container><div class=header__content><label class=main-menu-backdrop for=mobile-menu-state></label><label class="header__hamburger button-square button-square--header" for=mobile-menu-state><img alt="Three horizontal lines stacked on top of eachother" height=16 src=/assets/icon-hamburger.svg width=20></label><div class=header__left-block><a class=header__logo href=/> <picture class=logo><img alt="Bevy logo" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><div class=header__message>The Book</div></div><input checked class=hidden id=page-menu-switch-state type=checkbox><nav class="header__menu main-menu main-menu--with-page-menu" data-page-menu-switch-state-container role=navigation><div class=main-menu__header><a href=/> <picture class=logo><img alt="Bevy Engine" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><label class="button-square button-square--header" for=mobile-menu-state><img alt="A saltire or x-cross" height=16 src=/assets/icon-times.svg width=16></label></div><div class=main-menu__page-menu-switch><label class=menu-switch for=page-menu-switch-state><div class="menu-switch__option menu-switch__option--main-menu">Main Menu</div> <div class="menu-switch__option menu-switch__option--page-menu">The Book</div></label></div><div class=main-menu__content><div class=main-menu__page-menu><ul class=tree-menu><input class=tree-menu__state id=mobile-menu-learn-book-intro type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/intro/>Introduction</a><label class=tree-menu__toggle for=mobile-menu-learn-book-intro><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/intro/what-is-bevy/>What is Bevy?</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/intro/the-three-letters/>The E, the C, and the S</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/intro/the-next-three-letters/>Resources, Queries, and Commands</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/intro/apps-worlds/>Apps and Worlds</a></div></ul></li><input class=tree-menu__state id=mobile-menu-learn-book-storing-data type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/storing-data/>Storing Data</a><label class=tree-menu__toggle for=mobile-menu-learn-book-storing-data><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/entities-components/>Entities Have Components</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/required-components/>Required Components</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/world/>The World</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/queries/>Queries</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/resources/>Resources</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/relations/>Relations</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/local-system-param/>System-Local Data Storage</a></div></ul></li><input class=tree-menu__state id=mobile-menu-learn-book-control-flow type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/control-flow/>Control Flow</a><label class=tree-menu__toggle for=mobile-menu-learn-book-control-flow><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/systems/>Systems</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/run-conditions/>Skipping systems</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/states/>States</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/commands/>Commands</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/handling-errors/>Handling Errors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/change-detection/>Change Detection</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/events/>Events</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/lifecycle-events/>Component Lifecycles</a></div></ul></li><input checked class=tree-menu__state id=mobile-menu-learn-book-the-game-loop type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/the-game-loop/>The Game Loop</a><label class=tree-menu__toggle for=mobile-menu-learn-book-the-game-loop><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/app/>App</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/schedules/>Schedules</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/rendering-frames/>Rendering frames</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/input-and-windowing/>Input and windowing</a></div><li class="tree-menu__item tree-menu__item--active"><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/time-and-timers/>Time and Timers</a><nav aria-label="On This Page" class="on-this-page tree-menu__toc" data-highlight-intrapage-link><ul><li><a href=#frame-rate-independence-and-delta-time>Frame-rate independence and delta time</a><li><a href=#pausing-and-time-control>Pausing and time control</a><li><a href=#fixing-your-timestep>Fixing your timestep</a> <ul><li><a href=#interpolation-between-ticks>Interpolation between ticks</a></ul><li><a href=#timers-and-cooldowns>Timers and cooldowns</a></ul></nav></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/custom-loops/>Custom Loops</a></div></ul></li><input class=tree-menu__state id=mobile-menu-learn-book-modular-architecture type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/modular-architecture/>Modular Architecture</a><label class=tree-menu__toggle for=mobile-menu-learn-book-modular-architecture><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/modular-architecture/plugins/>Plugins</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/modular-architecture/project-organization/>Project Organization</a></div></ul></li><input class=tree-menu__state id=mobile-menu-learn-book-development-practices type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/development-practices/>Development Practices</a><label class=tree-menu__toggle for=mobile-menu-learn-book-development-practices><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/fast-compiles/>Fast Compiles</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/hot-reloading/>Hot Reloading Code and Assets</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/debugging/>Debugging</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/testing/>Testing Bevy apps</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/linting/>Linting</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/dev-tools/>Dev tools</a></div></ul></li><input class=tree-menu__state id=mobile-menu-learn-book-releasing-projects type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/releasing-projects/>Releasing Projects</a><label class=tree-menu__toggle for=mobile-menu-learn-book-releasing-projects><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/releasing-projects/profiling/>Profiling</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/releasing-projects/optimizing-performance/>Optimizing Performance</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/releasing-projects/optimizing-binary-size/>Optimizing Binary Size</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/releasing-projects/libraries-for-bevy/>Creating libraries for Bevy</a></div></ul></ul></div><ul class=main-menu__menu><li class="main-menu__entry main-menu__entry--getting-started"><a class=main-menu__link href=/learn/quick-start/getting-started/> <span>Getting Started</span> </a><li class=main-menu__entry><a class="main-menu__link main-menu__link--active" href=/learn/> <span>Learn</span> </a><li class=main-menu__entry><a class=main-menu__link href=/news/> <span>News</span> </a><li class=main-menu__entry><a class=main-menu__link href=/community/> <span>Community</span> </a><li class=main-menu__entry><a class=main-menu__link href=/foundation/> <span>Foundation</span> </a><li class=main-menu__entry><a class=main-menu__link href=/assets/> <span>Assets</span> </a><li class=main-menu__entry><a class=main-menu__link href=/examples/> <span>Examples</span> </a></ul></div></nav><div class=header__cta-container><a class="button button--pink header__cta" href=/donate>Donate <img alt="heart icon" class=button__icon height=512 src=/assets/heart.svg width=512> </a><a class="header__cta header__cta--github" href=https://github.com/bevyengine/bevy> <img alt="GitHub repo" height=96 src=/assets/github-mark-white.svg width=98> </a></div></div></header><main class=layout__content><div class=container><h1 class=warning>This page is hidden because an ancestor is hidden</h1><div class=page-with-menu><div class="page-with-menu__menu-wrapper print:hidden"><div class=page-with-menu__menu><ul class=tree-menu><input class=tree-menu__state id=page-menu-learn-book-intro type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/intro/>Introduction</a><label class=tree-menu__toggle for=page-menu-learn-book-intro><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/intro/what-is-bevy/>What is Bevy?</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/intro/the-three-letters/>The E, the C, and the S</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/intro/the-next-three-letters/>Resources, Queries, and Commands</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/intro/apps-worlds/>Apps and Worlds</a></div></ul></li><input class=tree-menu__state id=page-menu-learn-book-storing-data type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/storing-data/>Storing Data</a><label class=tree-menu__toggle for=page-menu-learn-book-storing-data><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/entities-components/>Entities Have Components</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/required-components/>Required Components</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/world/>The World</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/queries/>Queries</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/resources/>Resources</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/relations/>Relations</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/storing-data/local-system-param/>System-Local Data Storage</a></div></ul></li><input class=tree-menu__state id=page-menu-learn-book-control-flow type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/control-flow/>Control Flow</a><label class=tree-menu__toggle for=page-menu-learn-book-control-flow><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/systems/>Systems</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/run-conditions/>Skipping systems</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/states/>States</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/commands/>Commands</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/handling-errors/>Handling Errors</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/change-detection/>Change Detection</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/events/>Events</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/control-flow/lifecycle-events/>Component Lifecycles</a></div></ul></li><input checked class=tree-menu__state id=page-menu-learn-book-the-game-loop type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/the-game-loop/>The Game Loop</a><label class=tree-menu__toggle for=page-menu-learn-book-the-game-loop><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/app/>App</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/schedules/>Schedules</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/rendering-frames/>Rendering frames</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/input-and-windowing/>Input and windowing</a></div><li class="tree-menu__item tree-menu__item--active"><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/time-and-timers/>Time and Timers</a><nav aria-label="On This Page" class="on-this-page tree-menu__toc" data-highlight-intrapage-link><ul><li><a href=#frame-rate-independence-and-delta-time>Frame-rate independence and delta time</a><li><a href=#pausing-and-time-control>Pausing and time control</a><li><a href=#fixing-your-timestep>Fixing your timestep</a> <ul><li><a href=#interpolation-between-ticks>Interpolation between ticks</a></ul><li><a href=#timers-and-cooldowns>Timers and cooldowns</a></ul></nav></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/the-game-loop/custom-loops/>Custom Loops</a></div></ul></li><input class=tree-menu__state id=page-menu-learn-book-modular-architecture type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/modular-architecture/>Modular Architecture</a><label class=tree-menu__toggle for=page-menu-learn-book-modular-architecture><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/modular-architecture/plugins/>Plugins</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/modular-architecture/project-organization/>Project Organization</a></div></ul></li><input class=tree-menu__state id=page-menu-learn-book-development-practices type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/development-practices/>Development Practices</a><label class=tree-menu__toggle for=page-menu-learn-book-development-practices><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/fast-compiles/>Fast Compiles</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/hot-reloading/>Hot Reloading Code and Assets</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/debugging/>Debugging</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/testing/>Testing Bevy apps</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/linting/>Linting</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/development-practices/dev-tools/>Dev tools</a></div></ul></li><input class=tree-menu__state id=page-menu-learn-book-releasing-projects type=checkbox><li class=tree-menu__item><div class="tree-menu__label tree-menu__label--with-chevron"><a class=tree-menu__link href=/learn/book/releasing-projects/>Releasing Projects</a><label class=tree-menu__toggle for=page-menu-learn-book-releasing-projects><img alt="A chevron, or V-shaped symbol" class=tree-menu__chevron height=24 src=/assets/icon-chevron-down.svg width=15></label></div> <ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/releasing-projects/profiling/>Profiling</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/releasing-projects/optimizing-performance/>Optimizing Performance</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/releasing-projects/optimizing-binary-size/>Optimizing Binary Size</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/book/releasing-projects/libraries-for-bevy/>Creating libraries for Bevy</a></div></ul></ul></div></div><div class=page-with-menu__content><div class=docs-page><div class=docs-content><h1>Time and Timers</h1><div class=media-content><p>Responding to the passage of time is essential for gameplay, animations and audio. But doing so correctly is surprisingly subtle.<p>The <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Time.html><code>Time</code></a> resource in Bevy is the source of truth for the "current in-game time". Unlike <a href=https://doc.rust-lang.org/std/time/struct.Instant.html#method.now><code>Instant::now()</code></a>, the <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Time.html><code>Time</code></a> is fixed for the entire frame, rather than reflecting the precise wall clock time at the time of system evaluation. Time is derived from a clock whose value is fixed for the entire frame, set at the start of the frame based on the time supplied by the renderer during the <a href=https://docs.rs/bevy/latest/bevy/time/struct.TimeSystem.html><code>TimeSystem</code></a> system set in the <a href=https://docs.rs/bevy/latest/bevy/app/struct.First.html><code>First</code></a> schedule.<p>This is helpful for performance reasons, but more critically, it ensures consistency of behavior across all of the various bits of game logic.<h2 id=frame-rate-independence-and-delta-time>Frame-rate independence and delta time <a class=anchor-link href=#frame-rate-independence-and-delta-time>#</a></h2><p>Suppose we want to move our player to the right:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">prelude<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-keyword z-operator z-arithmetic z-rust">*</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Component</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Player</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">move_player</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">player_transform</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Single<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Transform, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> With Bevy's default camera setup and a 60 fps framerate, 
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> this will move the player 60 pixels per second in 2D (reasonable),
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> or 60 meters per second in 3D (wheee!)
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">PLAYER_MOVEMENT</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    player_transform<span class="z-punctuation z-accessor z-dot z-rust">.</span>translation<span class="z-punctuation z-accessor z-dot z-rust">.</span>x <span class="z-keyword z-operator z-assignment z-rust">+=</span> <span class="z-constant z-other z-rust">PLAYER_MOVEMENT</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Every frame, our player will move 1 unit to the right. Great! But what happens when our game stutters, and the frame rate drops? Suddenly, rather than moving 60 units per second at our target 60 frames per second, our player is moving at an unsteady 20-30 units per second. Oh no!<p>Instead, we can compensate for this effect by fixing our <em>speed</em> (or other rates of change per second), and then multiplying by the elapsed time.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">move_player</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">player_transform</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Single<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Transform, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Player<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">time</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Time<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> At 60 FPS, this will be the same as before
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">PLAYER_SPEED</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-float z-rust">60.</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    player_transform<span class="z-punctuation z-accessor z-dot z-rust">.</span>translation<span class="z-punctuation z-accessor z-dot z-rust">.</span>x <span class="z-keyword z-operator z-assignment z-rust">+=</span> <span class="z-constant z-other z-rust">PLAYER_SPEED</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> time<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">delta_secs</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>This technique is commonly known as <a href=https://en.wikipedia.org/wiki/Delta_timing>"delta time"</a> among game devs, because physicists use "delta" to mean "a change in a quantity".<h2 id=pausing-and-time-control>Pausing and time control <a class=anchor-link href=#pausing-and-time-control>#</a></h2><p>With all of our time-dependent logic driven by the delta time, we can start playing tricks with the value of <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Time.html><code>Time</code></a> to implement features like pausing and slowing down the game. To do this, we need to change how we account for <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Virtual.html><code>Virtual</code></a> (in-game) time:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">prelude<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-keyword z-operator z-arithmetic z-rust">*</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">toggle_pause</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">time</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Time<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Virtual<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> time<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">is_paused</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        time<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unpause</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        time<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pause</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Event</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">SetGameSpeed</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-rust">f32</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">set_game_speed</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">time</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Time<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Virtual<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>SetGameSpeed<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>new_speed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">last</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        time<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_relative_speed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>new_speed<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>If your systems uniformly rely on <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Time.html><code>Time</code></a>, this will affect your entire game: halting, slowing or speeding up animations, movement, projectiles, physics and so on. Alternatively, <a href=../control-flow/states.md>states</a> and <a href=../control-flow/run-conditions.md>run conditions</a> can be used to skip systems while the game is paused.<h2 id=fixing-your-timestep>Fixing your timestep <a class=anchor-link href=#fixing-your-timestep>#</a></h2><p>Compensating for fluctuating frame times using delta time is a great start. But as the timeless <a href=https://gafferongames.com/post/fix_your_timestep/><em>Fix Your Timestep!</em></a> article by Glenn Fiedler explains, for projects that require a higher level of stability and reproducibility, it's better to simply always advance time by a fixed amount. This is particularly important for physics and networking.<p>To understand how to work with fixed time in Bevy, we need to first learn a little bit about how <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Time.html><code>Time</code></a> actually works under the hood. As the docs on <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Time.html><code>Time</code></a> explain, there's actually <em>three</em> distinct types of time being measured:<ul><li>real time: the actual wall clock time <ul><li>use this for things like UI animations that you don't want to be affected by pausing</ul><li>virtual time: the "in-game time" <ul><li>if you're using fixed time, this is useful for graphical effects<li>otherwise, this is used for all of your gameplay logic as well</ul><li>fixed time <ul><li>all of your gameplay logic should go here if you're using a fixed timestep approach</ul></ul><p>When thinking about fixed time, it's important to clearly distinguish <strong>frames</strong> and <strong>ticks</strong>. A "frame" is one pass of the <a href=https://docs.rs/bevy/latest/bevy/app/struct.Main.html><code>Main</code></a> schedule, and corresponds to a single rendered frames. A "tick" is one pass of the <a href=https://docs.rs/bevy/latest/bevy/app/struct.FixedMain.html><code>FixedMain</code></a> schedule, and corresponds to one iteration of gameplay logic. The ratio between frames elapsed and ticks elapsed is not constant: they may be faster or slower, depending on the rendering performance and your game's simulation needs.<aside class="callout callout--info"><p>Simply requesting [<code>Time</code>] in your systems will get you the correct flavor 90% of the time: virtual time in the [<code>Main</code>] schedule, and fixed time in the [<code>FixedMain</code>] schedule. To request a specific variation, change the implicit generic in [<code>Time</code>] from <code>()</code> to [<code>Real</code>], [<code>Virtual</code>] or [<code>Fixed</code>].</aside><p>Now that we have the required vocabulary, let's go over exactly how the fixed timestep logic works in Bevy:<ul><li>each frame, during the <a href=https://docs.rs/bevy/latest/bevy/app/struct.RunFixedMainLoop.html><code>RunFixedMainLoop</code></a> schedule, we determine how many times we should run the <a href=https://docs.rs/bevy/latest/bevy/app/struct.FixedMain.html><code>FixedMain</code></a> schedule <ul><li>we add the the elapsed virtual time for the frame to a running time buffer<li>if that time buffer is greater than or equal to <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Time.html#method.timestep><code>Time&LTFixed>::timestep</code></a>, we run the <a href=https://docs.rs/bevy/latest/bevy/app/struct.FixedMain.html><code>FixedMain</code></a> schedule once, and subtract that timestep from our buffer</ul><li>when the <a href=https://docs.rs/bevy/latest/bevy/app/struct.FixedMain.html><code>FixedMain</code></a> schedule is evaluated, the various subschedules are iterated through, running [<code>FixedPreUpdate</code>], [<code>FixedUpdate</code>] and so on in order<li>within your fixed time systems, use the exact same delta time techniques to properly account for changes in your desired timestep during development</ul><p>This means that we may have 0, 1, 2 or more ticks per frame, with our fixed timestep logic running repeatedly until it's caught back up. For even more detail, check out the documentation on <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Fixed.html><code>Fixed</code></a>.<p>Note that Bevy's "fixed timesteps" are not the right mechanism to use for gameplay logic like "every 5 seconds update this building". In most cases, <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Timer.html><code>Timer</code></a> components and the <a href=https://docs.rs/bevy/latest/bevy/time/common_conditions/fn.on_timer.html><code>on_timer</code></a> run condition are more appropriate.<p>Bevy only supports a single fixed timestep across your entire project, and its use is completely optional. Please see our [timers and cooldowns] section below for the tools available to model this type of behavior.<h3 id=interpolation-between-ticks>Interpolation between ticks <a class=anchor-link href=#interpolation-between-ticks>#</a></h3><p>One key problem with using a fixed timestep is that your game logic (including physics!) will have an uneven number of updates between each frame. This will lead to visible jittering, lagginess and tiny speedups.<p>To account for this, we need to distinguish between the logical and rendered position (and rotation, and sometimes scale) of game objects. This is a common problem and pattern for multiplayer games, but using a fixed timestep means that even single player games need to handle it.<p>The core strategy is simple enough: you need to keep track of "logical" and "visual" positions separately, and smooth out the visual position while tracking the logical position when updated. Unfortunately, the devil is in the details:<ol><li>Create your own custom <code>GameTransform</code> type, holding the translation/rotation/scale information that your project needs.<li>Modify and read this <code>GameTransform</code> type for all of your game logic and physics.<li>Interpolate between the previous <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.GlobalTransform.html><code>GlobalTransform</code></a> and the <code>GameTransform</code>, based on the elapsed <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Fixed.html><code>Fixed</code></a> time. <ol><li>This should occur after the final fixed update for the frame has run, but before rendering occurs.<li>The recommended location for this is <a href=https://docs.rs/bevy/latest/bevy/prelude/enum.RunFixedMainLoopSystems.html#variant.AfterFixedMainLoop><code>RunFixedMainLoopSystems::AfterFixedMainLoop</code></a> in the <a href=https://docs.rs/bevy/latest/bevy/app/struct.FixedMain.html><code>FixedMain</code></a> schedule.<li>You ultimately want to set the <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.GlobalTransform.html><code>GlobalTransform</code></a>, but doing this correctly in the presence of hierarchies is hard.<li>As a result, modifying the local <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Transform.html><code>Transform</code></a> and relying on transform propagation can be the least bad solution.</ol></ol><p>Bevy does not currently offer any built-in functionality for this form of interpolation, but open source <a href=https://bevy.org/assets/>ecosystem crates</a> are available to use and learn from.<p>Note that smooth yet responsive camera interpolation is particularly tricky! See the <a href=https://github.com/bevyengine/bevy/blob/latest/examples/movement/physics_in_fixed_timestep.rs><code>physics_in_fixed_timestep</code></a> example for a detailed breakdown of how to do this correctly.<h2 id=timers-and-cooldowns>Timers and cooldowns <a class=anchor-link href=#timers-and-cooldowns>#</a></h2><p>Delta time is great for physics and animations, but what if we want to implement other time-driven gameplay logic? We might want to automatically generate cookie clicks every 5 seconds or add a 3 second cooldown for our fireball ability.<p>The simplest of these tools is the <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Timer.html><code>Timer</code></a>. Timers in Bevy hold two <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Timer.html><code>Duration</code></a>s: one to store the duration of the timer, and one which stores how much time has been elapsed.<p>Timers have no inherent logic: they do not update themselves, or have any inherent way to add something like an "on completion callbacks". They are also not components: you cannot simply add a <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Timer.html><code>Timer</code></a> to an entity.<p>Instead, timers are intended to be wrapped inside of simple components, which are updated and polled for completion by systems.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Resource</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Cookies</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-rust">u64</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Component</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">AutomaticCookieClick</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This should be initialized as a repeating timer
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ensuring it automatically resets
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">timer</span><span class="z-punctuation z-separator z-type z-rust">:</span> Timer,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">resources_gained</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">u64</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">automatically_click_cookies</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">cookies</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Cookies<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, 
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> AutomaticCookieClick<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">time</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Time<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> delta_time <span class="z-keyword z-operator z-assignment z-rust">=</span> time<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">delta</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-storage z-modifier z-rust">mut</span> cookie_clicker <span class="z-keyword z-operator z-rust">in</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        cookie_clicker<span class="z-punctuation z-accessor z-dot z-rust">.</span>timer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">tick</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>delta_time</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> cookie_clicker<span class="z-punctuation z-accessor z-dot z-rust">.</span>timer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">just_finished</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            cookies<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span> <span class="z-keyword z-operator z-assignment z-rust">+=</span> cookie_clicker<span class="z-punctuation z-accessor z-dot z-rust">.</span>resources_gained<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>You could write your own cooldown mechanism in a similar way, by storing both a <code>duration</code> and a <code>remaining</code>. Tracking each ability as its own entity, using a custom <a href=../storing-data/relations.md>relationship</a> to link it to the entity with that ability would be an elegant solution, as it would allow you to update all cooldowns in a single system.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Relationship</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">relationship</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">relationship_target <span class="z-keyword z-operator z-rust">=</span> Abilities</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">AbilityOf</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity</span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">RelationshipTarget</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">relationship_target</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">relationship <span class="z-keyword z-operator z-rust">=</span> AbilityOf</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Abilities</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Entity<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Component</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Cooldown</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">duration</span><span class="z-punctuation z-separator z-type z-rust">:</span> Duration,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">remaining</span><span class="z-punctuation z-separator z-type z-rust">:</span> Duration,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust"><span class="z-entity z-name z-impl z-rust">Cooldown</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">expend</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">self</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span>remaining <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span>duration<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">  
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">is_ready</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-variable z-parameter z-rust">self</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-storage z-type z-rust">bool</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span>remaining <span class="z-keyword z-operator z-comparison z-rust">==</span> <span class="z-meta z-path z-rust">Duration<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">update_cooldowns</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">time</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Time<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">cooldowns</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Cooldown<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> delta_time <span class="z-keyword z-operator z-assignment z-rust">=</span> time<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">delta</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-storage z-modifier z-rust">mut</span> cooldown <span class="z-keyword z-operator z-rust">in</span> cooldowns<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> We never want our remaining time to become negative
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        cooldown<span class="z-punctuation z-accessor z-dot z-rust">.</span>remaining<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">saturating_sub</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>delta_time</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>To trigger a system periodically, the <code>on_timer</code> run condition can be very convenient.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">tick_buildings</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Building<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">   <span class="z-keyword z-control z-rust">for</span> query <span class="z-keyword z-operator z-rust">in</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">      building<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">tick</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">   </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">  <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> tick_buildings<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-function z-rust">on_timer</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Duration<span class="z-punctuation z-accessor z-rust">::</span></span>from_secs<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>Timers (and the <code>on_timer</code> run condition) can safely be ticked in any schedule. When they are in a fixed time schedule, the [<code>Time&LTFixed></code>] delta time will automatically be used instead.<p>Note that systems run periodically via an <code>on_timer</code> run condition are still blocking! While it is tempting to use them for very heavy, infrequent tasks (like chunk updating or path finding), a naive approach to this will simply result in your game stuttering every few seconds.<p>Instead, you should either split the work into bite-sized pieces that can safely be completed within a single frame, or spawn an async task which you periodically poll for completion.</div><div class="docs-footer print:hidden"><nav class=docs-footer__nav><a class="docs-footer__link docs-footer__link--next" data-docs-nav-next href=/learn/book/the-game-loop/custom-loops/> <div class=docs-footer__label><div class=docs-footer__dir>Next</div> Custom Loops</div> <i class="docs-footer__chevron icon icon--chevron-right"></i> </a><a class="docs-footer__link docs-footer__link--prev" data-docs-nav-previous href=/learn/book/the-game-loop/input-and-windowing/> <div class=docs-footer__label><div class=docs-footer__dir>Previous</div> Input and windowing</div> <i class="docs-footer__chevron icon icon--chevron-left"></i> </a></nav><div class=docs-footer__edit-wrapper><a class=docs-footer__edit href=https://github.com/bevyengine/bevy-website/edit/main/content/learn/book/the-game-loop/time-and-timers.md> <i class="icon icon--pencil"></i> Improve this page </a><a href="https://github.com/bevyengine/bevy-website/issues/new?template=docs.md&title=Issue%20on%20page%20Time%20and%20Timers" class=docs-footer__edit> <i class="icon icon--github"></i> Report issue </a></div></div></div></div></div></div></div></main><footer class=print:hidden><div class=footer__social-container><a class=footer__social href=https://github.com/bevyengine/bevy title=GitHub> <img alt="GitHub logo" height=24 src=/assets/github-mark-white.svg width=24> </a><a class=footer__social href=https://discord.gg/bevy title=Discord> <img alt="Discord logo" height=24 src=/assets/discord.svg width=24> </a><a class=footer__social href=https://bsky.app/profile/bevy.org title=Bluesky> <img alt="Bluesky logo" height=24 src=/assets/bluesky.svg width=24> </a><a class=footer__social href=https://mastodon.social/@bevy title=Mastodon> <img alt="Mastodon logo" height=24 src=/assets/mastodon-logo-purple.svg width=24> </a><a class=footer__social href=https://www.reddit.com/r/bevy/ title=Reddit> <img alt="Reddit logo" height=24 src=/assets/reddit.svg width=24> </a><a class=footer__social href=https://itch.io/games/tag-bevy title=itch.io> <img alt="itch.io logo" height=24 src=/assets/itchio-textless.svg width=24> </a><a title="Bevy news feed" class=footer__social href=/atom.xml> <img alt="Bevy news feed" height=24 src=/assets/feed.svg width=24> </a></div></footer></div><script>const search_params=new URLSearchParams(window.location.search);if(search_params.has(`show_drafts`)||document.cookie.indexOf(`show_drafts`)>=0){let a=`show_drafts`;if(search_params.get(a)===`0`){document.cookie=`show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC`}else{document.cookie=`show_drafts=1;path=/`;document.body.classList.add(a)}}</script>