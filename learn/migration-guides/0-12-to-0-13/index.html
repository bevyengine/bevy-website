<!doctype html><html class=light-mode lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="0.12 to 0.13" property=og:title><meta content=website property=og:type><meta content=https://bevy.org//learn/migration-guides/0-12-to-0-13/ property=og:url><meta content=https://bevy.org/assets/bevy_logo_fill.png property=og:image><meta content='Bevy relies heavily on improvements in the Rust language and compiler.
As a result, the Minimum Supported Rust Version (MSRV) is "the latest stable re…' property=og:description><link rel="shortcut icon" href=/assets/favicon.png type=image/png><link href=/site.css rel=stylesheet><link href=/atom.xml rel=alternate type=application/atom+xml><title>0.12 to 0.13</title><script src=/optional-helpers.js></script><script defer src=/highlight-intrapage-link.js></script><script defer src=/clipboard.js></script><body><div class=layout><input class=hidden id=mobile-menu-state type=checkbox><header class="layout__header header print:hidden" data-mobile-menu-state-container><div class=header__content><label class=main-menu-backdrop for=mobile-menu-state></label><label class="header__hamburger button-square button-square--header" for=mobile-menu-state><img alt="Three horizontal lines stacked on top of eachother" height=16 src=/assets/icon-hamburger.svg width=20></label><div class=header__left-block><a class=header__logo href=/> <picture class=logo><img alt="Bevy logo" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><div class=header__message>Migration Guides</div></div><input checked class=hidden id=page-menu-switch-state type=checkbox><nav class="header__menu main-menu main-menu--with-page-menu" data-page-menu-switch-state-container role=navigation><div class=main-menu__header><a href=/> <picture class=logo><img alt="Bevy Engine" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><label class="button-square button-square--header" for=mobile-menu-state><img alt="A saltire or x-cross" height=16 src=/assets/icon-times.svg width=16></label></div><div class=main-menu__page-menu-switch><label class=menu-switch for=page-menu-switch-state><div class="menu-switch__option menu-switch__option--main-menu">Main Menu</div> <div class="menu-switch__option menu-switch__option--page-menu">Migration Guides</div></label></div><div class=main-menu__content><div class=main-menu__page-menu><ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/introduction/>Introduction</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-17-to-0-18/>0.17 to 0.18</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-16-to-0-17/>0.16 to 0.17</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-15-to-0-16/>0.15 to 0.16</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-14-to-0-15/>0.14 to 0.15</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-13-to-0-14/>0.13 to 0.14</a></div><li class="tree-menu__item tree-menu__item--active"><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-12-to-0-13/>0.12 to 0.13</a><nav aria-label="On This Page" class="on-this-page tree-menu__toc" data-highlight-intrapage-link><ul><li><a href=#support-all-types-of-animation-interpolation-from-gltf>Support all types of animation interpolation from gltf</a><li><a href=#readassetbyteserror-io-exposes-failing-path>ReadAssetBytesError::Io exposes failing path</a><li><a href=#ensure-consistency-between-un-typed-assetid-and-handle>Ensure consistency between Un/Typed AssetId and Handle</a><li><a href=#use-impl-into-a-for-assets-add>Use impl Into&LTA> for Assets::add</a><li><a href=#gltf-extension-support>GLTF extension support</a><li><a href=#allow-textureatlasbuilder-in-assetloader>Allow TextureAtlasBuilder in AssetLoader</a><li><a href=#remove-the-ability-to-ignore-global-volume>Remove the ability to ignore global volume</a><li><a href=#optional-override-for-global-spatial-scale>Optional override for global spatial scale</a><li><a href=#add-support-for-updating-the-tracing-subscriber-in-logplugin>Add support for updating the tracing subscriber in LogPlugin</a><li><a href=#replace-diagnosticid-by-diagnosticpath>Replace DiagnosticId by DiagnosticPath</a><li><a href=#use-entityhashmap-for-entitymapper>Use EntityHashMap for EntityMapper</a><li><a href=#update-event-send-methods-to-return-eventid>Update Event send methods to return EventId</a><li><a href=#optimise-entity-with-repr-align-manual-partialord-ord>Optimise Entity with repr align & manual PartialOrd/Ord</a><li><a href=#split-worldquery-into-querydata-and-queryfilter>Split WorldQuery into QueryData and QueryFilter</a><li><a href=#reduced-tablerow-as-casting>Reduced TableRow as Casting</a><li><a href=#allow-the-editing-of-startup-schedules>Allow the editing of startup schedules</a><li><a href=#auto-insert-sync-points>Auto insert sync points</a><li><a href=#add-insert-state-to-app>Add insert_state to App.</a><li><a href=#rename-archetypeentity-entity-into-archetypeentity-id>Rename ArchetypeEntity::entity into ArchetypeEntity::id</a><li><a href=#restore-support-for-running-fn-entitycommands-on-entities-that-might-be-despawned>Restore support for running fn EntityCommands on entities that might be despawned</a><li><a href=#simplify-conditions>Simplify conditions</a><li><a href=#refactor-simplify-lifetimes-for-commands-and-related-types>refactor: Simplify lifetimes for Commands and related types</a><li><a href=#deprecated-various-component-methods-from-query-and-querystate>Deprecated Various Component Methods from Query and QueryState</a><li><a href=#system-type-id-consistency>System::type_id Consistency</a><li><a href=#system-stepping-implemented-as-resource>System Stepping implemented as Resource</a><li><a href=#make-the-mapentities-trait-generic-over-mappers-and-add-a-simpler-entitymapper>Make the MapEntities trait generic over Mappers, and add a simpler EntityMapper</a><li><a href=#async-channel-v2>Async channel v2</a><li><a href=#add-first-pre-post-last-schedules-to-the-fixed-timestep>Add First/Pre/Post/Last schedules to the Fixed timestep</a><li><a href=#move-entityhash-related-types-into-bevy-ecs>Move EntityHash related types into bevy_ecs</a><li><a href=#move-circle-gizmos-to-their-own-file>Move Circle Gizmos to Their Own File</a><li><a href=#move-gizmo-arcs-to-their-own-file>move gizmo arcs to their own file</a><li><a href=#multiple-configurations-for-gizmos>Multiple Configurations for Gizmos</a><li><a href=#use-direction3d-for-gizmos-circle-normal>Use Direction3d for gizmos.circle normal</a><li><a href=#rename-addchild-to-pushchild>Rename "AddChild" to "PushChild"</a><li><a href=#rename-input-to-buttoninput>Rename Input to ButtonInput</a><li><a href=#add-window-entity-to-touchinput-events>Add window entity to TouchInput events</a><li><a href=#add-delta-to-cursormoved-event>Add delta to CursorMoved event</a><li><a href=#remove-default-impl-for-cubiccurve>Remove Default impl for CubicCurve</a><li><a href=#direction-rename-from-normalized-to-new-unchecked>Direction: Rename from_normalized to new_unchecked</a><li><a href=#add-capsule2d-primitive>Add Capsule2d primitive</a><li><a href=#rename-raytest-to-raycast>Rename RayTest to RayCast</a><li><a href=#use-intersectsvolume-for-breakout-example-collisions>Use IntersectsVolume for breakout example collisions</a><li><a href=#add-reflectfromworld-and-replace-the-fromworld-requirement-on-reflectcomponent-and-reflectbundle-with-fromreflect>Add ReflectFromWorld and replace the FromWorld requirement on ReflectComponent and ReflectBundle with FromReflect</a><li><a href=#remove-typeuuid>Remove TypeUuid</a><li><a href=#explicit-color-conversion-methods>Explicit color conversion methods</a><li><a href=#add-a-depth-bias-to-material2d>Add a depth_bias to Material2d</a><li><a href=#bind-group-layout-entries>Bind group layout entries</a><li><a href=#swap-material-and-mesh-bind-groups>Swap material and mesh bind groups</a><li><a href=#light-renderlayers>light renderlayers</a><li><a href=#update-to-wgpu-0-18>Update to wgpu 0.18</a><li><a href=#keep-track-of-when-a-texture-is-first-cleared>Keep track of when a texture is first cleared</a><li><a href=#approximate-indirect-specular-occlusion>Approximate indirect specular occlusion</a><li><a href=#texture-atlas-rework>Texture Atlas rework</a><li><a href=#exposure-settings-adopted>Exposure settings (adopted)</a><li><a href=#make-dynamicuniformbuffer-push-accept-an-t-instead-of-t>Make DynamicUniformBuffer::push accept an &T instead of T</a><li><a href=#customizable-camera-main-texture-usage>Customizable camera main texture usage</a><li><a href=#optimize-batch-and-prepare-render-phase>optimize batch_and_prepare_render_phase</a><li><a href=#update-to-wgpu-0-19-and-raw-window-handle-0-6>Update to wgpu 0.19 and raw-window-handle 0.6</a><li><a href=#rendergraph-labelization>RenderGraph Labelization</a> <ul><li><a href=#subgraphs>SubGraphs</a><li><a href=#nodes>Nodes</a></ul><li><a href=#gate-diffuse-and-specular-transmission-behind-shader-defs>Gate diffuse and specular transmission behind shader defs</a><li><a href=#async-pipeline-compilation>Async pipeline compilation</a><li><a href=#mesh-insert-indices>Mesh insert indices</a><li><a href=#wait-for-render-app-when-main-world-is-dropped>wait for render app when main world is dropped</a><li><a href=#deprecate-shapes-in-bevy-render-mesh-shape>Deprecate shapes in bevy_render::mesh::shape</a><li><a href=#multithreaded-render-command-encoding>Multithreaded render command encoding</a><li><a href=#stop-extracting-mesh-entities-to-the-render-world>Stop extracting mesh entities to the render world.</a><li><a href=#new-exposure-and-lighting-defaults-and-calibrate-examples>New Exposure and Lighting Defaults (and calibrate examples)</a><li><a href=#unload-render-assets-from-ram>Unload render assets from RAM</a><li><a href=#split-ray-into-ray2d-and-ray3d-and-simplify-plane-construction>Split Ray into Ray2d and Ray3d and simplify plane construction</a> <ul><li><a href=#ray-creation>Ray creation</a><li><a href=#plane-intersections>Plane intersections</a></ul><li><a href=#introduce-aspectratio-struct>Introduce AspectRatio struct</a><li><a href=#include-ui-node-size-in-the-vertex-inputs-for-uimaterial>Include UI node size in the vertex inputs for UiMaterial.</a><li><a href=#optional-imagescalemode>Optional ImageScaleMode</a><li><a href=#re-export-futures-lite-in-bevy-tasks>Re-export futures_lite in bevy_tasks</a><li><a href=#rename-textalignment-to-justifytext>Rename TextAlignment to JustifyText.</a><li><a href=#rename-time-fixed-overstep-percentage-and-time-fixed-overstep-percentage-f64>Rename Time::&LTFixed>::overstep_percentage() and Time::&LTFixed>::overstep_percentage_f64()</a><li><a href=#rename-timer-percent-percent-left-to-timer-fraction-fraction-remaining>Rename Timer::{percent,percent_left} to Timer::{fraction,fraction_remaining}</a><li><a href=#return-direction3d-from-transform-up-and-friends>return Direction3d from Transform::up and friends</a><li><a href=#make-clipped-areas-of-ui-nodes-non-interactive>Make clipped areas of UI nodes non-interactive</a><li><a href=#create-serialize-feature-for-bevy-ui>Create serialize feature for bevy_ui</a><li><a href=#camera-driven-ui>Camera-driven UI</a><li><a href=#change-window-scale-factor-to-f32-adopted>Change Window scale factor to f32 (adopted)</a><li><a href=#update-winit-dependency-to-0-29>Update winit dependency to 0.29</a> <ul><li><a href=#keycode-changes>KeyCode changes</a><li><a href=#receivedcharacter-changes>ReceivedCharacter changes</a></ul><li><a href=#remove-canvasparentresizeplugin>Remove CanvasParentResizePlugin</a><li><a href=#cleanup-bevy-winit>Cleanup bevy winit</a><li><a href=#add-name-to-bevy-window-window>Add name to bevy::window::Window</a><li><a href=#delete-methods-deprecated-in-0-12>delete methods deprecated in 0.12</a><li><a href=#renamed-accessibility-plugin-to-accesskitplugin-in-bevy-winit>Renamed Accessibility plugin to AccessKitPlugin in bevy_winit</a><li><a href=#use-typeidmap-whenever-possible>Use TypeIdMap whenever possible</a><li><a href=#bevy-render-use-the-non-send-marker-from-bevy-core>bevy_render: use the non-send marker from bevy_core</a></ul></nav></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-11-to-0-12/>0.11 to 0.12</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-10-to-0-11/>0.10 to 0.11</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-9-to-0-10/>0.9 to 0.10</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-8-to-0-9/>0.8 to 0.9</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-7-to-0-8/>0.7 to 0.8</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-6-to-0-7/>0.6 to 0.7</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-5-to-0-6/>0.5 to 0.6</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-4-to-0-5/>0.4 to 0.5</a></div></ul></div><ul class=main-menu__menu><li class="main-menu__entry main-menu__entry--getting-started"><a class=main-menu__link href=/learn/quick-start/getting-started/> <span>Getting Started</span> </a><li class=main-menu__entry><a class="main-menu__link main-menu__link--active" href=/learn/> <span>Learn</span> </a><li class=main-menu__entry><a class=main-menu__link href=/news/> <span>News</span> </a><li class=main-menu__entry><a class=main-menu__link href=/community/> <span>Community</span> </a><li class=main-menu__entry><a class=main-menu__link href=/foundation/> <span>Foundation</span> </a><li class=main-menu__entry><a class=main-menu__link href=/assets/> <span>Assets</span> </a><li class=main-menu__entry><a class=main-menu__link href=/examples/> <span>Examples</span> </a></ul></div></nav><div class=header__cta-container><a class="button button--pink header__cta" href=/donate>Donate <img alt="heart icon" class=button__icon height=512 src=/assets/heart.svg width=512> </a><a class="header__cta header__cta--github" href=https://github.com/bevyengine/bevy> <img alt="GitHub repo" height=96 src=/assets/github-mark-white.svg width=98> </a></div></div></header><main class=layout__content><div class=container><div class=page-with-menu><div class="page-with-menu__menu-wrapper print:hidden"><div class=page-with-menu__menu><ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/introduction/>Introduction</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-17-to-0-18/>0.17 to 0.18</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-16-to-0-17/>0.16 to 0.17</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-15-to-0-16/>0.15 to 0.16</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-14-to-0-15/>0.14 to 0.15</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-13-to-0-14/>0.13 to 0.14</a></div><li class="tree-menu__item tree-menu__item--active"><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-12-to-0-13/>0.12 to 0.13</a><nav aria-label="On This Page" class="on-this-page tree-menu__toc" data-highlight-intrapage-link><ul><li><a href=#support-all-types-of-animation-interpolation-from-gltf>Support all types of animation interpolation from gltf</a><li><a href=#readassetbyteserror-io-exposes-failing-path>ReadAssetBytesError::Io exposes failing path</a><li><a href=#ensure-consistency-between-un-typed-assetid-and-handle>Ensure consistency between Un/Typed AssetId and Handle</a><li><a href=#use-impl-into-a-for-assets-add>Use impl Into&LTA> for Assets::add</a><li><a href=#gltf-extension-support>GLTF extension support</a><li><a href=#allow-textureatlasbuilder-in-assetloader>Allow TextureAtlasBuilder in AssetLoader</a><li><a href=#remove-the-ability-to-ignore-global-volume>Remove the ability to ignore global volume</a><li><a href=#optional-override-for-global-spatial-scale>Optional override for global spatial scale</a><li><a href=#add-support-for-updating-the-tracing-subscriber-in-logplugin>Add support for updating the tracing subscriber in LogPlugin</a><li><a href=#replace-diagnosticid-by-diagnosticpath>Replace DiagnosticId by DiagnosticPath</a><li><a href=#use-entityhashmap-for-entitymapper>Use EntityHashMap for EntityMapper</a><li><a href=#update-event-send-methods-to-return-eventid>Update Event send methods to return EventId</a><li><a href=#optimise-entity-with-repr-align-manual-partialord-ord>Optimise Entity with repr align & manual PartialOrd/Ord</a><li><a href=#split-worldquery-into-querydata-and-queryfilter>Split WorldQuery into QueryData and QueryFilter</a><li><a href=#reduced-tablerow-as-casting>Reduced TableRow as Casting</a><li><a href=#allow-the-editing-of-startup-schedules>Allow the editing of startup schedules</a><li><a href=#auto-insert-sync-points>Auto insert sync points</a><li><a href=#add-insert-state-to-app>Add insert_state to App.</a><li><a href=#rename-archetypeentity-entity-into-archetypeentity-id>Rename ArchetypeEntity::entity into ArchetypeEntity::id</a><li><a href=#restore-support-for-running-fn-entitycommands-on-entities-that-might-be-despawned>Restore support for running fn EntityCommands on entities that might be despawned</a><li><a href=#simplify-conditions>Simplify conditions</a><li><a href=#refactor-simplify-lifetimes-for-commands-and-related-types>refactor: Simplify lifetimes for Commands and related types</a><li><a href=#deprecated-various-component-methods-from-query-and-querystate>Deprecated Various Component Methods from Query and QueryState</a><li><a href=#system-type-id-consistency>System::type_id Consistency</a><li><a href=#system-stepping-implemented-as-resource>System Stepping implemented as Resource</a><li><a href=#make-the-mapentities-trait-generic-over-mappers-and-add-a-simpler-entitymapper>Make the MapEntities trait generic over Mappers, and add a simpler EntityMapper</a><li><a href=#async-channel-v2>Async channel v2</a><li><a href=#add-first-pre-post-last-schedules-to-the-fixed-timestep>Add First/Pre/Post/Last schedules to the Fixed timestep</a><li><a href=#move-entityhash-related-types-into-bevy-ecs>Move EntityHash related types into bevy_ecs</a><li><a href=#move-circle-gizmos-to-their-own-file>Move Circle Gizmos to Their Own File</a><li><a href=#move-gizmo-arcs-to-their-own-file>move gizmo arcs to their own file</a><li><a href=#multiple-configurations-for-gizmos>Multiple Configurations for Gizmos</a><li><a href=#use-direction3d-for-gizmos-circle-normal>Use Direction3d for gizmos.circle normal</a><li><a href=#rename-addchild-to-pushchild>Rename "AddChild" to "PushChild"</a><li><a href=#rename-input-to-buttoninput>Rename Input to ButtonInput</a><li><a href=#add-window-entity-to-touchinput-events>Add window entity to TouchInput events</a><li><a href=#add-delta-to-cursormoved-event>Add delta to CursorMoved event</a><li><a href=#remove-default-impl-for-cubiccurve>Remove Default impl for CubicCurve</a><li><a href=#direction-rename-from-normalized-to-new-unchecked>Direction: Rename from_normalized to new_unchecked</a><li><a href=#add-capsule2d-primitive>Add Capsule2d primitive</a><li><a href=#rename-raytest-to-raycast>Rename RayTest to RayCast</a><li><a href=#use-intersectsvolume-for-breakout-example-collisions>Use IntersectsVolume for breakout example collisions</a><li><a href=#add-reflectfromworld-and-replace-the-fromworld-requirement-on-reflectcomponent-and-reflectbundle-with-fromreflect>Add ReflectFromWorld and replace the FromWorld requirement on ReflectComponent and ReflectBundle with FromReflect</a><li><a href=#remove-typeuuid>Remove TypeUuid</a><li><a href=#explicit-color-conversion-methods>Explicit color conversion methods</a><li><a href=#add-a-depth-bias-to-material2d>Add a depth_bias to Material2d</a><li><a href=#bind-group-layout-entries>Bind group layout entries</a><li><a href=#swap-material-and-mesh-bind-groups>Swap material and mesh bind groups</a><li><a href=#light-renderlayers>light renderlayers</a><li><a href=#update-to-wgpu-0-18>Update to wgpu 0.18</a><li><a href=#keep-track-of-when-a-texture-is-first-cleared>Keep track of when a texture is first cleared</a><li><a href=#approximate-indirect-specular-occlusion>Approximate indirect specular occlusion</a><li><a href=#texture-atlas-rework>Texture Atlas rework</a><li><a href=#exposure-settings-adopted>Exposure settings (adopted)</a><li><a href=#make-dynamicuniformbuffer-push-accept-an-t-instead-of-t>Make DynamicUniformBuffer::push accept an &T instead of T</a><li><a href=#customizable-camera-main-texture-usage>Customizable camera main texture usage</a><li><a href=#optimize-batch-and-prepare-render-phase>optimize batch_and_prepare_render_phase</a><li><a href=#update-to-wgpu-0-19-and-raw-window-handle-0-6>Update to wgpu 0.19 and raw-window-handle 0.6</a><li><a href=#rendergraph-labelization>RenderGraph Labelization</a> <ul><li><a href=#subgraphs>SubGraphs</a><li><a href=#nodes>Nodes</a></ul><li><a href=#gate-diffuse-and-specular-transmission-behind-shader-defs>Gate diffuse and specular transmission behind shader defs</a><li><a href=#async-pipeline-compilation>Async pipeline compilation</a><li><a href=#mesh-insert-indices>Mesh insert indices</a><li><a href=#wait-for-render-app-when-main-world-is-dropped>wait for render app when main world is dropped</a><li><a href=#deprecate-shapes-in-bevy-render-mesh-shape>Deprecate shapes in bevy_render::mesh::shape</a><li><a href=#multithreaded-render-command-encoding>Multithreaded render command encoding</a><li><a href=#stop-extracting-mesh-entities-to-the-render-world>Stop extracting mesh entities to the render world.</a><li><a href=#new-exposure-and-lighting-defaults-and-calibrate-examples>New Exposure and Lighting Defaults (and calibrate examples)</a><li><a href=#unload-render-assets-from-ram>Unload render assets from RAM</a><li><a href=#split-ray-into-ray2d-and-ray3d-and-simplify-plane-construction>Split Ray into Ray2d and Ray3d and simplify plane construction</a> <ul><li><a href=#ray-creation>Ray creation</a><li><a href=#plane-intersections>Plane intersections</a></ul><li><a href=#introduce-aspectratio-struct>Introduce AspectRatio struct</a><li><a href=#include-ui-node-size-in-the-vertex-inputs-for-uimaterial>Include UI node size in the vertex inputs for UiMaterial.</a><li><a href=#optional-imagescalemode>Optional ImageScaleMode</a><li><a href=#re-export-futures-lite-in-bevy-tasks>Re-export futures_lite in bevy_tasks</a><li><a href=#rename-textalignment-to-justifytext>Rename TextAlignment to JustifyText.</a><li><a href=#rename-time-fixed-overstep-percentage-and-time-fixed-overstep-percentage-f64>Rename Time::&LTFixed>::overstep_percentage() and Time::&LTFixed>::overstep_percentage_f64()</a><li><a href=#rename-timer-percent-percent-left-to-timer-fraction-fraction-remaining>Rename Timer::{percent,percent_left} to Timer::{fraction,fraction_remaining}</a><li><a href=#return-direction3d-from-transform-up-and-friends>return Direction3d from Transform::up and friends</a><li><a href=#make-clipped-areas-of-ui-nodes-non-interactive>Make clipped areas of UI nodes non-interactive</a><li><a href=#create-serialize-feature-for-bevy-ui>Create serialize feature for bevy_ui</a><li><a href=#camera-driven-ui>Camera-driven UI</a><li><a href=#change-window-scale-factor-to-f32-adopted>Change Window scale factor to f32 (adopted)</a><li><a href=#update-winit-dependency-to-0-29>Update winit dependency to 0.29</a> <ul><li><a href=#keycode-changes>KeyCode changes</a><li><a href=#receivedcharacter-changes>ReceivedCharacter changes</a></ul><li><a href=#remove-canvasparentresizeplugin>Remove CanvasParentResizePlugin</a><li><a href=#cleanup-bevy-winit>Cleanup bevy winit</a><li><a href=#add-name-to-bevy-window-window>Add name to bevy::window::Window</a><li><a href=#delete-methods-deprecated-in-0-12>delete methods deprecated in 0.12</a><li><a href=#renamed-accessibility-plugin-to-accesskitplugin-in-bevy-winit>Renamed Accessibility plugin to AccessKitPlugin in bevy_winit</a><li><a href=#use-typeidmap-whenever-possible>Use TypeIdMap whenever possible</a><li><a href=#bevy-render-use-the-non-send-marker-from-bevy-core>bevy_render: use the non-send marker from bevy_core</a></ul></nav></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-11-to-0-12/>0.11 to 0.12</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-10-to-0-11/>0.10 to 0.11</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-9-to-0-10/>0.9 to 0.10</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-8-to-0-9/>0.8 to 0.9</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-7-to-0-8/>0.7 to 0.8</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-6-to-0-7/>0.6 to 0.7</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-5-to-0-6/>0.5 to 0.6</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-4-to-0-5/>0.4 to 0.5</a></div></ul></div></div><div class=page-with-menu__content><div class=docs-page><div class=docs-content><h1>Migration Guide: 0.12 to 0.13</h1><div class=media-content><p>Bevy relies heavily on improvements in the Rust language and compiler. As a result, the Minimum Supported Rust Version (MSRV) is "the latest stable release" of Rust.<div class=migration-guide-legacy><h3 id=support-all-types-of-animation-interpolation-from-gltf><a href=https://github.com/bevyengine/bevy/pull/10755>Support all types of animation interpolation from gltf</a> <a class=anchor-link href=#support-all-types-of-animation-interpolation-from-gltf>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Animation</div></div><p>When manually specifying an animation <code>VariableCurve</code>, the interpolation type must be specified:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">VariableCurve <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    keyframe_timestamps<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">4.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    keyframes<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Keyframes<span class="z-punctuation z-accessor z-rust">::</span></span>Rotation<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">IDENTITY</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">3.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">IDENTITY</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">VariableCurve <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    keyframe_timestamps<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">4.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    keyframes<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Keyframes<span class="z-punctuation z-accessor z-rust">::</span></span>Rotation<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">IDENTITY</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">3.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">IDENTITY</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    interpolation<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Interpolation<span class="z-punctuation z-accessor z-rust">::</span></span>Linear<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></code></pre><h3 id=readassetbyteserror-io-exposes-failing-path><a href=https://github.com/bevyengine/bevy/pull/10450><code>ReadAssetBytesError::Io</code> exposes failing path</a> <a class=anchor-link href=#readassetbyteserror-io-exposes-failing-path>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><p>The <code>ReadAssetBytesError::Io</code> variant now contains two named fields instead of converting from <code>std::io::Error</code>.<ul><li><code>path</code>: The requested (failing) path (<code>PathBuf</code>)<li><code>source</code>: The source <code>std::io::Error</code></ul><h3 id=ensure-consistency-between-un-typed-assetid-and-handle><a href=https://github.com/bevyengine/bevy/pull/10628>Ensure consistency between Un/Typed <code>AssetId</code> and <code>Handle</code></a> <a class=anchor-link href=#ensure-consistency-between-un-typed-assetid-and-handle>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><p>If you relied on any of the panicking <code>From&LTUntyped...></code> implementations, simply call the existing <code>typed</code> methods instead. Alternatively, use the new <code>TryFrom</code> implementation instead to directly expose possible mistakes.<h3 id=use-impl-into-a-for-assets-add><a href=https://github.com/bevyengine/bevy/pull/10878>Use <code>impl Into&LTA></code> for <code>Assets::add</code></a> <a class=anchor-link href=#use-impl-into-a-for-assets-add>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><p>Some <code>into</code> calls that worked previously might now be broken because of the new trait bounds. You need to either remove <code>into</code> or perform the conversion explicitly with <code>from</code>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> mesh_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">shape<span class="z-punctuation z-accessor z-rust">::</span></span>Cube <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> size<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> mesh_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">shape<span class="z-punctuation z-accessor z-rust">::</span></span>Cube <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> size<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> mesh_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Mesh<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">shape<span class="z-punctuation z-accessor z-rust">::</span></span>Cube <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> size<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></code></pre><h3 id=gltf-extension-support><a href=https://github.com/bevyengine/bevy/pull/11138>GLTF extension support</a> <a class=anchor-link href=#gltf-extension-support>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><p>This will have issues with “asset migrations”, as there is currently no way for .meta files to be migrated. Attempting to migrate .meta files without the new flag will yield the following error:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-path z-rust">bevy_asset<span class="z-punctuation z-accessor z-rust">::</span></span>server<span class="z-punctuation z-separator z-rust">:</span> Failed to deserialize meta <span class="z-keyword z-control z-rust">for</span> asset test_platform<span class="z-punctuation z-accessor z-dot z-rust">.</span>gltf<span class="z-punctuation z-separator z-rust">:</span> Failed to deserialize asset meta<span class="z-punctuation z-separator z-rust">:</span> SpannedError <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> code<span class="z-punctuation z-separator z-rust">:</span> MissingStructField <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> field<span class="z-punctuation z-separator z-rust">:</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>include_source<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> outer<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>GltfLoaderSettings<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span> position<span class="z-punctuation z-separator z-rust">:</span> Position <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> line<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">9</span><span class="z-punctuation z-separator z-rust">,</span> col<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">9</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><p>This means users who want to migrate their .meta files will have to add the <code>include_source: true,</code> setting to their meta files by hand.<h3 id=allow-textureatlasbuilder-in-assetloader><a href=https://github.com/bevyengine/bevy/pull/11548>Allow TextureAtlasBuilder in AssetLoader</a> <a class=anchor-link href=#allow-textureatlasbuilder-in-assetloader>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><ul><li>For <code>add_texture</code> you need to wrap your <code>AssetId</code> in <code>Some</code><li><code>finish</code> now returns the atlas texture image directly instead of a handle. Provide the atlas texture to <code>add</code> on Assets<texture> to get a Handle<image> <h3 id=remove-the-ability-to-ignore-global-volume><a href=https://github.com/bevyengine/bevy/pull/11092>Remove the ability to ignore global volume</a> <a class=anchor-link href=#remove-the-ability-to-ignore-global-volume>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Audio</div></div> <p>The option to ignore the global volume using <code>Volume::Absolute</code> has been removed and <a href=https://docs.rs/bevy/0.13.0/bevy/audio/struct.Volume.html><code>Volume</code></a> now stores the volume level directly, removing the need for the <code>VolumeLevel</code> struct.</p> <p><code>Volume::new_absolute</code> and <code>Volume::new_relative</code> were removed. Use <code>Volume::new(0.5)</code>.</p> <h3 id=optional-override-for-global-spatial-scale><a href=https://github.com/bevyengine/bevy/pull/10419>Optional override for global spatial scale</a> <a class=anchor-link href=#optional-override-for-global-spatial-scale>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Audio</div></div> <p><code>AudioPlugin::spatial_scale</code> has been renamed to <code>default_spatial_scale</code> and the default spatial scale can now be overridden on individual audio sources with <code>PlaybackSettings::spatial_scale</code>.</p> <p>If you were modifying or reading <code>SpatialScale</code> at run time, use <code>DefaultSpatialScale</code> instead.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AudioPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    spatial_scale<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">SpatialScale<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-other z-rust">AUDIO_SCALE</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AudioPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    default_spatial_scale<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">SpatialScale<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-other z-rust">AUDIO_SCALE</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h3 id=add-support-for-updating-the-tracing-subscriber-in-logplugin><a href=https://github.com/bevyengine/bevy/pull/10822>Add support for updating the tracing subscriber in LogPlugin</a> <a class=anchor-link href=#add-support-for-updating-the-tracing-subscriber-in-logplugin>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Diagnostics</div></div> <p><code>LogPlugin</code> has a new optional <code>update_subscriber</code> field. Use <code>None</code> or <code>..default()</code> to match previous behavior.</p> <h3 id=replace-diagnosticid-by-diagnosticpath><a href=https://github.com/bevyengine/bevy/pull/9266>Replace <code>DiagnosticId</code> by <code>DiagnosticPath</code></a> <a class=anchor-link href=#replace-diagnosticid-by-diagnosticpath>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Diagnostics</div></div> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span> const UNIQUE_DIAG_ID: DiagnosticId = DiagnosticId::from_u128(42);
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> const UNIQUE_DIAG_PATH: DiagnosticPath = DiagnosticPath::const_new("foo/bar");
</span></span><span class="z-source z-diff">
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span> Diagnostic::new(UNIQUE_DIAG_ID, "example", 10)
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> Diagnostic::new(UNIQUE_DIAG_PATH).with_max_history_length(10)
</span></span><span class="z-source z-diff">
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span> diagnostics.add_measurement(UNIQUE_DIAG_ID, || 42);
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> diagnostics.add_measurement(&UNIQUE_DIAG_ID, || 42);
</span></span></code></pre> <h3 id=use-entityhashmap-for-entitymapper><a href=https://github.com/bevyengine/bevy/pull/10415>Use <code>EntityHashMap</code> for <code>EntityMapper</code></a> <a class=anchor-link href=#use-entityhashmap-for-entitymapper>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p>If you are using the following types, update their listed methods to use the new <code>EntityHashMap</code>. <code>EntityHashMap</code> has the same methods as the normal <code>HashMap</code>, so you just need to replace the name.</p> <p><strong><code>EntityMapper</code></strong></p> <ul><li><code>get_map</code><li><code>get_mut_map</code><li><code>new</code><li><code>world_scope</code></ul> <p><strong><code>ReflectMapEntities</code></strong></p> <ul><li><code>map_all_entities</code><li><code>map_entities</code><li><code>write_to_world</code></ul> <p><strong><code>InstanceInfo</code></strong></p> <ul><li><code>entity_map</code> <ul><li>This is a property, not a method.</ul></ul> <h3 id=update-event-send-methods-to-return-eventid><a href=https://github.com/bevyengine/bevy/pull/10551>Update <code>Event</code> send methods to return <code>EventId</code></a> <a class=anchor-link href=#update-event-send-methods-to-return-eventid>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p><strong><code>send</code> / <code>send_default</code> / <code>send_batch</code></strong></p> <p>For the following methods:</p> <ul><li><code>Events::send</code><li><code>Events::send_default</code><li><code>Events::send_batch</code><li><code>EventWriter::send</code><li><code>EventWriter::send_default</code><li><code>EventWriter::send_batch</code><li><code>World::send_event</code><li><code>World::send_event_default</code><li><code>World::send_event_batch</code></ul> <p>Ensure calls to these methods either handle the returned value, or suppress the result with <code>;</code>.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">send_my_event</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventWriter<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyEvent<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send_default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">send_my_event</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventWriter<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyEvent<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send_default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <p>This will most likely be noticed within <code>match</code> statements:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> is_pressed <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-constant z-language z-rust">true</span> <span class="z-keyword z-operator z-rust">=></span> events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">PlayerAction<span class="z-punctuation z-accessor z-rust">::</span></span>Fire</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>                 ^--^ No longer returns ()
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-constant z-language z-rust">false</span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> is_pressed <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-constant z-language z-rust">true</span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">PlayerAction<span class="z-punctuation z-accessor z-rust">::</span></span>Fire</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-constant z-language z-rust">false</span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre> <h3 id=optimise-entity-with-repr-align-manual-partialord-ord><a href=https://github.com/bevyengine/bevy/pull/10558>Optimise <code>Entity</code> with repr align & manual <code>PartialOrd</code>/<code>Ord</code></a> <a class=anchor-link href=#optimise-entity-with-repr-align-manual-partialord-ord>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p>Any <code>unsafe</code> code relying on field ordering of <code>Entity</code> or sufficiently cursed shenanigans should change to reflect the different internal representation and alignment requirements of <code>Entity</code>.</p> <h3 id=split-worldquery-into-querydata-and-queryfilter><a href=https://github.com/bevyengine/bevy/pull/9918>Split WorldQuery into QueryData and QueryFilter</a> <a class=anchor-link href=#split-worldquery-into-querydata-and-queryfilter>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p>Check <a href=https://github.com/bevyengine/bevy/pull/9918>#9918</a> and <a href=https://github.com/bevyengine/bevy/pull/10779>#10799</a> for more information.</p> <ul><li>Rename the following trait type usages: <ul><li>Trait’s <code>ExtractComponent</code> type <code>Query</code> to <code>Data</code>.<li>Trait’s <code>GetBatchData</code> type <code>Query</code> to <code>Data</code>.<li>Trait’s <code>ExtractInstance</code> type <code>Query</code> to <code>Data</code>.</ul><li>Rename <code>ReadOnlyWorldQuery</code> to <code>QueryFilter</code> and <code>WorldQuery</code> to <code>QueryData</code><li>You'll need to update your related derives</ul> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">WorldQuery</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">world_query</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">mutable<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function-call z-rust"><span class="z-variable z-function z-rust">derive</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-function-call z-rust">Debug</span><span class="z-meta z-function-call z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">CustomQuery</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">entity</span><span class="z-punctuation z-separator z-type z-rust">:</span> Entity,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">a</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-modifier z-rust">mut</span> ComponentA
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">WorldQuery</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">QueryFilter</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">_c</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentC<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">QueryData</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">query_data</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">mutable<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function-call z-rust"><span class="z-variable z-function z-rust">derive</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-function-call z-rust">Debug</span><span class="z-meta z-function-call z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">CustomQuery</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">entity</span><span class="z-punctuation z-separator z-type z-rust">:</span> Entity,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">a</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-modifier z-rust">mut</span> ComponentA,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">QueryFilter</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">QueryFilter</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">_c</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentC<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <ul><li>Replace <code>Option&LTWith&LTT>></code> with <code>Has&LTT></code></ul> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Option</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentA<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity<span class="z-punctuation z-separator z-rust">,</span> has_a_option</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> has_a<span class="z-punctuation z-separator z-rust">:</span><span class="z-storage z-type z-rust">bool</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> has_a_option<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">is_some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>todo!()
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, <span class="z-meta z-generic z-rust">Has<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentA<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity<span class="z-punctuation z-separator z-rust">,</span> has_a</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>todo!()
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <ul><li>Fix queries which had filters in the data position or vice versa.</ul> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentA<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-rust">_</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>todo!()
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Entity, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentA<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-keyword z-control z-rust">for</span> entity <span class="z-keyword z-operator z-rust">in</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>todo!()
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">AnyOf<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span>ComponentA, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentB<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-rust">_</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>todo!()
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Option</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>ComponentA<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-meta z-generic z-rust">Or<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentA<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentB<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-keyword z-control z-rust">for</span> entity <span class="z-keyword z-operator z-rust">in</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>todo!()
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span></code></pre> <h3 id=reduced-tablerow-as-casting><a href=https://github.com/bevyengine/bevy/pull/10811>Reduced <code>TableRow</code> <code>as</code> Casting</a> <a class=anchor-link href=#reduced-tablerow-as-casting>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <ul><li><code>TableRow::new</code> -> <code>TableRow::from_usize</code><li><code>TableRow::index</code> -> <code>TableRow::as_usize</code><li><code>TableId::new</code> -> <code>TableId::from_usize</code><li><code>TableId::index</code> -> <code>TableId::as_usize</code></ul> <h3 id=allow-the-editing-of-startup-schedules><a href=https://github.com/bevyengine/bevy/pull/10969>Allow the editing of startup schedules</a> <a class=anchor-link href=#allow-the-editing-of-startup-schedules>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <ul><li>Added a new field to <code>MainScheduleOrder</code>, <code>startup_labels</code>, for editing the startup schedule order.</ul> <h3 id=auto-insert-sync-points><a href=https://github.com/bevyengine/bevy/pull/9822>Auto insert sync points</a> <a class=anchor-link href=#auto-insert-sync-points>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <ul><li><code>apply_deferred</code> points are added automatically when there is ordering relationship with a system that has deferred parameters like <code>Commands</code>. If you want to opt out of this you can switch from <code>after</code>, <code>before</code>, and <code>chain</code> to the corresponding <code>ignore_deferred</code> API, <code>after_ignore_deferred</code>, <code>before_ignore_deferred</code> or <code>chain_ignore_deferred</code> for your system/set ordering.<li>You can also set <code>ScheduleBuildSettings::auto_insert_sync_points</code> to <code>false</code> if you want to do it for the whole schedule. Note that in this mode you can still add <code>apply_deferred</code> points manually.<li>For most manual insertions of <code>apply_deferred</code> you should remove them as they cannot be merged with the automatically inserted points and might reduce parallelizability of the system graph.<li>If you were manually deriving <code>SystemParam</code>, you will need to add <code>system_meta.set_has_deferred</code> if you use <code>SystemParam::apply</code> and want sync points auto inserted after use of your <code>SystemParam</code>.</ul> <h3 id=add-insert-state-to-app><a href=https://github.com/bevyengine/bevy/pull/11043>Add insert_state to App.</a> <a class=anchor-link href=#add-insert-state-to-app>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p>Renamed <code>App::add_state</code> to <code>init_state</code>.</p> <h3 id=rename-archetypeentity-entity-into-archetypeentity-id><a href=https://github.com/bevyengine/bevy/pull/11118>Rename <code>ArchetypeEntity::entity</code> into <code>ArchetypeEntity::id</code></a> <a class=anchor-link href=#rename-archetypeentity-entity-into-archetypeentity-id>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p>The method <code>ArchetypeEntity::entity</code> has been renamed to <code>ArchetypeEntity::id</code></p> <h3 id=restore-support-for-running-fn-entitycommands-on-entities-that-might-be-despawned><a href=https://github.com/bevyengine/bevy/pull/11107>Restore support for running <code>fn</code> <code>EntityCommands</code> on entities that might be despawned</a> <a class=anchor-link href=#restore-support-for-running-fn-entitycommands-on-entities-that-might-be-despawned>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p>All <code>Command</code> types in <code>bevy_ecs</code>, such as <code>Spawn</code>, <code>SpawnBatch</code>, <code>Insert</code>, etc., have been made private. Use the equivalent methods on <code>Commands</code> or <code>EntityCommands</code> instead.</p> <p>If you were working with <code>ChildBuilder</code>, recreate these commands using a closure. For example, you might migrate a Command to insert components like:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">parent<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_command</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Insert <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    entity<span class="z-punctuation z-separator z-rust">:</span> ent_text<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    bundle<span class="z-punctuation z-separator z-rust">:</span> Capitalizable<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">parent<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_command</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">move</span> <span class="z-keyword z-operator z-bitwise z-rust">|</span>world<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> World<span class="z-keyword z-operator z-bitwise z-rust">|</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>ent_text</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Capitalizable</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h3 id=simplify-conditions><a href=https://github.com/bevyengine/bevy/pull/11316>Simplify conditions</a> <a class=anchor-link href=#simplify-conditions>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p>Some common run conditions that were previously closures and needed to be called are now just systems. Remove the parentheses.</p> <ul><li><code>resource_exists&LTT>()</code> -> <code>resource_exists&LTT></code><li><code>resource_added&LTT>()</code> -> <code>resource_added&LTT></code><li><code>resource_changed&LTT>()</code> -> <code>resource_changed&LTT></code><li><code>resource_exists_and_changed&LTT>()</code> -> <code>resource_exists_and_changed&LTT></code><li><code>state_exists&LTS: States>()</code> -> <code>state_exists&LTS: States></code><li><code>state_changed&LTS: States>()</code> -> <code>state_changed&LTS: States></code><li><code>any_with_component&LTT: Component>()</code> -> <code>any_with_component&LTT: Component></code></ul> <h3 id=refactor-simplify-lifetimes-for-commands-and-related-types><a href=https://github.com/bevyengine/bevy/pull/11445>refactor: Simplify lifetimes for <code>Commands</code> and related types</a> <a class=anchor-link href=#refactor-simplify-lifetimes-for-commands-and-related-types>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p>The lifetimes for <code>EntityCommands</code> have been simplified.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12 (Bevy 0.12)
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">MyStruct</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span>, <span class="z-storage z-modifier z-lifetime z-rust">'s</span>, <span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">     <span class="z-variable z-other z-member z-rust">commands</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">EntityCommands<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span>, <span class="z-storage z-modifier z-lifetime z-rust">'s</span>, <span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13 (Bevy 0.13)
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">MyStruct</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">commands</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">EntityCommands<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <p>The method <code>EntityCommands::commands</code> now returns <code>Commands</code> rather than <code>&mut Commands</code>.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12 (Bevy 0.12)
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> commands <span class="z-keyword z-operator z-assignment z-rust">=</span> entity_commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">commands</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13 (Bevy 0.13)
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> commands <span class="z-keyword z-operator z-assignment z-rust">=</span> entity_commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">commands</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h3 id=deprecated-various-component-methods-from-query-and-querystate><a href=https://github.com/bevyengine/bevy/pull/9920>Deprecated Various Component Methods from <code>Query</code> and <code>QueryState</code></a> <a class=anchor-link href=#deprecated-various-component-methods-from-query-and-querystate>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p><strong><code>QueryState::get_component_unchecked_mut</code></strong></p> <p>Use <code>QueryState::get_unchecked_manual</code> and select for the exact component based on the structure of the exact query as required.</p> <p><strong><code>Query::(get_)component(_unchecked)(_mut)</code></strong></p> <p>Use <code>Query::get</code> and select for the exact component based on the structure of the exact query as required.</p> <ul><li>For mutable access (<code>_mut</code>), use <code>Query::get_mut</code><li>For unchecked access (<code>_unchecked</code>), use <code>Query::get_unchecked</code><li>For panic variants (non-<code>get_</code>), add <code>.unwrap()</code></ul> <p>For example:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span>A, <span class="z-keyword z-operator z-rust">&</span>B, <span class="z-keyword z-operator z-rust">&</span>C<span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> b <span class="z-keyword z-operator z-assignment z-rust">=</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">get_component<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>B<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Alternative 1 (using tuple destructuring)
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-separator z-rust">,</span> b<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-rust">_</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Alternative 2 (using tuple item indexing)
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> b <span class="z-keyword z-operator z-assignment z-rust">=</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <h3 id=system-type-id-consistency><a href=https://github.com/bevyengine/bevy/pull/11728><code>System::type_id</code> Consistency</a> <a class=anchor-link href=#system-type-id-consistency>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div> <p>If you use <code>System::type_id()</code> on function systems (exclusive or not), ensure you are comparing its value to other <code>System::type_id()</code> calls, or <code>IntoSystem::system_type_id()</code>.</p> <p>This code wont require any changes, because <code>IntoSystem</code>’s are directly compared to each other.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">test_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> type_id <span class="z-keyword z-operator z-assignment z-rust">=</span> test_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> No change required
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>test_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>Likewise, this code wont, because <code>System</code>’s are directly compared.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">test_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> type_id <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">IntoSystem<span class="z-punctuation z-accessor z-rust">::</span></span>into_system<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>test_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> No change required
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">IntoSystem<span class="z-punctuation z-accessor z-rust">::</span></span>into_system<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>test_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>The below <em>does</em> require a change, since you’re comparing a <code>System</code> type to a <code>IntoSystem</code> type.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">test_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>test_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">IntoSystem<span class="z-punctuation z-accessor z-rust">::</span></span>into_system<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>test_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>test_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">system_type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">IntoSystem<span class="z-punctuation z-accessor z-rust">::</span></span>into_system<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>test_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h3 id=system-stepping-implemented-as-resource><a href=https://github.com/bevyengine/bevy/pull/8453>System Stepping implemented as Resource</a> <a class=anchor-link href=#system-stepping-implemented-as-resource>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div><div class=migration-guide-area-tag>Editor</div><div class=migration-guide-area-tag>App</div><div class=migration-guide-area-tag>Diagnostics</div></div> <p>Add a call to <code>Schedule::set_label()</code> for any custom <code>Schedule</code>. This is only required if the <code>Schedule</code> will be stepped</p> <h3 id=make-the-mapentities-trait-generic-over-mappers-and-add-a-simpler-entitymapper><a href=https://github.com/bevyengine/bevy/pull/11428>Make the MapEntities trait generic over Mappers, and add a simpler EntityMapper</a> <a class=anchor-link href=#make-the-mapentities-trait-generic-over-mappers-and-add-a-simpler-entitymapper>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div><div class=migration-guide-area-tag>Scenes</div></div> <ul><li>The existing <code>EntityMapper</code> (notably used to replicate <code>Scenes</code> across different <code>World</code>s) has been renamed to <code>SceneEntityMapper</code><li>The <code>MapEntities</code> trait now works with a generic <code>EntityMapper</code> instead of the specific struct <code>EntityMapper</code>. Calls to <code>fn map_entities(&mut self, entity_mapper: &mut EntityMapper)</code> need to be updated to <code>fn map_entities&LTM: EntityMapper>(&mut self, entity_mapper: &mut M)</code><li>The new trait <code>EntityMapper</code> has been added to the prelude</ul> <h3 id=async-channel-v2><a href=https://github.com/bevyengine/bevy/pull/10692>Async channel v2</a> <a class=anchor-link href=#async-channel-v2>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div><div class=migration-guide-area-tag>Tasks</div></div> <p>The <code>PipelinedRendering</code> plugin is no longer exported on wasm. If you are including it in your wasm builds you should remove it.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">cfg</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function-call z-rust"><span class="z-variable z-function z-rust">not</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-function-call z-rust">target_arch <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>wasm32<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-function-call z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">bevy_render<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">pipelined_rendering<span class="z-punctuation z-accessor z-rust">::</span></span>PipelinedRenderingPlugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h3 id=add-first-pre-post-last-schedules-to-the-fixed-timestep><a href=https://github.com/bevyengine/bevy/pull/10977>Add First/Pre/Post/Last schedules to the Fixed timestep</a> <a class=anchor-link href=#add-first-pre-post-last-schedules-to-the-fixed-timestep>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div><div class=migration-guide-area-tag>Time</div></div> <p>Usage of <code>RunFixedUpdateLoop</code> should be renamed to <code>RunFixedMainLoop</code>.</p> <h3 id=move-entityhash-related-types-into-bevy-ecs><a href=https://github.com/bevyengine/bevy/pull/11498>Move <code>EntityHash</code> related types into <code>bevy_ecs</code></a> <a class=anchor-link href=#move-entityhash-related-types-into-bevy-ecs>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div><div class=migration-guide-area-tag>Utils</div></div> <ul><li>Uses of <code>bevy::utils::{EntityHash, EntityHasher, EntityHashMap, EntityHashSet}</code> now have to be imported from <code>bevy::ecs::entity::hash</code>.<li>Uses of <code>EntityHashMap</code> no longer have to specify the first generic parameter. It is now hardcoded to always be <code>Entity</code>.</ul> <h3 id=move-circle-gizmos-to-their-own-file><a href=https://github.com/bevyengine/bevy/pull/10631>Move Circle Gizmos to Their Own File</a> <a class=anchor-link href=#move-circle-gizmos-to-their-own-file>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Gizmos</div></div> <ul><li>Change <code>gizmos::CircleBuilder</code> to <code>gizmos::circles::Circle2dBuilder</code><li>Change <code>gizmos::Circle2dBuilder</code> to <code>gizmos::circles::Circle2dBuilder</code></ul> <h3 id=move-gizmo-arcs-to-their-own-file><a href=https://github.com/bevyengine/bevy/pull/10660>move gizmo arcs to their own file</a> <a class=anchor-link href=#move-gizmo-arcs-to-their-own-file>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Gizmos</div></div> <p><code>gizmos::Arc2dBuilder</code> -> <code>gizmos::arcs::Arc2dBuilder</code></p> <h3 id=multiple-configurations-for-gizmos><a href=https://github.com/bevyengine/bevy/pull/10342>Multiple Configurations for Gizmos</a> <a class=anchor-link href=#multiple-configurations-for-gizmos>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Gizmos</div></div> <p><code>GizmoConfig</code> is no longer a resource and has to be accessed through <code>GizmoConfigStore</code> resource. The default config group is <code>DefaultGizmoConfigGroup</code>, but consider using your own custom config group if applicable.</p> <h3 id=use-direction3d-for-gizmos-circle-normal><a href=https://github.com/bevyengine/bevy/pull/11422>Use Direction3d for gizmos.circle normal</a> <a class=anchor-link href=#use-direction3d-for-gizmos-circle-normal>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Gizmos</div></div> <p>Pass a Direction3d for gizmos.circle normal, eg. <code>Direction3d::new(vec).unwrap_or(default)</code> or potentially <code>Direction3d::new_unchecked(vec)</code> if you know your vec is definitely normalized.</p> <h3 id=rename-addchild-to-pushchild><a href=https://github.com/bevyengine/bevy/pull/11194>Rename "AddChild" to "PushChild"</a> <a class=anchor-link href=#rename-addchild-to-pushchild>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Hierarchy</div></div> <p>The struct <code>AddChild</code> has been renamed to <code>PushChild</code>, and the struct <code>AddChildInPlace</code> has been renamed to <code>PushChildInPlace</code>.</p> <h3 id=rename-input-to-buttoninput><a href=https://github.com/bevyengine/bevy/pull/10859>Rename <code>Input</code> to <code>ButtonInput</code></a> <a class=anchor-link href=#rename-input-to-buttoninput>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Input</div></div> <p>Users need to rename <code>Input</code> to <code>ButtonInput</code> in their projects.</p> <h3 id=add-window-entity-to-touchinput-events><a href=https://github.com/bevyengine/bevy/pull/11128>Add window entity to TouchInput events</a> <a class=anchor-link href=#add-window-entity-to-touchinput-events>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Input</div></div> <p>Add a <code>window</code> field when constructing or destructuring a <code>TouchInput</code> struct.</p> <h3 id=add-delta-to-cursormoved-event><a href=https://github.com/bevyengine/bevy/pull/11710>Add delta to CursorMoved event</a> <a class=anchor-link href=#add-delta-to-cursormoved-event>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Input</div></div> <p>You need to add <code>delta</code> to any manually created <code>CursorMoved</code> struct.</p> <h3 id=remove-default-impl-for-cubiccurve><a href=https://github.com/bevyengine/bevy/pull/11335>Remove <code>Default</code> impl for <code>CubicCurve</code></a> <a class=anchor-link href=#remove-default-impl-for-cubiccurve>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Math</div></div> <ul><li>Remove <code>CubicCurve</code> from any structs that implement <code>Default</code>.<li>Wrap <code>CubicCurve</code> in a new type and provide your own default.</ul> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Deref</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">MyCubicCurve</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>P<span class="z-punctuation z-separator z-rust">:</span> Point<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-meta z-struct z-rust"></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>pub <span class="z-meta z-generic z-rust">CubicCurve<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>P<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Default <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyCubicCurve</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Vec2<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">default</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-storage z-type z-rust">Self</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> points <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">20.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">9.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">8.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">Self</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">CubicBezier<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>points</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_curve</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <h3 id=direction-rename-from-normalized-to-new-unchecked><a href=https://github.com/bevyengine/bevy/pull/11425>Direction: Rename <code>from_normalized</code> to <code>new_unchecked</code></a> <a class=anchor-link href=#direction-rename-from-normalized-to-new-unchecked>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Math</div></div> <p>Renamed <code>Direction2d::from_normalized</code> and <code>Direction3d::from_normalized</code> to <code>new_unchecked</code>.</p> <h3 id=add-capsule2d-primitive><a href=https://github.com/bevyengine/bevy/pull/11585>Add <code>Capsule2d</code> primitive</a> <a class=anchor-link href=#add-capsule2d-primitive>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Math</div></div> <p><code>Capsule</code> is now <code>Capsule3d</code>. If you were using it for 2d you need to use <code>Capsule2d</code></p> <h3 id=rename-raytest-to-raycast><a href=https://github.com/bevyengine/bevy/pull/11635>Rename RayTest to RayCast</a> <a class=anchor-link href=#rename-raytest-to-raycast>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Math</div></div> <p>RayTest2d and RayTest3d have been renamed to RayCast2d and RayCast3d</p> <h3 id=use-intersectsvolume-for-breakout-example-collisions><a href=https://github.com/bevyengine/bevy/pull/11500>Use <code>IntersectsVolume</code> for breakout example collisions</a> <a class=anchor-link href=#use-intersectsvolume-for-breakout-example-collisions>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Physics</div></div> <p><code>sprite::collide_aabb::collide</code> and <code>sprite::collide_aabb::Collision</code> were removed.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> collision <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">sprite<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">collide_aabb<span class="z-punctuation z-accessor z-rust">::</span></span>collide<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a_pos<span class="z-punctuation z-separator z-rust">,</span> a_size<span class="z-punctuation z-separator z-rust">,</span> b_pos<span class="z-punctuation z-separator z-rust">,</span> b_size</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">if</span> collision<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">is_some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> collision <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Aabb2d<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a_pos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">truncate</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> a_size <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">intersects</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-meta z-path z-rust">Aabb2d<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>b_pos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">truncate</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> b_size <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">if</span> collision <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre> <p>If you were making use <code>collide_aabb::Collision</code>, see the new <code>collide_with_side</code> function in the <a href=https://bevy.org/examples/Games/breakout/><code>breakout</code> example</a>.</p> <h3 id=add-reflectfromworld-and-replace-the-fromworld-requirement-on-reflectcomponent-and-reflectbundle-with-fromreflect><a href=https://github.com/bevyengine/bevy/pull/9623>Add <code>ReflectFromWorld</code> and replace the <code>FromWorld</code> requirement on <code>ReflectComponent</code> and <code>ReflectBundle</code> with <code>FromReflect</code></a> <a class=anchor-link href=#add-reflectfromworld-and-replace-the-fromworld-requirement-on-reflectcomponent-and-reflectbundle-with-fromreflect>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Reflection</div></div> <ul><li>Existing uses of <code>ReflectComponent::from_world</code> and <code>ReflectBundle::from_world</code> will have to be changed to <code>ReflectFromWorld::from_world</code>.<li>Users of <code>#[reflect(Component)]</code> and <code>#[reflect(Bundle)]</code> will need to also implement/derive <code>FromReflect</code>.<li>Users of <code>#[reflect(Component)]</code> and <code>#[reflect(Bundle)]</code> may now want to also add <code>FromWorld</code> to the list of reflected traits in case their <code>FromReflect</code> implementation may fail.<li>Users of <code>ReflectComponent</code> will now need to pass a <code>&TypeRegistry</code> to its <code>insert</code>, <code>apply_or_insert</code> and <code>copy</code> methods.</ul> <h3 id=remove-typeuuid><a href=https://github.com/bevyengine/bevy/pull/11497>Remove TypeUuid</a> <a class=anchor-link href=#remove-typeuuid>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Reflection</div></div> <p>Convert any uses of <code>#[derive(TypeUuid)]</code> with <code>#[derive(TypePath]</code> for more complex uses see the relevant <a href=https://docs.rs/bevy/latest/bevy/prelude/trait.TypePath.html>documentation</a> for more information.</p> <h3 id=explicit-color-conversion-methods><a href=https://github.com/bevyengine/bevy/pull/10321>Explicit color conversion methods</a> <a class=anchor-link href=#explicit-color-conversion-methods>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p><code>Color::from(Vec4)</code> is now <code>Color::rgba_from_array(impl Into<[f32; 4]>)</code> <code>Vec4::from(Color)</code> is now <code>Color::rgba_to_vec4(&self)</code></p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_vec4 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Vec4<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_from_vec4 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color_vec4</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_array <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_from_array <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color_array</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_vec4 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Vec4<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_from_vec4 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>rgba_from_array<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color_vec4</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_array <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color_from_array <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>rgba_from_array<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color_array</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h3 id=add-a-depth-bias-to-material2d><a href=https://github.com/bevyengine/bevy/pull/10683>Add a <code>depth_bias</code> to <code>Material2d</code></a> <a class=anchor-link href=#add-a-depth-bias-to-material2d>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p><code>PreparedMaterial2d</code> has a new <code>depth_bias</code> field. A value of 0.0 can be used to get the previous behavior.</p> <h3 id=bind-group-layout-entries><a href=https://github.com/bevyengine/bevy/pull/10224>Bind group layout entries</a> <a class=anchor-link href=#bind-group-layout-entries>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p><code>RenderDevice::create_bind_group_layout()</code> doesn’t take a <code>BindGroupLayoutDescriptor</code> anymore. You need to provide the parameters separately</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> layout <span class="z-keyword z-operator z-assignment z-rust">=</span> render_device<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">create_bind_group_layout</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>BindGroupLayoutDescriptor <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    label<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>post_process_bind_group_layout<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    entries<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        BindGroupLayoutEntry <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> layout <span class="z-keyword z-operator z-assignment z-rust">=</span> render_device<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">create_bind_group_layout</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>post_process_bind_group_layout<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        BindGroupLayoutEntry <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h3 id=swap-material-and-mesh-bind-groups><a href=https://github.com/bevyengine/bevy/pull/10485>Swap material and mesh bind groups</a> <a class=anchor-link href=#swap-material-and-mesh-bind-groups>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <ul><li>Custom 2d and 3d mesh/material shaders should now use bind group 2 <code>@group(2) @binding(x)</code> for their bound resources, instead of bind group 1.<li>Many internal pieces of rendering code have changed so that mesh data is now in bind group 1, and material data is now in bind group 2. Semi-custom rendering setups (that don’t use the Material or Material2d APIs) should adapt to these changes.</ul> <h3 id=light-renderlayers><a href=https://github.com/bevyengine/bevy/pull/10742>light renderlayers</a> <a class=anchor-link href=#light-renderlayers>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>Lights no longer affect all <code>RenderLayers</code> by default, now like cameras and meshes they default to <code>RenderLayers::layer(0)</code>. To recover the previous behaviour and have all lights affect all views, add a <code>RenderLayers::all()</code> component to the light entity.</p> <h3 id=update-to-wgpu-0-18><a href=https://github.com/bevyengine/bevy/pull/10266>Update to wgpu 0.18</a> <a class=anchor-link href=#update-to-wgpu-0-18>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <ul><li><code>RenderPassDescriptor</code> <code>color_attachments</code> (as well as <code>RenderPassColorAttachment</code>, and <code>RenderPassDepthStencilAttachment</code>) now use <code>StoreOp::Store</code> or <code>StoreOp::Discard</code> instead of a <code>boolean</code> to declare whether or not they should be stored.<li><code>RenderPassDescriptor</code> now have <code>timestamp_writes</code> and <code>occlusion_query_set</code> fields. These can safely be set to <code>None</code>.<li><code>ComputePassDescriptor</code> now have a <code>timestamp_writes</code> field. This can be set to <code>None</code> for now.<li>See the <a href=https://github.com/gfx-rs/wgpu/blob/trunk/CHANGELOG.md#v0180-2023-10-25>wgpu changelog</a> for additional details</ul> <h3 id=keep-track-of-when-a-texture-is-first-cleared><a href=https://github.com/bevyengine/bevy/pull/10325>Keep track of when a texture is first cleared</a> <a class=anchor-link href=#keep-track-of-when-a-texture-is-first-cleared>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <ul><li>Remove arguments to <code>ViewTarget::get_color_attachment()</code> and <code>ViewTarget::get_unsampled_color_attachment()</code>.<li>Configure clear color on <code>Camera</code> instead of on <code>Camera3d</code> and <code>Camera2d</code>.<li>Moved <code>ClearColor</code> and <code>ClearColorConfig</code> from <code>bevy::core_pipeline::clear_color</code> to <code>bevy::render::camera</code>.<li><code>ViewDepthTexture</code> must now be created via the <code>new()</code> method</ul> <h3 id=approximate-indirect-specular-occlusion><a href=https://github.com/bevyengine/bevy/pull/11152>Approximate indirect specular occlusion</a> <a class=anchor-link href=#approximate-indirect-specular-occlusion>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>Renamed <code>PbrInput::occlusion</code> to <code>diffuse_occlusion</code>, and added <code>specular_occlusion</code>.</p> <h3 id=texture-atlas-rework><a href=https://github.com/bevyengine/bevy/pull/5103>Texture Atlas rework</a> <a class=anchor-link href=#texture-atlas-rework>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>The <code>TextureAtlas</code> asset that previously contained both the atlas layout and image handle was renamed to <code>TextureAtlasLayout</code> with the image handle portion moved to a separate <code>Handle&LTImage></code> available from <code>SpriteSheetBundle::texture</code> or <code>AtlasImageBundle::image</code>.</p> <p><code>TextureAtlasSprite</code> was removed and replaced by a new component, <code>TextureAtlas</code>, which now holds the atlas index. The <code>Sprite</code> component can be used for <code>flip_x</code>, <code>flip_y</code>, <code>custom_size</code>, <code>anchor</code>, and <code>color</code>.</p> <p><code>SpriteSheetBundle</code> now uses a <code>Sprite</code> instead of a <code>TextureAtlasSprite</code> component and a <code>TextureAtlas</code> component instead of a <code>Handle&LTTextureAtlaslayout></code>.</p> <p><code>DynamicTextureAtlasBuilder::add_texture</code> takes an additional <code>&Handle&LTImage></code> parameter.</p> <p><code>TextureAtlasLayout::from_grid</code> no longer takes a <code>Handle&LTImage></code> parameter.</p> <p><code>TextureAtlasBuilder::finish</code> now returns a <code>Result<(TextureAtlasLayout, Image), TextureAtlasBuilderError></code>.</p> <p><code>UiTextureAtlasImage</code> was removed. The <code>AtlasImageBundle</code> is now identical to <code>ImageBundle</code> with an additional <code>TextureAtlas</code>.</p> <ul><li>Sprites</ul> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff">fn my_system(
</span><span class="z-source z-diff">  mut commands: Commands,
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>  mut atlases: ResMut&LTAssets&LTTextureAtlas>>,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>  mut atlases: ResMut&LTAssets&LTTextureAtlasLayout>>,
</span></span><span class="z-source z-diff">  asset_server: Res&LTAssetServer>
</span><span class="z-source z-diff">) {
</span><span class="z-source z-diff">    let texture_handle = asset_server.load("my_texture.png");
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>   let layout = TextureAtlas::from_grid(texture_handle, Vec2::new(25.0, 25.0), 5, 5, None, None);
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>   let layout = TextureAtlasLayout::from_grid(Vec2::new(25.0, 25.0), 5, 5, None, None);
</span></span><span class="z-source z-diff">    let layout_handle = atlases.add(layout);
</span><span class="z-source z-diff">    commands.spawn(SpriteSheetBundle {
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>      sprite: TextureAtlasSprite::new(0),
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>      texture_atlas: atlas_handle,
</span></span><span class="z-source z-diff">       // the new sprite initialization is covered by the `..default()` expression; however, it is added to showcase migration
</span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>      sprite: Sprite::default(),
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>      atlas: TextureAtlas {
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>         layout: layout_handle,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>         index: 0
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>      },
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>      texture: texture_handle,
</span></span><span class="z-source z-diff">       ..default()
</span><span class="z-source z-diff">     });
</span><span class="z-source z-diff">}
</span></code></pre> <ul><li>UI</ul> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff">fn my_system(
</span><span class="z-source z-diff">  mut images: ResMut&LTAssets&LTImage>>,
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>  mut atlases: ResMut&LTAssets&LTTextureAtlas>>,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>  mut atlases: ResMut&LTAssets&LTTextureAtlasLayout>>,
</span></span><span class="z-source z-diff">  asset_server: Res&LTAssetServer>
</span><span class="z-source z-diff">) {
</span><span class="z-source z-diff">    let texture_handle = asset_server.load("my_texture.png");
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>   let layout = TextureAtlas::from_grid(texture_handle, Vec2::new(25.0, 25.0), 5, 5, None, None);
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>   let layout = TextureAtlasLayout::from_grid(Vec2::new(25.0, 25.0), 5, 5, None, None);
</span></span><span class="z-source z-diff">    let layout_handle = atlases.add(layout);
</span><span class="z-source z-diff">    commands.spawn(AtlasImageBundle {
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>      texture_atlas_image: UiTextureAtlasImage {
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>           index: 0,
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>           flip_x: false,
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>           flip_y: false,
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>       },
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>      texture_atlas: atlas_handle,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>      texture_atlas: TextureAtlas {
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>         layout: layout_handle,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>         index: 0
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>      },
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>      image: UiImage {
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>           texture: texture_handle,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>           flip_x: false,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>           flip_y: false,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>       },
</span></span><span class="z-source z-diff">       ..default()
</span><span class="z-source z-diff">     });
</span><span class="z-source z-diff">}
</span></code></pre> <ul><li>Queries (taken from the <a href=https://bevy.org/examples/2D%20Rendering/sprite-sheet/>sprite sheet example</a>)</ul> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff">fn animate_sprite(
</span><span class="z-source z-diff">    time: Res&LTTime>,
</span><span class="z-source z-diff">    mut query: Query<(
</span><span class="z-source z-diff">        &AnimationIndices,
</span><span class="z-source z-diff">        &mut AnimationTimer,
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>       &mut TextureAtlasSprite)>,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>       &mut TextureAtlas)>,
</span></span><span class="z-source z-diff">) {
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>   for (indices, mut timer, mut sprite) in &mut query {
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>   for (indices, mut timer, mut atlas) in &mut query {
</span></span><span class="z-source z-diff">        timer.tick(time.delta());
</span><span class="z-source z-diff">        if timer.just_finished() {
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>           sprite.index = if sprite.index == indices.last {
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>           atlas.index = if atlas.index == indices.last {
</span></span><span class="z-source z-diff">                indices.first
</span><span class="z-source z-diff">            } else {
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>               sprite.index + 1
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>               atlas.index + 1
</span></span><span class="z-source z-diff">            };
</span><span class="z-source z-diff">        }
</span><span class="z-source z-diff">    }
</span><span class="z-source z-diff">}
</span></code></pre> <h3 id=exposure-settings-adopted><a href=https://github.com/bevyengine/bevy/pull/11347>Exposure settings (adopted)</a> <a class=anchor-link href=#exposure-settings-adopted>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <ul><li>If using a <code>Skybox</code> or <code>EnvironmentMapLight</code>, use the new <code>brightness</code> and <code>intensity</code> controls to adjust their strength.<li>All 3D scenes will now have different apparent brightnesses due to Bevy implementing proper exposure controls. You will have to adjust the intensity of your lights and/or your camera exposure via the new <a href=https://docs.rs/bevy/0.13.0/bevy/render/camera/struct.Exposure.html><code>Exposure</code></a> component to compensate.</ul> <h3 id=make-dynamicuniformbuffer-push-accept-an-t-instead-of-t><a href=https://github.com/bevyengine/bevy/pull/11373>Make <code>DynamicUniformBuffer::push</code> accept an <code>&T</code> instead of <code>T</code></a> <a class=anchor-link href=#make-dynamicuniformbuffer-push-accept-an-t-instead-of-t>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>Users of <code>DynamicUniformBuffer::push</code> now need to pass references to <code>DynamicUniformBuffer::push</code> (e.g. existing <code>uniforms.push(value)</code> will now become <code>uniforms.push(&value)</code>)</p> <h3 id=customizable-camera-main-texture-usage><a href=https://github.com/bevyengine/bevy/pull/11412>Customizable camera main texture usage</a> <a class=anchor-link href=#customizable-camera-main-texture-usage>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>Add <code>main_texture_usages: Default::default()</code> to your camera bundle.</p> <h3 id=optimize-batch-and-prepare-render-phase><a href=https://github.com/bevyengine/bevy/pull/11323>optimize batch_and_prepare_render_phase</a> <a class=anchor-link href=#optimize-batch-and-prepare-render-phase>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>The trait <code>GetBatchData</code> no longer hold associated type <code>Data</code> and <code>Filter</code> <code>get_batch_data</code> <code>query_item</code> type from <code>Self::Data</code> to <code>Entity</code> and return <code>Option<(Self::BufferData, Option&LTSelf::CompareData>)></code> <code>batch_and_prepare_render_phase</code> should not have a query</p> <h3 id=update-to-wgpu-0-19-and-raw-window-handle-0-6><a href=https://github.com/bevyengine/bevy/pull/11280>Update to wgpu 0.19 and raw-window-handle 0.6</a> <a class=anchor-link href=#update-to-wgpu-0-19-and-raw-window-handle-0-6>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <ul><li><p><code>bevy_render::instance_index::get_instance_index()</code> has been removed as the webgl2 workaround is no longer required as it was fixed upstream in wgpu. The <code>BASE_INSTANCE_WORKAROUND</code> shaderdef has also been removed.</p><li><p>WebGPU now requires the new <code>webgpu</code> feature to be enabled. The <code>webgpu</code> feature currently overrides the <code>webgl2</code> feature so you no longer need to disable all default features and re-add them all when targeting <code>webgpu</code>, but binaries built with both the <code>webgpu</code> and <code>webgl2</code> features will only target the webgpu backend, and will only work on browsers that support WebGPU.</p> <ul><li>Places where you conditionally compiled things for webgl2 need to be updated because of this change, eg: <ul><li><code>#[cfg(any(not(feature = "webgl"), not(target_arch = "wasm32")))]</code> becomes <code>#[cfg(any(not(feature = "webgl") ,not(target_arch = "wasm32"), feature = "webgpu"))]</code><li><code>#[cfg(all(feature = "webgl", target_arch = "wasm32"))]</code> becomes <code>#[cfg(all(feature = "webgl", target_arch = "wasm32", not(feature = "webgpu")))]</code><li><code>if cfg!(all(feature = "webgl", target_arch = "wasm32"))</code> becomes <code>if cfg!(all(feature = "webgl", target_arch = "wasm32", not(feature = "webgpu")))</code></ul></ul><li><p><code>create_texture_with_data</code> now also takes a <code>TextureDataOrder</code>. You can probably just set this to <code>TextureDataOrder::default()</code></p><li><p><code>TextureFormat</code>’s <code>block_size</code> has been renamed to <code>block_copy_size</code></p><li><p>See the <code>wgpu</code> changelog for anything I might’ve missed: <a href=https://github.com/gfx-rs/wgpu/blob/trunk/CHANGELOG.md>https://github.com/gfx-rs/wgpu/blob/trunk/CHANGELOG.md</a></p><li><p><code>wgpu</code> now surfaces errors at instance creation time, which may have you run into this error (we’ve also seen it with nsight instead of EOSOverlay):</p></ul> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-constant z-numeric z-integer z-decimal z-rust">2024</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-integer z-decimal z-rust">01</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span>27T02<span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">11</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-float z-rust">58.</span><span class="z-constant z-numeric z-float z-rust">491767</span>Z <span class="z-constant z-other z-rust">ERROR</span> <span class="z-meta z-path z-rust">wgpu_hal<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">vulkan<span class="z-punctuation z-accessor z-rust">::</span></span>instance<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-other z-rust">GENERAL</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>Loader Message <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-hexadecimal z-rust">0x0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust">        loader_get_json<span class="z-punctuation z-separator z-rust">:</span> Failed to open <span class="z-constant z-other z-rust">JSON</span> file C<span class="z-punctuation z-separator z-rust">:</span>\Program Files <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>x86</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>\Epic Games\Launcher\Portal\Extras\Overlay\EOSOverlayVkLayer<span class="z-keyword z-operator z-arithmetic z-rust">-</span>Win32<span class="z-punctuation z-accessor z-dot z-rust">.</span>json
</span><span class="z-source z-rust"><span class="z-constant z-numeric z-integer z-decimal z-rust">2024</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-integer z-decimal z-rust">01</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span>27T02<span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">11</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-float z-rust">58.</span><span class="z-constant z-numeric z-float z-rust">492046</span>Z <span class="z-constant z-other z-rust">ERROR</span> <span class="z-meta z-path z-rust">wgpu_hal<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">vulkan<span class="z-punctuation z-accessor z-rust">::</span></span>instance<span class="z-punctuation z-separator z-rust">:</span>   objects<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-type z-rust">type</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-other z-rust">INSTANCE</span><span class="z-punctuation z-separator z-rust">,</span> hndl<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-rust">0x1fbe55dc070</span><span class="z-punctuation z-separator z-rust">,</span> name<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">?</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust"><span class="z-constant z-numeric z-integer z-decimal z-rust">2024</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-integer z-decimal z-rust">01</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span>27T02<span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">11</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-float z-rust">58.</span><span class="z-constant z-numeric z-float z-rust">492282</span>Z <span class="z-constant z-other z-rust">ERROR</span> <span class="z-meta z-path z-rust">wgpu_hal<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">vulkan<span class="z-punctuation z-accessor z-rust">::</span></span>instance<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-other z-rust">GENERAL</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>Loader Message <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-hexadecimal z-rust">0x0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust">        loader_get_json<span class="z-punctuation z-separator z-rust">:</span> Failed to open <span class="z-constant z-other z-rust">JSON</span> file C<span class="z-punctuation z-separator z-rust">:</span>\Program Files <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>x86</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>\Epic Games\Launcher\Portal\Extras\Overlay\EOSOverlayVkLayer<span class="z-keyword z-operator z-arithmetic z-rust">-</span>Win64<span class="z-punctuation z-accessor z-dot z-rust">.</span>json
</span><span class="z-source z-rust"><span class="z-constant z-numeric z-integer z-decimal z-rust">2024</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-integer z-decimal z-rust">01</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span>27T02<span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">11</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-float z-rust">58.</span><span class="z-constant z-numeric z-float z-rust">492525</span>Z <span class="z-constant z-other z-rust">ERROR</span> <span class="z-meta z-path z-rust">wgpu_hal<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">vulkan<span class="z-punctuation z-accessor z-rust">::</span></span>instance<span class="z-punctuation z-separator z-rust">:</span>   objects<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-type z-rust">type</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-other z-rust">INSTANCE</span><span class="z-punctuation z-separator z-rust">,</span> hndl<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-rust">0x1fbe55dc070</span><span class="z-punctuation z-separator z-rust">,</span> name<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">?</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <p>It just means that the program didn’t properly cleanup their registry keys on an update/uninstall, and vulkan uses those keys to load validation layers. The fix is to <a href="https://support.microsoft.com/en-us/topic/how-to-back-up-and-restore-the-registry-in-windows-855140ad-e318-2a13-2829-d428a2ab0692#ID0EBD=Windows_11">backup your registry</a>, then remove the offending keys in <code>"Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Khronos\Vulkan\ImplicitLayers"</code>.</p> <h3 id=rendergraph-labelization><a href=https://github.com/bevyengine/bevy/pull/10644>RenderGraph Labelization</a> <a class=anchor-link href=#rendergraph-labelization>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>For Nodes and SubGraphs, instead of using hardcoded strings, you now pass labels, which can be derived with structs and enums.</p> <pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyRenderNode</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust"><span class="z-entity z-name z-impl z-rust">MyRenderNode</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">NAME</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-type z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>my_render_node<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">render_app
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">add_render_graph_node<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">ViewNodeRunner<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyRenderNode<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">core_3d<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">graph<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">NAME</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">MyRenderNode<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">NAME</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_render_graph_edges</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">core_3d<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">graph<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">NAME</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">core_3d<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">graph<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">node<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">TONEMAPPING</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">MyRenderNode<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">NAME</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">core_3d<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">graph<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">node<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">END_MAIN_PASS_POST_PROCESSING</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">core_pipeline<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">core_3d<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">graph<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Node3d<span class="z-punctuation z-separator z-rust">,</span> Core3d</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Debug<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Clone<span class="z-punctuation z-separator z-rust">,</span> RenderLabel</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyRenderLabel</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyRenderNode</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">render_app
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">add_render_graph_node<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">ViewNodeRunner<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyRenderNode<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        Core3d<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        MyRenderLabel<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_render_graph_edges</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        Core3d<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">Node3d<span class="z-punctuation z-accessor z-rust">::</span></span>Tonemapping<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            MyRenderLabel<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">Node3d<span class="z-punctuation z-accessor z-rust">::</span></span>EndMainPassPostProcessing<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>If you still want to use dynamic labels, you can easily create those with tuple structs:</p> <pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Debug<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Clone<span class="z-punctuation z-separator z-rust">,</span> RenderLabel</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyDynamicLabel</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'static</span> <span class="z-storage z-type z-rust">str</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h4 id=subgraphs>SubGraphs <a class=anchor-link href=#subgraphs>#</a></h4> <ul><li><code>bevy_core_pipeline::core_2d::graph</code>: <code>NAME -> Core2d</code><li><code>bevy_core_pipeline::core_3d::graph</code>:<code>NAME -> Core3d</code><li><code>bevy_ui::render</code>: <code>draw_ui_graph::NAME -> graph::SubGraphUi</code></ul> <h4 id=nodes>Nodes <a class=anchor-link href=#nodes>#</a></h4> <ul><li><code>bevy_core_pipeline::core_2d::graph</code>: <ul><li><code>node::MSAA_WRITEBACK -> Node2d::MsaaWriteback</code> <code>node::MAIN_PASS ->Node2d::MainPass</code> <code>node::BLOOM -> Node2d::Bloom</code> <code>node::TONEMAPPING -> Node2d::Tonemapping</code> <code>node::FXAA -> Node2d::Fxaa</code> <code>node::UPSCALING -> Node2d::Upscaling</code> <code>node::CONTRAST_ADAPTIVE_SHARPENING -> Node2d::ContrastAdaptiveSharpening</code> <code>node::END_MAIN_PASS_POST_PROCESSING -> Node2d::EndMainPassPostProcessing</code></ul><li><code>bevy_core_pipeline::core_3d::graph</code>: <ul><li><code>node::MSAA_WRITEBACK -> Node3d::MsaaWriteback</code> <code>node::PREPASS -> Node3d::Prepass</code> <code>node::DEFERRED_PREPASS -> Node3d::DeferredPrepass</code> <code>node::COPY_DEFERRED_LIGHTING_ID -> Node3d::CopyDeferredLightingId</code> <code>node::END_PREPASSES -> Node3d::EndPrepasses</code> <code>node::START_MAIN_PASS -> Node3d::StartMainPass</code> <code>node::MAIN_OPAQUE_PASS -> Node3d::MainOpaquePass</code> <code>node::MAIN_TRANSMISSIVE_PASS -> Node3d::MainTransmissivePass</code> <code>node::MAIN_TRANSPARENT_PASS -> Node3d::MainTransparentPass</code> <code>node::END_MAIN_PASS -> Node3d::EndMainPass</code> <code>node::BLOOM -> Node3d::Bloom</code> <code>node::TONEMAPPING -> Node3d::Tonemapping</code> <code>node::FXAA -> Node3d::Fxaa</code> <code>node::UPSCALING -> Node3d::Upscaling</code> <code>node::CONTRAST_ADAPTIVE_SHARPENING -> Node3d::ContrastAdaptiveSharpening</code> <code>node::END_MAIN_PASS_POST_PROCESSING -> Node3d::EndMainPassPostProcessing</code></ul><li><code>bevy_core_pipeline</code>: <code>taa::draw_3d_graph::node::TAA -> Node3d::Taa</code><li><code>bevy_pbr</code>: <code>draw_3d_graph::node::SHADOW_PASS -> NodePbr::ShadowPass</code> <code>ssao::draw_3d_graph::node::SCREEN_SPACE_AMBIENT_OCCLUSION -> NodePbr::ScreenSpaceAmbientOcclusion</code> <code>deferred::DEFERRED_LIGHTING_PASS -> NodePbr::DeferredLightingPass</code><li><code>bevy_render</code>: <code>main_graph::node::CAMERA_DRIVER -> graph::CameraDriverLabel</code><li><code>bevy_ui::render</code>: <code>draw_ui_graph::node::UI_PASS -> graph::Nodeui::UiPass</code></ul> <h3 id=gate-diffuse-and-specular-transmission-behind-shader-defs><a href=https://github.com/bevyengine/bevy/pull/11627>Gate diffuse and specular transmission behind shader defs</a> <a class=anchor-link href=#gate-diffuse-and-specular-transmission-behind-shader-defs>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>If you were using <code>#ifdef STANDARDMATERIAL_NORMAL_MAP</code> on your shader code, make sure to update the name to <code>STANDARD_MATERIAL_NORMAL_MAP</code>; (with an underscore between <code>STANDARD</code> and <code>MATERIAL</code>)</p> <h3 id=async-pipeline-compilation><a href=https://github.com/bevyengine/bevy/pull/10812>Async pipeline compilation</a> <a class=anchor-link href=#async-pipeline-compilation>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>Match on the new <code>Creating</code> variant for exhaustive matches of <code>CachedPipelineState</code></p> <h3 id=mesh-insert-indices><a href=https://github.com/bevyengine/bevy/pull/11745>Mesh insert indices</a> <a class=anchor-link href=#mesh-insert-indices>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <ul><li>Use <code>Mesh::insert_indices</code> or <code>Mesh::with_inserted_indices</code> instead of <code>Mesh::set_indices</code> / <code>Mesh::with_indices</code>.<li>If you have passed <code>None</code> to <code>Mesh::set_indices</code> or <code>Mesh::with_indices</code> you should use <code>Mesh::remove_indices</code> or <code>Mesh::with_removed_indices</code> instead.</ul> <h3 id=wait-for-render-app-when-main-world-is-dropped><a href=https://github.com/bevyengine/bevy/pull/11737>wait for render app when main world is dropped</a> <a class=anchor-link href=#wait-for-render-app-when-main-world-is-dropped>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>If you were using the pipelined rendering channels, <code>MainToRenderAppSender</code> and <code>RenderToMainAppReceiver</code>, they have been combined into the single resource <code>RenderAppChannels</code>.</p> <h3 id=deprecate-shapes-in-bevy-render-mesh-shape><a href=https://github.com/bevyengine/bevy/pull/11773>Deprecate shapes in <code>bevy_render::mesh::shape</code></a> <a class=anchor-link href=#deprecate-shapes-in-bevy-render-mesh-shape>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>Bevy has previously used rendering-specific types like <code>UVSphere</code> and <code>Quad</code> for primitive mesh shapes. These have now been deprecated to use the geometric primitives newly introduced in version 0.13.</p> <ul><li><code>bevy_render::mesh::Capsule</code> is deprecated use <code>bevy_math::primitives::dim3::Capsule3d</code> instead;<li><code>bevy_render::mesh::Cylinder</code> is deprecated use <code>bevy_math::primitives::dim3::Cylinder</code> instead;<li><code>bevy_render::mesh::Icosphere</code> is deprecated use <code>bevy_math::primitives::dim3::Sphere</code> instead;<li><code>bevy_render::mesh::Cube</code> is deprecated use <code>bevy_math::primitives::dim3::Cuboid</code> instead;<li><code>bevy_render::mesh::Box</code> is deprecated use <code>bevy_math::primitives::dim3::Cuboid</code> instead;<li><code>bevy_render::mesh::Quad</code> is deprecated use <code>bevy_math::primitives::dim2::Rectangle</code> instead;<li><code>bevy_render::mesh::Plane</code> is deprecated use <code>bevy_math::primitives::dim2::Plane2d</code> or <code>bevy_math::primitives::dim3::Plane3d</code> instead;<li><code>bevy_render::mesh::RegularPolygon</code> is deprecated use <code>bevy_math::primitives::dim2::RegularPolygon</code> instead;<li><code>bevy_render::mesh::Circle</code> is deprecated use <code>bevy_math::primitives::dim2::Circle</code> instead;<li><code>bevy_render::mesh::Torus</code> is deprecated use <code>bevy_math::primitives::dim3::Torus</code> instead;<li><code>bevy_render::mesh::UVSphere</code> is deprecated use <code>bevy_math::primitives::dim3::Sphere</code> instead;</ul> <p>Some examples:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> before <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">shape<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">Box<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">15</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> after <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Cuboid<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">15</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> before <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">shape<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">Quad<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> after <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Rectangle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> before <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">shape<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">Plane<span class="z-punctuation z-accessor z-rust">::</span></span>from_size<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> The surface normal can now also be specified when using `new`
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> after <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Plane3d<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">mesh</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">size</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> before <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-path z-rust">Mesh<span class="z-punctuation z-accessor z-rust">::</span></span>try_from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">shape<span class="z-punctuation z-accessor z-rust">::</span></span>Icosphere <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        radius<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        subdivisions<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> after <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Sphere<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">mesh</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">ico</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h3 id=multithreaded-render-command-encoding><a href=https://github.com/bevyengine/bevy/pull/9172>Multithreaded render command encoding</a> <a class=anchor-link href=#multithreaded-render-command-encoding>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p><code>RenderContext::new()</code> now takes adapter info</p> <p>Some render graph and Node related types and methods now have additional lifetime constraints.</p> <h3 id=stop-extracting-mesh-entities-to-the-render-world><a href=https://github.com/bevyengine/bevy/pull/11803>Stop extracting mesh entities to the render world.</a> <a class=anchor-link href=#stop-extracting-mesh-entities-to-the-render-world>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>For efficiency reasons, some meshes in the render world may not have corresponding <code>Entity</code> IDs anymore. As a result, the <code>entity</code> parameter to <code>RenderCommand::render()</code> is now wrapped in an <code>Option</code>. Custom rendering code may need to be updated to handle the case in which no <code>Entity</code> exists for an object that is to be rendered.</p> <h3 id=new-exposure-and-lighting-defaults-and-calibrate-examples><a href=https://github.com/bevyengine/bevy/pull/11868>New Exposure and Lighting Defaults (and calibrate examples)</a> <a class=anchor-link href=#new-exposure-and-lighting-defaults-and-calibrate-examples>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div> <p>The increased <code>Exposure::ev100</code> means that all existing 3D lighting will need to be adjusted to match (DirectionalLights, PointLights, SpotLights, EnvironmentMapLights, etc). Or alternatively, you can adjust the <code>Exposure::ev100</code> on your cameras to work nicely with your current lighting values. If you are currently relying on default intensity values, you might need to change the intensity to achieve the same effect. Note that in Bevy 0.12, point/spot lights had a different hard coded ev100 value than directional lights. In Bevy 0.13, they use the same ev100, so if you have both in your scene, the <em>scale</em> between these light types has changed and you will likely need to adjust one or both of them.</p> <p>Many default lighting values were changed:</p> <ul><li><code>PointLight</code>'s default intensity is now <code>1_000_000.0</code><li><code>SpotLight</code>'s default intensity is now <code>1_000_000.0</code><li><code>DirectionalLight</code>'s default illuminance is now light_consts::lux::AMBIENT_DAYLIGHT (<code>10_000.</code>)<li><code>AmbientLight</code>'s default brightness is now <code>80.0</code></ul> <h3 id=unload-render-assets-from-ram><a href=https://github.com/bevyengine/bevy/pull/10520>Unload render assets from RAM</a> <a class=anchor-link href=#unload-render-assets-from-ram>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div><div class=migration-guide-area-tag>Assets</div></div> <p>Render assets can now be automatically unloaded from the main world after being prepared for rendering in the render world. This is controlled using <code>RenderAssetUsages</code> bitflags. To mimic old behavior and keep assets around in the main world, use <code>RenderAssetUsages::default()</code>.</p> <ul><li><p><code>Mesh</code> now requires a new <code>asset_usage</code> field. Set it to <code>RenderAssetUsages::default()</code> to mimic the previous behavior.</p><li><p><code>Image</code> now requires a new <code>asset_usage</code> field. Set it to <code>RenderAssetUsages::default()</code> to mimic the previous behavior.</p><li><p><code>MorphTargetImage::new()</code> now requires a new <code>asset_usage</code> parameter. Set it to <code>RenderAssetUsages::default()</code> to mimic the previous behavior.</p><li><p><code>DynamicTextureAtlasBuilder::add_texture()</code> now requires that the <code>TextureAtlas</code> you pass has an <code>Image</code> with <code>asset_usage: RenderAssetUsages::default()</code>. Ensure you construct the image properly for the texture atlas.</p><li><p>The <code>RenderAsset</code> trait has significantly changed, and requires adapting your existing implementations.</p> <ul><li>The trait now requires <code>Clone</code>.<li>The <code>ExtractedAsset</code> associated type has been removed (the type itself is now extracted).<li>The signature of <code>prepare_asset()</code> is slightly different<li>A new <code>asset_usage()</code> method is now required (return <code>RenderAssetUsages::default()</code> to match the previous behavior).</ul><li><p>Match on the new <code>NoLongerUsed</code> variant for exhaustive matches of <code>AssetEvent</code>.</p></ul> <h3 id=split-ray-into-ray2d-and-ray3d-and-simplify-plane-construction><a href=https://github.com/bevyengine/bevy/pull/10856>Split <code>Ray</code> into <code>Ray2d</code> and <code>Ray3d</code> and simplify plane construction</a> <a class=anchor-link href=#split-ray-into-ray2d-and-ray3d-and-simplify-plane-construction>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div><div class=migration-guide-area-tag>Math</div></div> <p><code>Ray</code> has been renamed to <code>Ray3d</code>.</p> <h4 id=ray-creation>Ray creation <a class=anchor-link href=#ray-creation>#</a></h4> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">Ray <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    origin<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    direction<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">6</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">2</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">normalize</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Option 1:
</span></span><span class="z-source z-rust">Ray3d <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    origin<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    direction<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Direction3d<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">6</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">2</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Option 2:
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">Ray3d<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">6</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">2</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <h4 id=plane-intersections>Plane intersections <a class=anchor-link href=#plane-intersections>#</a></h4> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> result <span class="z-keyword z-operator z-assignment z-rust">=</span> ray<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">intersect_plane</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span>X<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span>Y</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> result <span class="z-keyword z-operator z-assignment z-rust">=</span> ray<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">intersect_plane</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span>X<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Plane2d<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec2<span class="z-punctuation z-accessor z-rust">::</span></span>Y</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <h3 id=introduce-aspectratio-struct><a href=https://github.com/bevyengine/bevy/pull/10368>Introduce AspectRatio struct</a> <a class=anchor-link href=#introduce-aspectratio-struct>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div><div class=migration-guide-area-tag>Math</div></div> <p>Anywhere where you are currently expecting a f32 when getting aspect ratios, you will now receive a <code>AspectRatio</code> struct. this still holds the same value.</p> <h3 id=include-ui-node-size-in-the-vertex-inputs-for-uimaterial><a href=https://github.com/bevyengine/bevy/pull/11722>Include UI node size in the vertex inputs for UiMaterial.</a> <a class=anchor-link href=#include-ui-node-size-in-the-vertex-inputs-for-uimaterial>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div><div class=migration-guide-area-tag>UI</div></div> <p>This change should be backwards compatible, using the new field is optional.</p> <h3 id=optional-imagescalemode><a href=https://github.com/bevyengine/bevy/pull/11780>Optional ImageScaleMode</a> <a class=anchor-link href=#optional-imagescalemode>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div><div class=migration-guide-area-tag>UI</div></div>  <h3 id=re-export-futures-lite-in-bevy-tasks><a href=https://github.com/bevyengine/bevy/pull/10670>Re-export <code>futures_lite</code> in <code>bevy_tasks</code></a> <a class=anchor-link href=#re-export-futures-lite-in-bevy-tasks>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Tasks</div></div> <ul><li>Remove <code>futures_lite</code> from <code>Cargo.toml</code>.</ul> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff">[dependencies]
</span><span class="z-source z-diff">bevy = "0.12.0"
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span> futures-lite = "1.4.0"
</span></span></code></pre> <ul><li>Replace <code>futures_lite</code> imports with <code>bevy::tasks::futures_lite</code>.</ul> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span> use futures_lite::future::poll_once;
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> use bevy::tasks::futures_lite::future::poll_once;
</span></span></code></pre> <h3 id=rename-textalignment-to-justifytext><a href=https://github.com/bevyengine/bevy/pull/10854>Rename <code>TextAlignment</code> to <code>JustifyText</code>.</a> <a class=anchor-link href=#rename-textalignment-to-justifytext>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Text</div></div> <ul><li><code>TextAlignment</code> has been renamed to <code>JustifyText</code><li><code>TextBundle::with_text_alignment</code> has been renamed to <code>TextBundle::with_text_justify</code><li><code>Text::with_alignment</code> has been renamed to <code>Text::with_justify</code><li>The <code>text_alignment</code> field of <code>TextMeasureInfo</code> has been renamed to <code>justification</code></ul> <h3 id=rename-time-fixed-overstep-percentage-and-time-fixed-overstep-percentage-f64><a href=https://github.com/bevyengine/bevy/pull/10448>Rename <code>Time::&LTFixed>::overstep_percentage()</code> and <code>Time::&LTFixed>::overstep_percentage_f64()</code></a> <a class=anchor-link href=#rename-time-fixed-overstep-percentage-and-time-fixed-overstep-percentage-f64>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Time</div></div> <ul><li><code>Time::&LTFixed>::overstep_percentage()</code> has been renamed to <code>Time::&LTFixed>::overstep_fraction()</code><li><code>Time::&LTFixed>::overstep_percentage_f64()</code> has been renamed to <code>Time::&LTFixed>::overstep_fraction_f64()</code></ul> <h3 id=rename-timer-percent-percent-left-to-timer-fraction-fraction-remaining><a href=https://github.com/bevyengine/bevy/pull/10442>Rename <code>Timer::{percent,percent_left}</code> to <code>Timer::{fraction,fraction_remaining}</code></a> <a class=anchor-link href=#rename-timer-percent-percent-left-to-timer-fraction-fraction-remaining>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Time</div></div> <ul><li><code>Timer::percent()</code> has been renamed to <code>Timer::fraction()</code><li><code>Timer::percent_left()</code> has been renamed to <code>Timer::fraction_remaining()</code></ul> <h3 id=return-direction3d-from-transform-up-and-friends><a href=https://github.com/bevyengine/bevy/pull/11604>return Direction3d from Transform::up and friends</a> <a class=anchor-link href=#return-direction3d-from-transform-up-and-friends>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Transform</div><div class=migration-guide-area-tag>Math</div></div> <p>Callers of <code>Transform::up()</code> and similar functions may have to dereference the returned <code>Direction3d</code> to get to the inner <code>Vec3</code>.</p> <h3 id=make-clipped-areas-of-ui-nodes-non-interactive><a href=https://github.com/bevyengine/bevy/pull/10454>Make clipped areas of UI nodes non-interactive</a> <a class=anchor-link href=#make-clipped-areas-of-ui-nodes-non-interactive>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div> <p>The clipped areas of UI nodes are no longer interactive.</p> <p><code>RelativeCursorPosition</code> is now calculated relative to the whole node’s position and size, not only the visible part. Its <code>mouse_over</code> method only returns true when the cursor is over an unclipped part of the node.</p> <p><code>RelativeCursorPosition</code> no longer implements <code>Deref</code> and <code>DerefMut</code>.</p> <h3 id=create-serialize-feature-for-bevy-ui><a href=https://github.com/bevyengine/bevy/pull/11188>Create serialize feature for bevy_ui</a> <a class=anchor-link href=#create-serialize-feature-for-bevy-ui>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div> <p>If you want to use serialize and deserialize with types from bevy_ui, you need to use the feature serialize in your TOML</p> <pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span><span class="z-punctuation z-separator z-table z-toml">.</span><span class="z-entity z-name z-table z-toml">bevy</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>serialize<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span></code></pre> <h3 id=camera-driven-ui><a href=https://github.com/bevyengine/bevy/pull/10559>Camera-driven UI</a> <a class=anchor-link href=#camera-driven-ui>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div> <p>If the world contains more than one camera, insert <code>TargetCamera(Entity)</code> component to each UI root node, where <code>Entity</code> is the ID of the camera you want this specific UI tree to be rendered to. Test for any required adjustments of UI positioning and scaling.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Camera3dBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-keyword z-operator z-range z-rust">...</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>NodeBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-keyword z-operator z-range z-rust">...</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> camera <span class="z-keyword z-operator z-assignment z-rust">=</span> commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Camera3dBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-keyword z-operator z-range z-rust">...</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>TargetCamera<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>camera</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> NodeBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-keyword z-operator z-range z-rust">...</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>Remove <code>UiCameraConfig</code> component from all cameras. If it was used to control UI visibility, insert <code>Visibility</code> component on UI root nodes instead.</p> <h3 id=change-window-scale-factor-to-f32-adopted><a href=https://github.com/bevyengine/bevy/pull/10897>Change <code>Window</code> scale factor to f32 (adopted)</a> <a class=anchor-link href=#change-window-scale-factor-to-f32-adopted>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Windowing</div></div> <p>If manipulating scale_factor, some conversion from f64 to f32 may be necessary.</p> <h3 id=update-winit-dependency-to-0-29><a href=https://github.com/bevyengine/bevy/pull/10702>Update winit dependency to 0.29</a> <a class=anchor-link href=#update-winit-dependency-to-0-29>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Windowing</div><div class=migration-guide-area-tag>Input</div></div> <h4 id=keycode-changes>KeyCode changes <a class=anchor-link href=#keycode-changes>#</a></h4> <p>Several <code>KeyCode</code> variants have been renamed and now represent physical keys on the keyboard, replacing <code>ScanCode</code>.</p> <p>Common examples of the updated variants are as follows:</p> <ul><li><code>KeyCode::W</code> -> <code>KeyCode::KeyW</code><li><code>KeyCode::Up</code> -> <code>KeyCode::ArrowUp</code><li><code>KeyCode::Key1</code> -> <code>KeyCode::Digit1</code></ul> <p>See the relevant <a href=https://docs.rs/bevy/0.13.0/bevy/input/keyboard/enum.KeyCode.html>documentation</a> for more information.</p> <h4 id=receivedcharacter-changes>ReceivedCharacter changes <a class=anchor-link href=#receivedcharacter-changes>#</a></h4> <p>The <code>char</code> field of <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.ReceivedCharacter.html><code>ReceivedCharacter</code></a> is now a <a href=https://docs.rs/smol_str/0.2.1/smol_str/struct.SmolStr.html><code>SmolStr</code></a>, and <em>could</em> contain multiple characters. See these <a href=https://docs.rs/winit/0.29.10/winit/event/struct.KeyEvent.html#structfield.text>winit docs</a> for details.</p> <p>A simple workaround if you need a <code>char</code> is to call <code>.chars().last()</code>.</p> <p>It's now possible to use <a href=https://docs.rs/bevy/latest/bevy/input/keyboard/struct.KeyboardInput.html#structfield.logical_key><code>KeyEvent::logical_key</code></a>'s <code>Character</code> variant instead if you need consistent cross-platform behavior and/or a unified event stream with non-character events.</p> <h3 id=remove-canvasparentresizeplugin><a href=https://github.com/bevyengine/bevy/pull/11057>Remove CanvasParentResizePlugin</a> <a class=anchor-link href=#remove-canvasparentresizeplugin>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Windowing</div></div> <p>Remove uses of <code>Window::fit_canvas_to_parent</code> in favor of CSS properties, for example:</p> <pre class="language-css z-code" data-lang=css><code class=language-css data-lang=css><span class="z-source z-css"><span class="z-meta z-selector z-css"><span class="z-entity z-name z-tag z-css">canvas</span> </span><span class="z-meta z-property-list z-css"><span class="z-punctuation z-section z-property-list z-css">{</span>
</span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css">  <span class="z-meta z-property-name z-css"><span class="z-support z-type z-property-name z-css">width</span></span><span class="z-punctuation z-separator z-key-value z-css">:</span><span class="z-meta z-property-value z-css"> </span><span class="z-meta z-property-value z-css"><span class="z-constant z-numeric z-integer z-decimal z-css">100<span class="z-keyword z-other z-unit z-css">%</span></span> <span class="z-keyword z-other z-important z-css">!important</span></span><span class="z-punctuation z-terminator z-rule z-css">;</span>
</span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css">  <span class="z-meta z-property-name z-css"><span class="z-support z-type z-property-name z-css">height</span></span><span class="z-punctuation z-separator z-key-value z-css">:</span><span class="z-meta z-property-value z-css"> </span><span class="z-meta z-property-value z-css"><span class="z-constant z-numeric z-integer z-decimal z-css">100<span class="z-keyword z-other z-unit z-css">%</span></span> <span class="z-keyword z-other z-important z-css">!important</span></span><span class="z-punctuation z-terminator z-rule z-css">;</span>
</span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"></span><span class="z-punctuation z-section z-property-list z-css">}</span>
</span></code></pre> <h3 id=cleanup-bevy-winit><a href=https://github.com/bevyengine/bevy/pull/11489>Cleanup bevy winit</a> <a class=anchor-link href=#cleanup-bevy-winit>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Windowing</div></div> <p><code>bevy::window::WindowMoved</code>’s <code>entity</code> field has been renamed to <code>window</code>. This is to be more consistent with other windowing events.</p> <p>Consider changing usage:</p> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>window_moved.entity
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>window_moved.window
</span></span></code></pre> <h3 id=add-name-to-bevy-window-window><a href=https://github.com/bevyengine/bevy/pull/7650>Add <code>name</code> to <code>bevy::window::Window</code></a> <a class=anchor-link href=#add-name-to-bevy-window-window>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>Windowing</div></div> <p><code>Window</code> has a new <a href=https://docs.rs/bevy/latest/bevy/prelude/struct.Window.html#structfield.name><code>name</code></a> field for specifying the "window class name." If you don't need this, set it to <code>None</code>.</p> <h3 id=delete-methods-deprecated-in-0-12><a href=https://github.com/bevyengine/bevy/pull/10693>delete methods deprecated in 0.12</a> <a class=anchor-link href=#delete-methods-deprecated-in-0-12>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>No area label</div></div> <p>Many methods that were tagged as deprecated in 0.12 have now been removed. You should consider fixing the deprecation warnings before migrating to 0.13.</p> <h3 id=renamed-accessibility-plugin-to-accesskitplugin-in-bevy-winit><a href=https://github.com/bevyengine/bevy/pull/10914>Renamed Accessibility plugin to AccessKitPlugin in bevy_winit</a> <a class=anchor-link href=#renamed-accessibility-plugin-to-accesskitplugin-in-bevy-winit>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>No area label</div></div> <p><code>bevy_winit::AccessibilityPlugin</code> has been renamed to <code>AccessKitPlugin</code>.</p> <h3 id=use-typeidmap-whenever-possible><a href=https://github.com/bevyengine/bevy/pull/11684>Use TypeIdMap whenever possible</a> <a class=anchor-link href=#use-typeidmap-whenever-possible>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>No area label</div></div> <ul><li><code>TypeIdMap</code> now lives in <code>bevy_utils</code><li><code>DrawFunctionsInternal::indices</code> now uses a <code>TypeIdMap</code>.</ul> <h3 id=bevy-render-use-the-non-send-marker-from-bevy-core><a href=https://github.com/bevyengine/bevy/pull/11725>bevy_render: use the non-send marker from bevy_core</a> <a class=anchor-link href=#bevy-render-use-the-non-send-marker-from-bevy-core>#</a></h3> <div class=migration-guide-area-tags><div class=migration-guide-area-tag>No area label</div></div> <p>If you were using <code>bevy::render::view::NonSendMarker</code> or <code>bevy::render::view::window::NonSendMarker</code>, use <code>bevy::core::NonSendMarker</code> instead</p> <div class="docs-footer print:hidden"><nav class=docs-footer__nav><a class="docs-footer__link docs-footer__link--next" data-docs-nav-next href=/learn/migration-guides/0-11-to-0-12/> <div class=docs-footer__label><div class=docs-footer__dir>Next</div> 0.11 to 0.12</div> <i class="docs-footer__chevron icon icon--chevron-right"></i> </a><a class="docs-footer__link docs-footer__link--prev" data-docs-nav-previous href=/learn/migration-guides/0-13-to-0-14/> <div class=docs-footer__label><div class=docs-footer__dir>Previous</div> 0.13 to 0.14</div> <i class="docs-footer__chevron icon icon--chevron-left"></i> </a></nav><div class=docs-footer__edit-wrapper><a class=docs-footer__edit href=https://github.com/bevyengine/bevy-website/edit/main/content/learn/migration-guides/0.12-to-0.13.md> <i class="icon icon--pencil"></i> Improve this page </a><a href="https://github.com/bevyengine/bevy-website/issues/new?template=docs.md&title=Issue%20on%20page%200.12%20to%200.13" class=docs-footer__edit> <i class="icon icon--github"></i> Report issue </a></div></div> <footer class=print:hidden><div class=footer__social-container><a class=footer__social href=https://github.com/bevyengine/bevy title=GitHub> <img alt="GitHub logo" height=24 src=/assets/github-mark-white.svg width=24> </a><a class=footer__social href=https://discord.gg/bevy title=Discord> <img alt="Discord logo" height=24 src=/assets/discord.svg width=24> </a><a class=footer__social href=https://bsky.app/profile/bevy.org title=Bluesky> <img alt="Bluesky logo" height=24 src=/assets/bluesky.svg width=24> </a><a class=footer__social href=https://mastodon.social/@bevy title=Mastodon> <img alt="Mastodon logo" height=24 src=/assets/mastodon-logo-purple.svg width=24> </a><a class=footer__social href=https://www.reddit.com/r/bevy/ title=Reddit> <img alt="Reddit logo" height=24 src=/assets/reddit.svg width=24> </a><a class=footer__social href=https://itch.io/games/tag-bevy title=itch.io> <img alt="itch.io logo" height=24 src=/assets/itchio-textless.svg width=24> </a><a title="Bevy news feed" class=footer__social href=/atom.xml> <img alt="Bevy news feed" height=24 src=/assets/feed.svg width=24> </a></div></footer> <script>const search_params=new URLSearchParams(window.location.search);if(search_params.has(`show_drafts`)||document.cookie.indexOf(`show_drafts`)>=0){let a=`show_drafts`;if(search_params.get(a)===`0`){document.cookie=`show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC`}else{document.cookie=`show_drafts=1;path=/`;document.body.classList.add(a)}}</script> 