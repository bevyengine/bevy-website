<!doctype html><html class=light-mode lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="0.14 to 0.15" property=og:title><meta content=website property=og:type><meta content=https://bevy.org//learn/migration-guides/0-14-to-0-15/ property=og:url><meta content=https://bevy.org/assets/bevy_logo_fill.png property=og:image><meta content="Bevy is a refreshingly simple data-driven game engine built in Rust. It is free and open-source forever!" property=og:description><link rel="shortcut icon" href=/assets/favicon.png type=image/png><link href=/site.css rel=stylesheet><link href=/atom.xml rel=alternate type=application/atom+xml><title>0.14 to 0.15</title><script src=/optional-helpers.js></script><script defer src=/highlight-intrapage-link.js></script><body><div class=layout><input class=hidden id=mobile-menu-state type=checkbox><header class="layout__header header print:hidden" data-mobile-menu-state-container><div class=header__content><label class=main-menu-backdrop for=mobile-menu-state></label><label class="header__hamburger button-square button-square--header" for=mobile-menu-state><img alt="Three horizontal lines stacked on top of eachother" height=16 src=/assets/icon-hamburger.svg width=20></label><div class=header__left-block><a class=header__logo href=/> <picture class=logo><img alt="Bevy logo" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><div class=header__message>Migration Guides</div></div><input checked class=hidden id=page-menu-switch-state type=checkbox><nav class="header__menu main-menu main-menu--with-page-menu" data-page-menu-switch-state-container role=navigation><div class=main-menu__header><a href=/> <picture class=logo><img alt="Bevy Engine" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><label class="button-square button-square--header" for=mobile-menu-state><img alt="A saltire or x-cross" height=16 src=/assets/icon-times.svg width=16></label></div><div class=main-menu__page-menu-switch><label class=menu-switch for=page-menu-switch-state><div class="menu-switch__option menu-switch__option--main-menu">Main Menu</div> <div class="menu-switch__option menu-switch__option--page-menu">Migration Guides</div></label></div><div class=main-menu__content><div class=main-menu__page-menu><ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/introduction/>Introduction</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-16-to-0-17/>0.16 to 0.17</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-15-to-0-16/>0.15 to 0.16</a></div><li class="tree-menu__item tree-menu__item--active"><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-14-to-0-15/>0.14 to 0.15</a><nav aria-label="On This Page" class="on-this-page tree-menu__toc" data-highlight-intrapage-link><ul><li><a href=#accessibility>Accessibility</a> <ul><li><a href=#bump-accesskit-to-0-16>Bump accesskit to 0.16</a><li><a href=#remove-accesskit-re-export-from-bevy-a11y>Remove accesskit re-export from bevy_a11y</a></ul><li><a href=#animation>Animation</a> <ul><li><a href=#deprecate-is-playing-animation>Deprecate is_playing_animation</a><li><a href=#fix-additive-blending-of-quaternions>Fix additive blending of quaternions</a><li><a href=#implement-additive-blending-for-animation-graphs>Implement additive blending for animation graphs.</a><li><a href=#implement-animation-masks-allowing-fine-control-of-the-targets-that-animations-affect>Implement animation masks, allowing fine control of the targets that animations affect.</a><li><a href=#impose-a-more-sensible-ordering-for-animation-graph-evaluation>Impose a more sensible ordering for animation graph evaluation.</a><li><a href=#make-animationplayer-start-and-play-work-accordingly-to-documentation>Make AnimationPlayer::start and ::play work accordingly to documentation</a><li><a href=#replace-handle-animationgraph-component-with-a-wrapper>Replace Handle&LTAnimationGraph> component with a wrapper</a><li><a href=#curve-based-animation>Curve-based animation</a><li><a href=#allow-animation-clips-to-animate-arbitrary-properties>Allow animation clips to animate arbitrary properties.</a></ul><li><a href=#app>App</a> <ul><li><a href=#add-features-to-switch-nativeactivity-and-gameactivity-usage>Add features to switch NativeActivity and GameActivity usage</a><li><a href=#allow-ordering-variable-timesteps-around-fixed-timesteps>Allow ordering variable timesteps around fixed timesteps</a><li><a href=#remove-deprecated-bevy-dynamic-plugin>Remove deprecated bevy_dynamic_plugin</a><li><a href=#remove-need-for-eventloopproxy-to-be-nonsend>Remove need for EventLoopProxy to be NonSend</a><li><a href=#remove-second-generic-from-add-before-add-after>Remove second generic from .add_before, .add_after</a><li><a href=#handle-ctrl-c-in-the-terminal-properly>Handle Ctrl+C in the terminal properly</a></ul><li><a href=#assets>Assets</a> <ul><li><a href=#assetserver-loadstate-api-consistency>AssetServer LoadState API consistency</a><li><a href=#cleanup-unneeded-lifetimes-in-bevy-asset>Cleanup unneeded lifetimes in bevy_asset</a><li><a href=#generalized-into-assetsourceid-and-into-assetpath-implementations-over-lifetime>Generalized Into&LTAssetSourceId> and Into&LTAssetPath> Implementations over Lifetime</a><li><a href=#improve-error-handling-for-assetserver-add-async>Improve error handling for AssetServer::add_async</a><li><a href=#remove-incorrect-equality-comparisons-for-asset-load-error-types>Remove incorrect equality comparisons for asset load error types</a><li><a href=#replace-asyncseek-trait-by-asyncseekforward-for-reader-to-address-12880>Replace AsyncSeek trait by AsyncSeekForward for Reader to address #12880</a><li><a href=#bevy-asset-improve-nestedloader-api>bevy_asset: Improve NestedLoader API</a><li><a href=#deprecate-loadandsave-asset-processor>Deprecate LoadAndSave Asset Processor</a><li><a href=#assetreader-read-now-returns-an-opaque-type>AssetReader::read now returns an opaque type</a><li><a href=#make-gltf-node-children-handle-instead-of-objects>Make gLTF node children Handle instead of objects</a><li><a href=#split-textureatlassources-out-of-textureatlaslayout-and-make-textureatlaslayout-serializable>Split TextureAtlasSources out of TextureAtlasLayout and make TextureAtlasLayout serializable</a><li><a href=#export-gltf-skins-as-a-gltf-struct>Export glTF skins as a Gltf struct</a><li><a href=#replace-bevy-utils-cowarc-with-atomicow>Replace bevy_utils::CowArc with atomicow</a></ul><li><a href=#audio>Audio</a> <ul><li><a href=#migrate-audio-to-required-components>Migrate audio to required components</a></ul><li><a href=#build-system>Build-System</a> <ul><li><a href=#use-en-us-locale-for-typos>Use en-us locale for typos</a></ul><li><a href=#color>Color</a> <ul><li><a href=#adds-back-in-way-to-convert-color-to-u8-array-implemented-for-the-two-rgb-color-types-also-renames-color-linear-to-color-to-linear>Adds back in way to convert color to u8 array, implemented for the two RGB color types, also renames Color::linear to Color::to_linear.</a><li><a href=#update-grid-gizmo-to-use-color>Update Grid Gizmo to use Color</a></ul><li><a href=#core>Core</a> <ul><li><a href=#rename-bevy-core-name-debugname-to-bevy-core-name-nameorentity>Rename bevy_core::name::DebugName to bevy_core::name::NameOrEntity</a></ul><li><a href=#cross-cutting>Cross-Cutting</a> <ul><li><a href=#remove-the-component-trait-implementation-from-handle>Remove the Component trait implementation from Handle</a><li><a href=#fix-floating-point-math>Fix floating point math</a><li><a href=#don-t-re-export-bevy-image-from-bevy-render>Don't re-export bevy_image from bevy_render</a><li><a href=#add-custom-cursors>Add custom cursors</a></ul><li><a href=#diagnostics>Diagnostics</a> <ul><li><a href=#don-t-ignore-draw-errors>Don't ignore draw errors</a></ul><li><a href=#ecs>ECS</a> <ul><li><a href=#make-world-flush-commands-private>Make World::flush_commands private</a><li><a href=#add-filteredaccess-empty-and-simplify-the-implementation-of-update-component-access-for-anyof-or>Add FilteredAccess::empty and simplify the implementation of update_component_access for AnyOf/Or</a><li><a href=#add-mappings-to-entitymapper>Add mappings to EntityMapper</a><li><a href=#add-query-reborrowing>Add query reborrowing</a><li><a href=#allow-world-entity-family-of-functions-to-take-multiple-entities-and-get-multiple-references-back>Allow World::entity family of functions to take multiple entities and get multiple references back</a><li><a href=#change-world-inspect-entity-to-return-an-iterator-instead-of-vec>Change World::inspect_entity to return an Iterator instead of Vec</a><li><a href=#created-an-eventmutator-for-when-you-want-to-mutate-an-event-before-reading>Created an EventMutator for when you want to mutate an event before reading</a><li><a href=#deprecate-events-oldest-id>Deprecate Events::oldest_id</a><li><a href=#deprecate-get-or-spawn>Deprecate get_or_spawn</a><li><a href=#enable-entityref-get-by-id-and-friends-to-take-multiple-ids-and-get-multiple-pointers-back>Enable EntityRef::get_by_id and friends to take multiple ids and get multiple pointers back</a><li><a href=#entityref-mut-get-components-immutable-variants-only>EntityRef/Mut get_components (immutable variants only)</a><li><a href=#fix-soudness-issue-with-conflicts-involving-read-all-and-write-all>Fix soudness issue with Conflicts involving read_all and write_all</a><li><a href=#follow-up-to-cached-run-system>Follow up to cached run_system</a><li><a href=#list-components-for-queryentityerror-querydoesnotmatch>List components for QueryEntityError::QueryDoesNotMatch</a><li><a href=#make-queryfilter-an-unsafe-trait>Make QueryFilter an unsafe trait</a><li><a href=#make-querystate-transmute-co-validate-the-world-of-the-components-used>Make QueryState::transmute&co validate the world of the &Components used</a><li><a href=#re-name-and-extend-run-conditions-api>Re-name and Extend Run Conditions API</a><li><a href=#remove-redundant-information-and-optimize-dynamic-allocations-in-table>Remove redundant information and optimize dynamic allocations in Table</a><li><a href=#removed-type-parameters-from-observer>Removed Type Parameters from Observer</a><li><a href=#rename-add-to-queue-for-methods-with-deferred-semantics>Rename Add to Queue for methods with deferred semantics</a><li><a href=#rename-app-world-observe-to-add-observer-entityworldmut-observe-entity-to-observe>Rename App/World::observe to add_observer, EntityWorldMut::observe_entity to observe.</a><li><a href=#rename-commands-register-one-shot-system-register-system>Rename Commands::register_one_shot_system -> register_system</a><li><a href=#rename-init-component-friends>Rename init_component & friends</a><li><a href=#rename-observe-to-observe-entity-on-entityworldmut>Rename observe to observe_entity on EntityWorldMut</a><li><a href=#rename-push-children-to-add-children>Rename push children to add children</a><li><a href=#require-mut-self-for-world-increment-change-tick>Require &mut self for World::increment_change_tick</a><li><a href=#simplify-run-conditions>Simplify run conditions</a><li><a href=#support-more-kinds-of-system-params-in-buildable-systems>Support more kinds of system params in buildable systems.</a><li><a href=#support-systems-that-take-references-as-input>Support systems that take references as input</a><li><a href=#system-param-validation-for-observers-system-registry-and-run-once>System param validation for observers, system registry and run once</a><li><a href=#track-source-location-in-change-detection>Track source location in change detection</a><li><a href=#update-trigger-observers-to-operate-over-slices-of-data>Update trigger_observers to operate over slices of data</a><li><a href=#intosystemconfigs-chain-ignore-deferred-s-return-type-fix>IntoSystemConfigs::chain_ignore_deferred's return type fix</a><li><a href=#bevy-ecs-special-case-entity-placeholder-formatting>bevy_ecs: Special-case Entity::PLACEHOLDER formatting</a><li><a href=#change-return-type-of-world-resource-ref-to-ref>change return type of World::resource_ref to Ref</a><li><a href=#minimal-bubbling-observers>Minimal Bubbling Observers</a><li><a href=#make-componentticks-field-public>Make ComponentTicks field public</a><li><a href=#change-reflectmapentities-to-operate-on-components-before-insertion>Change ReflectMapEntities to operate on components before insertion</a><li><a href=#bubbling-observers-traversal-should-use-query-data>Bubbling observers traversal should use query data</a><li><a href=#migrate-bevy-picking>Migrate bevy picking</a><li><a href=#reflectbundle-remove-improvement>ReflectBundle::remove improvement</a><li><a href=#use-crate-disqualified>Use crate: disqualified</a><li><a href=#migrate-cameras-to-required-components>Migrate cameras to required components</a><li><a href=#migrate-fog-volumes-to-required-components>Migrate fog volumes to required components</a><li><a href=#migrate-meshes-and-materials-to-required-components>Migrate meshes and materials to required components</a><li><a href=#migrate-motion-blur-taa-ssao-and-ssr-to-required-components>Migrate motion blur, TAA, SSAO, and SSR to required components</a><li><a href=#migrate-reflection-probes-to-required-components>Migrate reflection probes to required components</a><li><a href=#migrate-visibility-to-required-components>Migrate visibility to required components</a><li><a href=#synchronize-removed-components-with-the-render-world>Synchronize removed components with the render world</a><li><a href=#deprecate-spatialbundle>Deprecate SpatialBundle</a><li><a href=#migrate-bevy-transform-to-required-components>Migrate bevy_transform to required components</a></ul><li><a href=#gizmos>Gizmos</a> <ul><li><a href=#consistency-between-wireframe2d-and-wireframe>Consistency between Wireframe2d and Wireframe</a><li><a href=#fix-gizmos-warnings-and-doc-errors-when-a-subset-of-features-are-selected>Fix Gizmos warnings and doc errors when a subset of features are selected</a><li><a href=#fix-arc-2d-gizmos>Fix arc_2d Gizmos</a><li><a href=#improve-the-gizmo-for-plane3d-reusing-grid>Improve the gizmo for Plane3d, reusing grid</a><li><a href=#making-bevy-render-an-optional-dependency-for-bevy-gizmos>Making bevy_render an optional dependency for bevy_gizmos</a><li><a href=#use-isometry-in-bevy-gizmos-wherever-we-can>Use Isometry in bevy_gizmos wherever we can</a><li><a href=#use-u32-for-all-resolution-subdivision-fields-in-bevy-gizmos>Use u32 for all resolution/subdivision fields in bevy_gizmos</a><li><a href=#switch-rotation-translation-in-grid-gizmos>Switch rotation & translation in grid gizmos</a><li><a href=#make-trackedrenderpass-set-vertex-buffer-aware-of-slice-size>Make TrackedRenderPass::set_vertex_buffer aware of slice size</a></ul><li><a href=#hierarchy>Hierarchy</a> <ul><li><a href=#only-propagate-transforms-entities-with-globaltransforms>Only propagate transforms entities with GlobalTransforms.</a></ul><li><a href=#input>Input</a> <ul><li><a href=#gamepad-improvements>Gamepad improvements</a><li><a href=#implement-gamepads-as-entities>Implement gamepads as entities</a><li><a href=#remove-receivedcharacter>Remove ReceivedCharacter</a><li><a href=#use-name-component-for-gamepad>Use Name component for gamepad</a><li><a href=#picking-event-ordering>Picking event ordering</a></ul><li><a href=#math>Math</a> <ul><li><a href=#added-new-method-to-cone-3d-primitive>Added new method to Cone 3D primitive</a><li><a href=#basic-integration-of-cubic-spline-curves-with-the-curve-api>Basic integration of cubic spline curves with the Curve API</a><li><a href=#disallow-empty-cubic-and-rational-curves>Disallow empty cubic and rational curves</a><li><a href=#refactor-bounded2d-bounded3d-to-use-isometries>Refactor Bounded2d/Bounded3d to use isometries</a><li><a href=#rename-rot2-angle-between-to-rot2-angle-to>Rename Rot2::angle_between to Rot2::angle_to</a><li><a href=#use-dir2-dir3-instead-of-vec2-vec3-for-ray2d-new-ray3d-new>Use Dir2/Dir3 instead of Vec2/Vec3 for Ray2d::new/Ray3d::new</a><li><a href=#use-a-well-defined-type-for-sides-in-regularpolygon>Use a well defined type for sides in RegularPolygon</a><li><a href=#bevy-reflect-update-eulerrot-to-match-glam-0-29>bevy_reflect: Update EulerRot to match glam 0.29</a><li><a href=#use-u32-for-resolution-subdivision-in-primitive-meshing>Use u32 for resolution/subdivision in primitive meshing</a></ul><li><a href=#picking>Picking</a> <ul><li><a href=#add-flags-to-spriteplugin-and-uiplugin-to-allow-disabling-their-picking-backend-without-needing-to-disable-features>Add flags to SpritePlugin and UiPlugin to allow disabling their picking backend (without needing to disable features).</a><li><a href=#rename-drop-to-bevy-picking-events-dragdrop-to-unclash-std-ops-drop>rename Drop to bevy::picking::events::DragDrop to unclash std::ops:Drop</a></ul><li><a href=#reflection>Reflection</a> <ul><li><a href=#dedicated-reflect-implementation-for-set-like-things>Dedicated Reflect implementation for Set-like things</a><li><a href=#implement-fromiterator-intoiterator-for-dynamic-types>Implement FromIterator/IntoIterator for dynamic types</a><li><a href=#make-drain-take-a-mutable-borrow-instead-of-box-self-for-reflected-map-list-and-set>Make drain take a mutable borrow instead of Box&LTSelf> for reflected Map, List, and Set.</a><li><a href=#remove-return-unit-variant>Remove Return::Unit variant</a><li><a href=#serialize-and-deserialize-tuple-struct-with-one-field-as-newtype-struct>Serialize and deserialize tuple struct with one field as newtype struct</a><li><a href=#bevy-reflect-add-dynamictyped-trait>bevy_reflect: Add DynamicTyped trait</a><li><a href=#bevy-reflect-add-reflectdeserializerprocessor>bevy_reflect: Add ReflectDeserializerProcessor</a><li><a href=#bevy-reflect-add-type-type>bevy_reflect: Add Type type</a><li><a href=#bevy-reflect-nested-typeinfo-getters>bevy_reflect: Nested TypeInfo getters</a><li><a href=#bevy-reflect-refactor-serde-module>bevy_reflect: Refactor serde module</a><li><a href=#bevy-reflect-replace-value-terminology-with-opaque>bevy_reflect: Replace "value" terminology with "opaque"</a><li><a href=#reflect-implement-the-unique-reflect-rfc>reflect: implement the unique reflect rfc</a><li><a href=#use-fromreflect-when-extracting-entities-in-dynamic-scenes>Use FromReflect when extracting entities in dynamic scenes</a><li><a href=#move-shortname-to-bevy-reflect>move ShortName to bevy_reflect</a></ul><li><a href=#rendering>Rendering</a> <ul><li><a href=#retained-rendering>Retained Rendering</a><li><a href=#add-2d-opaque-phase-with-depth-buffer>Add 2d opaque phase with depth buffer</a><li><a href=#add-renderset-finalcleanup-for-world-clear-entities>Add RenderSet::FinalCleanup for World::clear_entities</a><li><a href=#add-feature-requirement-info-to-image-loading-docs>Add feature requirement info to image loading docs</a><li><a href=#add-support-for-environment-map-transformation>Add support for environment map transformation</a><li><a href=#add-support-for-skybox-transformation>Add support for skybox transformation</a><li><a href=#added-feature-switch-to-default-standard-material-s-new-anisotropy-texture-to-off>Added feature switch to default Standard Material's new anisotropy texture to off</a><li><a href=#added-visibility-bitmask-as-an-alternative-ssao-method>Added visibility bitmask as an alternative SSAO method</a><li><a href=#adding-alpha-threshold-to-orderindependenttransparencysettings-for-user-level-optimization>Adding alpha_threshold to OrderIndependentTransparencySettings for user-level optimization</a><li><a href=#adds-shaderstoragebuffer-asset>Adds ShaderStorageBuffer asset</a><li><a href=#allow-mix-of-hdr-and-non-hdr-cameras-to-same-render-target>Allow mix of hdr and non-hdr cameras to same render target</a><li><a href=#allow-volumetric-fog-to-be-localized-to-specific-optionally-voxelized-regions>Allow volumetric fog to be localized to specific, optionally voxelized, regions.</a><li><a href=#attempt-to-remove-component-from-render-world-if-not-extracted>Attempt to remove component from render world if not extracted.</a><li><a href=#bind-only-the-written-parts-of-storage-buffers>Bind only the written parts of storage buffers.</a><li><a href=#changed-mesh-attributes-functions-to-return-meshvertexattribute>Changed Mesh::attributes* functions to return MeshVertexAttribute</a><li><a href=#expose-pipeline-compilation-zero-initialize-workgroup-memory-option>Expose Pipeline Compilation Zero Initialize Workgroup Memory Option</a><li><a href=#feature-gate-all-image-formats>Feature-gate all image formats</a><li><a href=#fix-mesh-allocator-bug-and-reduce-mesh-data-copies-by-two>Fix Mesh allocator bug and reduce Mesh data copies by two</a><li><a href=#improve-api-for-scaling-orthographic-cameras>Improve API for scaling orthographic cameras</a><li><a href=#lighting-should-only-hold-vec-entity-instead-of-typeid-vec-entity>Lighting Should Only hold Vec&LTEntity> instead of TypeId&LTVec&LTEntity>></a><li><a href=#migrate-bevy-sprite-to-required-components>Migrate bevy_sprite to required components</a><li><a href=#migrate-lights-to-required-components>Migrate lights to required components</a><li><a href=#move-imageloader-and-compressedimagesaver-to-bevy-image>Move ImageLoader and CompressedImageSaver to bevy_image.</a><li><a href=#move-msaa-to-component>Move Msaa to component</a><li><a href=#only-use-the-aabb-center-for-mesh-visibility-range-testing-if-specified>Only use the AABB center for mesh visibility range testing if specified.</a><li><a href=#pack-multiple-vertex-and-index-arrays-together-into-growable-buffers>Pack multiple vertex and index arrays together into growable buffers.</a><li><a href=#reduce-the-clusterable-object-ubo-size-below-16384-for-webgl-2>Reduce the clusterable object UBO size below 16384 for WebGL 2.</a><li><a href=#refactor-asbindgroup-to-use-a-associated-systemparam>Refactor AsBindGroup to use a associated SystemParam.</a><li><a href=#remove-avif-feature>Remove AVIF feature</a><li><a href=#remove-orthographicprojection-scale-adopted>Remove OrthographicProjection.scale (adopted)</a><li><a href=#rename-rendering-components-for-improved-consistency-and-clarity>Rename rendering components for improved consistency and clarity</a><li><a href=#replace-the-wgpu-trace-feature-with-a-field-in-bevy-render-settings-wgpusettings>Replace the wgpu_trace feature with a field in bevy_render::settings::WgpuSettings</a><li><a href=#replaced-implicit-emissive-weight-with-default>Replaced implicit emissive weight with default.</a><li><a href=#return-results-from-camera-s-world-viewport-conversion-methods>Return Results from Camera's world/viewport conversion methods</a><li><a href=#rewrite-screenshots>Rewrite screenshots.</a><li><a href=#split-orthographicprojection-default-into-2d-3d-adopted>Split OrthographicProjection::default into 2d & 3d (Adopted)</a><li><a href=#split-out-bevy-mesh-from-bevy-render>Split out bevy_mesh from bevy_render</a><li><a href=#using-cas-instead-of-cas-14341>Using Cas instead of CAS #14341</a><li><a href=#virtual-geometry-changes>Virtual Geometry changes</a><li><a href=#wgpu-0-20>Wgpu 0.20</a><li><a href=#check-sampler-type-in-as-bind-group-derives>check sampler type in as_bind_group derives</a><li><a href=#cleanup-bevy-render-lib-rs>cleanup bevy_render/lib.rs</a><li><a href=#fix-ui-texture-atlas-with-offset>Fix UI texture atlas with offset</a><li><a href=#make-default-behavior-for-backgroundcolor-and-bordercolor-more-intuitive>Make default behavior for BackgroundColor and BorderColor more intuitive</a><li><a href=#optional-ui-rendering>Optional UI rendering</a><li><a href=#use-precomputed-border-values>use precomputed border values</a><li><a href=#inverse-bevy-render-bevy-winit-dependency-and-move-cursor-to-bevy-winit>Inverse bevy_render bevy_winit dependency and move cursor to bevy_winit</a></ul><li><a href=#scenes>Scenes</a> <ul><li><a href=#align-scene-write-to-world-with-to-match-dynamicscene-write-to-world-with>Align Scene::write_to_world_with to match DynamicScene::write_to_world_with</a><li><a href=#align-scene-write-to-world-with-to-match-dynamicscene-write-to-world-with-1>Align Scene::write_to_world_with to match DynamicScene::write_to_world_with</a><li><a href=#change-sceneinstanceready-to-trigger-an-observer>Change SceneInstanceReady to trigger an observer.</a><li><a href=#migrate-scenes-to-required-components>Migrate scenes to required components</a><li><a href=#send-sceneinstanceready-when-spawning-any-kind-of-scene>Send SceneInstanceReady when spawning any kind of scene</a><li><a href=#explicitly-mention-component-in-methods-on-dynamicscenebuilder>explicitly mention component in methods on DynamicSceneBuilder</a></ul><li><a href=#tasks>Tasks</a> <ul><li><a href=#support-on-thread-spawn-and-on-thread-destroy-for-taskpoolplugin>Support on_thread_spawn and on_thread_destroy for TaskPoolPlugin</a></ul><li><a href=#text>Text</a> <ul><li><a href=#text-rework-cleanup>Text Rework cleanup</a><li><a href=#text-rework>Text rework</a><li><a href=#uncouple-dynamictextureatlasbuilder-from-assets>Uncouple DynamicTextureAtlasBuilder from assets</a><li><a href=#split-up-textstyle>split up TextStyle</a><li><a href=#add-the-ability-to-control-font-smoothing>Add the ability to control font smoothing</a><li><a href=#cosmic-text>Cosmic text</a></ul><li><a href=#time>Time</a> <ul><li><a href=#aligning-public-apis-of-time-timer-and-stopwatch>aligning public apis of Time,Timer and Stopwatch</a></ul><li><a href=#ui>UI</a> <ul><li><a href=#add-ui-ghostnode>Add UI GhostNode</a><li><a href=#clean-up-uisystem-system-sets>Clean up UiSystem system sets</a><li><a href=#migrate-ui-bundles-to-required-components>Migrate UI bundles to required components</a><li><a href=#move-textureatlas-into-uiimage-and-remove-impl-component-for-textureatlas>Move TextureAtlas into UiImage and remove impl Component for TextureAtlas</a><li><a href=#only-use-physical-coords-internally-in-bevy-ui>Only use physical coords internally in bevy_ui</a><li><a href=#overflow-clip-margin>Overflow clip margin</a><li><a href=#remove-custom-rounding>Remove custom rounding</a><li><a href=#remove-useless-direction-field>Remove useless Direction field</a><li><a href=#rename-breaklineon-to-linebreak>Rename BreakLineOn to LineBreak</a><li><a href=#replace-handle-m-uimaterial-component-with-uimaterialhandle-wrapper>Replace Handle&LTM: UiMaterial> component with UiMaterialHandle wrapper</a><li><a href=#simplified-ui-stack-system>Simplified ui_stack_system</a><li><a href=#uiimage-imagenode-uiimagesize-imagenodesize>UiImage -> ImageNode, UiImageSize -> ImageNodeSize</a><li><a href=#explicitly-order-cameraupdatesystem-before-uisystem-prepare>Explicitly order CameraUpdateSystem before UiSystem::Prepare</a></ul><li><a href=#utils>Utils</a> <ul><li><a href=#allow-bevy-utils-in-no-std-contexts>Allow bevy_utils in no_std Contexts</a><li><a href=#remove-allocation-in-get-short-name>Remove allocation in get_short_name</a><li><a href=#remove-remnant-entityhash-and-related-types-from-bevy-utils>Remove remnant EntityHash and related types from bevy_utils</a><li><a href=#remove-unused-type-parameter-in-parallel-drain>Remove unused type parameter in Parallel::drain()</a></ul><li><a href=#windowing>Windowing</a> <ul><li><a href=#add-bevy-window-window-options-for-macos>Add bevy_window::Window options for MacOS</a><li><a href=#expose-winit-s-monitorhandle>Expose winit's MonitorHandle</a><li><a href=#remove-unused-default-feature-from-bevy-window>Remove unused default feature from bevy_window</a><li><a href=#move-android-app-to-bevy-window>move ANDROID_APP to bevy_window</a></ul><li><a href=#without-area>Without area</a> <ul><li><a href=#add-display-implementation-to-debugname>Add Display implementation to DebugName.</a></ul></ul></nav></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-13-to-0-14/>0.13 to 0.14</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-12-to-0-13/>0.12 to 0.13</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-11-to-0-12/>0.11 to 0.12</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-10-to-0-11/>0.10 to 0.11</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-9-to-0-10/>0.9 to 0.10</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-8-to-0-9/>0.8 to 0.9</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-7-to-0-8/>0.7 to 0.8</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-6-to-0-7/>0.6 to 0.7</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-5-to-0-6/>0.5 to 0.6</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-4-to-0-5/>0.4 to 0.5</a></div></ul></div><ul class=main-menu__menu><li class="main-menu__entry main-menu__entry--getting-started"><a class=main-menu__link href=/learn/quick-start/getting-started/> <span>Getting Started</span> </a><li class=main-menu__entry><a class="main-menu__link main-menu__link--active" href=/learn/> <span>Learn</span> </a><li class=main-menu__entry><a class=main-menu__link href=/news/> <span>News</span> </a><li class=main-menu__entry><a class=main-menu__link href=/community/> <span>Community</span> </a><li class=main-menu__entry><a class=main-menu__link href=/foundation/> <span>Foundation</span> </a><li class=main-menu__entry><a class=main-menu__link href=/assets/> <span>Assets</span> </a><li class=main-menu__entry><a class=main-menu__link href=/examples/> <span>Examples</span> </a></ul></div></nav><div class=header__cta-container><a class="button button--pink header__cta" href=/donate>Donate <img alt="heart icon" class=button__icon height=512 src=/assets/heart.svg width=512> </a><a class="header__cta header__cta--github" href=https://github.com/bevyengine/bevy> <img alt="GitHub repo" height=96 src=/assets/github-mark-white.svg width=98> </a></div></div></header><main class=layout__content><div class=container><div class=page-with-menu><div class="page-with-menu__menu-wrapper print:hidden"><div class=page-with-menu__menu><ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/introduction/>Introduction</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-16-to-0-17/>0.16 to 0.17</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-15-to-0-16/>0.15 to 0.16</a></div><li class="tree-menu__item tree-menu__item--active"><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-14-to-0-15/>0.14 to 0.15</a><nav aria-label="On This Page" class="on-this-page tree-menu__toc" data-highlight-intrapage-link><ul><li><a href=#accessibility>Accessibility</a> <ul><li><a href=#bump-accesskit-to-0-16>Bump accesskit to 0.16</a><li><a href=#remove-accesskit-re-export-from-bevy-a11y>Remove accesskit re-export from bevy_a11y</a></ul><li><a href=#animation>Animation</a> <ul><li><a href=#deprecate-is-playing-animation>Deprecate is_playing_animation</a><li><a href=#fix-additive-blending-of-quaternions>Fix additive blending of quaternions</a><li><a href=#implement-additive-blending-for-animation-graphs>Implement additive blending for animation graphs.</a><li><a href=#implement-animation-masks-allowing-fine-control-of-the-targets-that-animations-affect>Implement animation masks, allowing fine control of the targets that animations affect.</a><li><a href=#impose-a-more-sensible-ordering-for-animation-graph-evaluation>Impose a more sensible ordering for animation graph evaluation.</a><li><a href=#make-animationplayer-start-and-play-work-accordingly-to-documentation>Make AnimationPlayer::start and ::play work accordingly to documentation</a><li><a href=#replace-handle-animationgraph-component-with-a-wrapper>Replace Handle&LTAnimationGraph> component with a wrapper</a><li><a href=#curve-based-animation>Curve-based animation</a><li><a href=#allow-animation-clips-to-animate-arbitrary-properties>Allow animation clips to animate arbitrary properties.</a></ul><li><a href=#app>App</a> <ul><li><a href=#add-features-to-switch-nativeactivity-and-gameactivity-usage>Add features to switch NativeActivity and GameActivity usage</a><li><a href=#allow-ordering-variable-timesteps-around-fixed-timesteps>Allow ordering variable timesteps around fixed timesteps</a><li><a href=#remove-deprecated-bevy-dynamic-plugin>Remove deprecated bevy_dynamic_plugin</a><li><a href=#remove-need-for-eventloopproxy-to-be-nonsend>Remove need for EventLoopProxy to be NonSend</a><li><a href=#remove-second-generic-from-add-before-add-after>Remove second generic from .add_before, .add_after</a><li><a href=#handle-ctrl-c-in-the-terminal-properly>Handle Ctrl+C in the terminal properly</a></ul><li><a href=#assets>Assets</a> <ul><li><a href=#assetserver-loadstate-api-consistency>AssetServer LoadState API consistency</a><li><a href=#cleanup-unneeded-lifetimes-in-bevy-asset>Cleanup unneeded lifetimes in bevy_asset</a><li><a href=#generalized-into-assetsourceid-and-into-assetpath-implementations-over-lifetime>Generalized Into&LTAssetSourceId> and Into&LTAssetPath> Implementations over Lifetime</a><li><a href=#improve-error-handling-for-assetserver-add-async>Improve error handling for AssetServer::add_async</a><li><a href=#remove-incorrect-equality-comparisons-for-asset-load-error-types>Remove incorrect equality comparisons for asset load error types</a><li><a href=#replace-asyncseek-trait-by-asyncseekforward-for-reader-to-address-12880>Replace AsyncSeek trait by AsyncSeekForward for Reader to address #12880</a><li><a href=#bevy-asset-improve-nestedloader-api>bevy_asset: Improve NestedLoader API</a><li><a href=#deprecate-loadandsave-asset-processor>Deprecate LoadAndSave Asset Processor</a><li><a href=#assetreader-read-now-returns-an-opaque-type>AssetReader::read now returns an opaque type</a><li><a href=#make-gltf-node-children-handle-instead-of-objects>Make gLTF node children Handle instead of objects</a><li><a href=#split-textureatlassources-out-of-textureatlaslayout-and-make-textureatlaslayout-serializable>Split TextureAtlasSources out of TextureAtlasLayout and make TextureAtlasLayout serializable</a><li><a href=#export-gltf-skins-as-a-gltf-struct>Export glTF skins as a Gltf struct</a><li><a href=#replace-bevy-utils-cowarc-with-atomicow>Replace bevy_utils::CowArc with atomicow</a></ul><li><a href=#audio>Audio</a> <ul><li><a href=#migrate-audio-to-required-components>Migrate audio to required components</a></ul><li><a href=#build-system>Build-System</a> <ul><li><a href=#use-en-us-locale-for-typos>Use en-us locale for typos</a></ul><li><a href=#color>Color</a> <ul><li><a href=#adds-back-in-way-to-convert-color-to-u8-array-implemented-for-the-two-rgb-color-types-also-renames-color-linear-to-color-to-linear>Adds back in way to convert color to u8 array, implemented for the two RGB color types, also renames Color::linear to Color::to_linear.</a><li><a href=#update-grid-gizmo-to-use-color>Update Grid Gizmo to use Color</a></ul><li><a href=#core>Core</a> <ul><li><a href=#rename-bevy-core-name-debugname-to-bevy-core-name-nameorentity>Rename bevy_core::name::DebugName to bevy_core::name::NameOrEntity</a></ul><li><a href=#cross-cutting>Cross-Cutting</a> <ul><li><a href=#remove-the-component-trait-implementation-from-handle>Remove the Component trait implementation from Handle</a><li><a href=#fix-floating-point-math>Fix floating point math</a><li><a href=#don-t-re-export-bevy-image-from-bevy-render>Don't re-export bevy_image from bevy_render</a><li><a href=#add-custom-cursors>Add custom cursors</a></ul><li><a href=#diagnostics>Diagnostics</a> <ul><li><a href=#don-t-ignore-draw-errors>Don't ignore draw errors</a></ul><li><a href=#ecs>ECS</a> <ul><li><a href=#make-world-flush-commands-private>Make World::flush_commands private</a><li><a href=#add-filteredaccess-empty-and-simplify-the-implementation-of-update-component-access-for-anyof-or>Add FilteredAccess::empty and simplify the implementation of update_component_access for AnyOf/Or</a><li><a href=#add-mappings-to-entitymapper>Add mappings to EntityMapper</a><li><a href=#add-query-reborrowing>Add query reborrowing</a><li><a href=#allow-world-entity-family-of-functions-to-take-multiple-entities-and-get-multiple-references-back>Allow World::entity family of functions to take multiple entities and get multiple references back</a><li><a href=#change-world-inspect-entity-to-return-an-iterator-instead-of-vec>Change World::inspect_entity to return an Iterator instead of Vec</a><li><a href=#created-an-eventmutator-for-when-you-want-to-mutate-an-event-before-reading>Created an EventMutator for when you want to mutate an event before reading</a><li><a href=#deprecate-events-oldest-id>Deprecate Events::oldest_id</a><li><a href=#deprecate-get-or-spawn>Deprecate get_or_spawn</a><li><a href=#enable-entityref-get-by-id-and-friends-to-take-multiple-ids-and-get-multiple-pointers-back>Enable EntityRef::get_by_id and friends to take multiple ids and get multiple pointers back</a><li><a href=#entityref-mut-get-components-immutable-variants-only>EntityRef/Mut get_components (immutable variants only)</a><li><a href=#fix-soudness-issue-with-conflicts-involving-read-all-and-write-all>Fix soudness issue with Conflicts involving read_all and write_all</a><li><a href=#follow-up-to-cached-run-system>Follow up to cached run_system</a><li><a href=#list-components-for-queryentityerror-querydoesnotmatch>List components for QueryEntityError::QueryDoesNotMatch</a><li><a href=#make-queryfilter-an-unsafe-trait>Make QueryFilter an unsafe trait</a><li><a href=#make-querystate-transmute-co-validate-the-world-of-the-components-used>Make QueryState::transmute&co validate the world of the &Components used</a><li><a href=#re-name-and-extend-run-conditions-api>Re-name and Extend Run Conditions API</a><li><a href=#remove-redundant-information-and-optimize-dynamic-allocations-in-table>Remove redundant information and optimize dynamic allocations in Table</a><li><a href=#removed-type-parameters-from-observer>Removed Type Parameters from Observer</a><li><a href=#rename-add-to-queue-for-methods-with-deferred-semantics>Rename Add to Queue for methods with deferred semantics</a><li><a href=#rename-app-world-observe-to-add-observer-entityworldmut-observe-entity-to-observe>Rename App/World::observe to add_observer, EntityWorldMut::observe_entity to observe.</a><li><a href=#rename-commands-register-one-shot-system-register-system>Rename Commands::register_one_shot_system -> register_system</a><li><a href=#rename-init-component-friends>Rename init_component & friends</a><li><a href=#rename-observe-to-observe-entity-on-entityworldmut>Rename observe to observe_entity on EntityWorldMut</a><li><a href=#rename-push-children-to-add-children>Rename push children to add children</a><li><a href=#require-mut-self-for-world-increment-change-tick>Require &mut self for World::increment_change_tick</a><li><a href=#simplify-run-conditions>Simplify run conditions</a><li><a href=#support-more-kinds-of-system-params-in-buildable-systems>Support more kinds of system params in buildable systems.</a><li><a href=#support-systems-that-take-references-as-input>Support systems that take references as input</a><li><a href=#system-param-validation-for-observers-system-registry-and-run-once>System param validation for observers, system registry and run once</a><li><a href=#track-source-location-in-change-detection>Track source location in change detection</a><li><a href=#update-trigger-observers-to-operate-over-slices-of-data>Update trigger_observers to operate over slices of data</a><li><a href=#intosystemconfigs-chain-ignore-deferred-s-return-type-fix>IntoSystemConfigs::chain_ignore_deferred's return type fix</a><li><a href=#bevy-ecs-special-case-entity-placeholder-formatting>bevy_ecs: Special-case Entity::PLACEHOLDER formatting</a><li><a href=#change-return-type-of-world-resource-ref-to-ref>change return type of World::resource_ref to Ref</a><li><a href=#minimal-bubbling-observers>Minimal Bubbling Observers</a><li><a href=#make-componentticks-field-public>Make ComponentTicks field public</a><li><a href=#change-reflectmapentities-to-operate-on-components-before-insertion>Change ReflectMapEntities to operate on components before insertion</a><li><a href=#bubbling-observers-traversal-should-use-query-data>Bubbling observers traversal should use query data</a><li><a href=#migrate-bevy-picking>Migrate bevy picking</a><li><a href=#reflectbundle-remove-improvement>ReflectBundle::remove improvement</a><li><a href=#use-crate-disqualified>Use crate: disqualified</a><li><a href=#migrate-cameras-to-required-components>Migrate cameras to required components</a><li><a href=#migrate-fog-volumes-to-required-components>Migrate fog volumes to required components</a><li><a href=#migrate-meshes-and-materials-to-required-components>Migrate meshes and materials to required components</a><li><a href=#migrate-motion-blur-taa-ssao-and-ssr-to-required-components>Migrate motion blur, TAA, SSAO, and SSR to required components</a><li><a href=#migrate-reflection-probes-to-required-components>Migrate reflection probes to required components</a><li><a href=#migrate-visibility-to-required-components>Migrate visibility to required components</a><li><a href=#synchronize-removed-components-with-the-render-world>Synchronize removed components with the render world</a><li><a href=#deprecate-spatialbundle>Deprecate SpatialBundle</a><li><a href=#migrate-bevy-transform-to-required-components>Migrate bevy_transform to required components</a></ul><li><a href=#gizmos>Gizmos</a> <ul><li><a href=#consistency-between-wireframe2d-and-wireframe>Consistency between Wireframe2d and Wireframe</a><li><a href=#fix-gizmos-warnings-and-doc-errors-when-a-subset-of-features-are-selected>Fix Gizmos warnings and doc errors when a subset of features are selected</a><li><a href=#fix-arc-2d-gizmos>Fix arc_2d Gizmos</a><li><a href=#improve-the-gizmo-for-plane3d-reusing-grid>Improve the gizmo for Plane3d, reusing grid</a><li><a href=#making-bevy-render-an-optional-dependency-for-bevy-gizmos>Making bevy_render an optional dependency for bevy_gizmos</a><li><a href=#use-isometry-in-bevy-gizmos-wherever-we-can>Use Isometry in bevy_gizmos wherever we can</a><li><a href=#use-u32-for-all-resolution-subdivision-fields-in-bevy-gizmos>Use u32 for all resolution/subdivision fields in bevy_gizmos</a><li><a href=#switch-rotation-translation-in-grid-gizmos>Switch rotation & translation in grid gizmos</a><li><a href=#make-trackedrenderpass-set-vertex-buffer-aware-of-slice-size>Make TrackedRenderPass::set_vertex_buffer aware of slice size</a></ul><li><a href=#hierarchy>Hierarchy</a> <ul><li><a href=#only-propagate-transforms-entities-with-globaltransforms>Only propagate transforms entities with GlobalTransforms.</a></ul><li><a href=#input>Input</a> <ul><li><a href=#gamepad-improvements>Gamepad improvements</a><li><a href=#implement-gamepads-as-entities>Implement gamepads as entities</a><li><a href=#remove-receivedcharacter>Remove ReceivedCharacter</a><li><a href=#use-name-component-for-gamepad>Use Name component for gamepad</a><li><a href=#picking-event-ordering>Picking event ordering</a></ul><li><a href=#math>Math</a> <ul><li><a href=#added-new-method-to-cone-3d-primitive>Added new method to Cone 3D primitive</a><li><a href=#basic-integration-of-cubic-spline-curves-with-the-curve-api>Basic integration of cubic spline curves with the Curve API</a><li><a href=#disallow-empty-cubic-and-rational-curves>Disallow empty cubic and rational curves</a><li><a href=#refactor-bounded2d-bounded3d-to-use-isometries>Refactor Bounded2d/Bounded3d to use isometries</a><li><a href=#rename-rot2-angle-between-to-rot2-angle-to>Rename Rot2::angle_between to Rot2::angle_to</a><li><a href=#use-dir2-dir3-instead-of-vec2-vec3-for-ray2d-new-ray3d-new>Use Dir2/Dir3 instead of Vec2/Vec3 for Ray2d::new/Ray3d::new</a><li><a href=#use-a-well-defined-type-for-sides-in-regularpolygon>Use a well defined type for sides in RegularPolygon</a><li><a href=#bevy-reflect-update-eulerrot-to-match-glam-0-29>bevy_reflect: Update EulerRot to match glam 0.29</a><li><a href=#use-u32-for-resolution-subdivision-in-primitive-meshing>Use u32 for resolution/subdivision in primitive meshing</a></ul><li><a href=#picking>Picking</a> <ul><li><a href=#add-flags-to-spriteplugin-and-uiplugin-to-allow-disabling-their-picking-backend-without-needing-to-disable-features>Add flags to SpritePlugin and UiPlugin to allow disabling their picking backend (without needing to disable features).</a><li><a href=#rename-drop-to-bevy-picking-events-dragdrop-to-unclash-std-ops-drop>rename Drop to bevy::picking::events::DragDrop to unclash std::ops:Drop</a></ul><li><a href=#reflection>Reflection</a> <ul><li><a href=#dedicated-reflect-implementation-for-set-like-things>Dedicated Reflect implementation for Set-like things</a><li><a href=#implement-fromiterator-intoiterator-for-dynamic-types>Implement FromIterator/IntoIterator for dynamic types</a><li><a href=#make-drain-take-a-mutable-borrow-instead-of-box-self-for-reflected-map-list-and-set>Make drain take a mutable borrow instead of Box&LTSelf> for reflected Map, List, and Set.</a><li><a href=#remove-return-unit-variant>Remove Return::Unit variant</a><li><a href=#serialize-and-deserialize-tuple-struct-with-one-field-as-newtype-struct>Serialize and deserialize tuple struct with one field as newtype struct</a><li><a href=#bevy-reflect-add-dynamictyped-trait>bevy_reflect: Add DynamicTyped trait</a><li><a href=#bevy-reflect-add-reflectdeserializerprocessor>bevy_reflect: Add ReflectDeserializerProcessor</a><li><a href=#bevy-reflect-add-type-type>bevy_reflect: Add Type type</a><li><a href=#bevy-reflect-nested-typeinfo-getters>bevy_reflect: Nested TypeInfo getters</a><li><a href=#bevy-reflect-refactor-serde-module>bevy_reflect: Refactor serde module</a><li><a href=#bevy-reflect-replace-value-terminology-with-opaque>bevy_reflect: Replace "value" terminology with "opaque"</a><li><a href=#reflect-implement-the-unique-reflect-rfc>reflect: implement the unique reflect rfc</a><li><a href=#use-fromreflect-when-extracting-entities-in-dynamic-scenes>Use FromReflect when extracting entities in dynamic scenes</a><li><a href=#move-shortname-to-bevy-reflect>move ShortName to bevy_reflect</a></ul><li><a href=#rendering>Rendering</a> <ul><li><a href=#retained-rendering>Retained Rendering</a><li><a href=#add-2d-opaque-phase-with-depth-buffer>Add 2d opaque phase with depth buffer</a><li><a href=#add-renderset-finalcleanup-for-world-clear-entities>Add RenderSet::FinalCleanup for World::clear_entities</a><li><a href=#add-feature-requirement-info-to-image-loading-docs>Add feature requirement info to image loading docs</a><li><a href=#add-support-for-environment-map-transformation>Add support for environment map transformation</a><li><a href=#add-support-for-skybox-transformation>Add support for skybox transformation</a><li><a href=#added-feature-switch-to-default-standard-material-s-new-anisotropy-texture-to-off>Added feature switch to default Standard Material's new anisotropy texture to off</a><li><a href=#added-visibility-bitmask-as-an-alternative-ssao-method>Added visibility bitmask as an alternative SSAO method</a><li><a href=#adding-alpha-threshold-to-orderindependenttransparencysettings-for-user-level-optimization>Adding alpha_threshold to OrderIndependentTransparencySettings for user-level optimization</a><li><a href=#adds-shaderstoragebuffer-asset>Adds ShaderStorageBuffer asset</a><li><a href=#allow-mix-of-hdr-and-non-hdr-cameras-to-same-render-target>Allow mix of hdr and non-hdr cameras to same render target</a><li><a href=#allow-volumetric-fog-to-be-localized-to-specific-optionally-voxelized-regions>Allow volumetric fog to be localized to specific, optionally voxelized, regions.</a><li><a href=#attempt-to-remove-component-from-render-world-if-not-extracted>Attempt to remove component from render world if not extracted.</a><li><a href=#bind-only-the-written-parts-of-storage-buffers>Bind only the written parts of storage buffers.</a><li><a href=#changed-mesh-attributes-functions-to-return-meshvertexattribute>Changed Mesh::attributes* functions to return MeshVertexAttribute</a><li><a href=#expose-pipeline-compilation-zero-initialize-workgroup-memory-option>Expose Pipeline Compilation Zero Initialize Workgroup Memory Option</a><li><a href=#feature-gate-all-image-formats>Feature-gate all image formats</a><li><a href=#fix-mesh-allocator-bug-and-reduce-mesh-data-copies-by-two>Fix Mesh allocator bug and reduce Mesh data copies by two</a><li><a href=#improve-api-for-scaling-orthographic-cameras>Improve API for scaling orthographic cameras</a><li><a href=#lighting-should-only-hold-vec-entity-instead-of-typeid-vec-entity>Lighting Should Only hold Vec&LTEntity> instead of TypeId&LTVec&LTEntity>></a><li><a href=#migrate-bevy-sprite-to-required-components>Migrate bevy_sprite to required components</a><li><a href=#migrate-lights-to-required-components>Migrate lights to required components</a><li><a href=#move-imageloader-and-compressedimagesaver-to-bevy-image>Move ImageLoader and CompressedImageSaver to bevy_image.</a><li><a href=#move-msaa-to-component>Move Msaa to component</a><li><a href=#only-use-the-aabb-center-for-mesh-visibility-range-testing-if-specified>Only use the AABB center for mesh visibility range testing if specified.</a><li><a href=#pack-multiple-vertex-and-index-arrays-together-into-growable-buffers>Pack multiple vertex and index arrays together into growable buffers.</a><li><a href=#reduce-the-clusterable-object-ubo-size-below-16384-for-webgl-2>Reduce the clusterable object UBO size below 16384 for WebGL 2.</a><li><a href=#refactor-asbindgroup-to-use-a-associated-systemparam>Refactor AsBindGroup to use a associated SystemParam.</a><li><a href=#remove-avif-feature>Remove AVIF feature</a><li><a href=#remove-orthographicprojection-scale-adopted>Remove OrthographicProjection.scale (adopted)</a><li><a href=#rename-rendering-components-for-improved-consistency-and-clarity>Rename rendering components for improved consistency and clarity</a><li><a href=#replace-the-wgpu-trace-feature-with-a-field-in-bevy-render-settings-wgpusettings>Replace the wgpu_trace feature with a field in bevy_render::settings::WgpuSettings</a><li><a href=#replaced-implicit-emissive-weight-with-default>Replaced implicit emissive weight with default.</a><li><a href=#return-results-from-camera-s-world-viewport-conversion-methods>Return Results from Camera's world/viewport conversion methods</a><li><a href=#rewrite-screenshots>Rewrite screenshots.</a><li><a href=#split-orthographicprojection-default-into-2d-3d-adopted>Split OrthographicProjection::default into 2d & 3d (Adopted)</a><li><a href=#split-out-bevy-mesh-from-bevy-render>Split out bevy_mesh from bevy_render</a><li><a href=#using-cas-instead-of-cas-14341>Using Cas instead of CAS #14341</a><li><a href=#virtual-geometry-changes>Virtual Geometry changes</a><li><a href=#wgpu-0-20>Wgpu 0.20</a><li><a href=#check-sampler-type-in-as-bind-group-derives>check sampler type in as_bind_group derives</a><li><a href=#cleanup-bevy-render-lib-rs>cleanup bevy_render/lib.rs</a><li><a href=#fix-ui-texture-atlas-with-offset>Fix UI texture atlas with offset</a><li><a href=#make-default-behavior-for-backgroundcolor-and-bordercolor-more-intuitive>Make default behavior for BackgroundColor and BorderColor more intuitive</a><li><a href=#optional-ui-rendering>Optional UI rendering</a><li><a href=#use-precomputed-border-values>use precomputed border values</a><li><a href=#inverse-bevy-render-bevy-winit-dependency-and-move-cursor-to-bevy-winit>Inverse bevy_render bevy_winit dependency and move cursor to bevy_winit</a></ul><li><a href=#scenes>Scenes</a> <ul><li><a href=#align-scene-write-to-world-with-to-match-dynamicscene-write-to-world-with>Align Scene::write_to_world_with to match DynamicScene::write_to_world_with</a><li><a href=#align-scene-write-to-world-with-to-match-dynamicscene-write-to-world-with-1>Align Scene::write_to_world_with to match DynamicScene::write_to_world_with</a><li><a href=#change-sceneinstanceready-to-trigger-an-observer>Change SceneInstanceReady to trigger an observer.</a><li><a href=#migrate-scenes-to-required-components>Migrate scenes to required components</a><li><a href=#send-sceneinstanceready-when-spawning-any-kind-of-scene>Send SceneInstanceReady when spawning any kind of scene</a><li><a href=#explicitly-mention-component-in-methods-on-dynamicscenebuilder>explicitly mention component in methods on DynamicSceneBuilder</a></ul><li><a href=#tasks>Tasks</a> <ul><li><a href=#support-on-thread-spawn-and-on-thread-destroy-for-taskpoolplugin>Support on_thread_spawn and on_thread_destroy for TaskPoolPlugin</a></ul><li><a href=#text>Text</a> <ul><li><a href=#text-rework-cleanup>Text Rework cleanup</a><li><a href=#text-rework>Text rework</a><li><a href=#uncouple-dynamictextureatlasbuilder-from-assets>Uncouple DynamicTextureAtlasBuilder from assets</a><li><a href=#split-up-textstyle>split up TextStyle</a><li><a href=#add-the-ability-to-control-font-smoothing>Add the ability to control font smoothing</a><li><a href=#cosmic-text>Cosmic text</a></ul><li><a href=#time>Time</a> <ul><li><a href=#aligning-public-apis-of-time-timer-and-stopwatch>aligning public apis of Time,Timer and Stopwatch</a></ul><li><a href=#ui>UI</a> <ul><li><a href=#add-ui-ghostnode>Add UI GhostNode</a><li><a href=#clean-up-uisystem-system-sets>Clean up UiSystem system sets</a><li><a href=#migrate-ui-bundles-to-required-components>Migrate UI bundles to required components</a><li><a href=#move-textureatlas-into-uiimage-and-remove-impl-component-for-textureatlas>Move TextureAtlas into UiImage and remove impl Component for TextureAtlas</a><li><a href=#only-use-physical-coords-internally-in-bevy-ui>Only use physical coords internally in bevy_ui</a><li><a href=#overflow-clip-margin>Overflow clip margin</a><li><a href=#remove-custom-rounding>Remove custom rounding</a><li><a href=#remove-useless-direction-field>Remove useless Direction field</a><li><a href=#rename-breaklineon-to-linebreak>Rename BreakLineOn to LineBreak</a><li><a href=#replace-handle-m-uimaterial-component-with-uimaterialhandle-wrapper>Replace Handle&LTM: UiMaterial> component with UiMaterialHandle wrapper</a><li><a href=#simplified-ui-stack-system>Simplified ui_stack_system</a><li><a href=#uiimage-imagenode-uiimagesize-imagenodesize>UiImage -> ImageNode, UiImageSize -> ImageNodeSize</a><li><a href=#explicitly-order-cameraupdatesystem-before-uisystem-prepare>Explicitly order CameraUpdateSystem before UiSystem::Prepare</a></ul><li><a href=#utils>Utils</a> <ul><li><a href=#allow-bevy-utils-in-no-std-contexts>Allow bevy_utils in no_std Contexts</a><li><a href=#remove-allocation-in-get-short-name>Remove allocation in get_short_name</a><li><a href=#remove-remnant-entityhash-and-related-types-from-bevy-utils>Remove remnant EntityHash and related types from bevy_utils</a><li><a href=#remove-unused-type-parameter-in-parallel-drain>Remove unused type parameter in Parallel::drain()</a></ul><li><a href=#windowing>Windowing</a> <ul><li><a href=#add-bevy-window-window-options-for-macos>Add bevy_window::Window options for MacOS</a><li><a href=#expose-winit-s-monitorhandle>Expose winit's MonitorHandle</a><li><a href=#remove-unused-default-feature-from-bevy-window>Remove unused default feature from bevy_window</a><li><a href=#move-android-app-to-bevy-window>move ANDROID_APP to bevy_window</a></ul><li><a href=#without-area>Without area</a> <ul><li><a href=#add-display-implementation-to-debugname>Add Display implementation to DebugName.</a></ul></ul></nav></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-13-to-0-14/>0.13 to 0.14</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-12-to-0-13/>0.12 to 0.13</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-11-to-0-12/>0.11 to 0.12</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-10-to-0-11/>0.10 to 0.11</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-9-to-0-10/>0.9 to 0.10</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-8-to-0-9/>0.8 to 0.9</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-7-to-0-8/>0.7 to 0.8</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-6-to-0-7/>0.6 to 0.7</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-5-to-0-6/>0.5 to 0.6</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-4-to-0-5/>0.4 to 0.5</a></div></ul></div></div><div class=page-with-menu__content><div class=docs-page><div class=docs-content><h1>Migration Guide: 0.14 to 0.15</h1><div class=media-content><aside class="callout callout--warning"><p>Bevy relies heavily on improvements in the Rust language and compiler. As a result, the Minimum Supported Rust Version (MSRV) is "the latest stable release" of Rust.</aside><div class=migration-guide><h2 id=accessibility>Accessibility <a class=anchor-link href=#accessibility>#</a></h2><h3 id=bump-accesskit-to-0-16>Bump <code>accesskit</code> to 0.16 <a class=anchor-link href=#bump-accesskit-to-0-16>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Accessibility</span>, <span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14091>#14091</a></div></div><p><code>accesskit</code>’s <code>Role::StaticText</code> variant has been renamed to <code>Role::Label</code>.<hr><h3 id=remove-accesskit-re-export-from-bevy-a11y>Remove <code>accesskit</code> re-export from <code>bevy_a11y</code> <a class=anchor-link href=#remove-accesskit-re-export-from-bevy-a11y>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Accessibility</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16257>#16257</a></div></div><pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff"># main.rs
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>-    use bevy_a11y::{
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>-        accesskit::{Node, Rect, Role},
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>-        AccessibilityNode,
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>-    };
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>+    use bevy_a11y::AccessibilityNode;
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>+    use accesskit::{Node, Rect, Role};
</span></span><span class="z-source z-diff">
</span><span class="z-source z-diff"># Cargo.toml
</span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>+    accesskit = "0.17"
</span></span></code></pre><ul><li>Users will need to add <code>accesskit = "0.17"</code> to the dependencies section of their <code>Cargo.toml</code> file and update their <code>accesskit</code> use statements to come directly from the external crate instead of <code>bevy_a11y</code>.<li>Make sure to keep the versions of <code>accesskit</code> aligned with the versions Bevy uses.</ul><h2 id=animation>Animation <a class=anchor-link href=#animation>#</a></h2><h3 id=deprecate-is-playing-animation>Deprecate <code>is_playing_animation</code> <a class=anchor-link href=#deprecate-is-playing-animation>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Animation</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14387>#14387</a></div></div><p>The user will just need to replace functions named <code>is_playing_animation</code> with <code>animation_is_playing</code>.<hr><h3 id=fix-additive-blending-of-quaternions>Fix additive blending of quaternions <a class=anchor-link href=#fix-additive-blending-of-quaternions>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Animation</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15662>#15662</a></div></div><p>This PR changes the implementation of <code>Quat: Animatable</code>, which was not used internally by Bevy prior to this release version. If you relied on the old behavior of additive quaternion blending in manual applications, that code will have to be updated, as the old behavior was incorrect.<hr><h3 id=implement-additive-blending-for-animation-graphs>Implement additive blending for animation graphs. <a class=anchor-link href=#implement-additive-blending-for-animation-graphs>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Animation</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15631>#15631</a></div></div><ul><li>The <code>animgraph.ron</code> format has changed to accommodate the new <em>additive blending</em> feature. You’ll need to change <code>clip</code> fields to instances of the new <code>AnimationNodeType</code> enum.</ul><hr><h3 id=implement-animation-masks-allowing-fine-control-of-the-targets-that-animations-affect>Implement animation masks, allowing fine control of the targets that animations affect. <a class=anchor-link href=#implement-animation-masks-allowing-fine-control-of-the-targets-that-animations-affect>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Animation</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15013>#15013</a></div></div><ul><li>The serialized format of animation graphs has changed with the addition of animation masks. To upgrade animation graph RON files, add <code>mask</code> and <code>mask_groups</code> fields as appropriate. (They can be safely set to zero.)</ul><hr><h3 id=impose-a-more-sensible-ordering-for-animation-graph-evaluation>Impose a more sensible ordering for animation graph evaluation. <a class=anchor-link href=#impose-a-more-sensible-ordering-for-animation-graph-evaluation>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Animation</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15589>#15589</a></div></div><p>The order in which animation graphs are evaluated has been changed to be more intuitive. Please see the diagram in the linked PR for a detailed explanation.<hr><h3 id=make-animationplayer-start-and-play-work-accordingly-to-documentation>Make <code>AnimationPlayer::start</code> and <code>::play</code> work accordingly to documentation <a class=anchor-link href=#make-animationplayer-start-and-play-work-accordingly-to-documentation>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Animation</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14546>#14546</a></div></div><p><code>AnimationPlayer::start</code> now correspondingly to its docs restarts a running animation. <code>AnimationPlayer::play</code> doesn’t reset the weight anymore.<hr><h3 id=replace-handle-animationgraph-component-with-a-wrapper>Replace <code>Handle&LTAnimationGraph></code> component with a wrapper <a class=anchor-link href=#replace-handle-animationgraph-component-with-a-wrapper>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Animation</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15742>#15742</a></div></div><p><code>Handle&LTAnimationGraph></code> is no longer a component. Instead, use the <code>AnimationGraphHandle</code> component which contains a <code>Handle&LTAnimationGraph></code>.<hr><h3 id=curve-based-animation>Curve-based animation <a class=anchor-link href=#curve-based-animation>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Animation</span>, <span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15434>#15434</a></div></div><p>Most user code that does not directly deal with <code>AnimationClip</code> and <code>VariableCurve</code> will not need to be changed. On the other hand, <code>VariableCurve</code> has been completely overhauled. If you were previously defining animation curves in code using keyframes, you will need to migrate that code to use curve constructors instead. For example, a rotation animation defined using keyframes and added to an animation clip like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">animation_clip<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_curve_to_target</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    animation_target_id<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    VariableCurve <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        keyframe_timestamps<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">4.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        keyframes<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Keyframes<span class="z-punctuation z-accessor z-rust">::</span></span>Rotation<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">IDENTITY</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">3.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">IDENTITY</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        interpolation<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Interpolation<span class="z-punctuation z-accessor z-rust">::</span></span>Linear<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>would now be added like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">animation_clip<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_curve_to_target</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    animation_target_id<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-path z-rust">AnimatableKeyframeCurve<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">4.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into_iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">zip</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">IDENTITY</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">2.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span>from_axis_angle<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">PI</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">2.</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">3.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Quat<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">IDENTITY</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>RotationCurve</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">expect</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Failed to build rotation curve<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>Note that the interface of <code>AnimationClip::add_curve_to_target</code> has also changed (as this example shows, if subtly), and now takes its curve input as an <code>impl AnimationCurve</code>. If you need to add a <code>VariableCurve</code> directly, a new method <code>add_variable_curve_to_target</code> accommodates that (and serves as a one-to-one migration in this regard).<p><strong>For reviewers</strong><p>The diff is pretty big, and the structure of some of the changes might not be super-obvious:<ul><li><code>keyframes.rs</code> became <code>animation_curves.rs</code>, and <code>AnimationCurve</code> is based heavily on <code>Keyframes</code>, with the adaptors also largely following suite.<li>The Curve API adaptor structs were moved from <code>bevy_math::curve::mod</code> into their own module <code>adaptors</code>. There are no functional changes to how these adaptors work; this is just to make room for the specialized reflection implementations since <code>mod.rs</code> was getting kind of cramped.<li>The new module <code>gltf_curves</code> holds the additional curve constructions that are needed by the glTF loader. Note that the loader uses a mix of these and off-the-shelf <code>bevy_math</code> curve stuff.<li><code>animatable.rs</code> no longer holds logic related to keyframe interpolation, which is now delegated to the existing abstractions in <code>bevy_math::curve::cores</code>.</ul><hr><h3 id=allow-animation-clips-to-animate-arbitrary-properties>Allow animation clips to animate arbitrary properties. <a class=anchor-link href=#allow-animation-clips-to-animate-arbitrary-properties>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Animation</span>, <span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15282>#15282</a></div></div><ul><li>Animation keyframes are now an extensible trait, not an enum. Replace <code>Keyframes::Translation(...)</code>, <code>Keyframes::Scale(...)</code>, <code>Keyframes::Rotation(...)</code>, and <code>Keyframes::Weights(...)</code> with <code>Box::new(TranslationKeyframes(...))</code>, <code>Box::new(ScaleKeyframes(...))</code>, <code>Box::new(RotationKeyframes(...))</code>, and <code>Box::new(MorphWeightsKeyframes(...))</code> respectively.</ul><h2 id=app>App <a class=anchor-link href=#app>#</a></h2><h3 id=add-features-to-switch-nativeactivity-and-gameactivity-usage>Add features to switch <code>NativeActivity</code> and <code>GameActivity</code> usage <a class=anchor-link href=#add-features-to-switch-nativeactivity-and-gameactivity-usage>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>App</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/12095>#12095</a></div></div><p><code>GameActivity</code> is now the default activity for Android projects, replacing <code>NativeActivity</code>. <code>cargo-apk</code> has been replaced with <code>cargo-ndk</code> since the former is not compatible with <code>GameActivity</code>.<p>Before:<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rustup</span></span><span class="z-meta z-function-call z-arguments z-shell"> target add aarch64-linux-android armv7-linux-androideabi</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> install cargo-apk</span>
</span></code></pre><p>After:<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rustup</span></span><span class="z-meta z-function-call z-arguments z-shell"> target add aarch64-linux-android</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> install cargo-ndk</span>
</span></code></pre><p>Shared object files must be now built for the target architecture before launching package builds with the Gradle wrapper.<p>Before:<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> apk build<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>package</span> bevy_mobile_example</span>
</span></code></pre><p>After:<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> ndk<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>t</span> arm64-v8a<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> android_example/app/src/main/jniLibs build<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>package</span> bevy_mobile_example</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./android_example/gradlew</span></span><span class="z-meta z-function-call z-arguments z-shell"> build</span>
</span></code></pre><p>(replace target and project name as required). Note that build output paths have changed. APK builds can be found under <code>app/build/outputs/apk</code>).<p>Android Studio may also be used.<p>Bevy may require the <code>libc++_shared.so</code> library to run on Android. This can be manually obtained from NDK source, or NDK describes a <a href="https://github.com/bbqsrc/cargo-ndk?tab=readme-ov-file#linking-against-and-copying-libc_sharedso-into-the-relevant-places-in-the-output-directory"><code>build.rs</code></a> approach. A suggested solution is also presented in the Bevy mobile example.<p>Applications that still require <code>NativeActivity</code> should:<ol><li>disable default features in <code>Cargo.toml</code><li>re-enable all default features <em>except</em> <code>android-game-activity</code><li>enable the <code>android-native-activity</code> feature</ol><hr><h3 id=allow-ordering-variable-timesteps-around-fixed-timesteps>Allow ordering variable timesteps around fixed timesteps <a class=anchor-link href=#allow-ordering-variable-timesteps-around-fixed-timesteps>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>App</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14881>#14881</a></div></div><p><a href=https://docs.rs/bevy/latest/bevy/time/fn.run_fixed_main_schedule.html>run_fixed_main_schedule</a> is no longer public. If you used to order against it, use the new dedicated <code>RunFixedMainLoopSystem</code> system set instead. You can replace your usage of <code>run_fixed_main_schedule</code> one for one by <code>RunFixedMainLoopSystem::FixedMainLoop</code>, but it is now more idiomatic to place your systems in either <code>RunFixedMainLoopSystem::BeforeFixedMainLoop</code> or <code>RunFixedMainLoopSystem::AfterFixedMainLoop</code><p>Old:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    RunFixedMainLoop<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    some_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">before</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>run_fixed_main_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>New:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    RunFixedMainLoop<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    some_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">RunFixedMainLoopSystem<span class="z-punctuation z-accessor z-rust">::</span></span>BeforeFixedMainLoop</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><hr><h3 id=remove-deprecated-bevy-dynamic-plugin>Remove deprecated <code>bevy_dynamic_plugin</code> <a class=anchor-link href=#remove-deprecated-bevy-dynamic-plugin>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>App</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14534>#14534</a></div></div><p>Dynamic plugins were deprecated in 0.14 for being unsound, and they have now been fully removed. Please consider using the alternatives listed in the <code>bevy_dynamic_plugin</code> crate documentation, or worst-case scenario you may copy the code from 0.14.<hr><h3 id=remove-need-for-eventloopproxy-to-be-nonsend>Remove need for EventLoopProxy to be NonSend <a class=anchor-link href=#remove-need-for-eventloopproxy-to-be-nonsend>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>App</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14198>#14198</a></div></div><p><code>EventLoopProxy</code> has been renamed to <code>EventLoopProxyWrapper</code> and is now <code>Send</code>, making it an ordinary resource.<p>Before:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-support z-function z-rust">event_loop_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>event_loop<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">NonSend<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">EventLoopProxy<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyEvent<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    event_loop<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send_event</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyEvent</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><p>After:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-support z-function z-rust">event_loop_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>event_loop<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">EventLoopProxy<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyEvent<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    event_loop<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send_event</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyEvent</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><hr><h3 id=remove-second-generic-from-add-before-add-after>Remove second generic from <code>.add_before</code>, <code>.add_after</code> <a class=anchor-link href=#remove-second-generic-from-add-before-add-after>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>App</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14285>#14285</a></div></div><p>Removed second generic from <code>PluginGroupBuilder</code> methods: <code>add_before</code> and <code>add_after</code>.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Before:
</span></span><span class="z-source z-rust">DefaultPlugins
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">add_before<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>WindowPlugin, <span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>FooPlugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">add_after<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>WindowPlugin, <span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>BarPlugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After:
</span></span><span class="z-source z-rust">DefaultPlugins
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">add_before<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>WindowPlugin<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>FooPlugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">add_after<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>WindowPlugin<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>BarPlugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><hr><h3 id=handle-ctrl-c-in-the-terminal-properly>Handle <code>Ctrl+C</code> in the terminal properly <a class=anchor-link href=#handle-ctrl-c-in-the-terminal-properly>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>App</span>, <span class=heading-meta__item>Windowing</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14001>#14001</a></div></div><p>If you are overriding the <code>Ctrl+C</code> handler then you should call <code>TerminalCtrlCHandlerPlugin::gracefully_exit</code> from your handler. It will tell the app to exit.<h2 id=assets>Assets <a class=anchor-link href=#assets>#</a></h2><h3 id=assetserver-loadstate-api-consistency>AssetServer LoadState API consistency <a class=anchor-link href=#assetserver-loadstate-api-consistency>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15237>#15237</a></div></div><p><code>RecursiveDependencyLoadState::Failed</code> now stores error information about the first encountered error, rather than being a unit struct.<hr><h3 id=cleanup-unneeded-lifetimes-in-bevy-asset>Cleanup unneeded lifetimes in bevy_asset <a class=anchor-link href=#cleanup-unneeded-lifetimes-in-bevy-asset>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15546>#15546</a></div></div><p>The traits <code>AssetLoader</code>, <code>AssetSaver</code> and <code>Process</code> traits from <code>bevy_asset</code> now use elided lifetimes. If you implement these then remove the named lifetime.<hr><h3 id=generalized-into-assetsourceid-and-into-assetpath-implementations-over-lifetime>Generalized <code>Into&LTAssetSourceId></code> and <code>Into&LTAssetPath></code> Implementations over Lifetime <a class=anchor-link href=#generalized-into-assetsourceid-and-into-assetpath-implementations-over-lifetime>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/10823>#10823</a></div></div><p>In areas where these implementations where being used, you can now add <code>from_static</code> in order to get the original specialised implementation which avoids creating an <code>Arc</code> internally.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Before
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> asset_path <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">AssetPath<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>my/path/to/an/asset.ext<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> asset_path <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">AssetPath<span class="z-punctuation z-accessor z-rust">::</span></span>from_static<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>my/path/to/an/asset.ext<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>To be clear, this is only required if you wish to maintain the performance benefit that came with the specialisation. Existing code is <em>not</em> broken by this change.<hr><h3 id=improve-error-handling-for-assetserver-add-async>Improve error handling for <code>AssetServer::add_async</code> <a class=anchor-link href=#improve-error-handling-for-assetserver-add-async>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13745>#13745</a></div></div><p><code>AssetServer::add_async</code> can now return a custom error type in its future. To return to the previous behavior, pass in an <code>E</code> generic of <code>AssetLoadError</code>.<p>To support these changes, <code>AssetLoadError</code> now has an additional arm that will need to be exhaustively matched against.<hr><h3 id=remove-incorrect-equality-comparisons-for-asset-load-error-types>Remove incorrect equality comparisons for asset load error types <a class=anchor-link href=#remove-incorrect-equality-comparisons-for-asset-load-error-types>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15890>#15890</a></div></div><p>The types <code>bevy_asset::AssetLoadError</code> and <code>bevy_asset::LoadState</code> no longer support equality comparisons. If you need to check for an asset’s load state, consider checking for a specific variant using <code>LoadState::is_loaded</code> or the <code>matches!</code> macro. Similarly, consider using the <code>matches!</code> macro to check for specific variants of the <code>AssetLoadError</code> type if you need to inspect the value of an asset load error in your code.<p><code>DependencyLoadState</code> and <code>RecursiveDependencyLoadState</code> are not released yet, so no migration needed,<hr><h3 id=replace-asyncseek-trait-by-asyncseekforward-for-reader-to-address-12880>Replace <code>AsyncSeek</code> trait by <code>AsyncSeekForward</code> for <code>Reader</code> to address #12880 <a class=anchor-link href=#replace-asyncseek-trait-by-asyncseekforward-for-reader-to-address-12880>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14194>#14194</a></div></div><p>Replace all instances of <code>AsyncSeek</code> with <code>AsyncSeekForward</code> in your asset reader implementations.<hr><h3 id=bevy-asset-improve-nestedloader-api>bevy_asset: Improve <code>NestedLoader</code> API <a class=anchor-link href=#bevy-asset-improve-nestedloader-api>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15509>#15509</a></div></div><p>Code which uses <code>bevy_asset</code>’s <code>LoadContext::loader</code> / <code>NestedLoader</code> will see some naming changes:<ul><li><code>untyped</code> is replaced by <code>with_unknown_type</code><li><code>with_asset_type</code> is replaced by <code>with_static_type</code><li><code>with_asset_type_id</code> is replaced by <code>with_dynamic_type</code><li><code>direct</code> is replaced by <code>immediate</code> (the opposite of “immediate” is “deferred”)</ul><hr><h3 id=deprecate-loadandsave-asset-processor>Deprecate <code>LoadAndSave</code> Asset Processor <a class=anchor-link href=#deprecate-loadandsave-asset-processor>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15090>#15090</a></div></div><ul><li>Replace <code>LoadAndSave&LTL, S></code> with <code>LoadTransformAndSave&LTL, IdentityAssetTransformer<&LTL as AssetLoader>::Asset>, S></code><li>Replace <code>LoadAndSaveSettings&LTL, S></code> with <code>LoadTransformAndSaveSettings&LTL, (), S></code></ul><hr><h3 id=assetreader-read-now-returns-an-opaque-type><code>AssetReader::read</code> now returns an opaque type <a class=anchor-link href=#assetreader-read-now-returns-an-opaque-type>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14082>#14082</a></div></div><p>The trait method <code>bevy_asset::io::AssetReader::read</code> (and <code>read_meta</code>) now return an opaque type instead of a boxed trait object. Implementors of these methods should change the type signatures appropriately:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">AssetReader <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyReader</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Before
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    async <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">read</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">path</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> Path</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Reader<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, AssetReaderError<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> reader <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> construct a reader
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Box</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">as</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Reader<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    async <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">read</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">path</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> Path</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>impl Reader <span class="z-keyword z-operator z-rust">+</span> <span class="z-storage z-modifier z-lifetime z-rust">'a</span>, AssetReaderError<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> create a reader
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p><code>bevy::asset::io::Reader</code> is now a trait, rather than a type alias for a trait object. Implementors of <code>AssetLoader::load</code> will need to adjust the method signature accordingly:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">AssetLoader <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyLoader</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    async <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">load</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-variable z-parameter z-rust">self</span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Before:
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-modifier z-rust">mut</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">asset<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">io<span class="z-punctuation z-accessor z-rust">::</span></span>Reader,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After:
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-modifier z-rust">mut</span> dyn <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">asset<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">io<span class="z-punctuation z-accessor z-rust">::</span></span>Reader,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">_</span>: <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Settings,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">load_context</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-modifier z-rust">mut</span> <span class="z-meta z-generic z-rust">LoadContext<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>'<span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    </span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Asset, <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Error<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span></code></pre><p>Additionally, implementors of <code>AssetReader</code> that return a type implementing <code>futures_io::AsyncRead</code> and <code>AsyncSeek</code> might need to explicitly implement <code>bevy::asset::io::Reader</code> for that type.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">asset<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">io<span class="z-punctuation z-accessor z-rust">::</span></span>Reader <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyAsyncReadAndSeek</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><hr><h3 id=make-gltf-node-children-handle-instead-of-objects>Make gLTF node children Handle instead of objects <a class=anchor-link href=#make-gltf-node-children-handle-instead-of-objects>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13707>#13707</a></div></div><p>If accessing children, use <code>Assets&LTGltfNode></code> resource to get the actual child object.<p><strong>Before</strong><pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">gltf_print_first_node_children_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">gltf_component_query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Gltf<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">gltf_assets</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Gltf<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">gltf_nodes</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>GltfNode<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> gltf_handle <span class="z-keyword z-operator z-rust">in</span> gltf_component_query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> gltf_root <span class="z-keyword z-operator z-assignment z-rust">=</span> gltf_assets<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>gltf_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> first_node_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> gltf_root<span class="z-punctuation z-accessor z-dot z-rust">.</span>nodes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> first_node <span class="z-keyword z-operator z-assignment z-rust">=</span> gltf_nodes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>first_node_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> first_child <span class="z-keyword z-operator z-assignment z-rust">=</span> first_node<span class="z-punctuation z-accessor z-dot z-rust">.</span>children<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>First nodes child node name is {:?)<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> first_child<span class="z-punctuation z-accessor z-dot z-rust">.</span>name<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p><strong>After</strong><pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">gltf_print_first_node_children_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">gltf_component_query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Gltf<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">gltf_assets</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Gltf<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">gltf_nodes</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>GltfNode<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> gltf_handle <span class="z-keyword z-operator z-rust">in</span> gltf_component_query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> gltf_root <span class="z-keyword z-operator z-assignment z-rust">=</span> gltf_assets<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>gltf_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> first_node_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> gltf_root<span class="z-punctuation z-accessor z-dot z-rust">.</span>nodes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> first_node <span class="z-keyword z-operator z-assignment z-rust">=</span> gltf_nodes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>first_node_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> first_child_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> first_node<span class="z-punctuation z-accessor z-dot z-rust">.</span>children<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> first_child <span class="z-keyword z-operator z-assignment z-rust">=</span> gltf_nodes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>first_child_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>First nodes child node name is {:?)<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> first_child<span class="z-punctuation z-accessor z-dot z-rust">.</span>name<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><hr><h3 id=split-textureatlassources-out-of-textureatlaslayout-and-make-textureatlaslayout-serializable>Split <code>TextureAtlasSources</code> out of <code>TextureAtlasLayout</code> and make <code>TextureAtlasLayout</code> serializable <a class=anchor-link href=#split-textureatlassources-out-of-textureatlaslayout-and-make-textureatlaslayout-serializable>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15344>#15344</a></div></div><p><code>TextureAtlasBuilder</code> no longer stores a mapping back to the original images in <code>TextureAtlasLayout</code>; that functionality has been added to a new struct, <code>TextureAtlasSources</code>, instead. This also means that the signature for <code>TextureAtlasBuilder::finish</code> has changed, meaning that calls of the form:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>atlas_layout<span class="z-punctuation z-separator z-rust">,</span> image</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> builder<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>Will now change to the form:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>atlas_layout<span class="z-punctuation z-separator z-rust">,</span> atlas_sources<span class="z-punctuation z-separator z-rust">,</span> image</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> builder<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>And instead of performing a reverse-lookup from the layout, like so:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> atlas_layout_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> texture_atlases<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>atlas_layout<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> index <span class="z-keyword z-operator z-assignment z-rust">=</span> atlas_layout<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get_texture_index</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>my_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> handle <span class="z-keyword z-operator z-assignment z-rust">=</span> TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    layout<span class="z-punctuation z-separator z-rust">:</span> atlas_layout_handle<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    index<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>You can perform the lookup from the sources instead:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> atlas_layout <span class="z-keyword z-operator z-assignment z-rust">=</span> texture_atlases<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>atlas_layout</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> index <span class="z-keyword z-operator z-assignment z-rust">=</span> atlas_sources<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get_texture_index</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>my_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> handle <span class="z-keyword z-operator z-assignment z-rust">=</span> TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    layout<span class="z-punctuation z-separator z-rust">:</span> atlas_layout<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    index<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>Additionally, <code>TextureAtlasSources</code> also has a convenience method, <code>handle</code>, which directly combines the index and an existing <code>TextureAtlasLayout</code> handle into a new <code>TextureAtlas</code>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> atlas_layout <span class="z-keyword z-operator z-assignment z-rust">=</span> texture_atlases<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>atlas_layout</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> handle <span class="z-keyword z-operator z-assignment z-rust">=</span> atlas_sources<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>atlas_layout<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>my_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><hr><h3 id=export-gltf-skins-as-a-gltf-struct>Export glTF skins as a Gltf struct <a class=anchor-link href=#export-gltf-skins-as-a-gltf-struct>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>, <span class=heading-meta__item>Scenes</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14343>#14343</a></div></div><ul><li>Change <code>GltfAssetLabel::Skin(..)</code> to <code>GltfAssetLabel::InverseBindMatrices(..)</code>.</ul><hr><h3 id=replace-bevy-utils-cowarc-with-atomicow>Replace <code>bevy_utils::CowArc</code> with <code>atomicow</code> <a class=anchor-link href=#replace-bevy-utils-cowarc-with-atomicow>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Assets</span>, <span class=heading-meta__item>Utils</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14977>#14977</a></div></div><p><code>bevy_utils::CowArc</code> has moved to a new crate called <a href=https://crates.io/crates/atomicow>atomicow</a>.<h2 id=audio>Audio <a class=anchor-link href=#audio>#</a></h2><h3 id=migrate-audio-to-required-components>Migrate audio to required components <a class=anchor-link href=#migrate-audio-to-required-components>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Audio</span>, <span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15573>#15573</a></div></div><p>Replace all insertions of <code>AudioSourceBundle</code>, <code>AudioBundle</code>, and <code>PitchBundle</code> with the <code>AudioPlayer</code> component. The other components required by it will now be inserted automatically.<p>In cases where the generics cannot be inferred, you may need to specify them explicitly. For example:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AudioPlayer<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>AudioSource<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>sounds/sick_beats.ogg<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h2 id=build-system>Build-System <a class=anchor-link href=#build-system>#</a></h2><h3 id=use-en-us-locale-for-typos>Use <code>en-us</code> locale for <code>typos</code> <a class=anchor-link href=#use-en-us-locale-for-typos>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Build-System</span>, <span class=heading-meta__item>Cross-Cutting</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16037>#16037</a></div></div><p>The following methods or fields have been renamed from <code>*dependants*</code> to <code>*dependents*</code>.<ul><li><code>ProcessorAssetInfo::dependants</code><li><code>ProcessorAssetInfos::add_dependant</code><li><code>ProcessorAssetInfos::non_existent_dependants</code><li><code>AssetInfo::dependants_waiting_on_load</code><li><code>AssetInfo::dependants_waiting_on_recursive_dep_load</code><li><code>AssetInfos::loader_dependants</code><li><code>AssetInfos::remove_dependants_and_labels</code></ul><h2 id=color>Color <a class=anchor-link href=#color>#</a></h2><h3 id=adds-back-in-way-to-convert-color-to-u8-array-implemented-for-the-two-rgb-color-types-also-renames-color-linear-to-color-to-linear>Adds back in way to convert color to u8 array, implemented for the two RGB color types, also renames Color::linear to Color::to_linear. <a class=anchor-link href=#adds-back-in-way-to-convert-color-to-u8-array-implemented-for-the-two-rgb-color-types-also-renames-color-linear-to-color-to-linear>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Color</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13759>#13759</a></div></div><p><code>Color::linear</code> has been renamed to <code>Color::to_linear</code> for consistency.<hr><h3 id=update-grid-gizmo-to-use-color>Update Grid Gizmo to use Color <a class=anchor-link href=#update-grid-gizmo-to-use-color>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Color</span>, <span class=heading-meta__item>Gizmos</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14886>#14886</a></div></div><p>This shouldn’t be adding anything that isn’t already in a migration guide? I assume as it uses <code>impl Into<...></code> in the public interfaces that any users of these APIs shouldn’t have to make any code changes.<h2 id=core>Core <a class=anchor-link href=#core>#</a></h2><h3 id=rename-bevy-core-name-debugname-to-bevy-core-name-nameorentity>Rename <code>bevy_core::name::DebugName</code> to <code>bevy_core::name::NameOrEntity</code> <a class=anchor-link href=#rename-bevy-core-name-debugname-to-bevy-core-name-nameorentity>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Core</span>, <span class=heading-meta__item>Editor</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14211>#14211</a></div></div><ul><li>Rename usages of <code>bevy_core::name::DebugName</code> to <code>bevy_core::name::NameOrEntity</code></ul><h2 id=cross-cutting>Cross-Cutting <a class=anchor-link href=#cross-cutting>#</a></h2><h3 id=remove-the-component-trait-implementation-from-handle>Remove the <code>Component</code> trait implementation from <code>Handle</code> <a class=anchor-link href=#remove-the-component-trait-implementation-from-handle>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Cross-Cutting</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15796>#15796</a></div></div><p><code>Handle</code> can no longer be used as a <code>Component</code>. All existing Bevy types using this pattern have been wrapped in their own semantically meaningful type. You should do the same for any custom <code>Handle</code> components your project needs.<p>The <code>Handle&LTMeshletMesh></code> component is now <code>MeshletMesh3d</code>.<p>The <code>WithMeshletMesh</code> type alias has been removed. Use <code>With&LTMeshletMesh3d></code> instead.<hr><h3 id=fix-floating-point-math>Fix floating point math <a class=anchor-link href=#fix-floating-point-math>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Cross-Cutting</span>, <span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15239>#15239</a></div></div><ul><li>Not a breaking change<li>Projects should use bevy math where applicable</ul><hr><h3 id=don-t-re-export-bevy-image-from-bevy-render>Don't re-export <code>bevy_image</code> from <code>bevy_render</code> <a class=anchor-link href=#don-t-re-export-bevy-image-from-bevy-render>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Cross-Cutting</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16163>#16163</a></div></div><p>Various types and traits are no longer re-exported from <code>bevy_image</code> in <code>bevy::render::texture</code>. Import them directly from <code>bevy::image</code> instead.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">render<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">texture<span class="z-punctuation z-accessor z-rust">::</span></span>BevyDefault<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.15
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">image<span class="z-punctuation z-accessor z-rust">::</span></span>BevyDefault<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>For searchability, this is a non-comprehensive list of other types may be affected: <code>CompressedImageFormats</code>, <code>ExrTextureLoader</code>, <code>HdrTextureLoader</code>, <code>Image</code>, <code>ImageAddressMode</code>, <code>ImageFilterMode</code>, <code>ImageLoader</code>, <code>ImageLoaderSettings</code>, <code>ImageSampler</code>, <code>ImageSamplerDescriptor</code>, <code>ImageType</code>, <code>TextureError</code>, <code>TextureFormatPixelInfo</code>.<hr><h3 id=add-custom-cursors>Add custom cursors <a class=anchor-link href=#add-custom-cursors>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Cross-Cutting</span>, <span class=heading-meta__item>UI</span>, <span class=heading-meta__item>Windowing</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14284>#14284</a></div></div><ul><li><code>CursorIcon</code> is no longer a field in <code>Window</code>, but a separate component can be inserted to a window entity. It has been changed to an enum that can hold custom images in addition to system icons.<li><code>Cursor</code> is renamed to <code>CursorOptions</code> and <code>cursor</code> field of <code>Window</code> is renamed to <code>cursor_options</code><li><code>CursorIcon</code> is renamed to <code>SystemCursorIcon</code></ul><h2 id=diagnostics>Diagnostics <a class=anchor-link href=#diagnostics>#</a></h2><h3 id=don-t-ignore-draw-errors>Don't ignore draw errors <a class=anchor-link href=#don-t-ignore-draw-errors>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Diagnostics</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13240>#13240</a></div></div><p>If you were using <code>RenderCommandResult::Failure</code> to just ignore an error and retry later, use <code>RenderCommandResult::Skip</code> instead.<p>This wasn’t intentional, but this PR should also help with https://github.com/bevyengine/bevy/issues/12660 since we can turn a few unwraps into error messages now.<h2 id=ecs>ECS <a class=anchor-link href=#ecs>#</a></h2><h3 id=make-world-flush-commands-private>Make World::flush_commands private <a class=anchor-link href=#make-world-flush-commands-private>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15540>#15540</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15553>#15553</a></div></div><p><code>World::flush_commands</code> is now private. Use <code>World::flush</code> instead.<hr><h3 id=add-filteredaccess-empty-and-simplify-the-implementation-of-update-component-access-for-anyof-or>Add <code>FilteredAccess::empty</code> and simplify the implementation of <code>update_component_access</code> for <code>AnyOf</code>/<code>Or</code> <a class=anchor-link href=#add-filteredaccess-empty-and-simplify-the-implementation-of-update-component-access-for-anyof-or>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14352>#14352</a></div></div><ul><li>The behaviour of <code>AnyOf<()></code> and <code>Or<()></code> has been changed to match no archetypes rather than all archetypes to naturally match the corresponding logical operation. Consider replacing them with <code>()</code> instead.</ul><hr><h3 id=add-mappings-to-entitymapper>Add <code>mappings</code> to <code>EntityMapper</code> <a class=anchor-link href=#add-mappings-to-entitymapper>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13727>#13727</a></div></div><ul><li>If you are implementing <code>EntityMapper</code> yourself, you can use the below as a stub implementation:</ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">mappings</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-variable z-parameter z-rust">self</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> impl <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Iterator</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Item = <span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, Entity<span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">unimplemented!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><ul><li>If you were using <code>EntityMapper</code> as a trait object (<code>dyn EntityMapper</code>), instead use <code>dyn DynEntityMapper</code> and its associated methods.</ul><hr><h3 id=add-query-reborrowing>Add query reborrowing <a class=anchor-link href=#add-query-reborrowing>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14690>#14690</a></div></div><ul><li><code>WorldQuery</code> now has an additional <code>shrink_fetch</code> method you have to implement if you were implementing <code>WorldQuery</code> manually.</ul><hr><h3 id=allow-world-entity-family-of-functions-to-take-multiple-entities-and-get-multiple-references-back>Allow <code>World::entity</code> family of functions to take multiple entities and get multiple references back <a class=anchor-link href=#allow-world-entity-family-of-functions-to-take-multiple-entities-and-get-multiple-references-back>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15614>#15614</a></div></div><ul><li><p><code>World::get_entity</code> now returns <code>Result<_, Entity></code> instead of <code>Option<_></code>.</p> <ul><li>Use <code>world.get_entity(..).ok()</code> to return to the previous behavior.</ul><li><p><code>World::get_entity_mut</code> and <code>DeferredWorld::get_entity_mut</code> now return <code>Result<_, EntityFetchError></code> instead of <code>Option<_></code>.</p> <ul><li>Use <code>world.get_entity_mut(..).ok()</code> to return to the previous behavior.</ul><li><p>Type inference for <code>World::entity</code>, <code>World::entity_mut</code>, <code>World::get_entity</code>, <code>World::get_entity_mut</code>, <code>DeferredWorld::entity_mut</code>, and <code>DeferredWorld::get_entity_mut</code> has changed, and might now require the input argument’s type to be explicitly written when inside closures.</p><li><p>The following functions have been deprecated, and should be replaced as such:</p> <ul><li><p><code>World::many_entities</code> -> <code>World::entity::<[Entity; N]></code></p><li><p><code>World::many_entities_mut</code> -> <code>World::entity_mut::<[Entity; N]></code></p><li><p><code>World::get_many_entities</code> -> <code>World::get_entity::<[Entity; N]></code></p><li><p><code>World::get_many_entities_dynamic</code> -> <code>World::get_entity::<&[Entity]></code></p><li><p><code>World::get_many_entities_mut</code> -> <code>World::get_entity_mut::<[Entity; N]></code></p> <ul><li>The equivalent return type has changed from <code>Result<_, QueryEntityError></code> to <code>Result<_, EntityFetchError></code></ul><li><p><code>World::get_many_entities_dynamic_mut</code> -> <code>World::get_entity_mut::<&[Entity]></code></p> <ul><li>The equivalent return type has changed from <code>Result<_, QueryEntityError></code> to <code>Result<_, EntityFetchError></code></ul><li><p><code>World::get_many_entities_from_set_mut</code> -> <code>World::get_entity_mut::<&EntityHashSet></code></p> <ul><li>The equivalent return type has changed from <code>Result&LTVec&LTEntityMut>, QueryEntityError></code> to <code>Result&LTEntityHashMap&LTEntityMut>, EntityFetchError></code>. If necessary, you can still convert the <code>EntityHashMap</code> into a <code>Vec</code>.</ul></ul></ul><hr><h3 id=change-world-inspect-entity-to-return-an-iterator-instead-of-vec>Change World::inspect_entity to return an Iterator instead of Vec <a class=anchor-link href=#change-world-inspect-entity-to-return-an-iterator-instead-of-vec>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13934>#13934</a></div></div><ul><li><code>World::inspect_entity</code> now returns an <code>Iterator</code> instead of a <code>Vec</code>. If you need a <code>Vec</code>, immediately collect the iterator: <code>world.inspect_entity(entity).collect&LTVec<_>>()</code></ul><hr><h3 id=created-an-eventmutator-for-when-you-want-to-mutate-an-event-before-reading>Created an EventMutator for when you want to mutate an event before reading <a class=anchor-link href=#created-an-eventmutator-for-when-you-want-to-mutate-an-event-before-reading>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13818>#13818</a></div></div><p>Users currently using <code>ManualEventReader</code> should use <code>EventCursor</code> instead. <code>ManualEventReader</code> will be removed in Bevy 0.16. Additionally, <code>Events::get_reader</code> has been replaced by <code>Events::get_cursor</code>.<p>Users currently directly accessing the <code>Events</code> resource for mutation should move to <code>EventMutator</code> if possible.<hr><h3 id=deprecate-events-oldest-id>Deprecate <code>Events::oldest_id</code> <a class=anchor-link href=#deprecate-events-oldest-id>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15658>#15658</a></div></div><ul><li>Change usages of <code>Events::oldest_id</code> to <code>Events::oldest_event_count</code><li>If <code>Events::oldest_id</code> was used to get the actual oldest <code>EventId::id</code>, note that the deprecated method never reliably did that in the first place as the buffers may contain no id currently.</ul><hr><h3 id=deprecate-get-or-spawn>Deprecate <code>get_or_spawn</code> <a class=anchor-link href=#deprecate-get-or-spawn>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15652>#15652</a></div></div><p>If you are given an <code>Entity</code> and you want to do something with it, use <code>Commands.entity(...)</code> or <code>World.entity(...)</code>. If instead you want to spawn something use <code>Commands.spawn(...)</code> or <code>World.spawn(...)</code>. If you are not sure if an entity exists, you can always use <code>get_entity</code> and match on the <code>Option<...></code> that is returned.<hr><h3 id=enable-entityref-get-by-id-and-friends-to-take-multiple-ids-and-get-multiple-pointers-back>Enable <code>EntityRef::get_by_id</code> and friends to take multiple ids and get multiple pointers back <a class=anchor-link href=#enable-entityref-get-by-id-and-friends-to-take-multiple-ids-and-get-multiple-pointers-back>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15593>#15593</a></div></div><ul><li>The following functions now return an <code>Result<_, EntityComponentError></code> instead of a <code>Option<_></code>: <code>EntityRef::get_by_id</code>, <code>EntityMut::get_by_id</code>, <code>EntityMut::into_borrow_by_id</code>, <code>EntityMut::get_mut_by_id</code>, <code>EntityMut::into_mut_by_id</code>, <code>EntityWorldMut::get_by_id</code>, <code>EntityWorldMut::into_borrow_by_id</code>, <code>EntityWorldMut::get_mut_by_id</code>, <code>EntityWorldMut::into_mut_by_id</code></ul><hr><h3 id=entityref-mut-get-components-immutable-variants-only>EntityRef/Mut get_components (immutable variants only) <a class=anchor-link href=#entityref-mut-get-components-immutable-variants-only>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15089>#15089</a></div></div><ul><li>Renamed <code>FilteredEntityRef::components</code> to <code>FilteredEntityRef::accessed_components</code> and <code>FilteredEntityMut::components</code> to <code>FilteredEntityMut::accessed_components</code>.</ul><hr><h3 id=fix-soudness-issue-with-conflicts-involving-read-all-and-write-all>Fix soudness issue with Conflicts involving <code>read_all</code> and <code>write_all</code> <a class=anchor-link href=#fix-soudness-issue-with-conflicts-involving-read-all-and-write-all>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14579>#14579</a></div></div><p>The <code>get_conflicts</code> method of <code>Access</code> now returns an <code>AccessConflict</code> enum instead of simply a <code>Vec</code> of <code>ComponentId</code>s that are causing the access conflict. This can be useful in cases where there are no particular <code>ComponentId</code>s conflicting, but instead <strong>all</strong> of them are; for example <code>fn system(q1: Query&LTEntityMut>, q2: Query&LTEntityRef>)</code><hr><h3 id=follow-up-to-cached-run-system>Follow up to cached <code>run_system</code> <a class=anchor-link href=#follow-up-to-cached-run-system>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15410>#15410</a></div></div><ul><li><code>IntoSystem::pipe</code> and <code>IntoSystem::map</code> now return <code>IntoPipeSystem</code> and <code>IntoAdapterSystem</code> instead of <code>PipeSystem</code> and <code>AdapterSystem</code>. Most notably these types don’t implement <code>System</code> but rather only <code>IntoSystem</code>.</ul><hr><h3 id=list-components-for-queryentityerror-querydoesnotmatch>List components for QueryEntityError::QueryDoesNotMatch <a class=anchor-link href=#list-components-for-queryentityerror-querydoesnotmatch>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15435>#15435</a></div></div><ul><li><code>QueryEntityError</code> now has a lifetime. Convert it to a custom error if you need to store it.</ul><hr><h3 id=make-queryfilter-an-unsafe-trait>Make QueryFilter an unsafe trait <a class=anchor-link href=#make-queryfilter-an-unsafe-trait>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14790>#14790</a></div></div><p><code>QueryFilter</code> is now an <code>unsafe trait</code>. If you were manually implementing it, you will need to verify that the <code>WorldQuery</code> implementation is read-only and then add the <code>unsafe</code> keyword to the <code>impl</code>.<hr><h3 id=make-querystate-transmute-co-validate-the-world-of-the-components-used>Make <code>QueryState::transmute</code>&co validate the world of the <code>&Components</code> used <a class=anchor-link href=#make-querystate-transmute-co-validate-the-world-of-the-components-used>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14631>#14631</a></div></div><ul><li><code>QueryState::transmute</code>, <code>QueryState::transmute_filtered</code>, <code>QueryState::join</code> and <code>QueryState::join_filtered</code> now take a <code>impl Into&LTUnsafeWorldCell></code> instead of a <code>&Components</code></ul><hr><h3 id=re-name-and-extend-run-conditions-api>Re-name and Extend Run Conditions API <a class=anchor-link href=#re-name-and-extend-run-conditions-api>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13784>#13784</a></div></div><ul><li>The <code>and_then</code> run condition method has been replaced with the <code>and</code> run condition method.<li>The <code>or_else</code> run condition method has been replaced with the <code>or</code> run condition method.</ul><hr><h3 id=remove-redundant-information-and-optimize-dynamic-allocations-in-table>Remove redundant information and optimize dynamic allocations in <code>Table</code> <a class=anchor-link href=#remove-redundant-information-and-optimize-dynamic-allocations-in-table>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/12929>#12929</a></div></div><p><code>Table</code> now uses <code>ThinColumn</code> instead of <code>Column</code>. That means that methods that previously returned <code>Column</code>, will now return <code>ThinColumn</code> instead.<p><code>ThinColumn</code> has a much more limited and low-level API, but you can still achieve the same things in <code>ThinColumn</code> as you did in <code>Column</code>. For example, instead of calling <code>Column::get_added_tick</code>, you’d call <code>ThinColumn::get_added_ticks_slice</code> and index it to get the specific added tick.<hr><h3 id=removed-type-parameters-from-observer>Removed Type Parameters from <code>Observer</code> <a class=anchor-link href=#removed-type-parameters-from-observer>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15151>#15151</a></div></div><p>If you filtered for observers using <code>Observer&LTA, B></code>, instead filter for an <code>Observer</code>.<hr><h3 id=rename-add-to-queue-for-methods-with-deferred-semantics>Rename Add to Queue for methods with deferred semantics <a class=anchor-link href=#rename-add-to-queue-for-methods-with-deferred-semantics>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15234>#15234</a></div></div><ul><li><code>Commands::add</code> and <code>Commands::push</code> have been replaced with <code>Commands::queue</code>.<li><code>ChildBuilder::add_command</code> has been renamed to <code>ChildBuilder::queue_command</code>.</ul><hr><h3 id=rename-app-world-observe-to-add-observer-entityworldmut-observe-entity-to-observe>Rename <code>App/World::observe</code> to <code>add_observer</code>, <code>EntityWorldMut::observe_entity</code> to <code>observe</code>. <a class=anchor-link href=#rename-app-world-observe-to-add-observer-entityworldmut-observe-entity-to-observe>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15754>#15754</a></div></div><p>Various observer methods have been renamed for clarity.<ul><li><code>App::observe</code> -> <code>App::add_observer</code><li><code>World::observe</code> -> <code>World::add_observer</code><li><code>Commands::observe</code> -> <code>Commands::add_observer</code><li><code>EntityWorldMut::observe_entity</code> -> <code>EntityWorldMut::observe</code></ul><hr><h3 id=rename-commands-register-one-shot-system-register-system>Rename <code>Commands::register_one_shot_system</code> -> <code>register_system</code> <a class=anchor-link href=#rename-commands-register-one-shot-system-register-system>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14910>#14910</a></div></div><p><code>Commands::register_one_shot_system</code> has been renamed to <code>register_system</code>.<hr><h3 id=rename-init-component-friends>Rename init_component & friends <a class=anchor-link href=#rename-init-component-friends>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15454>#15454</a></div></div><ul><li><code>World::init_component</code> has been renamed to <code>register_component</code>.<li><code>World::init_component_with_descriptor</code> has been renamed to <code>register_component_with_descriptor</code>.<li><code>World::init_bundle</code> has been renamed to <code>register_bundle</code>.<li><code>Components::init_component</code> has been renamed to <code>register_component</code>.<li><code>Components::init_component_with_descriptor</code> has been renamed to <code>register_component_with_descriptor</code>.<li><code>Components::init_resource</code> has been renamed to <code>register_resource</code>.<li><code>Components::init_non_send</code> had been renamed to <code>register_non_send</code>.</ul><hr><h3 id=rename-observe-to-observe-entity-on-entityworldmut>Rename observe to observe_entity on EntityWorldMut <a class=anchor-link href=#rename-observe-to-observe-entity-on-entityworldmut>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15616>#15616</a></div></div><p>The <code>observe()</code> method on entities has been renamed to <code>observe_entity()</code> to prevent confusion about what is being observed in some cases.<hr><h3 id=rename-push-children-to-add-children>Rename push children to add children <a class=anchor-link href=#rename-push-children-to-add-children>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15196>#15196</a></div></div><p>Some commands and methods for adding children to an entity were renamed for consistency.<table><thead><tr><th>0.14<th>0.15<tbody><tr><td><code>EntityCommands::push_children</code><td><code>add_children</code><tr><td><code>PushChild</code><td><code>AddChild</code><tr><td><code>PushChildren</code><td><code>AddChildren</code></table><hr><h3 id=require-mut-self-for-world-increment-change-tick>Require <code>&mut self</code> for <code>World::increment_change_tick</code> <a class=anchor-link href=#require-mut-self-for-world-increment-change-tick>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14459>#14459</a></div></div><p>The method <code>World::increment_change_tick</code> now requires <code>&mut self</code> instead of <code>&self</code>. If you need to call this method but do not have mutable access to the world, consider using <code>world.as_unsafe_world_cell_readonly().increment_change_tick()</code>, which does the same thing, but is less efficient than the method on <code>World</code> due to requiring atomic synchronization.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">world</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>World</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Before
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">increment_change_tick</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">as_unsafe_world_cell_readonly</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">increment_change_tick</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><hr><h3 id=simplify-run-conditions>Simplify run conditions <a class=anchor-link href=#simplify-run-conditions>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14441>#14441</a></div></div><p>Some run conditions have been simplified.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Before:
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_0<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-function z-rust">run_once</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_1<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">resource_changed_or_removed<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_2<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">resource_removed<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_3<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">on_event<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_4<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">any_component_removed<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After:
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_0<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>run_once</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_1<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">resource_changed_or_removed<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_2<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">resource_removed<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_3<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">on_event<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    system_4<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run_if</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">any_component_removed<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><hr><h3 id=support-more-kinds-of-system-params-in-buildable-systems>Support more kinds of system params in buildable systems. <a class=anchor-link href=#support-more-kinds-of-system-params-in-buildable-systems>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14050>#14050</a></div></div><p>The API for <code>SystemBuilder</code> has changed. Instead of constructing a builder with a world and then adding params, you first create a tuple of param builders and then supply the world.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Before
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> system <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">SystemBuilder<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">local<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">u64</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">builder<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Local<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">u64</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-keyword z-operator z-arithmetic z-rust">*</span>x <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">10</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">builder<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>A<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">builder</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> builder<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">with<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>B<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> system <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    ParamBuilder<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    LocalBuilder<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">10</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-path z-rust">QueryParamBuilder<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">builder</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> builder<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">with<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>B<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build_state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><hr><h3 id=support-systems-that-take-references-as-input>Support systems that take references as input <a class=anchor-link href=#support-systems-that-take-references-as-input>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15184>#15184</a></div></div><ul><li><p>All current explicit usages of the following types must be changed in the way specified:</p> <ul><li><code>SystemId&LTI, O></code> to <code>SystemId&LTIn&LTI>, O></code><li><code>System&LTIn = T></code> to <code>System&LTIn = In&LTT>></code><li><code>IntoSystem&LTI, O, M></code> to <code>IntoSystem&LTIn&LTI>, O, M></code><li><code>Condition&LTM, T></code> to <code>Condition&LTM, In&LTT>></code></ul><li><p><code>In&LTTrigger&LTE, B>></code> is no longer a valid input parameter type. Use <code>Trigger&LTE, B></code> directly, instead.</p></ul><hr><h3 id=system-param-validation-for-observers-system-registry-and-run-once>System param validation for observers, system registry and run once <a class=anchor-link href=#system-param-validation-for-observers-system-registry-and-run-once>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15526>#15526</a></div></div><ul><li><code>RunSystemOnce::run_system_once</code> and <code>RunSystemOnce::run_system_once_with</code> now return a <code>Result&LTOut></code> instead of just <code>Out</code></ul><hr><h3 id=track-source-location-in-change-detection>Track source location in change detection <a class=anchor-link href=#track-source-location-in-change-detection>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14034>#14034</a></div></div><ul><li>Added <code>changed_by</code> field to many internal ECS functions used with change detection when the <code>track_change_detection</code> feature flag is enabled. Use Location::caller() to provide the source of the function call.</ul><hr><h3 id=update-trigger-observers-to-operate-over-slices-of-data>Update <code>trigger_observers</code> to operate over slices of data <a class=anchor-link href=#update-trigger-observers-to-operate-over-slices-of-data>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14354>#14354</a></div></div><p>The <code>trigger_observers</code> method now operates on <code>&[ComponentId]</code> rather than <code>impl Iterator&LTItem=ComponentId</code>>.<p>Try replacing <code>bundle_info.iter_components()</code> with <code>bundle_info.components()</code> or collect the iterator of component ids into a <code>Vec</code>.<hr><h3 id=intosystemconfigs-chain-ignore-deferred-s-return-type-fix><code>IntoSystemConfigs::chain_ignore_deferred</code>'s return type fix <a class=anchor-link href=#intosystemconfigs-chain-ignore-deferred-s-return-type-fix>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13919>#13919</a></div></div><p><code>IntoSystemConfigs::chain_ignore_deferred</code> now correctly returns a <code>SystemSetConfig</code>.<hr><h3 id=bevy-ecs-special-case-entity-placeholder-formatting>bevy_ecs: Special-case <code>Entity::PLACEHOLDER</code> formatting <a class=anchor-link href=#bevy-ecs-special-case-entity-placeholder-formatting>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15839>#15839</a></div></div><p>The <code>Debug</code> and <code>Display</code> impls for <code>Entity</code> now return <code>PLACEHOLDER</code> for the <code>Entity::PLACEHOLDER</code> constant. If you had any code relying on these values, you may need to account for this change.<hr><h3 id=change-return-type-of-world-resource-ref-to-ref>change return type of <code>World::resource_ref</code> to <code>Ref</code> <a class=anchor-link href=#change-return-type-of-world-resource-ref-to-ref>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15263>#15263</a></div></div><p>Previously <code>World::get_resource_ref::&LTT></code> and <code>World::resource_ref::&LTT></code> would return a <code>Res&LTT></code> which was inconsistent with the rest of the <code>World</code> API (notably <code>resource_scope</code>). This has been fixed and the methods now return <code>Ref&LTT></code>.<p>This means it is no longer possible to get <code>Res&LTT></code> from <code>World</code>. If you were relying on this, you should try using <code>Ref&LTT></code> instead since it has the same functionality.<p><strong>Before</strong><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> my_resource<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyResource<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">resource_ref</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-function z-rust">function_taking_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">function_taking_resource</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">resource</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyResource<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p><strong>After</strong><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> my_resource<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Ref<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyResource<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">resource_ref</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-function z-rust">function_taking_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">function_taking_resource</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">resource</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Ref<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyResource<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><hr><h3 id=minimal-bubbling-observers>Minimal Bubbling Observers <a class=anchor-link href=#minimal-bubbling-observers>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Hierarchy</span>, <span class=heading-meta__item>Picking</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13991>#13991</a></div></div><ul><li>Manual implementations of <code>Event</code> should add associated type <code>Traverse = TraverseNone</code> and associated constant <code>AUTO_PROPAGATE = false</code>;<li><code>Trigger::new</code> has new field <code>propagation: &mut Propagation</code> which provides the bubbling state.<li><code>ObserverRunner</code> now takes the same <code>&mut Propagation</code> as a final parameter.</ul><hr><h3 id=make-componentticks-field-public>Make <code>ComponentTicks</code> field public <a class=anchor-link href=#make-componentticks-field-public>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Networking</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16269>#16269</a></div></div><ul><li>Instead of using <code>ComponentTicks::last_changed_tick</code> and <code>ComponentTicks::added_tick</code> methods, access fields directly.</ul><hr><h3 id=change-reflectmapentities-to-operate-on-components-before-insertion>Change ReflectMapEntities to operate on components before insertion <a class=anchor-link href=#change-reflectmapentities-to-operate-on-components-before-insertion>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Networking</span>, <span class=heading-meta__item>Scenes</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15422>#15422</a></div></div><ul><li>Consumers of <code>ReflectMapEntities</code> will need to call <code>map_entities</code> on values prior to inserting them into the world.<li>Implementors of <code>MapEntities</code> will need to remove the <code>mappings</code> method, which is no longer needed for <code>ReflectMapEntities</code> and has been removed from the trait.</ul><hr><h3 id=bubbling-observers-traversal-should-use-query-data>Bubbling observers traversal should use query data <a class=anchor-link href=#bubbling-observers-traversal-should-use-query-data>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Picking</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15385>#15385</a></div></div><p>Update implementations of <code>Traversal</code>.<hr><h3 id=migrate-bevy-picking>Migrate bevy picking <a class=anchor-link href=#migrate-bevy-picking>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Picking</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15690>#15690</a></div></div><p>This API hasn’t shipped yet, so I didn’t bother with a deprecation. However, for any crates tracking main the changes are as follows:<p>Previous api:<pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">PointerBundle<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">PointerId<span class="z-punctuation z-accessor z-rust">::</span></span>Mouse</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">PointerBundle<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">PointerId<span class="z-punctuation z-accessor z-rust">::</span></span>Mouse</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_location</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>location</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>New api:<pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">PointerId<span class="z-punctuation z-accessor z-rust">::</span></span>Mouse</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">PointerId<span class="z-punctuation z-accessor z-rust">::</span></span>Mouse<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">PointerLocation<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>location</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><hr><h3 id=reflectbundle-remove-improvement><code>ReflectBundle::remove</code> improvement <a class=anchor-link href=#reflectbundle-remove-improvement>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16139>#16139</a></div></div><p>If you don’t need the returned value from <code>remove</code>, discard it.<hr><h3 id=use-crate-disqualified>Use crate: <code>disqualified</code> <a class=anchor-link href=#use-crate-disqualified>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Reflection</span>, <span class=heading-meta__item>Utils</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15372>#15372</a></div></div><p>Replace references to <code>bevy_utils::ShortName</code> with <code>disqualified::ShortName</code>.<hr><h3 id=migrate-cameras-to-required-components>Migrate cameras to required components <a class=anchor-link href=#migrate-cameras-to-required-components>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15641>#15641</a></div></div><p><code>Camera2dBundle</code> and <code>Camera3dBundle</code> have been deprecated in favor of <code>Camera2d</code> and <code>Camera3d</code>. Inserting them will now also insert the other components required by them automatically.<hr><h3 id=migrate-fog-volumes-to-required-components>Migrate fog volumes to required components <a class=anchor-link href=#migrate-fog-volumes-to-required-components>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15568>#15568</a></div></div><p>Replace all insertions of <code>FogVolumeBundle</code> with the <code>Visibility</code> component. The other components required by it will now be inserted automatically.<hr><h3 id=migrate-meshes-and-materials-to-required-components>Migrate meshes and materials to required components <a class=anchor-link href=#migrate-meshes-and-materials-to-required-components>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15524>#15524</a></div></div><p>Asset handles for meshes and mesh materials must now be wrapped in the <code>Mesh2d</code> and <code>MeshMaterial2d</code> or <code>Mesh3d</code> and <code>MeshMaterial3d</code> components for 2D and 3D respectively. Raw handles as components no longer render meshes.<p>Additionally, <code>MaterialMesh2dBundle</code>, <code>MaterialMeshBundle</code>, and <code>PbrBundle</code> have been deprecated. Instead, use the mesh and material components directly.<p>Previously:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MaterialMesh2dBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    mesh<span class="z-punctuation z-separator z-rust">:</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Circle<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">100.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    material<span class="z-punctuation z-separator z-rust">:</span> materials<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>srgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">7.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">7.</span><span class="z-constant z-numeric z-float z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    transform<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_translation<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">200.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>Now:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    Mesh2d<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Circle<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">100.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    MeshMaterial2d<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>materials<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>srgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">7.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">7.</span><span class="z-constant z-numeric z-float z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_translation<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">200.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>If the mesh material is missing, a white default material is now used. Previously, nothing was rendered if the material was missing.<p>The <code>WithMesh2d</code> and <code>WithMesh3d</code> query filter type aliases have also been removed. Simply use <code>With&LTMesh2d></code> or <code>With&LTMesh3d></code>.<hr><h3 id=migrate-motion-blur-taa-ssao-and-ssr-to-required-components>Migrate motion blur, TAA, SSAO, and SSR to required components <a class=anchor-link href=#migrate-motion-blur-taa-ssao-and-ssr-to-required-components>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15572>#15572</a></div></div><p><code>MotionBlurBundle</code>, <code>TemporalAntiAliasBundle</code>, <code>ScreenSpaceAmbientOcclusionBundle</code>, and <code>ScreenSpaceReflectionsBundle</code> have been deprecated in favor of the <code>MotionBlur</code>, <code>TemporalAntiAliasing</code>, <code>ScreenSpaceAmbientOcclusion</code>, and <code>ScreenSpaceReflections</code> components instead. Inserting them will now also insert the other components required by them automatically.<hr><h3 id=migrate-reflection-probes-to-required-components>Migrate reflection probes to required components <a class=anchor-link href=#migrate-reflection-probes-to-required-components>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15737>#15737</a></div></div><p><code>ReflectionProbeBundle</code> has been deprecated in favor of inserting the <code>LightProbe</code> and <code>EnvironmentMapLight</code> components directly. Inserting them will now automatically insert <code>Transform</code> and <code>Visibility</code> components.<hr><h3 id=migrate-visibility-to-required-components>Migrate visibility to required components <a class=anchor-link href=#migrate-visibility-to-required-components>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15474>#15474</a></div></div><p>Replace all insertions of <code>VisibilityBundle</code> with the <code>Visibility</code> component. The other components required by it will now be inserted automatically.<hr><h3 id=synchronize-removed-components-with-the-render-world>Synchronize removed components with the render world <a class=anchor-link href=#synchronize-removed-components-with-the-render-world>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15582>#15582</a></div></div><p>The retained render world notes should be updated to explain this edge case and <code>SyncComponentPlugin</code><hr><h3 id=deprecate-spatialbundle>Deprecate SpatialBundle <a class=anchor-link href=#deprecate-spatialbundle>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Transform</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15830>#15830</a></div></div><p><code>SpatialBundle</code> is now deprecated, insert <code>Transform</code> and <code>Visibility</code> instead which will automatically insert all other components that were in the bundle. If you do not specify these values and any other components in your <code>spawn</code>/<code>insert</code> call already requires either of these components you can leave that one out.<p>before:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">SpatialBundle<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>after:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Visibility<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></code></pre><hr><h3 id=migrate-bevy-transform-to-required-components>Migrate <code>bevy_transform</code> to required components <a class=anchor-link href=#migrate-bevy-transform-to-required-components>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>ECS</span>, <span class=heading-meta__item>Transform</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14964>#14964</a></div></div><p>Replace all insertions of <code>GlobalTransform</code> and/or <code>TransformBundle</code> with <code>Transform</code> alone.<h2 id=gizmos>Gizmos <a class=anchor-link href=#gizmos>#</a></h2><h3 id=consistency-between-wireframe2d-and-wireframe>Consistency between <code>Wireframe2d</code> and <code>Wireframe</code> <a class=anchor-link href=#consistency-between-wireframe2d-and-wireframe>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Gizmos</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14720>#14720</a></div></div><ul><li><code>Wireframe2dConfig</code>.<code>default_color</code> type is now <code>Color</code> instead of <code>Srgba</code>. Use <code>.into()</code> to convert between them.<li><code>Wireframe2dColor</code>.<code>color</code> type is now <code>Color</code> instead of <code>Srgba</code>. Use <code>.into()</code> to convert between them.</ul><hr><h3 id=fix-gizmos-warnings-and-doc-errors-when-a-subset-of-features-are-selected>Fix Gizmos warnings and doc errors when a subset of features are selected <a class=anchor-link href=#fix-gizmos-warnings-and-doc-errors-when-a-subset-of-features-are-selected>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Gizmos</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14887>#14887</a></div></div><p>There shouldn’t be any reason to migrate, although if for some reason you use <code>GizmoMeshConfig</code> and <code>bevy_render</code> but not <code>bevy_pbr</code> or <code>bevy_sprite</code> (such that it does nothing), then you will get an error that it no longer exists.<hr><h3 id=fix-arc-2d-gizmos>Fix <code>arc_2d</code> Gizmos <a class=anchor-link href=#fix-arc-2d-gizmos>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Gizmos</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14731>#14731</a></div></div><ul><li>users have to adjust their usages of <code>arc_2d</code>: <ul><li>before:</ul></ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-support z-function z-rust">arc_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  pos<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  angle<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  arc_angle<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  radius<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  color
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><ul><li>after:</ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-support z-function z-rust">arc_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> this `+ arc_angle * 0.5` quirk is only if you want to preserve the previous behavior 
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> with the new API.
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> feel free to try to fix this though since your current calls to this function most likely
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> involve some computations to counter-act that quirk in the first place
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">  <span class="z-meta z-path z-rust">Isometry2d<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>pos<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Rot2<span class="z-punctuation z-accessor z-rust">::</span></span>radians<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>angle <span class="z-keyword z-operator z-arithmetic z-rust">+</span> arc_angle <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">  arc_angle<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">  radius<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">  color
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></code></pre><hr><h3 id=improve-the-gizmo-for-plane3d-reusing-grid>Improve the gizmo for <code>Plane3d</code>, reusing grid <a class=anchor-link href=#improve-the-gizmo-for-plane3d-reusing-grid>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Gizmos</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14650>#14650</a></div></div><p>The optional builder methods on<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">
</span><span class="z-source z-rust">gizmos<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">primitive_3d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>Plane3d <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span></code></pre><p>changed from<ul><li><code>segment_length</code><li><code>segment_count</code><li><code>axis_count</code></ul><p>to<ul><li><code>cell_count</code><li><code>spacing</code></ul><hr><h3 id=making-bevy-render-an-optional-dependency-for-bevy-gizmos>Making <code>bevy_render</code> an optional dependency for <code>bevy_gizmos</code> <a class=anchor-link href=#making-bevy-render-an-optional-dependency-for-bevy-gizmos>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Gizmos</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14448>#14448</a></div></div><p>No user-visible changes needed from the users.<hr><h3 id=use-isometry-in-bevy-gizmos-wherever-we-can>Use <code>Isometry</code> in <code>bevy_gizmos</code> wherever we can <a class=anchor-link href=#use-isometry-in-bevy-gizmos-wherever-we-can>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Gizmos</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14676>#14676</a></div></div><p>The gizmos methods function signature changes as follows:<ul><li><p>2D</p> <ul><li>if it took <code>position</code> & <code>rotation_angle</code> before -> <code>Isometry2d::new(position, Rot2::radians(rotation_angle))</code><li>if it just took <code>position</code> before -> <code>Isometry2d::from_translation(position)</code></ul><li><p>3D</p> <ul><li>if it took <code>position</code> & <code>rotation</code> before -> <code>Isometry3d::new(position, rotation)</code><li>if it just took <code>position</code> before -> <code>Isometry3d::from_translation(position)</code></ul></ul><hr><h3 id=use-u32-for-all-resolution-subdivision-fields-in-bevy-gizmos>Use u32 for all resolution/subdivision fields in bevy_gizmos <a class=anchor-link href=#use-u32-for-all-resolution-subdivision-fields-in-bevy-gizmos>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Gizmos</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13927>#13927</a></div></div><ul><li>All gizmos now take <code>u32</code> instead of <code>usize</code> for their resolution/subdivision/segment counts</ul><hr><h3 id=switch-rotation-translation-in-grid-gizmos>Switch rotation & translation in grid gizmos <a class=anchor-link href=#switch-rotation-translation-in-grid-gizmos>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Gizmos</span>, <span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14656>#14656</a></div></div><ul><li>Users might have to double check their already existing calls to all the <code>grid</code> methods. It should be more intuitive now though.</ul><hr><h3 id=make-trackedrenderpass-set-vertex-buffer-aware-of-slice-size>Make TrackedRenderPass::set_vertex_buffer aware of slice size <a class=anchor-link href=#make-trackedrenderpass-set-vertex-buffer-aware-of-slice-size>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Gizmos</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14916>#14916</a></div></div><ul><li><code>TrackedRenderPass::set_vertex_buffer</code> function has been modified to update vertex buffers when the same buffer with the same offset is provided, but its size has changed. Some existing code may rely on the previous behavior, which did not update the vertex buffer in this scenario.</ul><h2 id=hierarchy>Hierarchy <a class=anchor-link href=#hierarchy>#</a></h2><h3 id=only-propagate-transforms-entities-with-globaltransforms>Only propagate transforms entities with GlobalTransforms. <a class=anchor-link href=#only-propagate-transforms-entities-with-globaltransforms>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Hierarchy</span>, <span class=heading-meta__item>Transform</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14384>#14384</a></div></div><ul><li>To avoid surprising performance pitfalls, <code>Transform</code> / <code>GlobalTransform</code> propagation is no longer performed down through hierarchies where intermediate parent are missing a <code>GlobalTransform</code>. To restore the previous behavior, add <code>GlobalTransform::default</code> to intermediate entities.</ul><h2 id=input>Input <a class=anchor-link href=#input>#</a></h2><h3 id=gamepad-improvements>Gamepad improvements <a class=anchor-link href=#gamepad-improvements>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Input</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16222>#16222</a></div></div><ul><li><code>Gamepad</code> fields are now public.<li>Instead of using <code>Gamepad</code> delegates like <code>Gamepad::just_pressed</code>, call these methods directly on the fields.</ul><hr><h3 id=implement-gamepads-as-entities>Implement gamepads as entities <a class=anchor-link href=#implement-gamepads-as-entities>#</a></h3><div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Input</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/12770>#12770</a></div></div><p>Gamepad input is no longer accessed using resources, instead they are entities and are accessible using the Gamepad component as long as the gamepad is connected.<p>Gamepads resource has been deleted, instead of using an internal id to identify gamepads you can use its Entity. Disconnected gamepads will <strong>NOT</strong> be despawned. Gamepad components that don’t need to preserve their state will be removed i.e. Gamepad component is removed, but GamepadSettings is kept. Reconnected gamepads will try to preserve their Entity id and necessary components will be re-inserted.<p>GamepadSettings is no longer a resource, instead it is a component attached to the Gamepad entity.<p>Axis<gamepadbutton>, Axis<gamepadaxis> and ButtonInput<gamepadbutton> methods are accessible via Gamepad component. <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff">fn gamepad_system(
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>   gamepads: Res&LTGamepads>,
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>   button_inputs: Res&LTButtonInput&LTGamepadButton>>,
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>   button_axes: Res&LTAxis&LTGamepadButton>>,
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>   axes: Res&LTAxis&LTGamepadAxis>>,
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>   gamepads: Query<&Gamepad>
</span></span><span class="z-source z-diff">) {
</span><span class="z-source z-diff">    for gamepad in gamepads.iter() {
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>      if button_inputs.just_pressed(GamepadButton::new(gamepad, GamepadButtonType::South)) {
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>      if gamepad.just_pressed(GamepadButton::South) {
</span></span><span class="z-source z-diff">            println!("just pressed South");
</span><span class="z-source z-diff">        } 
</span><span class="z-source z-diff">         
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>      let right_trigger = button_axes
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>           .get(GamepadButton::new(
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>               gamepad,
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>               GamepadButtonType::RightTrigger2,
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>           ))
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>           .unwrap();
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>      let right_trigger = gamepad.get(GamepadButton::RightTrigger2).unwrap();
</span></span><span class="z-source z-diff">        if right_trigger.abs() > 0.01 {
</span><span class="z-source z-diff">            info!("RightTrigger2 value is {}", right_trigger);      
</span><span class="z-source z-diff">        }
</span><span class="z-source z-diff">
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>        let left_stick_x = axes
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>           .get(GamepadAxis::new(gamepad, GamepadAxisType::LeftStickX))
</span></span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>           .unwrap();
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>       let left_stick_x = gamepad.get(GamepadAxis::LeftStickX).unwrap();
</span></span><span class="z-source z-diff">        if left_stick_x.abs() > 0.01 {
</span><span class="z-source z-diff">            info!("LeftStickX value is {}", left_stick_x);        
</span><span class="z-source z-diff">        }
</span><span class="z-source z-diff">    }
</span><span class="z-source z-diff">}
</span></code></pre> <hr> <h3 id=remove-receivedcharacter>Remove <code>ReceivedCharacter</code> <a class=anchor-link href=#remove-receivedcharacter>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Input</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15126>#15126</a></div></div> <p><code>ReceivedCharacter</code> was deprecated in 0.14 due to <code>winit</code> reworking their keyboard system. It has now been fully removed. Switch to using <code>KeyboardInput</code> instead.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">listen_characters</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ReceivedCharacter<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> event <span class="z-keyword z-operator z-rust">in</span> events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>{}<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> event<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-storage z-type z-rust">char</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.15
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">listen_characters</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>KeyboardInput<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> event <span class="z-keyword z-operator z-rust">in</span> events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Only check for characters when the key is pressed.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> <span class="z-keyword z-operator z-logical z-rust">!</span>event<span class="z-punctuation z-accessor z-dot z-rust">.</span>state<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">is_pressed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-control z-rust">continue</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Note that some keys such as `Space` and `Tab` won't be detected as a character.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Instead, check for them as separate enum variants.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">match</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>event<span class="z-punctuation z-accessor z-dot z-rust">.</span>logical_key <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">Key<span class="z-punctuation z-accessor z-rust">::</span></span>Character<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>character</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>{} pressed.<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> character</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">Key<span class="z-punctuation z-accessor z-rust">::</span></span>Space <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Space pressed.<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <hr> <h3 id=use-name-component-for-gamepad>Use <code>Name</code> component for gamepad <a class=anchor-link href=#use-name-component-for-gamepad>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Input</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16233>#16233</a></div></div> <ul><li><code>GamepadInfo</code> no longer exists: <ul><li>Name now accessible via <code>Name</code> component.<li>Other information available on <code>Gamepad</code> component directly.<li><code>GamepadConnection::Connected</code> now stores all info fields directly.</ul></ul> <hr> <h3 id=picking-event-ordering>Picking event ordering <a class=anchor-link href=#picking-event-ordering>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Input</span>, <span class=heading-meta__item>Picking</span>, <span class=heading-meta__item>Windowing</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14862>#14862</a></div></div> <p>For users switching from <code>bevy_mod_picking</code> to <code>bevy_picking</code>:</p> <ul><li>Instead of adding an <code>On&LTT></code> component, use <code>.observe(|trigger: Trigger&LTT>|)</code>. You may now apply multiple handlers to the same entity using this command.<li>Note that you need to add the non-default <code>MeshPickingPlugin</code> if you're using picking on meshes.<li>Pointer interaction events now have semi-deterministic ordering which (more or less) aligns with the order of the raw input stream. Consult the docs on <code>bevy_picking::event::pointer_events</code> for current information. You may need to adjust your event handling logic accordingly.<li><code>PointerCancel</code> has been replaced with <code>Pointer&LTCanceled></code>, which now has the semantics of an OS touch pointer cancel event.<li><code>InputMove</code> and <code>InputPress</code> have been merged into <code>PointerInput</code>. The use remains exactly the same.<li>Picking interaction events are now only accessible through observers, and no <code>EventReader</code>. This functionality may be re-implemented later.</ul> <p>For users of <code>bevy_winit</code>:</p> <ul><li>The event <code>bevy_winit::WinitEvent</code> has moved to <code>bevy_window::WindowEvent</code>. If this was the only thing you depended on <code>bevy_winit</code> for, you should switch your dependency to <code>bevy_window</code>.<li><code>bevy_window</code> now depends on <code>bevy_input</code>. The dependencies of <code>bevy_input</code> are a subset of the existing dependencies for <code>bevy_window</code> so this should be non-breaking.</ul> <h2 id=math>Math <a class=anchor-link href=#math>#</a></h2> <h3 id=added-new-method-to-cone-3d-primitive>Added <code>new</code> method to Cone 3D primitive <a class=anchor-link href=#added-new-method-to-cone-3d-primitive>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14325>#14325</a></div></div> <ul><li>Addition of <code>new</code> method to the 3D primitive Cone struct.</ul> <hr> <h3 id=basic-integration-of-cubic-spline-curves-with-the-curve-api>Basic integration of cubic spline curves with the Curve API <a class=anchor-link href=#basic-integration-of-cubic-spline-curves-with-the-curve-api>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15469>#15469</a></div></div> <p>The <code>RationalCurve::domain</code> method has been renamed to <code>RationalCurve::length</code>. Calling <code>.domain()</code> on a <code>RationalCurve</code> now returns its entire domain as an <code>Interval</code>.</p> <hr> <h3 id=disallow-empty-cubic-and-rational-curves>Disallow empty cubic and rational curves <a class=anchor-link href=#disallow-empty-cubic-and-rational-curves>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14382>#14382</a></div></div> <p>The <code>to_curve</code> method on Bevy’s cubic splines is now fallible (returning a <code>Result</code>), meaning that any existing calls will need to be updated by handling the possibility of an error variant.</p> <p>Similarly, any custom implementation of <code>CubicGenerator</code> or <code>RationalGenerator</code> will need to be amended to include an <code>Error</code> type and be made fallible itself.</p> <p>Finally, the fields of <code>CubicCurve</code> and <code>RationalCurve</code> are now private, so any direct constructions of these structs from segments will need to be replaced with the new <code>CubicCurve::from_segments</code> and <code>RationalCurve::from_segments</code> methods.</p> <hr> <h3 id=refactor-bounded2d-bounded3d-to-use-isometries>Refactor Bounded2d/Bounded3d to use isometries <a class=anchor-link href=#refactor-bounded2d-bounded3d-to-use-isometries>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14485>#14485</a></div></div> <p>The <code>Bounded2d</code> and <code>Bounded3d</code> traits now take <code>Isometry2d</code> and <code>Isometry3d</code> parameters (respectively) instead of separate translation and rotation arguments. Existing calls to <code>aabb_2d</code>, <code>bounding_circle</code>, <code>aabb_3d</code>, and <code>bounding_sphere</code> will have to be changed to use isometries instead. A straightforward conversion is to refactor just by calling <code>Isometry2d/3d::new</code>, as follows:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Old:
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> aabb <span class="z-keyword z-operator z-assignment z-rust">=</span> my_shape<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">aabb_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_translation<span class="z-punctuation z-separator z-rust">,</span> my_rotation</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> New:
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> aabb <span class="z-keyword z-operator z-assignment z-rust">=</span> my_shape<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">aabb_2d</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Isometry2d<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_translation<span class="z-punctuation z-separator z-rust">,</span> my_rotation</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>However, if the old translation and rotation are 3d translation/rotations originating from a <code>Transform</code> or <code>GlobalTransform</code>, then <code>to_isometry</code> may be used instead. For example:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Old:
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> bounding_sphere <span class="z-keyword z-operator z-assignment z-rust">=</span> my_shape<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">bounding_sphere</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>shape_transform<span class="z-punctuation z-accessor z-dot z-rust">.</span>translation<span class="z-punctuation z-separator z-rust">,</span> shape_transform<span class="z-punctuation z-accessor z-dot z-rust">.</span>rotation</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> New:
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> bounding_sphere <span class="z-keyword z-operator z-assignment z-rust">=</span> my_shape<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">bounding_sphere</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>shape_transform<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_isometry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>This discussion also applies to the <code>from_point_cloud</code> construction method of <code>Aabb2d</code>/<code>BoundingCircle</code>/<code>Aabb3d</code>/<code>BoundingSphere</code>, which has similarly been altered to use isometries.</p> <hr> <h3 id=rename-rot2-angle-between-to-rot2-angle-to>Rename <code>Rot2::angle_between</code> to <code>Rot2::angle_to</code> <a class=anchor-link href=#rename-rot2-angle-between-to-rot2-angle-to>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16327>#16327</a></div></div> <p><code>Rot2::angle_between</code> has been deprecated, use <code>Rot2::angle_to</code> instead, the semantics of <code>Rot2::angle_between</code> will change in the future.</p> <hr> <h3 id=use-dir2-dir3-instead-of-vec2-vec3-for-ray2d-new-ray3d-new>Use <code>Dir2</code>/<code>Dir3</code> instead of <code>Vec2</code>/<code>Vec3</code> for <code>Ray2d::new</code>/<code>Ray3d::new</code> <a class=anchor-link href=#use-dir2-dir3-instead-of-vec2-vec3-for-ray2d-new-ray3d-new>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15735>#15735</a></div></div> <p><code>Ray2d::new</code> and <code>Ray3d::new</code> now take a <code>Dir2</code> and <code>Dir3</code> instead of <code>Vec2</code> and <code>Vec3</code> respectively for the ray direction.</p> <hr> <h3 id=use-a-well-defined-type-for-sides-in-regularpolygon>Use a well defined type for sides in RegularPolygon <a class=anchor-link href=#use-a-well-defined-type-for-sides-in-regularpolygon>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Math</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13837>#13837</a></div></div> <ul><li><code>RegularPolygon</code> now uses <code>u32</code> instead of <code>usize</code> for the number of sides</ul> <hr> <h3 id=bevy-reflect-update-eulerrot-to-match-glam-0-29>bevy_reflect: Update <code>EulerRot</code> to match <code>glam</code> 0.29 <a class=anchor-link href=#bevy-reflect-update-eulerrot-to-match-glam-0-29>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Math</span>, <span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15402>#15402</a></div></div> <p>The reflection implementation for <code>EulerRot</code> has been updated to align with <code>glam</code> 0.29. Please update any reflection-based usages accordingly.</p> <hr> <h3 id=use-u32-for-resolution-subdivision-in-primitive-meshing>Use u32 for resolution/subdivision in primitive meshing <a class=anchor-link href=#use-u32-for-resolution-subdivision-in-primitive-meshing>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Math</span>, <span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13930>#13930</a></div></div> <ul><li>All primitive mesh builders now take <code>u32</code> instead of <code>usize</code> for their resolution/subdivision/segment counts</ul> <h2 id=picking>Picking <a class=anchor-link href=#picking>#</a></h2> <h3 id=add-flags-to-spriteplugin-and-uiplugin-to-allow-disabling-their-picking-backend-without-needing-to-disable-features>Add flags to <code>SpritePlugin</code> and <code>UiPlugin</code> to allow disabling their picking backend (without needing to disable features). <a class=anchor-link href=#add-flags-to-spriteplugin-and-uiplugin-to-allow-disabling-their-picking-backend-without-needing-to-disable-features>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Picking</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16473>#16473</a></div></div> <ul><li><code>UiPlugin</code> now contains an extra <code>add_picking</code> field if <code>bevy_ui_picking_backend</code> is enabled.<li><code>SpritePlugin</code> is no longer a unit struct, and has one field if <code>bevy_sprite_picking_backend</code> is enabled (otherwise no fields).</ul> <hr> <h3 id=rename-drop-to-bevy-picking-events-dragdrop-to-unclash-std-ops-drop>rename Drop to bevy::picking::events::DragDrop to unclash std::ops:Drop <a class=anchor-link href=#rename-drop-to-bevy-picking-events-dragdrop-to-unclash-std-ops-drop>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Picking</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14926>#14926</a></div></div> <ul><li>Rename <code>Drop</code> to <code>DragDrop</code> <ul><li><code>bevy::picking::events::Drop</code> is now <code>bevy::picking::events::DragDrop</code></ul></ul> <h2 id=reflection>Reflection <a class=anchor-link href=#reflection>#</a></h2> <h3 id=dedicated-reflect-implementation-for-set-like-things>Dedicated <code>Reflect</code> implementation for <code>Set</code>-like things <a class=anchor-link href=#dedicated-reflect-implementation-for-set-like-things>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13014>#13014</a></div></div> <ul><li>The new <code>Set</code> variants on the enums listed in the change section should probably be considered by people working with this level of the lib</ul> <p><strong>Help wanted!</strong></p> <p>I’m not sure if this change is able to break code. From my understanding it shouldn’t since we just add functionality but I’m not sure yet if theres anything missing from my impl that would be normally provided by <code>impl_reflect_value!</code></p> <hr> <h3 id=implement-fromiterator-intoiterator-for-dynamic-types>Implement FromIterator/IntoIterator for dynamic types <a class=anchor-link href=#implement-fromiterator-intoiterator-for-dynamic-types>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14250>#14250</a></div></div> <ul><li>Change <code>DynamicArray::from_vec</code> to <code>DynamicArray::from_iter</code></ul> <hr> <h3 id=make-drain-take-a-mutable-borrow-instead-of-box-self-for-reflected-map-list-and-set>Make <code>drain</code> take a mutable borrow instead of <code>Box&LTSelf></code> for reflected <code>Map</code>, <code>List</code>, and <code>Set</code>. <a class=anchor-link href=#make-drain-take-a-mutable-borrow-instead-of-box-self-for-reflected-map-list-and-set>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15406>#15406</a></div></div> <ul><li><code>reflect::Map</code>, <code>reflect::List</code>, and <code>reflect::Set</code> all now take a <code>&mut self</code> instead of a <code>Box&LTSelf></code>. Callers of these traits should add <code>&mut</code> before their boxes, and implementers of these traits should update to match.</ul> <hr> <h3 id=remove-return-unit-variant>Remove <code>Return::Unit</code> variant <a class=anchor-link href=#remove-return-unit-variant>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15484>#15484</a></div></div> <ul><li>Removed the <code>Return::Unit</code> variant; use <code>Return::unit()</code> instead.</ul> <hr> <h3 id=serialize-and-deserialize-tuple-struct-with-one-field-as-newtype-struct>Serialize and deserialize tuple struct with one field as newtype struct <a class=anchor-link href=#serialize-and-deserialize-tuple-struct-with-one-field-as-newtype-struct>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15628>#15628</a></div></div> <ul><li>Reflection now will serialize and deserialize tuple struct with single field as newtype struct. Consider this code.</ul> <pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect<span class="z-punctuation z-separator z-rust">,</span> Serialize</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Test</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-rust">usize</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> reflect <span class="z-keyword z-operator z-assignment z-rust">=</span> Test<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">3</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> serializer <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">TypedReflectSerializer<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reflect<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">as_partial_reflect</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>registry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">return</span> <span class="z-meta z-path z-rust">serde_json<span class="z-punctuation z-accessor z-rust">::</span></span>to_string<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>serializer</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <p>Old behavior will return <code>["3"]</code>. New behavior will return <code>"3"</code>. If you were relying on old behavior you need to update your logic. Especially with <code>serde_json</code>. <code>ron</code> doesn’t affect from this.</p> <hr> <h3 id=bevy-reflect-add-dynamictyped-trait>bevy_reflect: Add <code>DynamicTyped</code> trait <a class=anchor-link href=#bevy-reflect-add-dynamictyped-trait>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15108>#15108</a></div></div> <p><code>Reflect</code> now has a supertrait of <code>DynamicTyped</code>. If you were manually implementing <code>Reflect</code> and did not implement <code>Typed</code>, you will now need to do so.</p> <hr> <h3 id=bevy-reflect-add-reflectdeserializerprocessor>bevy_reflect: Add <code>ReflectDeserializerProcessor</code> <a class=anchor-link href=#bevy-reflect-add-reflectdeserializerprocessor>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15482>#15482</a></div></div> <p>(Since I added <code>P = ()</code>, I don’t think this is actually a breaking change anymore, but I’ll leave this in)</p> <p><code>bevy_reflect</code>’s <code>ReflectDeserializer</code> and <code>TypedReflectDeserializer</code> now take a <code>ReflectDeserializerProcessor</code> as the type parameter <code>P</code>, which allows you to customize deserialization for specific types when they are found. However, the rest of the API surface (<code>new</code>) remains the same.</p> <details><summary>Original implementation</summary> <p>Add <code>ReflectDeserializerProcessor</code>:</p> <pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">ReflectDeserializerProcessor</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-variable z-other z-member z-rust">can_deserialize</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>dyn <span class="z-support z-type z-rust">FnMut</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span>TypeRegistration<span class="z-punctuation z-section z-group z-end z-rust">)</span> <span class="z-punctuation z-separator z-generic z-rust">-></span> <span class="z-storage z-type z-rust">bool</span> <span class="z-keyword z-operator z-rust">+</span> <span class="z-storage z-modifier z-lifetime z-rust">'p</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-variable z-other z-member z-rust">deserialize</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-generic z-rust">        dyn <span class="z-support z-type z-rust">FnMut</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-generic z-rust">                <span class="z-keyword z-operator z-rust">&</span>TypeRegistration,
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-generic z-rust">                <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> dyn <span class="z-meta z-path z-rust">erased_serde<span class="z-punctuation z-accessor z-rust">::</span></span>Deserializer,
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-generic z-rust">            <span class="z-punctuation z-section z-group z-end z-rust">)</span> <span class="z-punctuation z-separator z-generic z-rust">-></span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>dyn PartialReflect<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-meta z-path z-rust">erased_serde<span class="z-punctuation z-accessor z-rust">::</span></span>Error<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-generic z-rust">            <span class="z-keyword z-operator z-rust">+</span> <span class="z-storage z-modifier z-lifetime z-rust">'p</span>,
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-generic z-rust"><span class="z-invalid z-illegal z-rust">}</span></span>
</span></span></span></code></pre> <p>Along with <code>ReflectDeserializer::new_with_processor</code> and <code>TypedReflectDeserializer::new_with_processor</code>. This does not touch the public API of the existing <code>new</code> fns.</p> <p>This is stored as an <code>Option<&mut ReflectDeserializerProcessor></code> on the deserializer and any of the private <code>-Visitor</code> structs, and when we attempt to deserialize a value, we first pass it through this processor.</p> <p>Also added a very comprehensive doc test to <code>ReflectDeserializerProcessor</code>, which is actually a scaled down version of the code for the <code>bevy_animation_graph</code> loader. This should give users a good motivating example for when and why to use this feature.</p> <p><strong>Why <code>Box&LTdyn ..></code>?</strong></p> <p>When I originally implemented this, I added a type parameter to <code>ReflectDeserializer</code> to determine the processor used, with <code>()</code> being “no processor”. However when using this, I kept running into rustc errors where it failed to validate certain type bounds and led to overflows. I then switched to a dynamic dispatch approach.</p> <p>The dynamic dispatch should not be that expensive, nor should it be a performance regression, since it’s only used if there is <code>Some</code> processor. (Note: I have not benchmarked this, I am just speculating.) Also, it means that we don’t infect the rest of the code with an extra type parameter, which is nicer to maintain.</p> <p><strong>Why the <code>'p</code> on <code>ReflectDeserializerProcessor<'p></code>?</strong></p> <p>Without a lifetime here, the <code>Box</code>es would automatically become <code>Box&LTdyn FnMut(..) + 'static></code>. This makes them practically useless, since any local data you would want to pass in must then be <code>'static</code>. In the motivating example, you couldn’t pass in that <code>&mut LoadContext</code> to the function.</p> <p>This means that the <code>'p</code> infects the rest of the Visitor types, but this is acceptable IMO. This PR also elides the lifetimes in the <code>impl<'de> Visitor<'de> for -Visitor</code> blocks where possible.</p> <p><strong>Future possibilities</strong></p> <p>I think it’s technically possible to turn the processor into a trait, and make the deserializers generic over that trait. This would also open the door to an API like:</p> <pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust"><span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">Seed</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">seed_deserialize</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">r</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>TypeRegistration</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Option</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Seed<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">deserialize</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">r</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>TypeRegistration, <span class="z-variable z-parameter z-rust">d</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> dyn <span class="z-meta z-path z-rust">erased_serde<span class="z-punctuation z-accessor z-rust">::</span></span>Deserializer, <span class="z-variable z-parameter z-rust">s</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Seed</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> </span></span><span class="z-keyword z-operator z-range z-rust">...</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>A similar processor system should also be added to the serialization side, but that’s for another PR. Ideally, both PRs will be in the same release, since one isn’t very useful without the other.</p></details> <hr> <h3 id=bevy-reflect-add-type-type>bevy_reflect: Add <code>Type</code> type <a class=anchor-link href=#bevy-reflect-add-type-type>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14838>#14838</a></div></div> <p>Certain type info structs now only return their item types as <code>Type</code> instead of exposing direct methods on them.</p> <p>The following methods have been removed:</p> <ul><li><code>ArrayInfo::item_type_path_table</code><li><code>ArrayInfo::item_type_id</code><li><code>ArrayInfo::item_is</code><li><code>ListInfo::item_type_path_table</code><li><code>ListInfo::item_type_id</code><li><code>ListInfo::item_is</code><li><code>SetInfo::value_type_path_table</code><li><code>SetInfo::value_type_id</code><li><code>SetInfo::value_is</code><li><code>MapInfo::key_type_path_table</code><li><code>MapInfo::key_type_id</code><li><code>MapInfo::key_is</code><li><code>MapInfo::value_type_path_table</code><li><code>MapInfo::value_type_id</code><li><code>MapInfo::value_is</code></ul> <p>Instead, access the <code>Type</code> directly using one of the new methods:</p> <ul><li><code>ArrayInfo::item_ty</code><li><code>ListInfo::item_ty</code><li><code>SetInfo::value_ty</code><li><code>MapInfo::key_ty</code><li><code>MapInfo::value_ty</code></ul> <p>For example:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> BEFORE
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> type_id <span class="z-keyword z-operator z-assignment z-rust">=</span> array_info<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">item_type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> AFTER
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> type_id <span class="z-keyword z-operator z-assignment z-rust">=</span> array_info<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">item_ty</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <hr> <h3 id=bevy-reflect-nested-typeinfo-getters>bevy_reflect: Nested <code>TypeInfo</code> getters <a class=anchor-link href=#bevy-reflect-nested-typeinfo-getters>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13321>#13321</a></div></div> <p>All active fields for reflected types (including lists, maps, tuples, etc.), must implement <code>Typed</code>. For the majority of users this won’t have any visible impact.</p> <p>However, users implementing <code>Reflect</code> manually may need to update their types to implement <code>Typed</code> if they weren’t already.</p> <p>Additionally, custom dynamic types will need to implement the new hidden <code>MaybeTyped</code> trait.</p> <hr> <h3 id=bevy-reflect-refactor-serde-module>bevy_reflect: Refactor <code>serde</code> module <a class=anchor-link href=#bevy-reflect-refactor-serde-module>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15107>#15107</a></div></div> <p>The fields on <code>ReflectSerializer</code> and <code>TypedReflectSerializer</code> are now private. To instantiate, the corresponding constructor must be used:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> BEFORE
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> serializer <span class="z-keyword z-operator z-assignment z-rust">=</span> ReflectSerializer <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    value<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>my_value<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    registry<span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>type_registry<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> AFTER
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> serializer <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">ReflectSerializer<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>my_value<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>type_registry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>Additionally, the following types are no longer public:</p> <ul><li><code>ArraySerializer</code><li><code>EnumSerializer</code><li><code>ListSerializer</code><li><code>MapSerializer</code><li><code>ReflectValueSerializer</code> (fully removed)<li><code>StructSerializer</code><li><code>TupleSerializer</code><li><code>TupleStructSerializer</code></ul> <p>As well as the following traits:</p> <ul><li><code>DeserializeValue</code> (fully removed)</ul> <hr> <h3 id=bevy-reflect-replace-value-terminology-with-opaque>bevy_reflect: Replace "value" terminology with "opaque" <a class=anchor-link href=#bevy-reflect-replace-value-terminology-with-opaque>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15240>#15240</a></div></div> <p>The reflection concept of “value type” has been replaced with a clearer “opaque type”. The following renames have been made to account for this:</p> <ul><li><code>ReflectKind::Value</code> → <code>ReflectKind::Opaque</code><li><code>ReflectRef::Value</code> → <code>ReflectRef::Opaque</code><li><code>ReflectMut::Value</code> → <code>ReflectMut::Opaque</code><li><code>ReflectOwned::Value</code> → <code>ReflectOwned::Opaque</code><li><code>TypeInfo::Value</code> → <code>TypeInfo::Opaque</code><li><code>ValueInfo</code> → <code>OpaqueInfo</code><li><code>impl_reflect_value!</code> → <code>impl_reflect_opaque!</code><li><code>impl_from_reflect_value!</code> → <code>impl_from_reflect_opaque!</code></ul> <p>Additionally, declaring your own opaque types no longer uses <code>#[reflect_value]</code>. This attribute has been replaced by <code>#[reflect(opaque)]</code>:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> BEFORE
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect_value</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyOpaqueType</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-rust">u32</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> AFTER
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">opaque</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyOpaqueType</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-rust">u32</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>Note that the order in which <code>#[reflect(opaque)]</code> appears does not matter.</p> <hr> <h3 id=reflect-implement-the-unique-reflect-rfc>reflect: implement the unique reflect rfc <a class=anchor-link href=#reflect-implement-the-unique-reflect-rfc>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/7207>#7207</a></div></div> <ul><li>Most instances of <code>dyn Reflect</code> should be changed to <code>dyn PartialReflect</code> which is less restrictive, however trait bounds should generally stay as <code>T: Reflect</code>.<li>The new <code>PartialReflect::{as_partial_reflect, as_partial_reflect_mut, into_partial_reflect, try_as_reflect, try_as_reflect_mut, try_into_reflect}</code> methods as well as <code>Reflect::{as_reflect, as_reflect_mut, into_reflect}</code> will need to be implemented for manual implementors of <code>Reflect</code>.</ul> <hr> <h3 id=use-fromreflect-when-extracting-entities-in-dynamic-scenes>Use <code>FromReflect</code> when extracting entities in dynamic scenes <a class=anchor-link href=#use-fromreflect-when-extracting-entities-in-dynamic-scenes>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>, <span class=heading-meta__item>Scenes</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15174>#15174</a></div></div> <p>The <code>DynamicScene</code> format is changed to use custom serialize impls so old scene files will need updating:</p> <p>Old:</p> <pre class="language-ron z-code" data-lang=ron><code class=language-ron data-lang=ron><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron">  <span class="z-entity z-name z-tag z-ron">resources</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-dictionary z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">{</span><span class="z-punctuation z-section z-dictionary z-end z-ron">}</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron">  <span class="z-entity z-name z-tag z-ron">entities</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-dictionary z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">{</span>
</span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron">    <span class="z-constant z-numeric z-ron">4294967299</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">      <span class="z-entity z-name z-tag z-ron">components</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-dictionary z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">{</span>
</span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron">        <span class="z-string z-quoted z-double z-ron"><span class="z-punctuation z-definition z-string z-begin z-ron">"</span>bevy_render::camera::projection::OrthographicProjection<span class="z-punctuation z-definition z-string z-end z-ron">"</span></span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">near</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">0.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">far</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">1000.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">viewport_origin</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">            <span class="z-entity z-name z-tag z-ron">x</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">0.5</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">            <span class="z-entity z-name z-tag z-ron">y</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">0.5</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">scaling_mode</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-entity z-name z-class z-ron">WindowSize</span><span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span><span class="z-constant z-numeric z-ron">1.0</span><span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">scale</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">1.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">area</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">            <span class="z-entity z-name z-tag z-ron">min</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">              <span class="z-entity z-name z-tag z-ron">x</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">-1.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">              <span class="z-entity z-name z-tag z-ron">y</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">-1.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">            <span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">            <span class="z-entity z-name z-tag z-ron">max</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">              <span class="z-entity z-name z-tag z-ron">x</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">1.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">              <span class="z-entity z-name z-tag z-ron">y</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">1.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">            <span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">        <span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron">      <span class="z-punctuation z-section z-dictionary z-end z-ron">}</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">    <span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron">  <span class="z-punctuation z-section z-dictionary z-end z-ron">}</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span>
</span></code></pre> <p>New:</p> <pre class="language-ron z-code" data-lang=ron><code class=language-ron data-lang=ron><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron">  <span class="z-entity z-name z-tag z-ron">resources</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-dictionary z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">{</span><span class="z-punctuation z-section z-dictionary z-end z-ron">}</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron">  <span class="z-entity z-name z-tag z-ron">entities</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-dictionary z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">{</span>
</span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron">    <span class="z-constant z-numeric z-ron">4294967299</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">      <span class="z-entity z-name z-tag z-ron">components</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-dictionary z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">{</span>
</span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron">        <span class="z-string z-quoted z-double z-ron"><span class="z-punctuation z-definition z-string z-begin z-ron">"</span>bevy_render::camera::projection::OrthographicProjection<span class="z-punctuation z-definition z-string z-end z-ron">"</span></span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">near</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">0.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">far</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">1000.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">viewport_origin</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span><span class="z-constant z-numeric z-ron">0.5</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span> <span class="z-constant z-numeric z-ron">0.5</span><span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">scaling_mode</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-entity z-name z-class z-ron">WindowSize</span><span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span><span class="z-constant z-numeric z-ron">1.0</span><span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">scale</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-constant z-numeric z-ron">1.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-entity z-name z-tag z-ron">area</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span>
</span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">            <span class="z-entity z-name z-tag z-ron">min</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span><span class="z-constant z-numeric z-ron">-1.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span> <span class="z-constant z-numeric z-ron">-1.0</span><span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">            <span class="z-entity z-name z-tag z-ron">max</span><span class="z-punctuation z-separator z-dictionary z-key-value z-ron">:</span> <span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-begin z-ron">(</span><span class="z-constant z-numeric z-ron">1.0</span><span class="z-punctuation z-separator z-dictionary z-ron">,</span> <span class="z-constant z-numeric z-ron">1.0</span><span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-entity z-ron">          <span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">        <span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron">      <span class="z-punctuation z-section z-dictionary z-end z-ron">}</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron"><span class="z-meta z-structure z-entity z-ron">    <span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-meta z-structure z-dictionary z-ron">  <span class="z-punctuation z-section z-dictionary z-end z-ron">}</span></span><span class="z-punctuation z-separator z-dictionary z-ron">,</span>
</span></span><span class="z-source z-ron"><span class="z-meta z-structure z-entity z-ron"><span class="z-punctuation z-section z-dictionary z-end z-ron">)</span></span>
</span></code></pre> <hr> <h3 id=move-shortname-to-bevy-reflect>move ShortName to bevy_reflect <a class=anchor-link href=#move-shortname-to-bevy-reflect>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Reflection</span>, <span class=heading-meta__item>Utils</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15340>#15340</a></div></div> <ul><li>References to <code>bevy_utils::ShortName</code> should instead now be <code>bevy_reflect::ShortName</code>.</ul> <h2 id=rendering>Rendering <a class=anchor-link href=#rendering>#</a></h2> <h3 id=retained-rendering>Retained Rendering <a class=anchor-link href=#retained-rendering>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15320>#15320</a></div></div>      <p>With the advent of the retained render world, entities are no longer despawned at the end of every frame in the render world. Extracted entities with the <code>TemporaryRenderEntity</code> component will be despawned at the end of every frame like before.</p> <p>In order to make this possible, the <code>Entity</code> identifiers in the main and the extracted version in render world are no longer guaranteed to line up. As a result:</p> <ul><li>all tools to spawn entities with a precise <code>Entity</code> id are in the process of being deprecated and will be removed<li>collections that contain references to <code>Entity</code> that are extracted into the render world have been changed to contain <code>MainEntity</code> in order to prevent errors where a render world entity id is used to look up an item by accident. Custom rendering code may need to be changed to query for <code>&MainEntity</code> in order to look up the correct item from such a collection <ul><li>users who implement their own extraction logic for collections of main world entity should strongly consider extracting into a different collection that uses <code>MainEntity</code> as a key.</ul><li>render phases now require specifying both the <code>Entity</code> and <code>MainEntity</code> for a given <code>PhaseItem</code>. Custom render phases should ensure <code>MainEntity</code> is available when queuing a phase item</ul> <p>Renderers can now check <code>RenderVisibleEntities</code> to avoid rendering items that are not visible from a view. <code>RenderVisibleMeshEntities</code>, <code>RenderCubemapVisibleEntities</code>, and <code>RenderCascadeVisibleEntities</code> are also available for more fine-grained control.</p> <p>To guide you further, let's take a look at a few common patterns. For every example, we specify in which world the code is run.</p> <h4 id=spawning-entities-in-the-render-world>Spawning entities in the render world <a class=anchor-link href=#spawning-entities-in-the-render-world>#</a></h4> <p>Previously, if you spawned an entity with <code>world.spawn(...)</code>, <code>commands.spawn(...)</code> or some other method in the rendering world, it would be despawned at the end of each frame. In 0.15, this is no longer the case and so your old code could leak entities. This can be mitigated by either re-architecting your code to no longer continuously spawn entities (like you're used to in the main world), or by adding the <code>bevy_render::world_sync::TemporaryRenderEntity</code> component to the entity you're spawning. Entities tagged with <code>TemporaryRenderEntity</code> will be removed at the end of each frame (like before).</p> <h4 id=extract-components-with-extractcomponentplugin>Extract components with <code>ExtractComponentPlugin</code> <a class=anchor-link href=#extract-components-with-extractcomponentplugin>#</a></h4> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> main world
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">ExtractComponentPlugin<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ComponentToExtract<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p><code>ExtractComponentPlugin</code> has been changed to automatically sync entities with <code>ComponentToExtract</code>. This is done via the new <code>WorldSyncPlugin</code>. Any code using <code>ExtractComponentPlugin</code> will not require any changes.</p> <h4 id=manual-extraction-using-extract-query-entity>Manual extraction using <code>Extract&LTQuery<(Entity, ...)>></code> <a class=anchor-link href=#manual-extraction-using-extract-query-entity>#</a></h4> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> in render world, inspired by bevy_pbr/src/cluster/mod.rs
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">extract_clusters</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">views</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Extract<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, <span class="z-keyword z-operator z-rust">&</span>Clusters, <span class="z-keyword z-operator z-rust">&</span>Camera<span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity<span class="z-punctuation z-separator z-rust">,</span> clusters<span class="z-punctuation z-separator z-rust">,</span> camera</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>views <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> some code
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get_or_spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <p>An extract query in the render world queries for entities and components in the main world. Here <code>entity</code> is a main world entity and <code>get_or_spawn(main_world_entity).insert(...)</code> potentially inserts components on the wrong entity. Remember, there is no longer a one-to-one correspondence between the main and render world entities. Moreover <code>get_or_spawn</code> has been deprecated.</p> <p>In 0.15, you should use <code>RenderEntity</code> in place of <code>Entity</code> to get the correct entity in the render world. For entities to have a <code>RenderEntity</code> they need to be synced first. This can be done either via <code>WorldSyncPlugin</code> or adding the <code>SyncToRenderWorld</code> to the main world entity.</p> <p>This results in the following code:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> in render world, inspired by bevy_pbr/src/cluster/mod.rs
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">extract_clusters</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">views</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Extract<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>RenderEntity, <span class="z-keyword z-operator z-rust">&</span>Clusters, <span class="z-keyword z-operator z-rust">&</span>Camera<span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>render_entity<span class="z-punctuation z-separator z-rust">,</span> clusters<span class="z-punctuation z-separator z-rust">,</span> camera</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>views <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> some code
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After the sync step, all main world entities with a &RenderEntity have a corresponding (empty) render world entity. This should never panic.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>render_entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> in main world, when spawning
</span></span><span class="z-source z-rust">world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Clusters<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Camera<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> SyncToRenderWorld</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <h4 id=looking-up-main-world-entities-in-the-render-world>Looking up main world entities in the render world <a class=anchor-link href=#looking-up-main-world-entities-in-the-render-world>#</a></h4> <p>In order to get the main world entity from a render world entity. It works much the same. Every synced render world entity has a <code>MainEntity</code> component you can query for that returns the correct main world entity.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> in the render world
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">inspect_clusters</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">views</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MainEntity, <span class="z-keyword z-operator z-rust">&</span>Clusters, <span class="z-keyword z-operator z-rust">&</span>Camera<span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>main_entity<span class="z-punctuation z-separator z-rust">,</span> clusters<span class="z-punctuation z-separator z-rust">,</span> camera <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>views</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> do something
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <h4 id=general-advice-for-working-with-main-and-render-world-entities>General advice for working with main and render world entities <a class=anchor-link href=#general-advice-for-working-with-main-and-render-world-entities>#</a></h4> <p>When working with entities from both worlds it can be confusing. If you are every in a scenario where this isn't entirely clear (for example, when working on custom extraction code in the render world), we advise that you use <code>RenderEntity</code> and <code>MainEntity</code> as simple wrappers around <code>Entity</code>. Mixing these up can become a real headache and lead to some non-obvious errors.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> render world 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">pub</span> instances<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, RenderLayers, <span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> render world 0.15
</span></span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">pub</span> instances<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MainEntity, RenderLayers, <span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></code></pre> <p>There are also other ways to disambiguate between the two worlds.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> render world 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">pub</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-other z-rust">crate</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> render_lightmaps<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EntityHashMap<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>RenderLightmap<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> render world 0.15
</span></span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">pub</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-other z-rust">crate</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> render_lightmaps<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">MainEntityHashMap<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>RenderLightmap<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></code></pre> <hr> <h3 id=add-2d-opaque-phase-with-depth-buffer>Add 2d opaque phase with depth buffer <a class=anchor-link href=#add-2d-opaque-phase-with-depth-buffer>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13069>#13069</a></div></div> <ul><li><code>ColorMaterial</code> now contains <code>AlphaMode2d</code>. To keep previous behaviour, use <code>AlphaMode::BLEND</code>. If you know your sprite is opaque, use <code>AlphaMode::OPAQUE</code></ul> <hr> <h3 id=add-renderset-finalcleanup-for-world-clear-entities>Add <code>RenderSet::FinalCleanup</code> for <code>World::clear_entities</code> <a class=anchor-link href=#add-renderset-finalcleanup-for-world-clear-entities>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14764>#14764</a></div></div> <p><code>World::clear_entities</code> is now part of <code>RenderSet::PostCleanup</code> rather than <code>RenderSet::Cleanup</code>. Your cleanup systems should likely stay in <code>RenderSet::Cleanup</code>.</p> <hr> <h3 id=add-feature-requirement-info-to-image-loading-docs>Add feature requirement info to image loading docs <a class=anchor-link href=#add-feature-requirement-info-to-image-loading-docs>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13712>#13712</a></div></div> <p>Image format related entities are feature gated, if there are compilation errors about unknown names there are some of features in list (<code>exr</code>, <code>hdr</code>, <code>basis-universal</code>, <code>png</code>, <code>dds</code>, <code>tga</code>, <code>jpeg</code>, <code>bmp</code>, <code>ktx2</code>, <code>webp</code> and <code>pnm</code>) should be added.</p> <hr> <h3 id=add-support-for-environment-map-transformation>Add support for environment map transformation <a class=anchor-link href=#add-support-for-environment-map-transformation>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14290>#14290</a></div></div> <ul><li>Since we have added a new filed to the <code>EnvironmentMapLight</code> struct, users will need to include <code>..default()</code> or some rotation value in their initialization code.</ul> <hr> <h3 id=add-support-for-skybox-transformation>Add support for skybox transformation <a class=anchor-link href=#add-support-for-skybox-transformation>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14267>#14267</a></div></div> <ul><li>Since we have added a new filed to the Skybox struct, users will need to include <code>..Default::default()</code> or some rotation value in their initialization code.</ul> <hr> <h3 id=added-feature-switch-to-default-standard-material-s-new-anisotropy-texture-to-off>Added feature switch to default Standard Material's new anisotropy texture to off <a class=anchor-link href=#added-feature-switch-to-default-standard-material-s-new-anisotropy-texture-to-off>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14048>#14048</a></div></div> <ul><li>Add feature pbr_anisotropy_texture if you are using that texture in any standard materials.</ul> <hr> <h3 id=added-visibility-bitmask-as-an-alternative-ssao-method>Added visibility bitmask as an alternative SSAO method <a class=anchor-link href=#added-visibility-bitmask-as-an-alternative-ssao-method>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13454>#13454</a></div></div> <p>SSAO algorithm was changed from GTAO to VBAO (visibility bitmasks). A new field, <code>constant_object_thickness</code>, was added to <code>ScreenSpaceAmbientOcclusion</code>. <code>ScreenSpaceAmbientOcclusion</code> also lost its <code>Eq</code> and <code>Hash</code> implementations.</p> <hr> <h3 id=adding-alpha-threshold-to-orderindependenttransparencysettings-for-user-level-optimization>Adding alpha_threshold to OrderIndependentTransparencySettings for user-level optimization <a class=anchor-link href=#adding-alpha-threshold-to-orderindependenttransparencysettings-for-user-level-optimization>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16090>#16090</a></div></div> <p>If you previously explicitly initialized OrderIndependentTransparencySettings with your own <code>layer_count</code>, you will now have to add either a <code>..default()</code> statement or an explicit <code>alpha_threshold</code> value:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">setup</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Camera3d<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        OrderIndependentTransparencySettings <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            layer_count<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">16</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <hr> <h3 id=adds-shaderstoragebuffer-asset>Adds <code>ShaderStorageBuffer</code> asset <a class=anchor-link href=#adds-shaderstoragebuffer-asset>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14663>#14663</a></div></div> <p>The <code>AsBindGroup</code> <code>storage</code> attribute has been modified to reference the new <code>Handle&LTStorage></code> asset instead. Usages of Vec` should be converted into assets instead.</p> <hr> <h3 id=allow-mix-of-hdr-and-non-hdr-cameras-to-same-render-target>Allow mix of hdr and non-hdr cameras to same render target <a class=anchor-link href=#allow-mix-of-hdr-and-non-hdr-cameras-to-same-render-target>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13419>#13419</a></div></div> <p>Change <code>CameraOutputMode</code> to use <code>ClearColorConfig</code> instead of <code>LoadOp</code>.</p> <hr> <h3 id=allow-volumetric-fog-to-be-localized-to-specific-optionally-voxelized-regions>Allow volumetric fog to be localized to specific, optionally voxelized, regions. <a class=anchor-link href=#allow-volumetric-fog-to-be-localized-to-specific-optionally-voxelized-regions>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14099>#14099</a></div></div> <ul><li>A <code>FogVolume</code> is now necessary in order to enable volumetric fog, in addition to <code>VolumetricFogSettings</code> on the camera. Existing uses of volumetric fog can be migrated by placing a large <code>FogVolume</code> surrounding the scene.</ul> <hr> <h3 id=attempt-to-remove-component-from-render-world-if-not-extracted>Attempt to remove component from render world if not extracted. <a class=anchor-link href=#attempt-to-remove-component-from-render-world-if-not-extracted>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15904>#15904</a></div></div> <p>Components that implement <code>ExtractComponent</code> and return <code>None</code> will cause the extracted component to be removed from the render world.</p> <hr> <h3 id=bind-only-the-written-parts-of-storage-buffers>Bind only the written parts of storage buffers. <a class=anchor-link href=#bind-only-the-written-parts-of-storage-buffers>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16405>#16405</a></div></div> <ul><li>Fixed a bug with StorageBuffer and DynamicStorageBuffer binding data from the previous frame(s) due to caching GPU buffers between frames.</ul> <hr> <h3 id=changed-mesh-attributes-functions-to-return-meshvertexattribute>Changed <code>Mesh::attributes*</code> functions to return <code>MeshVertexAttribute</code> <a class=anchor-link href=#changed-mesh-attributes-functions-to-return-meshvertexattribute>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14394>#14394</a></div></div> <ul><li>When using the iterator returned by <code>Mesh::attributes</code> or <code>Mesh::attributes_mut</code> the first value of the tuple is not the <code>MeshVertexAttribute</code> instead of <code>MeshVertexAttributeId</code>. To access the <code>MeshVertexAttributeId</code> use the <code>MeshVertexAttribute.id</code> field.</ul> <hr> <h3 id=expose-pipeline-compilation-zero-initialize-workgroup-memory-option>Expose Pipeline Compilation Zero Initialize Workgroup Memory Option <a class=anchor-link href=#expose-pipeline-compilation-zero-initialize-workgroup-memory-option>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16301>#16301</a></div></div> <ul><li>add <code>zero_initialize_workgroup_memory: false,</code> to <code>ComputePipelineDescriptor</code> or <code>RenderPipelineDescriptor</code> structs to preserve 0.14 functionality, add <code>zero_initialize_workgroup_memory: true,</code> to restore bevy 0.13 functionality.</ul> <hr> <h3 id=feature-gate-all-image-formats>Feature-gate all image formats <a class=anchor-link href=#feature-gate-all-image-formats>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15586>#15586</a></div></div> <p>Image formats that previously weren’t feature-gated are now feature-gated, meaning they will have to be enabled if you use them:</p> <ul><li><code>avif</code><li><code>ff</code> (Farbfeld)<li><code>gif</code><li><code>ico</code><li><code>tiff</code></ul> <p>Additionally, the <code>qoi</code> feature has been added to support loading QOI format images.</p> <p>Previously, these formats appeared in the enum by default, but weren’t actually enabled via the <code>image</code> crate, potentially resulting in weird bugs. Now, you should be able to add these features to your projects to support them properly.</p> <hr> <p>If you were individually configuring the <code>bevy_render</code> crate, the feature flags for the general image formats were moved to <code>bevy_image</code> instead. For example, <code>bevy_render/png</code> no longer exists, and <code>bevy_image/png</code> is the new location for this. The texture formats are still available on <code>bevy_render</code>, e.g. <code>bevy_render/ktx2</code> is needed to fully enable <code>ktx2</code> support, and this will automatically enable <code>bevy_image/ktx2</code> for loading the textures.</p> <hr> <h3 id=fix-mesh-allocator-bug-and-reduce-mesh-data-copies-by-two>Fix Mesh allocator bug and reduce Mesh data copies by two <a class=anchor-link href=#fix-mesh-allocator-bug-and-reduce-mesh-data-copies-by-two>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15566>#15566</a></div></div> <ul><li><code>Mesh::get_vertex_buffer_data</code> has been renamed <code>Mesh::create_packed_vertex_buffer_data</code> to reflect the fact that it copies data and allocates.</ul> <hr> <h3 id=improve-api-for-scaling-orthographic-cameras>Improve API for scaling orthographic cameras <a class=anchor-link href=#improve-api-for-scaling-orthographic-cameras>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15969>#15969</a></div></div> <p><code>ScalingMode</code> has been refactored for clarity, especially on how to zoom orthographic cameras and their projections:</p> <ul><li><code>ScalingMode::WindowSize</code> no longer stores a float, and acts as if its value was 1. Divide your camera’s scale by any previous value to achieve identical results.<li><code>ScalingMode::FixedVertical</code> and <code>FixedHorizontal</code> now use named fields.</ul> <hr> <h3 id=lighting-should-only-hold-vec-entity-instead-of-typeid-vec-entity>Lighting Should Only hold <code>Vec&LTEntity></code> instead of <code>TypeId&LTVec&LTEntity>></code> <a class=anchor-link href=#lighting-should-only-hold-vec-entity-instead-of-typeid-vec-entity>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14073>#14073</a></div></div> <p><code>SpotLight</code>, <code>CascadesVisibleEntities</code> and <code>CubemapVisibleEntities</code> now use <code>VisibleMeshEntities</code> instead of <code>VisibleEntities</code></p> <hr> <h3 id=migrate-bevy-sprite-to-required-components>Migrate bevy_sprite to required components <a class=anchor-link href=#migrate-bevy-sprite-to-required-components>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15489>#15489</a></div></div> <p>Replace all uses of <code>SpriteBundle</code> with <code>Sprite</code>. There are several new convenience constructors: <code>Sprite::from_image</code>, <code>Sprite::from_atlas_image</code>, <code>Sprite::from_color</code>.</p> <p>WARNING: use of <code>Handle&LTImage></code> and <code>TextureAtlas</code> as components on sprite entities will NO LONGER WORK. Use the fields on <code>Sprite</code> instead. I would have removed the <code>Component</code> impls from <code>TextureAtlas</code> and <code>Handle&LTImage></code> except it is still used within ui. We should fix this moving forward with the migration.</p> <hr> <h3 id=migrate-lights-to-required-components>Migrate lights to required components <a class=anchor-link href=#migrate-lights-to-required-components>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15554>#15554</a></div></div> <p><code>PointLightBundle</code>, <code>SpotLightBundle</code>, and <code>DirectionalLightBundle</code> have been deprecated. Use the <code>PointLight</code>, <code>SpotLight</code>, and <code>DirectionalLight</code> components instead. Adding them will now insert the other components required by them automatically.</p> <hr> <h3 id=move-imageloader-and-compressedimagesaver-to-bevy-image>Move <code>ImageLoader</code> and <code>CompressedImageSaver</code> to <code>bevy_image</code>. <a class=anchor-link href=#move-imageloader-and-compressedimagesaver-to-bevy-image>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15812>#15812</a></div></div> <ul><li><code>ImageLoader</code> can no longer be initialized directly through <code>init_asset_loader</code>. Now you must use <code>app.register_asset_loader(ImageLoader::new(supported_compressed_formats))</code> (check out the implementation of <code>bevy_render::ImagePlugin</code>). This only affects you if you are initializing the loader manually and does not affect users of <code>bevy_render::ImagePlugin</code>.<li>The asset loader name must be updated in <code>.meta</code> files for images. Change: <code>loader: "bevy_render::texture::image_loader::ImageLoader",</code> to: <code>loader: "bevy_image::image_loader::ImageLoader",</code></ul> <p>This will fix the following error:</p> <blockquote><p><code>no </code>AssetLoader<code> found with the name 'bevy_render::texture::image_loader::ImageLoader</code></blockquote> <hr> <h3 id=move-msaa-to-component>Move <code>Msaa</code> to component <a class=anchor-link href=#move-msaa-to-component>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14273>#14273</a></div></div> <p><code>Msaa</code> is no longer configured as a global resource, and should be specified on each spawned camera if a non-default setting is desired.</p> <hr> <h3 id=only-use-the-aabb-center-for-mesh-visibility-range-testing-if-specified>Only use the AABB center for mesh visibility range testing if specified. <a class=anchor-link href=#only-use-the-aabb-center-for-mesh-visibility-range-testing-if-specified>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16468>#16468</a></div></div> <ul><li>The <code>VisibilityRange</code> component now has an extra field, <code>use_aabb</code>. Generally, you can safely set it to false.</ul> <hr> <h3 id=pack-multiple-vertex-and-index-arrays-together-into-growable-buffers>Pack multiple vertex and index arrays together into growable buffers. <a class=anchor-link href=#pack-multiple-vertex-and-index-arrays-together-into-growable-buffers>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14257>#14257</a></div></div> <ul><li>Vertex and index buffers for meshes may now be packed alongside other buffers, for performance.<li><code>GpuMesh</code> has been renamed to <code>RenderMesh</code>, to reflect the fact that it no longer directly stores handles to GPU objects.<li>Because meshes no longer have their own vertex and index buffers, the responsibility for the buffers has moved from <code>GpuMesh</code> (now called <code>RenderMesh</code>) to the <code>MeshAllocator</code> resource. To access the vertex data for a mesh, use <code>MeshAllocator::mesh_vertex_slice</code>. To access the index data for a mesh, use <code>MeshAllocator::mesh_index_slice</code>.</ul> <hr> <h3 id=reduce-the-clusterable-object-ubo-size-below-16384-for-webgl-2>Reduce the clusterable object UBO size below 16384 for WebGL 2. <a class=anchor-link href=#reduce-the-clusterable-object-ubo-size-below-16384-for-webgl-2>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16069>#16069</a></div></div> <p>The maximum number of clusterable objects on <code>WebGL2</code> is now 204, to keep us within our 16 kB memory budget. Modify your scenes or use WebGPU if you are running into this.</p> <hr> <h3 id=refactor-asbindgroup-to-use-a-associated-systemparam>Refactor <code>AsBindGroup</code> to use a associated <code>SystemParam</code>. <a class=anchor-link href=#refactor-asbindgroup-to-use-a-associated-systemparam>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14909>#14909</a></div></div> <p><code>AsBindGroup</code> now allows the user to specify a <code>SystemParam</code> to be used for creating bind groups.</p> <hr> <h3 id=remove-avif-feature>Remove AVIF feature <a class=anchor-link href=#remove-avif-feature>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15973>#15973</a></div></div> <p>AVIF images are no longer supported. They never really worked, and require system dependencies (libdav1d) to work correctly, so, it’s better to simply offer this support via an unofficial plugin instead as needed. The corresponding types have been removed from Bevy to account for this.</p> <hr> <h3 id=remove-orthographicprojection-scale-adopted>Remove OrthographicProjection.scale (adopted) <a class=anchor-link href=#remove-orthographicprojection-scale-adopted>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15075>#15075</a></div></div> <p>Replace all uses of <code>scale</code> with <code>scaling_mode</code>, keeping in mind that <code>scale</code> is (was) a multiplier. For example, replace</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">    scale<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">    scaling_mode<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">ScalingMode<span class="z-punctuation z-accessor z-rust">::</span></span>FixedHorizontal<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">4.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">
</span></code></pre> <p>with</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">    scaling_mode<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">ScalingMode<span class="z-punctuation z-accessor z-rust">::</span></span>FixedHorizontal<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">8.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></code></pre> <hr> <h3 id=rename-rendering-components-for-improved-consistency-and-clarity>Rename rendering components for improved consistency and clarity <a class=anchor-link href=#rename-rendering-components-for-improved-consistency-and-clarity>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15035>#15035</a></div></div> <p>Many rendering components have been renamed for improved consistency and clarity.</p> <ul><li><code>AutoExposureSettings</code> → <code>AutoExposure</code><li><code>BloomSettings</code> → <code>Bloom</code><li><code>BloomPrefilterSettings</code> → <code>BloomPrefilter</code><li><code>ContrastAdaptiveSharpeningSettings</code> → <code>ContrastAdaptiveSharpening</code><li><code>DepthOfFieldSettings</code> → <code>DepthOfField</code><li><code>FogSettings</code> → <code>DistanceFog</code><li><code>SmaaSettings</code> → <code>Smaa</code><li><code>TemporalAntiAliasSettings</code> → <code>TemporalAntiAliasing</code><li><code>ScreenSpaceAmbientOcclusionSettings</code> → <code>ScreenSpaceAmbientOcclusion</code><li><code>ScreenSpaceReflectionsSettings</code> → <code>ScreenSpaceReflections</code><li><code>VolumetricFogSettings</code> → <code>VolumetricFog</code></ul> <hr> <h3 id=replace-the-wgpu-trace-feature-with-a-field-in-bevy-render-settings-wgpusettings>Replace the <code>wgpu_trace</code> feature with a field in <code>bevy_render::settings::WgpuSettings</code> <a class=anchor-link href=#replace-the-wgpu-trace-feature-with-a-field-in-bevy-render-settings-wgpusettings>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14842>#14842</a></div></div> <p>The <code>bevy/wgpu_trace</code> and <code>bevy_render/wgpu_trace</code> features have been removed, as WGPU tracing is now enabled during the creation of <code>bevy_render::RenderPlugin</code>.</p> <p>Note: At the time of writing, WGPU has not reimplemented tracing support, so WGPU tracing will not currently work. However, once WGPU has reimplemented tracing support, the steps below should be sufficient to continue generating WGPU traces.</p> <p>You can track the progress of WGPU tracing being reimplemented at <a href=https://github.com/gfx-rs/wgpu/issues/5974>gfx-rs/wgpu#5974</a>.</p> <p>To continue generating WGPU traces:</p> <ol><li>Remove any instance of the <code>bevy/wgpu_trace</code> or <code>bevy_render/wgpu_trace</code> features you may have in any of your <code>Cargo.toml</code> files.<li>Follow the instructions in <a href=https://github.com/bevyengine/bevy/blob/release-0.15.0/docs/debugging.md#wgpu-tracing><code>docs/debugging.md</code>, under the WGPU Tracing section</a>.</ol> <hr> <h3 id=replaced-implicit-emissive-weight-with-default>Replaced implicit emissive weight with default. <a class=anchor-link href=#replaced-implicit-emissive-weight-with-default>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13871>#13871</a></div></div> <p>The behaviour of emissive materials when using deferred rendering has been changed to match forward rendering. Tweak the emissive values of your materials to achieve the desired effect.</p> <hr> <h3 id=return-results-from-camera-s-world-viewport-conversion-methods>Return <code>Result</code>s from <code>Camera</code>'s world/viewport conversion methods <a class=anchor-link href=#return-results-from-camera-s-world-viewport-conversion-methods>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14989>#14989</a></div></div> <p>The following methods on <code>Camera</code> now return a <code>Result</code> instead of an <code>Option</code> so that they can provide more information about failures:</p> <ul><li><code>world_to_viewport</code><li><code>world_to_viewport_with_depth</code><li><code>viewport_to_world</code><li><code>viewport_to_world_2d</code></ul> <p>Call <code>.ok()</code> on the <code>Result</code> to turn it back into an <code>Option</code>, or handle the <code>Result</code> directly.</p> <hr> <h3 id=rewrite-screenshots>Rewrite screenshots. <a class=anchor-link href=#rewrite-screenshots>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14833>#14833</a></div></div> <p><code>ScreenshotManager</code> has been removed. To take a screenshot, spawn a <code>Screenshot</code> entity with the specified render target and provide an observer targeting the <code>ScreenshotCaptured</code> event. See the <code>window/screenshot</code> example to see an example.</p> <hr> <h3 id=split-orthographicprojection-default-into-2d-3d-adopted>Split OrthographicProjection::default into 2d & 3d (Adopted) <a class=anchor-link href=#split-orthographicprojection-default-into-2d-3d-adopted>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15073>#15073</a></div></div> <ul><li>In initialization of <code>OrthographicProjection</code>, change <code>..default()</code> to <code>..OrthographicProjection::default_2d()</code> or <code>..OrthographicProjection::default_3d()</code></ul> <p>Example:</p> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff"><span class="z-meta z-diff z-header z-from-file"><span class="z-meta z-header z-from-file z-diff"><span class="z-punctuation z-definition z-from-file z-diff">---</span> a/examples/3d/orthographic.rs
</span></span></span><span class="z-source z-diff"><span class="z-meta z-diff z-header z-to-file"><span class="z-meta z-header z-to-file z-diff"><span class="z-punctuation z-definition z-to-file z-diff">+++</span> b/examples/3d/orthographic.rs
</span></span></span><span class="z-source z-diff"><span class="z-meta z-diff z-range z-unified"><span class="z-meta z-range z-unified z-diff"><span class="z-punctuation z-definition z-range z-diff">@@</span> <span class="z-meta z-toc-list z-line-number z-diff">-20,7 +20,7</span> <span class="z-punctuation z-definition z-range z-diff">@@</span> <span class="z-entity z-name z-section z-diff">fn setup(</span>
</span></span></span><span class="z-source z-diff">         projection: OrthographicProjection {
</span><span class="z-source z-diff">             scale: 3.0,
</span><span class="z-source z-diff">             scaling_mode: ScalingMode::FixedVertical(2.0),
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>            ..default()
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>            ..OrthographicProjection::default_3d()
</span></span><span class="z-source z-diff">         }
</span><span class="z-source z-diff">         .into(),
</span><span class="z-source z-diff">         transform: Transform::from_xyz(5.0, 5.0, 5.0).looking_at(Vec3::ZERO, Vec3::Y),
</span></code></pre> <hr> <h3 id=split-out-bevy-mesh-from-bevy-render>Split out bevy_mesh from bevy_render <a class=anchor-link href=#split-out-bevy-mesh-from-bevy-render>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15666>#15666</a></div></div> <p><code>bevy_render::mesh::morph::inherit_weights</code> has been moved to <code>bevy_render::mesh::inherit_weights</code>.</p> <p><code>Mesh::compute_aabb</code> has been moved to the new <code>MeshAabb</code> trait. You may need to import it.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">render<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">mesh<span class="z-punctuation z-accessor z-rust">::</span></span>MeshAabb<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <hr> <h3 id=using-cas-instead-of-cas-14341>Using Cas instead of CAS #14341 <a class=anchor-link href=#using-cas-instead-of-cas-14341>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14357>#14357</a></div></div> <p><code>CASNode</code>, <code>DenoiseCAS</code> <code>CASPipeline</code>, and <code>CASUniform</code> have been renamed to <code>CasNode</code> (and so on) to follow standard Rust naming conventions.</p> <hr> <h3 id=virtual-geometry-changes>Virtual Geometry changes <a class=anchor-link href=#virtual-geometry-changes>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14193>#14193</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14623>#14623</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15023>#15023</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15084>#15084</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15643>#15643</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15846>#15846</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15886>#15886</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15955>#15955</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16049>#16049</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16111>#16111</a></div></div> <ul><li>Runtime <ul><li>This feature now requires that your GPU supports <code>WgpuFeatures::SHADER_INT64_ATOMIC_MIN_MAX</code>.<li><code>MeshletPlugin</code> now requires a <code>cluster_buffer_slots</code> field. Read the rustdoc for more details.<li><code>MaterialMeshletMeshBundle</code> has been deprecated. Instead of using <code>Handle&LTMeshletMesh></code> and <code>Handle&LTM: Material></code> as components directly, use the <code>MeshletMesh3d</code> and <code>MeshMaterial3d</code> components.</ul><li>Asset Conversion <ul><li>Regenerate your <code>MeshletMesh</code> assets, as the asset format has changed, and <code>MESHLET_MESH_ASSET_VERSION</code> has been bumped. Old assets are not compatible.<li>When using <code>MeshletMesh::from_mesh()</code>, the provided mesh must no longer have tangents as a vertex attribute.<li>When using <code>MeshletMesh::from_mesh()</code>, you must now supply a <code>vertex_position_quantization_factor</code> argument. Use <code>MESHLET_DEFAULT_VERTEX_POSITION_QUANTIZATION_FACTOR</code>, and adjust as needed. See the docs for more info.</ul><li>Misc <ul><li><code>MeshletMeshSaverLoad</code> has been split into <code>MeshletMeshSaver</code> and <code>MeshletMeshLoader</code>.<li>Renamed <code>MeshletMeshSaveOrLoadError</code> to <code>MeshToMeshletMeshConversionError</code>.<li>The <code>MeshletMeshSaveOrLoadError::SerializationOrDeserialization</code> enum variant has been removed.<li>Added <code>MeshToMeshletMeshConversionError::WrongFileType</code>, match on this variant if you match on <code>MeshToMeshletMeshConversionError</code><li><code>MeshletMesh</code> fields are now private.<li>The <code>Meshlet</code>, <code>MeshletBoundingSpheres</code>, and <code>MeshletBoundingSphere</code> types are now private.</ul></ul> <hr> <h3 id=wgpu-0-20>Wgpu 0.20 <a class=anchor-link href=#wgpu-0-20>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13186>#13186</a></div></div> <ul><li>Updated to <code>wgpu</code> 0.20, <code>naga</code> 0.20, and <code>naga_oil</code> 0.14<li>All of Naga’s <a href=https://docs.rs/naga/latest/naga/valid/struct.Capabilities.html><code>Capabilities</code></a> should now be properly detected and supported.<li>Timestamps inside encoders are now disallowed on WebGPU to follow the spec (they still work on native). Use the <code>TIMESTAMP_QUERY_INSIDE_ENCODERS </code> wgpu feature to check for support.<li>You can now use many numeric built-ins in <code>const</code> contexts (eg. <code>abs</code>, <code>cos</code>, <code>floor</code>, <code>max</code>, etc, see https://github.com/gfx-rs/wgpu/blob/v0.20/CHANGELOG.md#wgsl-const-evaluation-for-many-more-built-ins for the whole list)<li>You can now use Subgroup operations in shaders on supported hardware (see https://github.com/gfx-rs/wgpu/blob/v0.20/CHANGELOG.md#subgroup-operations for limitations and which features to check)<li><code>u64</code> and <code>i64</code> are now supported in shaders on supported hardware (requires the <code>SHADER_INT64 </code> feature, supported on desktop Vulkan, DX12 with DXC, and Metal with MSL 2.3+)</ul> <hr> <h3 id=check-sampler-type-in-as-bind-group-derives>check sampler type in as_bind_group derives <a class=anchor-link href=#check-sampler-type-in-as-bind-group-derives>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/12637>#12637</a></div></div> <p>Instead of panicking, the <code>AsBindGroup</code> derive can now fail. To accommodate this, <code>PrepareAssetError</code> now has another arm: <code>PrepareAssetError::AsBindGroupError</code>. If you were exhaustively matching, you now need to handle this failure mode.</p> <hr> <h3 id=cleanup-bevy-render-lib-rs>cleanup bevy_render/lib.rs <a class=anchor-link href=#cleanup-bevy-render-lib-rs>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16481>#16481</a></div></div> <p><code>RenderCreation::Manual</code> variant fields are now wrapped in a struct called <code>RenderResources</code></p> <hr> <h3 id=fix-ui-texture-atlas-with-offset>Fix UI texture atlas with offset <a class=anchor-link href=#fix-ui-texture-atlas-with-offset>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>, <span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13620>#13620</a></div></div> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff">let ui_node = ExtractedUiNode {
</span><span class="z-source z-diff">                    stack_index,
</span><span class="z-source z-diff">                    transform,
</span><span class="z-source z-diff">                    color,
</span><span class="z-source z-diff">                    rect,
</span><span class="z-source z-diff">                    image,
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>                   atlas_size: Some(atlas_size * scale_factor),      
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>                   atlas_scaling: Some(Vec2::splat(scale_factor)),
</span></span><span class="z-source z-diff">                    clip,
</span><span class="z-source z-diff">                    flip_x,
</span><span class="z-source z-diff">                    flip_y,
</span><span class="z-source z-diff">                    camera_entity,
</span><span class="z-source z-diff">                    border,
</span><span class="z-source z-diff">                    border_radius,
</span><span class="z-source z-diff">                    node_type,
</span><span class="z-source z-diff">                },
</span></code></pre> <pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff">let computed_slices = ComputedTextureSlices {
</span><span class="z-source z-diff">    slices,
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>    image_size,
</span></span><span class="z-source z-diff">}
</span></code></pre> <hr> <h3 id=make-default-behavior-for-backgroundcolor-and-bordercolor-more-intuitive>Make default behavior for <code>BackgroundColor</code> and <code>BorderColor</code> more intuitive <a class=anchor-link href=#make-default-behavior-for-backgroundcolor-and-bordercolor-more-intuitive>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>, <span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14017>#14017</a></div></div> <ul><li><code>BackgroundColor</code> no longer tints the color of images in <code>ImageBundle</code> or <code>ButtonBundle</code>. Set <code>UiImage::color</code> to tint images instead.<li>The default texture for <code>UiImage</code> is now a transparent white square. Use <code>UiImage::solid_color</code> to quickly draw debug images.<li>The default value for <code>BackgroundColor</code> and <code>BorderColor</code> is now transparent. Set the color to white manually to return to previous behavior.</ul> <hr> <h3 id=optional-ui-rendering>Optional UI rendering <a class=anchor-link href=#optional-ui-rendering>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>, <span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/8997>#8997</a></div></div> <p><code>UiPlugin</code> has a new field <code>enable_rendering</code>. If set to false, the UI’s rendering systems won’t be added to the <code>RenderApp</code> and no UI elements will be drawn. The layout and interaction components will still be updated as normal.</p> <hr> <h3 id=use-precomputed-border-values>use precomputed border values <a class=anchor-link href=#use-precomputed-border-values>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>, <span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15163>#15163</a></div></div> <p>The <code>logical_rect</code> and <code>physical_rect</code> methods have been removed from <code>Node</code>. Use <code>Rect::from_center_size</code> with the translation and node size instead.</p> <p>The types of the fields border and border_radius of <code>ExtractedUiNode</code> have been changed to <code>BorderRect</code> and <code>ResolvedBorderRadius</code> respectively.</p> <hr> <h3 id=inverse-bevy-render-bevy-winit-dependency-and-move-cursor-to-bevy-winit>Inverse bevy_render bevy_winit dependency and move cursor to bevy_winit <a class=anchor-link href=#inverse-bevy-render-bevy-winit-dependency-and-move-cursor-to-bevy-winit>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Rendering</span>, <span class=heading-meta__item>Windowing</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15649>#15649</a></div></div> <p><code>CursorIcon</code> and <code>CustomCursor</code> previously provided by <code>bevy::render::view::cursor</code> is now available from <code>bevy::winit</code>. A new feature <code>custom_cursor</code> enables this functionality (default feature).</p> <h2 id=scenes>Scenes <a class=anchor-link href=#scenes>#</a></h2> <h3 id=align-scene-write-to-world-with-to-match-dynamicscene-write-to-world-with>Align <code>Scene::write_to_world_with</code> to match <code>DynamicScene::write_to_world_with</code> <a class=anchor-link href=#align-scene-write-to-world-with-to-match-dynamicscene-write-to-world-with>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Scenes</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13855>#13855</a></div></div> <p><code>Scene::write_to_world_with</code> no longer returns an <code>InstanceInfo</code>.</p> <p>Before</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">scene<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">write_to_world_with</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>registry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <p>After</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> entity_map <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">EntityHashMap<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">scene<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">write_to_world_with</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> entity_map<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>registry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <hr> <h3 id=align-scene-write-to-world-with-to-match-dynamicscene-write-to-world-with-1>Align <code>Scene::write_to_world_with</code> to match <code>DynamicScene::write_to_world_with</code> <a class=anchor-link href=#align-scene-write-to-world-with-to-match-dynamicscene-write-to-world-with-1>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Scenes</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13855>#13855</a></div></div> <p><code>Scene::write_to_world_with</code> no longer returns an <code>InstanceInfo</code>.</p> <p>Before</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">scene<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">write_to_world_with</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>registry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <p>After</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> entity_map <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">EntityHashMap<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">scene<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">write_to_world_with</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> entity_map<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>registry</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <hr> <h3 id=change-sceneinstanceready-to-trigger-an-observer>Change <code>SceneInstanceReady</code> to trigger an observer. <a class=anchor-link href=#change-sceneinstanceready-to-trigger-an-observer>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Scenes</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13859>#13859</a></div></div> <p>If you have a system which reads <code>SceneInstanceReady</code> events, it must be rewritten as an observer or entity observer.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">ready_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">ready_events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>'<span class="z-keyword z-operator z-rust">_</span>, '<span class="z-keyword z-operator z-rust">_</span>, SceneInstanceReady<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.15
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">observe</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">trigger</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Trigger<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>SceneInstanceReady<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">observe</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">trigger</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Trigger<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>SceneInstanceReady<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <hr> <h3 id=migrate-scenes-to-required-components>Migrate scenes to required components <a class=anchor-link href=#migrate-scenes-to-required-components>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Scenes</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15579>#15579</a></div></div> <p>Asset handles for scenes and dynamic scenes must now be wrapped in the <code>SceneRoot</code> and <code>DynamicSceneRoot</code> components. Raw handles as components no longer spawn scenes.</p> <p>Additionally, <code>SceneBundle</code> and <code>DynamicSceneBundle</code> have been deprecated. Instead, use the scene components directly.</p> <p>Previously:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> model_scene <span class="z-keyword z-operator z-assignment z-rust">=</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">GltfAssetLabel<span class="z-punctuation z-accessor z-rust">::</span></span>Scene<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">from_asset</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>model.gltf<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>SceneBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    scene<span class="z-punctuation z-separator z-rust">:</span> model_scene<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    transform<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_xyz<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">4.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>Now:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> model_scene <span class="z-keyword z-operator z-assignment z-rust">=</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">GltfAssetLabel<span class="z-punctuation z-accessor z-rust">::</span></span>Scene<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">from_asset</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>model.gltf<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    SceneRoot<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>model_scene</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_xyz<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">4.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <hr> <h3 id=send-sceneinstanceready-when-spawning-any-kind-of-scene>Send <code>SceneInstanceReady</code> when spawning any kind of scene <a class=anchor-link href=#send-sceneinstanceready-when-spawning-any-kind-of-scene>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Scenes</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/11741>#11741</a></div></div> <ul><li><code>SceneInstanceReady { parent: Entity }</code> is now <code>SceneInstanceReady { id: InstanceId, parent: Option&LTEntity> }</code>.</ul> <hr> <h3 id=explicitly-mention-component-in-methods-on-dynamicscenebuilder>explicitly mention <code>component</code> in methods on <code>DynamicSceneBuilder</code> <a class=anchor-link href=#explicitly-mention-component-in-methods-on-dynamicscenebuilder>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Scenes</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15210>#15210</a></div></div> <p><code>DynamicSceneBuilder::allow_all</code> and <code>deny_all</code> now set resource accesses, not just components. To return to the previous behavior, use the new <code>allow_all_components</code> or <code>deny_all_components</code> methods.</p> <p>The following methods for <code>DynamicSceneBuilder</code> have been renamed:</p> <ul><li><code>with_filter</code> -> <code>with_component_filter</code><li><code>allow</code> -> <code>allow_component</code><li><code>deny</code> -> <code>deny_component</code></ul> <h2 id=tasks>Tasks <a class=anchor-link href=#tasks>#</a></h2> <h3 id=support-on-thread-spawn-and-on-thread-destroy-for-taskpoolplugin>Support <code>on_thread_spawn</code> and <code>on_thread_destroy</code> for <code>TaskPoolPlugin</code> <a class=anchor-link href=#support-on-thread-spawn-and-on-thread-destroy-for-taskpoolplugin>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Tasks</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13045>#13045</a></div></div> <ul><li><code>TaskPooolThreadAssignmentPolicy</code> now has two additional fields: <code>on_thread_spawn</code> and <code>on_thread_destroy</code>. Please consider defaulting them to <code>None</code>.</ul> <h2 id=text>Text <a class=anchor-link href=#text>#</a></h2> <h3 id=text-rework-cleanup>Text Rework cleanup <a class=anchor-link href=#text-rework-cleanup>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Text</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15887>#15887</a></div></div> <p>Doubles as #15591 migration guide.</p> <p>Text bundles (<code>TextBundle</code> and <code>Text2dBundle</code>) were removed in favor of <code>Text</code> and <code>Text2d</code>. Shared configuration fields were replaced with <code>TextLayout</code>, <code>TextFont</code> and <code>TextColor</code> components. Just <code>TextBundle</code>’s additional field turned into <code>TextNodeFlags</code> component, while <code>Text2dBundle</code>’s additional fields turned into <code>TextBounds</code> and <code>Anchor</code> components.</p> <p>Text sections were removed in favor of hierarchy-based approach. For root text entities with <code>Text</code> or <code>Text2d</code> components, child entities with <code>TextSpan</code> will act as additional text sections. To still access text spans by index, use the new <code>TextUiReader</code>, <code>Text2dReader</code> and <code>TextUiWriter</code>, <code>Text2dWriter</code> system parameters.</p> <hr> <h3 id=text-rework>Text rework <a class=anchor-link href=#text-rework>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Text</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15591>#15591</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15887>#15887</a></div></div> <p>The <code>Text</code> API in Bevy has been overhauled in several ways as part of Bevy 0.15. There are several major changes to consider:</p> <ul><li><code>ab_glyph</code> has been replaced with <code>cosmic-text</code>. These changes are mostly internal and the majority of users will not interact with either text backend directly.<li>each text section is now stored as a distinct entity within the standard hierarchy, rather than as a <code>Vec&LTTextSection></code> on the <code>Text</code> component. Children of <code>Text</code>/<code>Text2d</code> entities with <code>TextSpan</code> components will act as additional text sections.<li>like other aspects of Bevy's API, required components have replaced bundles</ul> <h4 id=textbundle-and-text-styling><code>TextBundle</code> and text styling <a class=anchor-link href=#textbundle-and-text-styling>#</a></h4> <p><code>TextBundle</code> has been removed. Add the <code>Text</code> component to set the string displayed.</p> <p><code>TextLayout</code>, <code>TextFont</code> and <code>TextColor</code> are required components for <code>Text</code>, and are automatically added whenever <code>Text</code> is. Set those values to change the text section's style.</p> <p>Like elsewhere in Bevy, there is no style inheritance. Consider <a href=https://github.com/viridia/thorium_ui/blob/main/crates/thorium_ui_controls/src/text_styles.rs>writing your own abstraction for this</a> if this is something you'd like to use.</p> <p>To control the layout of a <code>Text</code> section, modify the properties of its <code>Node</code>.</p> <h4 id=accessing-text-spans-by-index>Accessing text spans by index <a class=anchor-link href=#accessing-text-spans-by-index>#</a></h4> <p>Previously, text sections were elements of a vector stored within <code>Text</code>. Now, they are stored as distinct entities under the same <code>Parent</code>. You can use the new <code>TextUiReader</code> and <code>TextUiWriter</code> system parameters to conveniently access text spans by index.</p> <p>Before:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">refresh_text</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> Text, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>TimeText<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">time</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Time<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> text <span class="z-keyword z-operator z-assignment z-rust">=</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">single_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    text<span class="z-punctuation z-accessor z-dot z-rust">.</span>sections<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>value <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">format_time</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>time<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">elapsed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <p>After:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">refresh_text</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Entity, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>TimeText<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">writer</span><span class="z-punctuation z-separator z-rust">:</span> TextUiWriter,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">time</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Time<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> entity <span class="z-keyword z-operator z-assignment z-rust">=</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">single</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-arithmetic z-rust">*</span>writer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">text</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">format_time</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>time<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">elapsed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <p>2D equivalents (<code>Text2dReader</code> and <code>Text2dWriter</code>) also exist.</p> <h4 id=internal-layout-information>Internal layout information <a class=anchor-link href=#internal-layout-information>#</a></h4> <p><code>TextBundle</code> additional fields have been moved into the <code>TextNodeFlags</code> component, while <code>Text2dBundle</code>'s additional fields turned into the <code>TextBounds</code> and <code>Anchor</code> components.</p> <hr> <h3 id=uncouple-dynamictextureatlasbuilder-from-assets>Uncouple <code>DynamicTextureAtlasBuilder</code> from assets <a class=anchor-link href=#uncouple-dynamictextureatlasbuilder-from-assets>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Text</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13717>#13717</a></div></div> <ul><li>Replace the <code>glyph_id</code> and <code>subpixel_offset</code> of a few text atlas APIs by a single <code>place_glyph: PlacedGlyph</code> parameter trivially combining the two.<li><code>DynamicTextureAtlasBuilder::add_texture</code> now takes a <code>&mut Image</code>, rather than a <code>Handle&LTImage></code>. To access this, fetch the underlying image using <code>Assets&LTImage>::get_mut</code>.</ul> <hr> <h3 id=split-up-textstyle>split up <code>TextStyle</code> <a class=anchor-link href=#split-up-textstyle>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Text</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15857>#15857</a></div></div> <p><code>TextStyle</code> has been renamed to <code>TextFont</code> and its <code>color</code> field has been moved to a separate component named <code>TextColor</code> which newtypes <code>Color</code>.</p> <hr> <h3 id=add-the-ability-to-control-font-smoothing>Add the ability to control font smoothing <a class=anchor-link href=#add-the-ability-to-control-font-smoothing>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Text</span>, <span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15368>#15368</a></div></div> <ul><li><code>Text</code> now contains a <code>font_smoothing: FontSmoothing</code> property, make sure to include it or add <code>..default()</code> when using the struct directly;<li><code>FontSizeKey</code> has been renamed to <code>FontAtlasKey</code>, and now also contains the <code>FontSmoothing</code> setting;<li>The following methods now take an extra <code>font_smoothing: FontSmoothing</code> argument: <ul><li><code>FontAtlas::new()</code><li><code>FontAtlasSet::add_glyph_to_atlas()</code><li><code>FontAtlasSet::get_glyph_atlas_info()</code><li><code>FontAtlasSet::get_outlined_glyph_texture()</code></ul></ul> <hr> <h3 id=cosmic-text>Cosmic text <a class=anchor-link href=#cosmic-text>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Text</span>, <span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/10193>#10193</a></div></div> <ul><li><code>Text2dBounds</code> has been replaced with <code>TextBounds</code>, and it now accepts <code>Option</code>s to the bounds, instead of using <code>f32::INFINITY</code> to indicate lack of bounds<li>Textsizes should be changed, dividing the current size with 1.2 will result in the same size as before.<li><code>TextSettings</code> struct is removed<li>Feature <code>subpixel_glyph_atlas</code> has been removed since cosmic-text already does this automatically<li>TextBundles and things rendering texts requires the <code>CosmicBuffer</code> Component on them as well</ul> <h2 id=time>Time <a class=anchor-link href=#time>#</a></h2> <h3 id=aligning-public-apis-of-time-timer-and-stopwatch>aligning public apis of Time,Timer and Stopwatch <a class=anchor-link href=#aligning-public-apis-of-time-timer-and-stopwatch>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Time</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15962>#15962</a></div></div> <p>The APIs of <code>Time</code>, <code>Timer</code> and <code>Stopwatch</code> have been cleaned up for consistency with each other and the standard library’s <code>Duration</code> type. The following methods have been renamed:</p> <ul><li><code>Stowatch::paused</code> -> <code>Stopwatch::is_paused</code><li><code>Time::elapsed_seconds</code> -> <code>Time::elapsed_secs</code> (including <code>_f64</code> and <code>_wrapped</code> variants)</ul> <h2 id=ui>UI <a class=anchor-link href=#ui>#</a></h2> <h3 id=add-ui-ghostnode>Add UI <code>GhostNode</code> <a class=anchor-link href=#add-ui-ghostnode>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15341>#15341</a></div></div> <p>Any code that previously relied on <code>Parent</code>/<code>Children</code> to iterate UI children may now want to use <code>bevy_ui::UiChildren</code> to ensure ghost nodes are skipped, and their first descendant Nodes included.</p> <p>UI root nodes may now be children of ghost nodes, which means <code>Without&LTParent></code> might not query all root nodes. Use <code>bevy_ui::UiRootNodes</code> where needed to iterate root nodes instead.</p> <hr> <h3 id=clean-up-uisystem-system-sets>Clean up UiSystem system sets <a class=anchor-link href=#clean-up-uisystem-system-sets>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14228>#14228</a></div></div> <p><code>UiSystem</code> system set adjustments.</p> <ul><li>The <code>UiSystem::Outline</code> system set is now strictly ordered after <code>UiSystem::Layout</code>, rather than overlapping it.</ul> <hr> <h3 id=migrate-ui-bundles-to-required-components>Migrate UI bundles to required components <a class=anchor-link href=#migrate-ui-bundles-to-required-components>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15898>#15898</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15975>#15975</a></div></div> <p><code>NodeBundle</code> has been replaced with <code>Node</code> (and its associated required components). Simultaneously, the fields and behavior of <code>Style</code> have been moved to <code>Node</code>, and the largely internal values previously stored there are now found on <code>ComputedNode</code>.</p> <p>It will be easiest to migrate if you replace <code>Node</code> with <code>ComputedNode</code> first, then <code>Style</code> with <code>Node</code>, and finally <code>NodeBundle</code> with <code>Node</code>.</p> <h4 id=node-computednode><code>Node</code> -> <code>ComputedNode</code> <a class=anchor-link href=#node-computednode>#</a></h4> <p>For any usage of the “computed node properties” that used to live on <code>Node</code>, use <code>ComputedNode</code> instead. This is a trivial find-and-replace rename.</p> <p>If you were ever explicitly adding <code>Node</code> (now <code>ComputedNode</code>) to your UI bundles, you can remove this, as it is now required by <code>Node</code> (previously <code>Style</code>).</p> <p>Before:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">nodes</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>Node<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> node <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>nodes <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> computed_size <span class="z-keyword z-operator z-assignment z-rust">=</span> node<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">size</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <p>After:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">computed_nodes</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>ComputedNode<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> computed_node <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>computed_nodes <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> computed_size <span class="z-keyword z-operator z-assignment z-rust">=</span> computed_node<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">size</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre> <h4 id=style-node><code>Style</code> -> <code>Node</code> <a class=anchor-link href=#style-node>#</a></h4> <p>All of the values of <code>Style</code> now live on <code>Node</code>. This is a find-and-replace rename.</p> <p>Before:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">Style <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    width<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Val<span class="z-punctuation z-accessor z-rust">::</span></span>Px<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">100.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre> <p>After:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">Node <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    width<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Val<span class="z-punctuation z-accessor z-rust">::</span></span>Px<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">100.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre> <h4 id=nodebundle-node><code>NodeBundle</code> -> <code>Node</code> <a class=anchor-link href=#nodebundle-node>#</a></h4> <p>Finally, replace all uses of <code>NodeBundle</code> with <code>Node</code>. All other components in <code>NodeBundle</code> are now added implicitly via required components. Adding them to your bundles manually will overwrite the default values.</p> <p>Before:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">     commands
</span><span class="z-source z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>NodeBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            style<span class="z-punctuation z-separator z-rust">:</span> Style <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                 width<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Val<span class="z-punctuation z-accessor z-rust">::</span></span>Percent<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">100.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                 align_items<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">AlignItems<span class="z-punctuation z-accessor z-rust">::</span></span>Center<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                 justify_content<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">JustifyContent<span class="z-punctuation z-accessor z-rust">::</span></span>Center<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                 <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">             </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>After:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">     commands
</span><span class="z-source z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Node <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            width<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Val<span class="z-punctuation z-accessor z-rust">::</span></span>Percent<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">100.</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            align_items<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">AlignItems<span class="z-punctuation z-accessor z-rust">::</span></span>Center<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            justify_content<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">JustifyContent<span class="z-punctuation z-accessor z-rust">::</span></span>Center<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <hr> <h3 id=move-textureatlas-into-uiimage-and-remove-impl-component-for-textureatlas>Move TextureAtlas into UiImage and remove impl Component for TextureAtlas <a class=anchor-link href=#move-textureatlas-into-uiimage-and-remove-impl-component-for-textureatlas>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16072>#16072</a></div></div> <p>Before:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">  <span class="z-meta z-path z-rust">UiImage<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>image</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">  TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> index<span class="z-punctuation z-separator z-rust">,</span> layout </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>After:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">UiImage<span class="z-punctuation z-accessor z-rust">::</span></span>from_atlas_image<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>image<span class="z-punctuation z-separator z-rust">,</span> TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> index<span class="z-punctuation z-separator z-rust">,</span> layout </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>Before:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>UiImage <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    texture<span class="z-punctuation z-separator z-rust">:</span> some_image<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <p>After:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>UiImage <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    image<span class="z-punctuation z-separator z-rust">:</span> some_image<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre> <hr> <h3 id=only-use-physical-coords-internally-in-bevy-ui>Only use physical coords internally in <code>bevy_ui</code> <a class=anchor-link href=#only-use-physical-coords-internally-in-bevy-ui>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16375>#16375</a></div></div> <p><code>ComputedNode</code>’s fields and methods now use physical coordinates. <code>ComputedNode</code> has a new field <code>inverse_scale_factor</code>. Multiplying the physical coordinates by the <code>inverse_scale_factor</code> will give the logical values.</p> <hr> <h3 id=overflow-clip-margin>Overflow clip margin <a class=anchor-link href=#overflow-clip-margin>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15442>#15442</a>, <a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15561>#15561</a></div></div> <p>Style has a new field <code>OverflowClipMargin</code>. It allows users to set the visible area for clipped content when using overflow-clip, -hidden, or -scroll and expand it with a margin.</p> <p>There are three associated constructor functions <code>content_box</code>, <code>padding_box</code> and <code>border_box</code>:</p> <ul><li><code>content_box</code>: elements painted outside of the content box area (the innermost part of the node excluding the padding and border) of the node are clipped. This is the new default behaviour.<li><code>padding_box</code>: elements painted outside outside of the padding area of the node are clipped.<li><code>border_box</code>: elements painted outside of the bounds of the node are clipped. This matches the behaviour from Bevy 0.14.</ul> <p>There is also a <code>with_margin</code> method that increases the size of the visible area by the given number in logical pixels, negative margin values are clamped to zero.</p> <p><code>OverflowClipMargin</code> is ignored unless overflow-clip, -hidden or -scroll is also set on at least one axis of the UI node.</p> <hr> <h3 id=remove-custom-rounding>Remove custom rounding <a class=anchor-link href=#remove-custom-rounding>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16097>#16097</a></div></div> <p><code>UiSurface::get_layout</code> now also returns the final sizes before rounding. Call <code>.0</code> on the <code>Ok</code> result to get the previously returned <code>taffy::Layout</code> value.</p> <hr> <h3 id=remove-useless-direction-field>Remove useless <code>Direction</code> field <a class=anchor-link href=#remove-useless-direction-field>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14793>#14793</a></div></div> <p><code>Style</code> no longer has a <code>direction</code> field, and <code>Direction</code> has been deleted. They didn’t do anything, so you can delete any references to them as well.</p> <hr> <h3 id=rename-breaklineon-to-linebreak>Rename BreakLineOn to LineBreak <a class=anchor-link href=#rename-breaklineon-to-linebreak>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15583>#15583</a></div></div> <p><code>BreakLineOn</code> was renamed to <code>LineBreak</code>, and parameters named <code>linebreak_behavior</code> were renamed to <code>linebreak</code>.</p> <hr> <h3 id=replace-handle-m-uimaterial-component-with-uimaterialhandle-wrapper>Replace <code>Handle&LTM: UiMaterial></code> component with <code>UiMaterialHandle</code> wrapper <a class=anchor-link href=#replace-handle-m-uimaterial-component-with-uimaterialhandle-wrapper>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15740>#15740</a></div></div> <p>Let’s defer the migration guide to the required component port. I just want to yeet the <code>Component</code> impl on <code>Handle</code> in the meantime :)</p> <hr> <h3 id=simplified-ui-stack-system>Simplified <code>ui_stack_system</code> <a class=anchor-link href=#simplified-ui-stack-system>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/9889>#9889</a></div></div> <p>The <code>ZIndex</code> enum has been split into two separate components <code>ZIndex</code> (which replaces <code>ZIndex::Local</code>) and <code>GlobalZIndex</code> (which replaces <code>ZIndex::Global</code>). An entity can have both a <code>ZIndex</code> and <code>GlobalZIndex</code>, in comparisons <code>ZIndex</code> breaks ties if two <code>GlobalZindex</code> values are equal.</p> <hr> <h3 id=uiimage-imagenode-uiimagesize-imagenodesize>UiImage -> ImageNode, UiImageSize -> ImageNodeSize <a class=anchor-link href=#uiimage-imagenode-uiimagesize-imagenodesize>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/16271>#16271</a></div></div> <p>Before:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">UiImage<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>image</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p>After:</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">ImageNode<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>image</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <hr> <h3 id=explicitly-order-cameraupdatesystem-before-uisystem-prepare>Explicitly order <code>CameraUpdateSystem</code> before <code>UiSystem::Prepare</code> <a class=anchor-link href=#explicitly-order-cameraupdatesystem-before-uisystem-prepare>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>UI</span>, <span class=heading-meta__item>Windowing</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14609>#14609</a></div></div> <p><code>CameraUpdateSystem</code> is now explicitly ordered before <code>UiSystem::Prepare</code> instead of being ambiguous with it.</p> <h2 id=utils>Utils <a class=anchor-link href=#utils>#</a></h2> <h3 id=allow-bevy-utils-in-no-std-contexts>Allow <code>bevy_utils</code> in <code>no_std</code> Contexts <a class=anchor-link href=#allow-bevy-utils-in-no-std-contexts>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Utils</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15279>#15279</a></div></div> <p>If you were importing <code>bevy_utils</code> and setting <code>default_features</code> to <code>false</code>, but relying on elements which are now gated behind the <code>std</code> or <code>alloc</code> features, include the relevant feature in your <code>Cargo.toml</code>.</p> <hr> <h3 id=remove-allocation-in-get-short-name>Remove allocation in <code>get_short_name</code> <a class=anchor-link href=#remove-allocation-in-get-short-name>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Utils</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15294>#15294</a></div></div> <p><strong>For <code>format!</code>, <code>dbg!</code>, <code>panic!</code>, etc.</strong></p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Before
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">panic!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>{} is too short!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-function z-rust">get_short_name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">panic!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>{} is too short!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> ShortName<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <p><strong>Need a <code>String</code> Value</strong></p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Before
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> short<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">String</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">get_short_name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> After
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> short<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">String</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> ShortName<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>name</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_string</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre> <hr> <h3 id=remove-remnant-entityhash-and-related-types-from-bevy-utils>Remove remnant <code>EntityHash</code> and related types from <code>bevy_utils</code> <a class=anchor-link href=#remove-remnant-entityhash-and-related-types-from-bevy-utils>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Utils</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15039>#15039</a></div></div> <ul><li>Uses of <code>bevy::utils::{EntityHash, EntityHasher, EntityHashMap, EntityHashSet}</code> now have to be imported from <code>bevy::ecs::entity</code>.</ul> <hr> <h3 id=remove-unused-type-parameter-in-parallel-drain>Remove unused type parameter in <code>Parallel::drain()</code> <a class=anchor-link href=#remove-unused-type-parameter-in-parallel-drain>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Utils</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14178>#14178</a></div></div> <p>The type parameter of <code>Parallel::drain()</code> was unused, so it is now removed. If you were manually specifying it, you can remove the bounds.</p> <pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Create a `Parallel` and give it a value.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> parallel<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Parallel<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">u8</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Parallel<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-arithmetic z-rust">*</span>parallel<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">borrow_local_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">2</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">3</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">for</span> v <span class="z-keyword z-operator z-rust">in</span> parallel<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">drain<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">u8</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.15
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> parallel<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Parallel<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Vec</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">u8</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Parallel<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-arithmetic z-rust">*</span>parallel<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">borrow_local_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">2</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">3</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Remove the type parameter.
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">for</span> v <span class="z-keyword z-operator z-rust">in</span> parallel<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">drain</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre> <h2 id=windowing>Windowing <a class=anchor-link href=#windowing>#</a></h2> <h3 id=add-bevy-window-window-options-for-macos>Add <code>bevy_window::Window</code> options for MacOS <a class=anchor-link href=#add-bevy-window-window-options-for-macos>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Windowing</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15820>#15820</a></div></div> <p><code>bevy_window::Window</code> now has extra fields for configuring MacOS window settings:</p> <pre class="language-rs z-code" data-lang=rs><code class=language-rs data-lang=rs><span class="z-source z-rust">    <span class="z-storage z-modifier z-rust">pub</span> movable_by_window_background<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">    <span class="z-storage z-modifier z-rust">pub</span> fullsize_content_view<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">    <span class="z-storage z-modifier z-rust">pub</span> has_shadow<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">    <span class="z-storage z-modifier z-rust">pub</span> titlebar_shown<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">    <span class="z-storage z-modifier z-rust">pub</span> titlebar_transparent<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">    <span class="z-storage z-modifier z-rust">pub</span> titlebar_show_title<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">,</span>
</span><span class="z-source z-rust">    <span class="z-storage z-modifier z-rust">pub</span> titlebar_show_buttons<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">,</span>
</span></code></pre> <p>Using <code>Window::default</code> keeps the same behaviour as before.</p> <hr> <h3 id=expose-winit-s-monitorhandle>Expose winit's <code>MonitorHandle</code> <a class=anchor-link href=#expose-winit-s-monitorhandle>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Windowing</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13669>#13669</a></div></div> <ul><li><code>WindowMode</code> variants now take a <code>MonitorSelection</code>, which can be set to <code>MonitorSelection::Primary</code> to mirror the old behavior.</ul> <hr> <h3 id=remove-unused-default-feature-from-bevy-window>Remove unused <code>default</code> feature from <code>bevy_window</code> <a class=anchor-link href=#remove-unused-default-feature-from-bevy-window>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Windowing</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/14313>#14313</a></div></div> <p><code>bevy_window</code> had an empty default feature flag that did not do anything, so it was removed. You may have to remove any references to it if you specified it manually.</p> <pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> 0.14</span>
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy_window</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>0.14<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">default-features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">false</span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>default<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> 0.15</span>
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy_window</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>0.15<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">default-features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">false</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span></code></pre> <hr> <h3 id=move-android-app-to-bevy-window>move ANDROID_APP to bevy_window <a class=anchor-link href=#move-android-app-to-bevy-window>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span><span class=heading-meta__item>Windowing</span>.</div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/15585>#15585</a></div></div> <p>If you use the <code>android_activity</code> reexport from <code>bevy::winit::android_activity</code>, it is now in <code>bevy::window::android_activity</code>. Same for the <code>ANDROID_APP</code> static</p> <h2 id=without-area>Without area <a class=anchor-link href=#without-area>#</a></h2> <h3 id=add-display-implementation-to-debugname>Add Display implementation to DebugName. <a class=anchor-link href=#add-display-implementation-to-debugname>#</a></h3> <div class=heading-meta><div><span class=heading-meta__title>Areas:</span></div><div><span class=heading-meta__title> PRs:</span><a class=heading-meta__item href=https://github.com/bevyengine/bevy/pull/13760>#13760</a></div></div> <ul><li>In code which uses DebugName you should now use the Display implementation rather than the Debug implementation (ie {} instead of {:?} if you were printing it out).</ul> <div class="docs-footer print:hidden"><nav class=docs-footer__nav><a class="docs-footer__link docs-footer__link--next" data-docs-nav-next href=/learn/migration-guides/0-13-to-0-14/> <div class=docs-footer__label><div class=docs-footer__dir>Next</div> 0.13 to 0.14</div> <i class="docs-footer__chevron icon icon--chevron-right"></i> </a><a class="docs-footer__link docs-footer__link--prev" data-docs-nav-previous href=/learn/migration-guides/0-15-to-0-16/> <div class=docs-footer__label><div class=docs-footer__dir>Previous</div> 0.15 to 0.16</div> <i class="docs-footer__chevron icon icon--chevron-left"></i> </a></nav><div class=docs-footer__edit-wrapper><a class=docs-footer__edit href=https://github.com/bevyengine/bevy-website/edit/main/content/learn/migration-guides/0.14-to-0.15.md> <i class="icon icon--pencil"></i> Improve this page </a><a href="https://github.com/bevyengine/bevy-website/issues/new?template=docs.md&title=Issue%20on%20page%200.14%20to%200.15" class=docs-footer__edit> <i class="icon icon--github"></i> Report issue </a></div></div> <footer class=print:hidden><div class=footer__social-container><a class=footer__social href=https://github.com/bevyengine/bevy title=GitHub> <img alt="GitHub logo" height=24 src=/assets/github-mark-white.svg width=24> </a><a class=footer__social href=https://discord.gg/bevy title=Discord> <img alt="Discord logo" height=24 src=/assets/discord.svg width=24> </a><a class=footer__social href=https://bsky.app/profile/bevy.org title=Bluesky> <img alt="Bluesky logo" height=24 src=/assets/bluesky.svg width=24> </a><a class=footer__social href=https://mastodon.social/@bevy title=Mastodon> <img alt="Mastodon logo" height=24 src=/assets/mastodon-logo-purple.svg width=24> </a><a class=footer__social href=https://www.reddit.com/r/bevy/ title=Reddit> <img alt="Reddit logo" height=24 src=/assets/reddit.svg width=24> </a><a class=footer__social href=https://itch.io/games/tag-bevy title=itch.io> <img alt="itch.io logo" height=24 src=/assets/itchio-textless.svg width=24> </a><a title="Bevy news feed" class=footer__social href=/atom.xml> <img alt="Bevy news feed" height=24 src=/assets/feed.svg width=24> </a></div></footer> <script>const search_params=new URLSearchParams(window.location.search);if(search_params.has(`show_drafts`)||document.cookie.indexOf(`show_drafts`)>=0){let a=`show_drafts`;if(search_params.get(a)===`0`){document.cookie=`show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC`}else{document.cookie=`show_drafts=1;path=/`;document.body.classList.add(a)}}</script> 