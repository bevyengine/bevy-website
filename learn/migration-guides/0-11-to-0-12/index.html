<!doctype html><html class=light-mode lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="0.11 to 0.12" property=og:title><meta content=website property=og:type><meta content=https://bevy.org//learn/migration-guides/0-11-to-0-12/ property=og:url><meta content=https://bevy.org/assets/bevy_logo_fill.png property=og:image><meta content='Bevy relies heavily on improvements in the Rust language and compiler.
As a result, the Minimum Supported Rust Version (MSRV) is "the latest stable re…' property=og:description><link rel="shortcut icon" href=/assets/favicon.png type=image/png><link href=/site.css rel=stylesheet><link href=/atom.xml rel=alternate type=application/atom+xml><title>0.11 to 0.12</title><script src=/optional-helpers.js></script><script defer src=/highlight-intrapage-link.js></script><script defer src=/clipboard.js></script><body><div class=layout><input class=hidden id=mobile-menu-state type=checkbox><header class="layout__header header print:hidden" data-mobile-menu-state-container><div class=header__content><label class=main-menu-backdrop for=mobile-menu-state></label><label class="header__hamburger button-square button-square--header" for=mobile-menu-state><img alt="Three horizontal lines stacked on top of eachother" height=16 src=/assets/icon-hamburger.svg width=20></label><div class=header__left-block><a class=header__logo href=/> <picture class=logo><img alt="Bevy logo" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><div class=header__message>Migration Guides</div></div><input checked class=hidden id=page-menu-switch-state type=checkbox><nav class="header__menu main-menu main-menu--with-page-menu" data-page-menu-switch-state-container role=navigation><div class=main-menu__header><a href=/> <picture class=logo><img alt="Bevy Engine" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><label class="button-square button-square--header" for=mobile-menu-state><img alt="A saltire or x-cross" height=16 src=/assets/icon-times.svg width=16></label></div><div class=main-menu__page-menu-switch><label class=menu-switch for=page-menu-switch-state><div class="menu-switch__option menu-switch__option--main-menu">Main Menu</div> <div class="menu-switch__option menu-switch__option--page-menu">Migration Guides</div></label></div><div class=main-menu__content><div class=main-menu__page-menu><ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/introduction/>Introduction</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-17-to-0-18/>0.17 to 0.18</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-16-to-0-17/>0.16 to 0.17</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-15-to-0-16/>0.15 to 0.16</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-14-to-0-15/>0.14 to 0.15</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-13-to-0-14/>0.13 to 0.14</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-12-to-0-13/>0.12 to 0.13</a></div><li class="tree-menu__item tree-menu__item--active"><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-11-to-0-12/>0.11 to 0.12</a><nav aria-label="On This Page" class="on-this-page tree-menu__toc" data-highlight-intrapage-link><ul><li><a href=#api-updates-to-the-animationplayer>API updates to the AnimationPlayer</a><li><a href=#fix-run-once-runners>Fix run-once runners</a><li><a href=#add-support-for-khr-materials-emissive-strength>Add support for KHR_materials_emissive_strength</a><li><a href=#bevy-asset-v2>Bevy Asset V2</a> <ul><li><a href=#migrating-a-custom-asset-loader>Migrating a custom asset loader</a><li><a href=#asset-hot-reloading>Asset hot-reloading</a><li><a href=#labeled-assets>Labeled assets</a><li><a href=#using-assets>Using assets</a><li><a href=#asset-events>Asset events</a><li><a href=#untypedhandle>UntypedHandle</a></ul><li><a href=#copy-on-write-assetpaths>Copy on Write AssetPaths</a><li><a href=#removed-anyhow>Removed anyhow</a><li><a href=#non-blocking-load-untyped-using-a-wrapper-asset>Non-blocking load_untyped using a wrapper asset</a><li><a href=#reflect-typepath-part-2>reflect: TypePath part 2</a><li><a href=#more-ergonomic-spatial-audio>More ergonomic spatial audio</a><li><a href=#simplify-parallel-iteration-methods>Simplify parallel iteration methods</a><li><a href=#fix-safety-invariants-for-worldquery-fetch-and-simplify-cloning>Fix safety invariants for WorldQuery::fetch and simplify cloning</a><li><a href=#opt-out-multi-threaded-feature-flag>Opt-out multi-threaded feature flag</a><li><a href=#refactor-build-schedule-and-related-errors>Refactor build_schedule and related errors</a><li><a href=#add-system-map-for-transforming-the-output-of-a-system>Add system.map(...) for transforming the output of a system</a><li><a href=#replaced-entitymap-with-hashmap>Replaced EntityMap with HashMap</a><li><a href=#rename-manualeventiterator>Rename ManualEventIterator</a><li><a href=#replaced-entitycommand-implementation-for-fnonce>Replaced EntityCommand Implementation for FnOnce</a><li><a href=#move-schedule-name-into-schedule>Move schedule name into Schedule</a><li><a href=#refactor-eventreader-iter-to-read>Refactor EventReader::iter to read</a><li><a href=#replace-intosystemsetconfig-with-intosystemsetconfigs>Replace IntoSystemSetConfig with IntoSystemSetConfigs</a><li><a href=#moved-get-component-unchecked-mut-from-query-to-querystate>Moved get_component(_unchecked_mut) from Query to QueryState</a><li><a href=#fix-naming-on-tick-column-and-componentsparseset-methods>Fix naming on "tick" Column and ComponentSparseSet methods</a><li><a href=#return-a-boolean-from-set-if-neq>Return a boolean from set_if_neq</a><li><a href=#rename-removedcomponents-iter-iter-with-id-to-read-read-with-id>Rename RemovedComponents::iter/iter_with_id to read/read_with_id</a><li><a href=#remove-states-variants-and-remove-enum-only-restriction-its-derive>Remove States::variants and remove enum-only restriction its derive</a><li><a href=#replace-all-labels-with-interned-labels>Replace all labels with interned labels</a><li><a href=#add-configure-schedules-to-app-and-schedules-to-apply-schedulebuildsettings-to-all-schedules>Add configure_schedules to App and Schedules to apply ScheduleBuildSettings to all schedules</a><li><a href=#only-run-event-systems-if-they-have-tangible-work-to-do>Only run event systems if they have tangible work to do</a><li><a href=#allow-disjoint-mutable-world-access-via-entitymut>Allow disjoint mutable world access via EntityMut</a><li><a href=#make-builder-types-take-and-return-self>Make builder types take and return Self</a><li><a href=#change-axissettings-livezone-default>Change AxisSettings livezone default</a><li><a href=#rename-bevy-math-rects-conversion-methods>Rename bevy_math::rects conversion methods</a><li><a href=#rename-bezier-to-cubicbezier-for-clarity>Rename Bezier to CubicBezier for clarity</a><li><a href=#add-cubic-prefix-to-all-cubic-curve-generators>Add Cubic prefix to all cubic curve generators</a><li><a href=#remove-the-bevy-dylib-feature>Remove the bevy_dylib feature</a><li><a href=#refactor-path-module-of-bevy-reflect>Refactor path module of bevy_reflect</a><li><a href=#make-it-so-parsedpath-can-be-passed-to-getpath>Make it so ParsedPath can be passed to GetPath</a><li><a href=#remove-typeregistry-re-export-rename>Remove TypeRegistry re-export rename</a><li><a href=#provide-getters-for-fields-of-reflectfromptr>Provide getters for fields of ReflectFromPtr</a><li><a href=#bevy-reflect-fix-ignored-skipped-field-order>bevy_reflect: Fix ignored/skipped field order</a><li><a href=#return-urect-instead-of-uvec2-uvec2-in-camera-physical-viewport-rect>Return URect instead of (UVec2, UVec2) in Camera::physical_viewport_rect</a><li><a href=#update-bevy-window-presentmode-to-mirror-wgpu-presentmode>Update bevy_window::PresentMode to mirror wgpu::PresentMode</a><li><a href=#use-gpuarraybuffer-for-meshuniform>Use GpuArrayBuffer for MeshUniform</a><li><a href=#reduce-the-size-of-meshuniform-to-improve-performance>Reduce the size of MeshUniform to improve performance</a><li><a href=#reorder-render-sets-refactor-bevy-sprite-to-take-advantage>Reorder render sets, refactor bevy_sprite to take advantage</a><li><a href=#split-computedvisibility-into-two-components-to-allow-for-accurate-change-detection-and-speed-up-visibility-propagation>Split ComputedVisibility into two components to allow for accurate change detection and speed up visibility propagation</a><li><a href=#cleanup-visibility-module>Cleanup visibility module</a><li><a href=#allow-other-plugins-to-create-renderer-resources>Allow other plugins to create renderer resources</a><li><a href=#use-entityhashmap-entity-t-for-render-world-entity-storage-for-better-performance>Use EntityHashMap&LTEntity, T> for render world entity storage for better performance</a><li><a href=#pcf-for-directionallight-spotlight-shadows>PCF For DirectionalLight/SpotLight Shadows</a><li><a href=#use-material-for-wireframes>use Material for wireframes</a><li><a href=#deferred-renderer>Deferred Renderer</a><li><a href=#pbr-shader-cleanup>pbr shader cleanup</a><li><a href=#prepass-shader-def-cleanup>*_PREPASS Shader Def Cleanup</a><li><a href=#allow-extensions-to-standardmaterial>Allow extensions to StandardMaterial</a><li><a href=#variable-meshpipeline-view-bind-group-layout>Variable MeshPipeline View Bind Group Layout</a><li><a href=#update-shader-imports>Update shader imports</a><li><a href=#bind-group-entries>Bind group entries</a><li><a href=#detect-cubemap-for-dds-textures>Detect cubemap for dds textures</a><li><a href=#add-convenient-methods-for-image>Add convenient methods for Image</a><li><a href=#use-specular-occlusion-term-to-consistently-extinguish-fresnel-on-ambient-and-environment-map-lights>Use “specular occlusion” term to consistently extinguish fresnel on Ambient and Environment Map lights</a><li><a href=#fix-fog-color-being-inaccurate>Fix fog color being inaccurate</a><li><a href=#image-sampler-improvements>Image Sampler Improvements</a><li><a href=#standardmaterial-light-transmission>StandardMaterial Light Transmission</a><li><a href=#increase-default-normal-bias-to-avoid-common-artifacts>Increase default normal bias to avoid common artifacts</a><li><a href=#make-directionallight-cascades-computation-generic-over-cameraprojection>Make DirectionalLight Cascades computation generic over CameraProjection</a><li><a href=#move-skin-code-to-a-separate-module>Move skin code to a separate module</a><li><a href=#move-scene-spawner-systems-to-spawnscene-schedule>Move scene spawner systems to SpawnScene schedule</a><li><a href=#remove-resource-and-add-debug-to-taskpooloptions>Remove Resource and add Debug to TaskPoolOptions</a><li><a href=#global-taskpool-api-improvements>Global TaskPool API improvements</a><li><a href=#unify-fixedtime-and-time-while-fixing-several-problems>Unify FixedTime and Time while fixing several problems</a><li><a href=#change-the-default-for-the-measure-func-field-of-contentsize-to-none>Change the default for the measure_func field of ContentSize to None.</a><li><a href=#change-uiscale-to-a-tuple-struct>Change UiScale to a tuple struct</a><li><a href=#cleanup-some-bevy-text-pipeline-rs>Cleanup some bevy_text pipeline.rs</a><li><a href=#make-gridplacement-s-fields-non-zero-and-add-accessor-functions>Make GridPlacement's fields non-zero and add accessor functions.</a><li><a href=#remove-val-s-try-arithmetic-methods>Remove Val's try_* arithmetic methods</a><li><a href=#rename-val-evaluate-to-resolve-and-implement-viewport-variant-support>Rename Val evaluate to resolve and implement viewport variant support</a><li><a href=#textlayoutinfo-size-should-hold-the-drawn-size-of-the-text-and-not-a-scaled-value>TextLayoutInfo::size should hold the drawn size of the text, and not a scaled value.</a><li><a href=#have-a-separate-implicit-viewport-node-per-root-node-make-viewport-node-display-grid>Have a separate implicit viewport node per root node + make viewport node Display::Grid</a><li><a href=#rename-num-font-atlases-to-len>Rename num_font_atlases to len.</a><li><a href=#various-accessibility-api-updates>Various accessibility API updates.</a><li><a href=#add-some-more-docs-for-bevy-text>Add some more docs for bevy_text.</a><li><a href=#update-ui-alignment-docs>Update UI alignment docs</a><li><a href=#add-option-to-toggle-window-control-buttons>Add option to toggle window control buttons</a><li><a href=#improve-bevy-winit-documentation>Improve bevy_winit documentation</a><li><a href=#work-around-naga-wgpu-wgsl-instance-index-glsl-gl-instanceid-bug-on-webgl2>Work around naga/wgpu WGSL instance_index -> GLSL gl_InstanceID bug on WebGL2</a><li><a href=#remove-intoiterator-impl-for-mut-eventreader>Remove IntoIterator impl for &mut EventReader</a><li><a href=#update-default-clearcolor-to-better-match-bevy-s-branding>Update default `ClearColor`` to better match Bevy's branding</a><li><a href=#view-transformations>View Transformations</a></ul></nav></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-10-to-0-11/>0.10 to 0.11</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-9-to-0-10/>0.9 to 0.10</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-8-to-0-9/>0.8 to 0.9</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-7-to-0-8/>0.7 to 0.8</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-6-to-0-7/>0.6 to 0.7</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-5-to-0-6/>0.5 to 0.6</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-4-to-0-5/>0.4 to 0.5</a></div></ul></div><ul class=main-menu__menu><li class="main-menu__entry main-menu__entry--getting-started"><a class=main-menu__link href=/learn/quick-start/getting-started/> <span>Getting Started</span> </a><li class=main-menu__entry><a class="main-menu__link main-menu__link--active" href=/learn/> <span>Learn</span> </a><li class=main-menu__entry><a class=main-menu__link href=/news/> <span>News</span> </a><li class=main-menu__entry><a class=main-menu__link href=/community/> <span>Community</span> </a><li class=main-menu__entry><a class=main-menu__link href=/foundation/> <span>Foundation</span> </a><li class=main-menu__entry><a class=main-menu__link href=/assets/> <span>Assets</span> </a><li class=main-menu__entry><a class=main-menu__link href=/examples/> <span>Examples</span> </a></ul></div></nav><div class=header__cta-container><a class="button button--pink header__cta" href=/donate>Donate <img alt="heart icon" class=button__icon height=512 src=/assets/heart.svg width=512> </a><a class="header__cta header__cta--github" href=https://github.com/bevyengine/bevy> <img alt="GitHub repo" height=96 src=/assets/github-mark-white.svg width=98> </a></div></div></header><main class=layout__content><div class=container><div class=page-with-menu><div class="page-with-menu__menu-wrapper print:hidden"><div class=page-with-menu__menu><ul class=tree-menu><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/introduction/>Introduction</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-17-to-0-18/>0.17 to 0.18</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-16-to-0-17/>0.16 to 0.17</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-15-to-0-16/>0.15 to 0.16</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-14-to-0-15/>0.14 to 0.15</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-13-to-0-14/>0.13 to 0.14</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-12-to-0-13/>0.12 to 0.13</a></div><li class="tree-menu__item tree-menu__item--active"><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-11-to-0-12/>0.11 to 0.12</a><nav aria-label="On This Page" class="on-this-page tree-menu__toc" data-highlight-intrapage-link><ul><li><a href=#api-updates-to-the-animationplayer>API updates to the AnimationPlayer</a><li><a href=#fix-run-once-runners>Fix run-once runners</a><li><a href=#add-support-for-khr-materials-emissive-strength>Add support for KHR_materials_emissive_strength</a><li><a href=#bevy-asset-v2>Bevy Asset V2</a> <ul><li><a href=#migrating-a-custom-asset-loader>Migrating a custom asset loader</a><li><a href=#asset-hot-reloading>Asset hot-reloading</a><li><a href=#labeled-assets>Labeled assets</a><li><a href=#using-assets>Using assets</a><li><a href=#asset-events>Asset events</a><li><a href=#untypedhandle>UntypedHandle</a></ul><li><a href=#copy-on-write-assetpaths>Copy on Write AssetPaths</a><li><a href=#removed-anyhow>Removed anyhow</a><li><a href=#non-blocking-load-untyped-using-a-wrapper-asset>Non-blocking load_untyped using a wrapper asset</a><li><a href=#reflect-typepath-part-2>reflect: TypePath part 2</a><li><a href=#more-ergonomic-spatial-audio>More ergonomic spatial audio</a><li><a href=#simplify-parallel-iteration-methods>Simplify parallel iteration methods</a><li><a href=#fix-safety-invariants-for-worldquery-fetch-and-simplify-cloning>Fix safety invariants for WorldQuery::fetch and simplify cloning</a><li><a href=#opt-out-multi-threaded-feature-flag>Opt-out multi-threaded feature flag</a><li><a href=#refactor-build-schedule-and-related-errors>Refactor build_schedule and related errors</a><li><a href=#add-system-map-for-transforming-the-output-of-a-system>Add system.map(...) for transforming the output of a system</a><li><a href=#replaced-entitymap-with-hashmap>Replaced EntityMap with HashMap</a><li><a href=#rename-manualeventiterator>Rename ManualEventIterator</a><li><a href=#replaced-entitycommand-implementation-for-fnonce>Replaced EntityCommand Implementation for FnOnce</a><li><a href=#move-schedule-name-into-schedule>Move schedule name into Schedule</a><li><a href=#refactor-eventreader-iter-to-read>Refactor EventReader::iter to read</a><li><a href=#replace-intosystemsetconfig-with-intosystemsetconfigs>Replace IntoSystemSetConfig with IntoSystemSetConfigs</a><li><a href=#moved-get-component-unchecked-mut-from-query-to-querystate>Moved get_component(_unchecked_mut) from Query to QueryState</a><li><a href=#fix-naming-on-tick-column-and-componentsparseset-methods>Fix naming on "tick" Column and ComponentSparseSet methods</a><li><a href=#return-a-boolean-from-set-if-neq>Return a boolean from set_if_neq</a><li><a href=#rename-removedcomponents-iter-iter-with-id-to-read-read-with-id>Rename RemovedComponents::iter/iter_with_id to read/read_with_id</a><li><a href=#remove-states-variants-and-remove-enum-only-restriction-its-derive>Remove States::variants and remove enum-only restriction its derive</a><li><a href=#replace-all-labels-with-interned-labels>Replace all labels with interned labels</a><li><a href=#add-configure-schedules-to-app-and-schedules-to-apply-schedulebuildsettings-to-all-schedules>Add configure_schedules to App and Schedules to apply ScheduleBuildSettings to all schedules</a><li><a href=#only-run-event-systems-if-they-have-tangible-work-to-do>Only run event systems if they have tangible work to do</a><li><a href=#allow-disjoint-mutable-world-access-via-entitymut>Allow disjoint mutable world access via EntityMut</a><li><a href=#make-builder-types-take-and-return-self>Make builder types take and return Self</a><li><a href=#change-axissettings-livezone-default>Change AxisSettings livezone default</a><li><a href=#rename-bevy-math-rects-conversion-methods>Rename bevy_math::rects conversion methods</a><li><a href=#rename-bezier-to-cubicbezier-for-clarity>Rename Bezier to CubicBezier for clarity</a><li><a href=#add-cubic-prefix-to-all-cubic-curve-generators>Add Cubic prefix to all cubic curve generators</a><li><a href=#remove-the-bevy-dylib-feature>Remove the bevy_dylib feature</a><li><a href=#refactor-path-module-of-bevy-reflect>Refactor path module of bevy_reflect</a><li><a href=#make-it-so-parsedpath-can-be-passed-to-getpath>Make it so ParsedPath can be passed to GetPath</a><li><a href=#remove-typeregistry-re-export-rename>Remove TypeRegistry re-export rename</a><li><a href=#provide-getters-for-fields-of-reflectfromptr>Provide getters for fields of ReflectFromPtr</a><li><a href=#bevy-reflect-fix-ignored-skipped-field-order>bevy_reflect: Fix ignored/skipped field order</a><li><a href=#return-urect-instead-of-uvec2-uvec2-in-camera-physical-viewport-rect>Return URect instead of (UVec2, UVec2) in Camera::physical_viewport_rect</a><li><a href=#update-bevy-window-presentmode-to-mirror-wgpu-presentmode>Update bevy_window::PresentMode to mirror wgpu::PresentMode</a><li><a href=#use-gpuarraybuffer-for-meshuniform>Use GpuArrayBuffer for MeshUniform</a><li><a href=#reduce-the-size-of-meshuniform-to-improve-performance>Reduce the size of MeshUniform to improve performance</a><li><a href=#reorder-render-sets-refactor-bevy-sprite-to-take-advantage>Reorder render sets, refactor bevy_sprite to take advantage</a><li><a href=#split-computedvisibility-into-two-components-to-allow-for-accurate-change-detection-and-speed-up-visibility-propagation>Split ComputedVisibility into two components to allow for accurate change detection and speed up visibility propagation</a><li><a href=#cleanup-visibility-module>Cleanup visibility module</a><li><a href=#allow-other-plugins-to-create-renderer-resources>Allow other plugins to create renderer resources</a><li><a href=#use-entityhashmap-entity-t-for-render-world-entity-storage-for-better-performance>Use EntityHashMap&LTEntity, T> for render world entity storage for better performance</a><li><a href=#pcf-for-directionallight-spotlight-shadows>PCF For DirectionalLight/SpotLight Shadows</a><li><a href=#use-material-for-wireframes>use Material for wireframes</a><li><a href=#deferred-renderer>Deferred Renderer</a><li><a href=#pbr-shader-cleanup>pbr shader cleanup</a><li><a href=#prepass-shader-def-cleanup>*_PREPASS Shader Def Cleanup</a><li><a href=#allow-extensions-to-standardmaterial>Allow extensions to StandardMaterial</a><li><a href=#variable-meshpipeline-view-bind-group-layout>Variable MeshPipeline View Bind Group Layout</a><li><a href=#update-shader-imports>Update shader imports</a><li><a href=#bind-group-entries>Bind group entries</a><li><a href=#detect-cubemap-for-dds-textures>Detect cubemap for dds textures</a><li><a href=#add-convenient-methods-for-image>Add convenient methods for Image</a><li><a href=#use-specular-occlusion-term-to-consistently-extinguish-fresnel-on-ambient-and-environment-map-lights>Use “specular occlusion” term to consistently extinguish fresnel on Ambient and Environment Map lights</a><li><a href=#fix-fog-color-being-inaccurate>Fix fog color being inaccurate</a><li><a href=#image-sampler-improvements>Image Sampler Improvements</a><li><a href=#standardmaterial-light-transmission>StandardMaterial Light Transmission</a><li><a href=#increase-default-normal-bias-to-avoid-common-artifacts>Increase default normal bias to avoid common artifacts</a><li><a href=#make-directionallight-cascades-computation-generic-over-cameraprojection>Make DirectionalLight Cascades computation generic over CameraProjection</a><li><a href=#move-skin-code-to-a-separate-module>Move skin code to a separate module</a><li><a href=#move-scene-spawner-systems-to-spawnscene-schedule>Move scene spawner systems to SpawnScene schedule</a><li><a href=#remove-resource-and-add-debug-to-taskpooloptions>Remove Resource and add Debug to TaskPoolOptions</a><li><a href=#global-taskpool-api-improvements>Global TaskPool API improvements</a><li><a href=#unify-fixedtime-and-time-while-fixing-several-problems>Unify FixedTime and Time while fixing several problems</a><li><a href=#change-the-default-for-the-measure-func-field-of-contentsize-to-none>Change the default for the measure_func field of ContentSize to None.</a><li><a href=#change-uiscale-to-a-tuple-struct>Change UiScale to a tuple struct</a><li><a href=#cleanup-some-bevy-text-pipeline-rs>Cleanup some bevy_text pipeline.rs</a><li><a href=#make-gridplacement-s-fields-non-zero-and-add-accessor-functions>Make GridPlacement's fields non-zero and add accessor functions.</a><li><a href=#remove-val-s-try-arithmetic-methods>Remove Val's try_* arithmetic methods</a><li><a href=#rename-val-evaluate-to-resolve-and-implement-viewport-variant-support>Rename Val evaluate to resolve and implement viewport variant support</a><li><a href=#textlayoutinfo-size-should-hold-the-drawn-size-of-the-text-and-not-a-scaled-value>TextLayoutInfo::size should hold the drawn size of the text, and not a scaled value.</a><li><a href=#have-a-separate-implicit-viewport-node-per-root-node-make-viewport-node-display-grid>Have a separate implicit viewport node per root node + make viewport node Display::Grid</a><li><a href=#rename-num-font-atlases-to-len>Rename num_font_atlases to len.</a><li><a href=#various-accessibility-api-updates>Various accessibility API updates.</a><li><a href=#add-some-more-docs-for-bevy-text>Add some more docs for bevy_text.</a><li><a href=#update-ui-alignment-docs>Update UI alignment docs</a><li><a href=#add-option-to-toggle-window-control-buttons>Add option to toggle window control buttons</a><li><a href=#improve-bevy-winit-documentation>Improve bevy_winit documentation</a><li><a href=#work-around-naga-wgpu-wgsl-instance-index-glsl-gl-instanceid-bug-on-webgl2>Work around naga/wgpu WGSL instance_index -> GLSL gl_InstanceID bug on WebGL2</a><li><a href=#remove-intoiterator-impl-for-mut-eventreader>Remove IntoIterator impl for &mut EventReader</a><li><a href=#update-default-clearcolor-to-better-match-bevy-s-branding>Update default `ClearColor`` to better match Bevy's branding</a><li><a href=#view-transformations>View Transformations</a></ul></nav></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-10-to-0-11/>0.10 to 0.11</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-9-to-0-10/>0.9 to 0.10</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-8-to-0-9/>0.8 to 0.9</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-7-to-0-8/>0.7 to 0.8</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-6-to-0-7/>0.6 to 0.7</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-5-to-0-6/>0.5 to 0.6</a></div><li class=tree-menu__item><div class=tree-menu__label><a class=tree-menu__link href=/learn/migration-guides/0-4-to-0-5/>0.4 to 0.5</a></div></ul></div></div><div class=page-with-menu__content><div class=docs-page><div class=docs-content><h1>Migration Guide: 0.11 to 0.12</h1><div class=media-content><p>Bevy relies heavily on improvements in the Rust language and compiler. As a result, the Minimum Supported Rust Version (MSRV) is "the latest stable release" of Rust.<div class=migration-guide-legacy><h3 id=api-updates-to-the-animationplayer><a href=https://github.com/bevyengine/bevy/pull/9002>API updates to the AnimationPlayer</a> <a class=anchor-link href=#api-updates-to-the-animationplayer>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Animation</div></div><p>Some methods on <a href=https://docs.rs/bevy/0.12.0/bevy/animation/struct.AnimationPlayer.html><code>AnimationPlayer</code></a> have changed.<ul><li><code>elapsed</code> was removed. Use <code>seek_time</code>.<li><code>set_elapsed</code> was removed. Use <code>seek_to</code>.<li><code>stop_repeating</code> was removed. Use <code>set_repeat(RepeatAnimation::Never)</code>.</ul><p>If you were manually resetting animation state, you can use the new <code>replay</code> method instead.<h3 id=fix-run-once-runners><a href=https://github.com/bevyengine/bevy/pull/10195>Fix run-once runners</a> <a class=anchor-link href=#fix-run-once-runners>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>App</div></div><p><code>app.ready()</code> has been replaced by <code>app.plugins_state()</code> which will return more details on the current state of plugins in the app<h3 id=add-support-for-khr-materials-emissive-strength><a href=https://github.com/bevyengine/bevy/pull/9553>Add support for KHR_materials_emissive_strength</a> <a class=anchor-link href=#add-support-for-khr-materials-emissive-strength>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><p>The GLTF asset loader will now factor in <code>emissiveStrength</code> when converting to Bevy’s <code>StandardMaterial::emissive</code>. Blender will export emissive materials using this field. Remove the field from your GLTF files or manually modify your materials post-asset-load to match how Bevy would load these files in previous versions.<h3 id=bevy-asset-v2><a href=https://github.com/bevyengine/bevy/pull/8624>Bevy Asset V2</a> <a class=anchor-link href=#bevy-asset-v2>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><h4 id=migrating-a-custom-asset-loader>Migrating a custom asset loader <a class=anchor-link href=#migrating-a-custom-asset-loader>#</a></h4><p>Existing asset loaders will need a few small changes to get them to work with Bevy Assets V2.<p>First, you’ll need to add the asset type as an associated type of the loader. This type is called <code>Asset</code> and represents the type of the “default asset” produced by the loader.<p>You’ll also need to add a <code>Settings</code> type which represents options that can be passed to the loader when you request an asset. If your asset has no settings, then you can just set it to the unit type.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyAssetLoader</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">AssetLoader <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyAssetLoader</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">Asset</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> MyAsset<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">Settings</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></code></pre><p>You’ll need to make a couple small changes to the <code>load</code> function as well. The load function now takes a <code>settings</code> parameter whose type is, you guessed it, <code>Settings</code>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">load</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-variable z-parameter z-rust">self</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-modifier z-rust">mut</span> Reader,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">settings</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Settings,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">load_context</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-modifier z-rust">mut</span> LoadContext,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    </span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust">BoxedFuture<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span>, <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Asset, <span class="z-meta z-path z-rust">anyhow<span class="z-punctuation z-accessor z-rust">::</span></span>Error<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></code></pre><p>Again, if you are not using settings, then you can just ignore the parameter (prefix it with “_”).<p>Also, the second argument is now a reader rather than vector of bytes. If your existing code expects bytes, you can simply read the entire stream:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">load</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-variable z-parameter z-rust">self</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-modifier z-rust">mut</span> Reader,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_settings</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Settings,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">load_context</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-modifier z-rust">mut</span> LoadContext,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    </span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust">BoxedFuture<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span>, <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Asset, <span class="z-meta z-path z-rust">anyhow<span class="z-punctuation z-accessor z-rust">::</span></span>Error<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Box</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>pin<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>async <span class="z-storage z-modifier z-rust">move</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> bytes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Vec</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read_to_end</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>await<span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></code></pre><p>Finally, you’ll need to write the code which returns the default asset. This used to be done via a call to <code>load_context.set_default_asset()</code>, however in V2 you simply return the asset from the <code>load</code> function:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">load</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-variable z-parameter z-rust">self</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-modifier z-rust">mut</span> Reader,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_settings</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Settings,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">load_context</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-modifier z-rust">mut</span> LoadContext,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    </span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust">BoxedFuture<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span>, <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Asset, <span class="z-meta z-path z-rust">anyhow<span class="z-punctuation z-accessor z-rust">::</span></span>Error<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Box</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>pin<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>async <span class="z-storage z-modifier z-rust">move</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> bytes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Vec</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read_to_end</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>await<span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> asset<span class="z-punctuation z-separator z-rust">:</span> MyAsset <span class="z-keyword z-operator z-assignment z-rust">=</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">serde_json<span class="z-punctuation z-accessor z-rust">::</span></span>from_slice<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">expect</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>unable to decode asset<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Ok</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>asset</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></code></pre><p>To use the new loader, make sure you register both the loader and the asset type:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">register_asset_loader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyAssetLoader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">init_asset<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyAsset<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><h4 id=asset-hot-reloading>Asset hot-reloading <a class=anchor-link href=#asset-hot-reloading>#</a></h4><p>The feature <code>filesystem_watcher</code> has been renamed to <code>file_watcher</code>. In addition, you no longer need to manually configure the <code>ChangeWatcher</code> in the <code>AssetPlugin</code> as it is now configured automatically when the feature is enabled.<h4 id=labeled-assets>Labeled assets <a class=anchor-link href=#labeled-assets>#</a></h4><p>If your loader allows labeled assets, there are a couple of different ways to handle them. The simplest is to call <code>load_context.labeled_asset_scope</code>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Assume `asset.children` is a HashMap or something.
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Using `drain` here so that we take ownership and don't end up with
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> multiple references to the same asset.
</span></span><span class="z-source z-rust">asset<span class="z-punctuation z-accessor z-dot z-rust">.</span>children<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">drain</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">for_each</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-variable z-parameter z-rust">label</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">mut</span> <span class="z-variable z-parameter z-rust">item</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">labeled_asset_scope</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>label<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">lc</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Do any additional processing on the item
</span></span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Use 'lc' to load dependencies
</span></span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">        item
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>You can use the provided load context (<code>lc</code>) to load additional assets. These will automatically be registered as dependencies of the labeled asset.<h4 id=using-assets>Using assets <a class=anchor-link href=#using-assets>#</a></h4><p>The actual call to <code>load</code> hasn’t changed:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> handle <span class="z-keyword z-operator z-assignment z-rust">=</span> server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>path/to/my/asset.json<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> data <span class="z-keyword z-operator z-assignment z-rust">=</span> assets<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h4 id=asset-events>Asset events <a class=anchor-link href=#asset-events>#</a></h4><p>There are a few changes to asset events. The event no longer contains a <code>handle</code> field, instead the event contains a field called <code>id</code>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-control z-rust">for</span> ev <span class="z-keyword z-operator z-rust">in</span> ev_template<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">match</span> ev <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-path z-rust">AssetEvent<span class="z-punctuation z-accessor z-rust">::</span></span>Added <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> id </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Asset added<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-path z-rust">AssetEvent<span class="z-punctuation z-accessor z-rust">::</span></span>LoadedWithDependencies <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> id </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Asset loaded<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-path z-rust">AssetEvent<span class="z-punctuation z-accessor z-rust">::</span></span>Modified <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> id </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Asset modified<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-path z-rust">AssetEvent<span class="z-punctuation z-accessor z-rust">::</span></span>Removed <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> id </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Asset removed<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><p>The <code>id</code> can be used to get access to the asset data, the asset’s path or load status. Asset handles also contain an <code>id</code> field which can be used to compare for equality:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-path z-rust">AssetEvent<span class="z-punctuation z-accessor z-rust">::</span></span>Modified <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> id </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> cmp <span class="z-keyword z-operator z-rust">in</span> query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">       <span class="z-keyword z-control z-rust">if</span> cmp<span class="z-punctuation z-accessor z-dot z-rust">.</span>handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-comparison z-rust">==</span> id <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">           <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Found it!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">       </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><p>Also, as you may have noticed, the set of events has changed. The most important of these is <code>LoadedWithDependencies</code> which tells you that the asset and all its dependencies have finished loading into memory.<h4 id=untypedhandle><code>UntypedHandle</code> <a class=anchor-link href=#untypedhandle>#</a></h4><p><code>HandleUntyped</code> has been renamed to <code>UntypedHandle</code>. <code>HandleId</code> has been replaced with <code>UntypedAssetId</code> and its typed equivalent <code>AssetId&LTT></code>.<p>The new way to construct an untyped handle looks like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">MESH_HANDLE</span><span class="z-punctuation z-separator z-rust">:</span> HandleUntyped <span class="z-keyword z-operator z-assignment z-rust">=</span>
</span><span class="z-source z-rust">    <span class="z-meta z-path z-rust">HandleUntyped<span class="z-punctuation z-accessor z-rust">::</span></span>weak_from_u64<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Mesh<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">TYPE_UUID</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-rust">0x1f40128bac02a9b</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">MESH_HANDLE</span><span class="z-punctuation z-separator z-rust">:</span> UntypedHandle <span class="z-keyword z-operator z-assignment z-rust">=</span>
</span><span class="z-source z-rust">    <span class="z-meta z-path z-rust">UntypedHandle<span class="z-punctuation z-accessor z-rust">::</span></span>Weak<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">UntypedAssetId<span class="z-punctuation z-accessor z-rust">::</span></span>Uuid <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> type_id<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">TypeId<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">of<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Mesh<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> uuid<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Uuid<span class="z-punctuation z-accessor z-rust">::</span></span>from_u128<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-hexadecimal z-rust">0x1f40128bac02a9b</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=copy-on-write-assetpaths><a href=https://github.com/bevyengine/bevy/pull/9729>Copy on Write AssetPaths</a> <a class=anchor-link href=#copy-on-write-assetpaths>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">AssetPath<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>logo.png<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-type z-rust">None</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">AssetPath<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>logo.png<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">AssetPath<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>scene.gltf<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Mesh0<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">AssetPath<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>scene.gltf<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_label</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Mesh0<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p><code>AssetPath</code> now serializes as <code>AssetPath("some_path.extension#Label")</code> instead of as <code>AssetPath { path: "some_path.extension", label: Some("Label) }</code><h3 id=removed-anyhow><a href=https://github.com/bevyengine/bevy/pull/10003>Removed <code>anyhow</code></a> <a class=anchor-link href=#removed-anyhow>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><ul><li><code>anyhow</code> is no longer exported by <code>bevy_asset</code>; Add it to your own project (if required).<li><code>AssetLoader</code> and <code>AssetSaver</code> have an associated type <code>Error</code>; Define an appropriate error type (e.g., using <code>thiserror</code>), or use a pre-made error type (e.g., <code>anyhow::Error</code>). Note that using <code>anyhow::Error</code> is a drop-in replacement.<li><code>AssetLoaderError</code> has been removed; Define a new error type, or use an alternative (e.g., <code>anyhow::Error</code>)<li>All the first-party <code>AssetLoader</code>s and <code>AssetSaver</code>s now return relevant (and narrow) error types instead of a single ambiguous type; Match over the specific error type, or encapsulate (<code>Box&LTdyn></code>, <code>thiserror</code>, <code>anyhow</code>, etc.)</ul><h3 id=non-blocking-load-untyped-using-a-wrapper-asset><a href=https://github.com/bevyengine/bevy/pull/10198>Non-blocking load_untyped using a wrapper asset</a> <a class=anchor-link href=#non-blocking-load-untyped-using-a-wrapper-asset>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div></div><p>Whenever possible use the typed API in order to directly get a handle to your asset. If you do not know the type or need to use <code>load_untyped</code> for a different reason, Bevy 0.12 introduces an additional layer of indirection. The asset server will return a handle to a <code>LoadedUntypedAsset</code>, which will load in the background. Once it is loaded, the untyped handle to the asset file can be retrieved from the <code>LoadedUntypedAsset</code>s field <code>handle</code>.<h3 id=reflect-typepath-part-2><a href=https://github.com/bevyengine/bevy/pull/8768>reflect: <code>TypePath</code> part 2</a> <a class=anchor-link href=#reflect-typepath-part-2>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Assets</div><div class=migration-guide-area-tag>Reflection</div></div><ul><li>Rely on <code>TypePath</code> instead of <code>std::any::type_name</code> for all stability guarantees and for use in all reflection contexts, this is used through with one of the following APIs: <ul><li><code>TypePath::type_path</code> if you have a concrete type and not a value.<li><code>DynamicTypePath::reflect_type_path</code> if you have an <code>dyn Reflect</code> value without a concrete type.<li><code>TypeInfo::type_path</code> for use through the registry or if you want to work with the represented type of a <code>DynamicFoo</code>.</ul><li>Remove <code>type_name</code> from manual <code>Reflect</code> implementations.<li>Use <code>type_path</code> and <code>type_path_table</code> in place of <code>type_name</code> on <code>TypeInfo</code>-like structs.<li>Use <code>get_with_type_path(_mut)</code> over <code>get_with_type_name(_mut)</code>.</ul><h3 id=more-ergonomic-spatial-audio><a href=https://github.com/bevyengine/bevy/pull/9800>More ergonomic spatial audio</a> <a class=anchor-link href=#more-ergonomic-spatial-audio>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Audio</div></div><p>Spatial audio now automatically uses the transform of the <code>AudioBundle</code> and of an entity with a <code>SpatialListener</code> component.<p>If you were manually scaling emitter/listener positions, you can use the <code>spatial_scale</code> field of <code>AudioPlugin</code> instead.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    SpatialAudioBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        source<span class="z-punctuation z-separator z-rust">:</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>sounds/Windless Slopes.ogg<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        settings<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">PlaybackSettings<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">LOOP</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        spatial<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">SpatialSettings<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>listener_position<span class="z-punctuation z-separator z-rust">,</span> gap<span class="z-punctuation z-separator z-rust">,</span> emitter_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">update</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">emitter_query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span>Transform, <span class="z-keyword z-operator z-rust">&</span>SpatialAudioSink<span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">listener_query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>Transform, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Listener<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> listener <span class="z-keyword z-operator z-assignment z-rust">=</span> listener_query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">single</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>transform<span class="z-punctuation z-separator z-rust">,</span> sink</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>emitter_query <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        sink<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_emitter_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>transform<span class="z-punctuation z-accessor z-dot z-rust">.</span>translation</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        sink<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_listener_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">*</span>listener<span class="z-punctuation z-separator z-rust">,</span> gap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-path z-rust">SpatialBundle<span class="z-punctuation z-accessor z-rust">::</span></span>from_transform<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_translation<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>emitter_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    AudioBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        source<span class="z-punctuation z-separator z-rust">:</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>sounds/Windless Slopes.ogg<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        settings<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">PlaybackSettings<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">LOOP</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_spatial</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-language z-rust">true</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-path z-rust">SpatialBundle<span class="z-punctuation z-accessor z-rust">::</span></span>from_transform<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_translation<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>listener_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-meta z-path z-rust">SpatialListener<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>gap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=simplify-parallel-iteration-methods><a href=https://github.com/bevyengine/bevy/pull/8854>Simplify parallel iteration methods</a> <a class=anchor-link href=#simplify-parallel-iteration-methods>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p>The method <code>QueryParIter::for_each_mut</code> has been deprecated and is no longer functional. Use <code>for_each</code> instead, which now supports mutable queries.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust">query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_iter_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">for_each_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-keyword z-operator z-range z-rust">...</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_iter_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">for_each</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-keyword z-operator z-range z-rust">...</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>The method <code>QueryParIter::for_each</code> now takes ownership of the <code>QueryParIter</code>, rather than taking a shared reference.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> par_iter <span class="z-keyword z-operator z-assignment z-rust">=</span> my_query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">batching_strategy</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_batching_strategy</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">par_iter<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">for_each</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...Do stuff with x...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    par_iter<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">for_each</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">y</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...Do nested stuff with y...
</span></span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">my_query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">batching_strategy</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_batching_strategy</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">for_each</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...Do stuff with x...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    my_query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">batching_strategy</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_batching_strategy</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">for_each</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">y</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...Do nested stuff with y...
</span></span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=fix-safety-invariants-for-worldquery-fetch-and-simplify-cloning><a href=https://github.com/bevyengine/bevy/pull/8246>Fix safety invariants for <code>WorldQuery::fetch</code> and simplify cloning</a> <a class=anchor-link href=#fix-safety-invariants-for-worldquery-fetch-and-simplify-cloning>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p><strong><code>fetch</code> invariants</strong><p>The function <code>WorldQuery::fetch</code> has had the following safety invariant added:<blockquote><p>If <code>update_component_access</code> includes any mutable accesses, then the caller must ensure that <code>fetch</code> is called no more than once for each <code>entity</code>/<code>table_row</code> in each archetype. If <code>Self</code> implements <code>ReadOnlyWorldQuery</code>, then this can safely be called multiple times.</blockquote><p>This invariant was always required for soundness, but was previously undocumented. If you called this function manually anywhere, you should check to make sure that this invariant is not violated.<p><strong>Removed <code>clone_fetch</code></strong><p>The function <code>WorldQuery::clone_fetch</code> has been removed. The associated type <code>WorldQuery::Fetch</code> now has the bound <code>Clone</code>.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">MyFetch</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> ... </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">unsafe</span> <span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">WorldQuery <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyQuery</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">Fetch</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span><span class="z-keyword z-operator z-comparison z-rust">></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-generic z-rust">MyFetch<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">unsafe</span> <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">clone_fetch</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">fetch</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span><span class="z-meta z-generic z-rust">Fetch<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span><span class="z-meta z-generic z-rust">Fetch<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        MyFetch <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            field1<span class="z-punctuation z-separator z-rust">:</span> fetch<span class="z-punctuation z-accessor z-dot z-rust">.</span>field1<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            field2<span class="z-punctuation z-separator z-rust">:</span> fetch<span class="z-punctuation z-accessor z-dot z-rust">.</span>field2<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Clone</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">MyFetch</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> ... </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">unsafe</span> <span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">WorldQuery <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyQuery</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">Fetch</span><span class="z-keyword z-operator z-comparison z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span><span class="z-keyword z-operator z-comparison z-rust">></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-generic z-rust">MyFetch<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'w</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h3 id=opt-out-multi-threaded-feature-flag><a href=https://github.com/bevyengine/bevy/pull/9269>Opt-out <code>multi-threaded</code> feature flag</a> <a class=anchor-link href=#opt-out-multi-threaded-feature-flag>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p>The <code>multi-threaded</code> feature in <code>bevy_ecs</code> and <code>bevy_tasks</code> is no longer enabled by default. However, this remains a default feature for the umbrella <code>bevy</code> crate.<p>if you are using <code>bevy</code> without <code>default-features</code>, or if you depend on <code>bevy_ecs</code> or <code>bevy_tasks</code> directly, you most likely want to enable this to allow systems to run in parallel.<h3 id=refactor-build-schedule-and-related-errors><a href=https://github.com/bevyengine/bevy/pull/9579>Refactor build_schedule and related errors</a> <a class=anchor-link href=#refactor-build-schedule-and-related-errors>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p><code>ScheduleBuildError</code> now has strings in more of its variants. You may need to adjust code that is handling these variants.<h3 id=add-system-map-for-transforming-the-output-of-a-system><a href=https://github.com/bevyengine/bevy/pull/8526>Add <code>system.map(...)</code> for transforming the output of a system</a> <a class=anchor-link href=#add-system-map-for-transforming-the-output-of-a-system>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p>The <code>system_adapter</code> functions have been deprecated: use <code>.map</code> instead, which is a lightweight alternative to <code>.pipe</code>.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pipe</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">system_adapter<span class="z-punctuation z-accessor z-rust">::</span></span>ignore</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pipe</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">system_adapter<span class="z-punctuation z-accessor z-rust">::</span></span>unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pipe</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">system_adapter<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">T<span class="z-punctuation z-accessor z-rust">::</span></span>from</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">mem<span class="z-punctuation z-accessor z-rust">::</span></span>drop</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-type z-rust">Result</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">T<span class="z-punctuation z-accessor z-rust">::</span></span>from</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pipe</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">system_adapter<span class="z-punctuation z-accessor z-rust">::</span></span>info</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pipe</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">system_adapter<span class="z-punctuation z-accessor z-rust">::</span></span>dbg</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pipe</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">system_adapter<span class="z-punctuation z-accessor z-rust">::</span></span>warn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">pipe</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">system_adapter<span class="z-punctuation z-accessor z-rust">::</span></span>error</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">bevy_utils<span class="z-punctuation z-accessor z-rust">::</span></span>info</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">bevy_utils<span class="z-punctuation z-accessor z-rust">::</span></span>dbg</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">bevy_utils<span class="z-punctuation z-accessor z-rust">::</span></span>warn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">bevy_utils<span class="z-punctuation z-accessor z-rust">::</span></span>error</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><h3 id=replaced-entitymap-with-hashmap><a href=https://github.com/bevyengine/bevy/pull/9461>Replaced EntityMap with HashMap</a> <a class=anchor-link href=#replaced-entitymap-with-hashmap>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><ul><li>Calls to <code>EntityMap::world_scope</code> can be directly replaced with the following: <code>map.world_scope(&mut world)</code> -> <code>world.world_scope(&mut map)</code><li>Calls to legacy <code>EntityMap</code> methods such as <code>EntityMap::get</code> must explicitly include de/reference symbols: <code>let entity = map.get(parent);</code> -> <code>let &entity = map.get(&parent);</code></ul><h3 id=rename-manualeventiterator><a href=https://github.com/bevyengine/bevy/pull/9592>Rename <code>ManualEventIterator</code></a> <a class=anchor-link href=#rename-manualeventiterator>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p>The type <code>ManualEventIterator</code> has been renamed to <code>EventIterator</code>. Additionally, <code>ManualEventIteratorWithId</code> has been renamed to <code>EventIteratorWithId</code>.<h3 id=replaced-entitycommand-implementation-for-fnonce><a href=https://github.com/bevyengine/bevy/pull/9604>Replaced <code>EntityCommand</code> Implementation for <code>FnOnce</code></a> <a class=anchor-link href=#replaced-entitycommand-implementation-for-fnonce>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p><strong>1. New-Type <code>FnOnce</code></strong><p>Create an <code>EntityCommand</code> type which implements the method you previously wrote:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">ClassicEntityCommand</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>F<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-meta z-struct z-rust"></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>pub F</span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span></span><span class="z-meta z-impl z-rust"><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>F<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-impl z-rust"> EntityCommand <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">ClassicEntityCommand</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>F<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"></span><span class="z-meta z-impl z-rust"><span class="z-keyword z-other z-rust">where</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust">    F<span class="z-punctuation z-separator z-rust">:</span> FnOnce<span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> World<span class="z-punctuation z-section z-group z-end z-rust">)</span> + Send + <span class="z-storage z-modifier z-lifetime z-rust">'static</span>,
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"></span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">apply</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">id</span><span class="z-punctuation z-separator z-rust">:</span> Entity, <span class="z-variable z-parameter z-rust">world</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> World</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>id<span class="z-punctuation z-separator z-rust">,</span> world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>ClassicEntityCommand<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">id</span><span class="z-punctuation z-separator z-rust">:</span> Entity<span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">world</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> World<span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p><strong>2. Extract <code>(Entity, &mut World)</code> from <code>EntityMut</code></strong><p>The method <code>into_world_mut</code> can be used to gain access to the <code>World</code> from an <code>EntityMut</code>.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-entity z-name z-function z-rust">old</span> <span class="z-keyword z-operator z-rust">=</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">id</span><span class="z-punctuation z-separator z-rust">:</span> Entity<span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">world</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> World<span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-entity z-name z-function z-rust">new</span> <span class="z-keyword z-operator z-rust">=</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">entity</span><span class="z-punctuation z-separator z-rust">:</span> EntityWorldMut<span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> id <span class="z-keyword z-operator z-assignment z-rust">=</span> entity<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> world <span class="z-keyword z-operator z-assignment z-rust">=</span> entity<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into_world_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=move-schedule-name-into-schedule><a href=https://github.com/bevyengine/bevy/pull/9600>Move schedule name into <code>Schedule</code></a> <a class=anchor-link href=#move-schedule-name-into-schedule>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p><code>Schedule::new</code> and <code>App::add_schedule</code><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> schedule <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyLabel<span class="z-punctuation z-separator z-rust">,</span> schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> schedule <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyLabel</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>if you aren’t inserting the schedule into the world and are using the schedule directly you can use the default constructor which reuses a default label.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> schedule <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">schedule<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> schedule <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">schedule<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p><code>Schedules::insert</code><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> schedule <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">schedules<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyLabel<span class="z-punctuation z-separator z-rust">,</span> schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> schedule <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyLabel</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">schedules<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p><code>World::add_schedule</code><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> schedule <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyLabel<span class="z-punctuation z-separator z-rust">,</span> schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> schedule <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyLabel</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=refactor-eventreader-iter-to-read><a href=https://github.com/bevyengine/bevy/pull/9631>Refactor <code>EventReader::iter</code> to <code>read</code></a> <a class=anchor-link href=#refactor-eventreader-iter-to-read>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><ul><li>Existing usages of <code>EventReader::iter</code> and <code>EventReader::iter_with_id</code> will have to be changed to <code>EventReader::read</code> and <code>EventReader::read_with_id</code> respectively.<li>Existing usages of <code>ManualEventReader::iter</code> and <code>ManualEventReader::iter_with_id</code> will have to be changed to <code>ManualEventReader::read</code> and <code>ManualEventReader::read_with_id</code> respectively.</ul><h3 id=replace-intosystemsetconfig-with-intosystemsetconfigs><a href=https://github.com/bevyengine/bevy/pull/9247>Replace <code>IntoSystemSetConfig</code> with <code>IntoSystemSetConfigs</code></a> <a class=anchor-link href=#replace-intosystemsetconfig-with-intosystemsetconfigs>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><ul><li>Use <code>App::configure_sets</code> instead of <code>App::configure_set</code><li>Use <code>Schedule::configure_sets</code> instead of <code>Schedule::configure_set</code></ul><h3 id=moved-get-component-unchecked-mut-from-query-to-querystate><a href=https://github.com/bevyengine/bevy/pull/9686>Moved <code>get_component(_unchecked_mut)</code> from <code>Query</code> to <code>QueryState</code></a> <a class=anchor-link href=#moved-get-component-unchecked-mut-from-query-to-querystate>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p><code>use bevy_ecs::system::QueryComponentError;</code> -> <code>use bevy_ecs::query::QueryComponentError;</code><h3 id=fix-naming-on-tick-column-and-componentsparseset-methods><a href=https://github.com/bevyengine/bevy/pull/9744>Fix naming on "tick" Column and ComponentSparseSet methods</a> <a class=anchor-link href=#fix-naming-on-tick-column-and-componentsparseset-methods>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p>The following method names were renamed, from <code>foo_ticks_bar</code> to <code>foo_tick_bar</code> (<code>ticks</code> is now singular, <code>tick</code>):<ul><li><code>ComponentSparseSet::get_added_ticks</code> → <code>get_added_tick</code><li><code>ComponentSparseSet::get_changed_ticks</code> → <code>get_changed_tick</code><li><code>Column::get_added_ticks</code> → <code>get_added_tick</code><li><code>Column::get_changed_ticks</code> → <code>get_changed_tick</code><li><code>Column::get_added_ticks_unchecked</code> → <code>get_added_tick_unchecked</code><li><code>Column::get_changed_ticks_unchecked</code> → <code>get_changed_tick_unchecked</code></ul><h3 id=return-a-boolean-from-set-if-neq><a href=https://github.com/bevyengine/bevy/pull/9801>Return a boolean from <code>set_if_neq</code></a> <a class=anchor-link href=#return-a-boolean-from-set-if-neq>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p>The trait method <code>DetectChangesMut::set_if_neq</code> now returns a boolean value indicating whether or not the value was changed. If you were implementing this function manually, you must now return <code>true</code> if the value was overwritten and <code>false</code> if the value was not.<h3 id=rename-removedcomponents-iter-iter-with-id-to-read-read-with-id><a href=https://github.com/bevyengine/bevy/pull/9778>Rename RemovedComponents::iter/iter_with_id to read/read_with_id</a> <a class=anchor-link href=#rename-removedcomponents-iter-iter-with-id-to-read-read-with-id>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">react_on_removal</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">removed</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">RemovedComponents<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>MyComponent<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> entity <span class="z-keyword z-operator z-rust">in</span> removed<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity<span class="z-punctuation z-separator z-rust">,</span> id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> removed<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter_with_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> entity <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> removed <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> entity <span class="z-keyword z-operator z-rust">in</span> removed<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity<span class="z-punctuation z-separator z-rust">,</span> id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> removed<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read_with_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> entity <span class="z-keyword z-operator z-rust">in</span> removed<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h3 id=remove-states-variants-and-remove-enum-only-restriction-its-derive><a href=https://github.com/bevyengine/bevy/pull/9945>Remove States::variants and remove enum-only restriction its derive</a> <a class=anchor-link href=#remove-states-variants-and-remove-enum-only-restriction-its-derive>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><p><code>States::variants</code> no longer exists. If you relied on this function, consider using a library that provides enum iterators.<h3 id=replace-all-labels-with-interned-labels><a href=https://github.com/bevyengine/bevy/pull/7762>Replace all labels with interned labels</a> <a class=anchor-link href=#replace-all-labels-with-interned-labels>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div></div><ul><li><p>Replace <code>BoxedScheduleLabel</code> and <code>Box&LTdyn ScheduleLabel></code> with <code>InternedScheduleLabel</code> or <code>Interned&LTdyn ScheduleLabel></code>.</p><li><p>Replace <code>BoxedSystemSet</code> and <code>Box&LTdyn SystemSet></code> with <code>InternedSystemSet</code> or <code>Interned&LTdyn SystemSet></code>.</p><li><p>Replace <code>AppLabelId</code> with <code>InternedAppLabel</code> or <code>Interned&LTdyn AppLabel></code>.</p><li><p>Types manually implementing <code>ScheduleLabel</code>, <code>AppLabel</code> or <code>SystemSet</code> need to implement:</p> <ul><li><code>dyn_hash</code> directly instead of implementing <code>DynHash</code><li><code>as_dyn_eq</code></ul><li><p>Pass labels to <code>World::try_schedule_scope</code>, <code>World::schedule_scope</code>, <code>World::try_run_schedule</code>. <code>World::run_schedule</code>, <code>Schedules::remove</code>, <code>Schedules::remove_entry</code>, <code>Schedules::contains</code>, <code>Schedules::get</code> and <code>Schedules::get_mut</code> by value instead of by reference.</p></ul><h3 id=add-configure-schedules-to-app-and-schedules-to-apply-schedulebuildsettings-to-all-schedules><a href=https://github.com/bevyengine/bevy/pull/9514>Add configure_schedules to App and Schedules to apply <code>ScheduleBuildSettings</code> to all schedules</a> <a class=anchor-link href=#add-configure-schedules-to-app-and-schedules-to-apply-schedulebuildsettings-to-all-schedules>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div><div class=migration-guide-area-tag>App</div></div><ul><li>No breaking changes.<li>Adds <code>Schedule::get_build_settings()</code> getter for the schedule’s <code>ScheduleBuildSettings</code>.<li>Can replaced manual configuration of all schedules:</ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-separator z-rust">,</span> schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> app<span class="z-punctuation z-accessor z-dot z-rust">.</span>world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">resource_mut<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Schedules<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    schedule<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_build_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>build_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.l2
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">configure_schedules</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>build_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=only-run-event-systems-if-they-have-tangible-work-to-do><a href=https://github.com/bevyengine/bevy/pull/7728>Only run event systems if they have tangible work to do</a> <a class=anchor-link href=#only-run-event-systems-if-they-have-tangible-work-to-do>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div><div class=migration-guide-area-tag>App</div></div><p><code>Events&LTT>::update_system</code> has been split off from the type and can be found at <code>bevy_ecs::event::event_update_system</code>.<h3 id=allow-disjoint-mutable-world-access-via-entitymut><a href=https://github.com/bevyengine/bevy/pull/9419>Allow disjoint mutable world access via <code>EntityMut</code></a> <a class=anchor-link href=#allow-disjoint-mutable-world-access-via-entitymut>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div><div class=migration-guide-area-tag>Reflection</div></div><p>Removed the method <code>EntityRef::world</code>, to fix a soundness issue with queries. If you need access to <code>&World</code> while using an <code>EntityRef</code>, consider passing the world as a separate parameter.<p><code>EntityMut</code> can no longer perform ‘structural’ world mutations, such as adding or removing components, or despawning the entity. Additionally, <code>EntityMut::world</code>, <code>EntityMut::world_mut</code>, <code>EntityMut::into_world_mut</code>, and <code>EntityMut::world_scope</code> have been removed. Instead, use the newly-added type <code>EntityWorldMut</code>, which is a helper type for working with <code>&mut World</code>.<h3 id=make-builder-types-take-and-return-self><a href=https://github.com/bevyengine/bevy/pull/10001>Make builder types take and return <code>Self</code></a> <a class=anchor-link href=#make-builder-types-take-and-return-self>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>ECS</div><div class=migration-guide-area-tag>Scenes</div></div><p>When using <code>bevy_ecs::DynamicSceneBuilder</code> and <code>bevy_ecs::SceneBuilder</code>, instead of binding the builder to a variable, directly use it. Methods on those types now consume <code>Self</code>, so you will need to re-bind the builder if you don’t <code>build</code> it immediately.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> scene_builder <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">DynamicSceneBuilder<span class="z-punctuation z-accessor z-rust">::</span></span>from_world<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> scene <span class="z-keyword z-operator z-assignment z-rust">=</span> scene_builder<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">extract_entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">extract_entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> scene <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">DynamicSceneBuilder<span class="z-punctuation z-accessor z-rust">::</span></span>from_world<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">   <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">extract_entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>a</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">   <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">extract_entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">   <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">build</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=change-axissettings-livezone-default><a href=https://github.com/bevyengine/bevy/pull/10090>Change <code>AxisSettings</code> livezone default</a> <a class=anchor-link href=#change-axissettings-livezone-default>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Input</div></div><p>The default live zone bounds have been changed from <code>-0.95..=0.95</code> to <code>-1.0..=1.0</code> to align with more common usage. If you were relying on the old default, you can change this by modifying <a href=https://docs.rs/bevy/0.12.0/bevy/input/gamepad/struct.GamepadSettings.html#structfield.default_axis_settings><code>GamepadSettings::default_axis_settings</code></a>.<h3 id=rename-bevy-math-rects-conversion-methods><a href=https://github.com/bevyengine/bevy/pull/9159>Rename bevy_math::rects conversion methods</a> <a class=anchor-link href=#rename-bevy-math-rects-conversion-methods>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Math</div></div><p>Replace <code>Rect::as_urect</code> with <code>Rect::as_irect</code>, <code>Rect::as_rect</code> with <code>Rect::as_urect</code>, and <code>URect::as_urect</code> with <code>URect::as_irect</code>.<h3 id=rename-bezier-to-cubicbezier-for-clarity><a href=https://github.com/bevyengine/bevy/pull/9554>Rename <code>Bezier</code> to <code>CubicBezier</code> for clarity</a> <a class=anchor-link href=#rename-bezier-to-cubicbezier-for-clarity>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Math</div></div><p>Change all <code>Bezier</code> references to <code>CubicBezier</code><h3 id=add-cubic-prefix-to-all-cubic-curve-generators><a href=https://github.com/bevyengine/bevy/pull/10299>Add <code>Cubic</code> prefix to all cubic curve generators</a> <a class=anchor-link href=#add-cubic-prefix-to-all-cubic-curve-generators>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Math</div></div><ul><li>Rename: <code>BSpline</code> -> <code>CubicBSpline</code><li>Rename: <code>CardinalSpline</code> -> <code>CubicCardinalSpline</code><li>Rename: <code>Hermite</code> -> <code>CubicHermite</code></ul><h3 id=remove-the-bevy-dylib-feature><a href=https://github.com/bevyengine/bevy/pull/9516>Remove the bevy_dylib feature</a> <a class=anchor-link href=#remove-the-bevy-dylib-feature>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Meta</div></div><p>If you were using Bevy’s <code>bevy_dylib</code> feature, use Bevy’s <code>dynamic_linking</code> feature instead.<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 0.11</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>features</span> bevy/bevy_dylib</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 0.12</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>features</span> bevy/dynamic_linking</span>
</span></code></pre><pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> 0.11</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>0.11<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>bevy_dylib<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> 0.12</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>0.12<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>dynamic_linking<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span></code></pre><h3 id=refactor-path-module-of-bevy-reflect><a href=https://github.com/bevyengine/bevy/pull/8887>Refactor <code>path</code> module of <code>bevy_reflect</code></a> <a class=anchor-link href=#refactor-path-module-of-bevy-reflect>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Reflection</div></div><p>If you were matching on the <code>Err(ReflectPathError)</code> value returned by <code>GetPath</code> and <code>ParsedPath</code> methods, now only the parse-related errors and the offset are publicly accessible. You can always use the <code>fmt::Display</code> to get a clear error message, but if you need programmatic access to the error types, please open an issue.<h3 id=make-it-so-parsedpath-can-be-passed-to-getpath><a href=https://github.com/bevyengine/bevy/pull/9373>Make it so <code>ParsedPath</code> can be passed to GetPath</a> <a class=anchor-link href=#make-it-so-parsedpath-can-be-passed-to-getpath>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Reflection</div></div><p><code>GetPath</code> now requires <code>Reflect</code>. This reduces a lot of boilerplate on bevy’s side. If you were implementing manually <code>GetPath</code> on your own type, please get in touch!<p><code>ParsedPath::element[_mut]</code> isn’t an inherent method of <code>ParsedPath</code>, you must now import <code>ReflectPath</code>. This is only relevant if you weren’t importing the bevy prelude.<pre class="language-diff z-code" data-lang=diff><code class=language-diff data-lang=diff><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span>use bevy::reflect::ParsedPath;
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>use bevy::reflect::{ParsedPath, ReflectPath};
</span></span><span class="z-source z-diff">
</span><span class="z-source z-diff">parsed_path.element(reflect_type).unwrap()
</span></code></pre><h3 id=remove-typeregistry-re-export-rename><a href=https://github.com/bevyengine/bevy/pull/9807>Remove TypeRegistry re-export rename</a> <a class=anchor-link href=#remove-typeregistry-re-export-rename>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Reflection</div></div><ul><li><code>TypeRegistry</code> as re-exported by the wrapper <code>bevy</code> crate is now <code>TypeRegistryArc</code><li><code>TypeRegistryInternal</code> as re-exported by the wrapper <code>bevy</code> crate is now <code>TypeRegistry</code></ul><h3 id=provide-getters-for-fields-of-reflectfromptr><a href=https://github.com/bevyengine/bevy/pull/9748>Provide getters for fields of ReflectFromPtr</a> <a class=anchor-link href=#provide-getters-for-fields-of-reflectfromptr>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Reflection</div></div><ul><li><code>ReflectFromPtr::as_reflect_ptr</code> is now <code>ReflectFromPtr::as_reflect</code><li><code>ReflectFromPtr::as_reflect_ptr_mut</code> is now <code>ReflectFromPtr::as_reflect_mut</code></ul><h3 id=bevy-reflect-fix-ignored-skipped-field-order><a href=https://github.com/bevyengine/bevy/pull/7575>bevy_reflect: Fix ignored/skipped field order</a> <a class=anchor-link href=#bevy-reflect-fix-ignored-skipped-field-order>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Reflection</div></div><ul><li>Fields marked <code>#[reflect(skip_serializing)]</code> now must implement <code>Default</code> or specify a custom default function with <code>#[reflect(default = "path::to::some_func")]</code></ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyStruct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">  <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">skip_serializing</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">  <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">default <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>get_foo_default<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">  <span class="z-variable z-other z-member z-rust">foo</span><span class="z-punctuation z-separator z-type z-rust">:</span> Foo, <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> &LT- `Foo` does not impl `Default` so requires a custom function
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">  <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">reflect</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">skip_serializing</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">  <span class="z-variable z-other z-member z-rust">bar</span><span class="z-punctuation z-separator z-type z-rust">:</span> Bar, <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> &LT- `Bar` impls `Default`
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Foo</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-rust">i32</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect<span class="z-punctuation z-separator z-rust">,</span> Default</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Bar</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-type z-rust">i32</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">get_foo_default</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> Foo</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  Foo<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">123</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><ul><li><code>SerializationData::new</code> has been changed to expect an iterator of <code>(usize, SkippedField)</code> rather than one of just <code>usize</code></ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">SerializationData<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">3</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into_iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">SerializationData<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">  <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">SkippedField<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>field_0_default_fn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">  <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">3</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">SkippedField<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>field_3_default_fn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into_iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><ul><li><code>Serialization::is_ignored_field</code> has been renamed to <code>Serialization::is_field_skipped</code><li>Fields marked <code>#[reflect(skip_serializing)]</code> are now included in deserialization output. This may affect logic that expected those fields to be absent.</ul><h3 id=return-urect-instead-of-uvec2-uvec2-in-camera-physical-viewport-rect><a href=https://github.com/bevyengine/bevy/pull/9085>Return URect instead of (UVec2, UVec2) in Camera::physical_viewport_rect</a> <a class=anchor-link href=#return-urect-instead-of-uvec2-uvec2-in-camera-physical-viewport-rect>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">view_physical_camera_rect</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">camera_query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>Camera<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> camera <span class="z-keyword z-operator z-assignment z-rust">=</span> camera_query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">single</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>min<span class="z-punctuation z-separator z-rust">,</span> max</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> camera<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">physical_viewport_rect</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-keyword z-control z-rust">return</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">dbg!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>min<span class="z-punctuation z-separator z-rust">,</span> max</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">view_physical_camera_rect</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">camera_query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>Camera<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> camera <span class="z-keyword z-operator z-assignment z-rust">=</span> camera_query<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">single</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>URect <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> min<span class="z-punctuation z-separator z-rust">,</span> max </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> camera<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">physical_viewport_rect</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-keyword z-control z-rust">return</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">dbg!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>min<span class="z-punctuation z-separator z-rust">,</span> max</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h3 id=update-bevy-window-presentmode-to-mirror-wgpu-presentmode><a href=https://github.com/bevyengine/bevy/pull/9230>Update <code>bevy_window::PresentMode</code> to mirror <code>wgpu::PresentMode</code></a> <a class=anchor-link href=#update-bevy-window-presentmode-to-mirror-wgpu-presentmode>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>Handle <code>bevy_window::PresentMode::FifoRelaxed</code> when tweaking window present mode manually.<h3 id=use-gpuarraybuffer-for-meshuniform><a href=https://github.com/bevyengine/bevy/pull/9254>Use GpuArrayBuffer for MeshUniform</a> <a class=anchor-link href=#use-gpuarraybuffer-for-meshuniform>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>Accessing the <code>model</code> member of an individual mesh object’s shader <code>Mesh</code> struct the old way where each <code>MeshUniform</code> was stored at its own dynamic offset:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Vertex</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    @location(0) <span class="z-variable z-other z-member z-rust">position</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">vec3<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">vertex</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">vertex</span><span class="z-punctuation z-separator z-rust">:</span> Vertex</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> VertexOutput</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    var out<span class="z-punctuation z-separator z-rust">:</span> VertexOutput<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    out<span class="z-punctuation z-accessor z-dot z-rust">.</span>clip_position <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">mesh_position_local_to_clip</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        mesh<span class="z-punctuation z-accessor z-dot z-rust">.</span>model<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>vertex<span class="z-punctuation z-accessor z-dot z-rust">.</span>position<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">return</span> out<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>The new way where one needs to index into the array of <code>Mesh</code>es for the batch:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Vertex</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    @builtin(instance_index) <span class="z-variable z-other z-member z-rust">instance_index</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">u32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    @location(0) <span class="z-variable z-other z-member z-rust">position</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">vec3<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">vertex</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">vertex</span><span class="z-punctuation z-separator z-rust">:</span> Vertex</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> VertexOutput</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    var out<span class="z-punctuation z-separator z-rust">:</span> VertexOutput<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    out<span class="z-punctuation z-accessor z-dot z-rust">.</span>clip_position <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">mesh_position_local_to_clip</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        mesh<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>vertex<span class="z-punctuation z-accessor z-dot z-rust">.</span>instance_index<span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>model<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>vertex<span class="z-punctuation z-accessor z-dot z-rust">.</span>position<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">return</span> out<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>Note that using the instance_index is the default way to pass the per-object index into the shader, but if you wish to do custom rendering approaches you can pass it in however you like.<h3 id=reduce-the-size-of-meshuniform-to-improve-performance><a href=https://github.com/bevyengine/bevy/pull/9416>Reduce the size of MeshUniform to improve performance</a> <a class=anchor-link href=#reduce-the-size-of-meshuniform-to-improve-performance>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p><code>Sphere::intersects_obb</code> and <code>Frustum::intersects_obb</code> now take an <code>Affine3A</code> instead of a <code>Mat4</code>. You can use <code>Affine3A::from_mat4</code> or <code>Transform::compute_affine</code> to get an <code>Affine3A</code>.<p><code>MeshUniform</code> now stores its current and previous model transforms as 4x3 matrices. Helper functions were added to bevy_pbr::mesh_functions to unpack the data.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust">var model <span class="z-keyword z-operator z-assignment z-rust">=</span> mesh<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>instance_index<span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>model<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">mesh_functions<span class="z-punctuation z-accessor z-rust">::</span></span>affine_to_square
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">var model <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">affine_to_square</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>mesh<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>instance_index<span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>model</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=reorder-render-sets-refactor-bevy-sprite-to-take-advantage><a href=https://github.com/bevyengine/bevy/pull/9236>Reorder render sets, refactor bevy_sprite to take advantage</a> <a class=anchor-link href=#reorder-render-sets-refactor-bevy-sprite-to-take-advantage>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><ul><li>Assets such as materials and meshes should now be created in <code>PrepareAssets</code> e.g. <code>prepare_assets&LTMesh></code><li>Queueing entities to <code>RenderPhase</code>s continues to be done in <code>Queue</code> e.g. <code>queue_sprites</code><li>Preparing resources (textures, buffers, etc.) should now be done in <code>PrepareResources</code>, e.g. <code>prepare_prepass_textures</code>, <code>prepare_mesh_uniforms</code><li>Prepare bind groups should now be done in <code>PrepareBindGroups</code> e.g. <code>prepare_mesh_bind_group</code><li>Any batching or instancing can now be done in <code>Prepare</code> where the order of the phase items is known e.g. <code>prepare_sprites</code></ul><h3 id=split-computedvisibility-into-two-components-to-allow-for-accurate-change-detection-and-speed-up-visibility-propagation><a href=https://github.com/bevyengine/bevy/pull/9497>Split <code>ComputedVisibility</code> into two components to allow for accurate change detection and speed up visibility propagation</a> <a class=anchor-link href=#split-computedvisibility-into-two-components-to-allow-for-accurate-change-detection-and-speed-up-visibility-propagation>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>The <code>ComputedVisibility</code> component has been split into <code>InheritedVisibility</code> and <code>ViewVisibility</code>. Replace any usages of <code>ComputedVisibility::is_visible_in_hierarchy</code> with <code>InheritedVisibility::get</code>, and replace <code>ComputedVisibility::is_visible_in_view</code> with <code>ViewVisibility::get</code>.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11:
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>VisibilityBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    visibility<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Visibility<span class="z-punctuation z-accessor z-rust">::</span></span>Inherited<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    computed_visibility<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">ComputedVisibility<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12:
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>VisibilityBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    visibility<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">Visibility<span class="z-punctuation z-accessor z-rust">::</span></span>Inherited<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    inherited_visibility<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">InheritedVisibility<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    view_visibility<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">ViewVisibility<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11:
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">q</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>ComputedVisibility<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> vis <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>q <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> vis<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">is_visible_in_hierarchy</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12:
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">q</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>InheritedVisibility<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> inherited_visibility <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>q <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> inherited_visibility<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span></span></span></code></pre><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11:
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">q</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>ComputedVisibility<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> vis <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>q <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> vis<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">is_visible_in_view</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12:
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">q</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span>ViewVisibility<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> view_visibility <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>q <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> view_visibility<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span></span></span></code></pre><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11:
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">q</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> ComputedVisibility<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> vis <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> q <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        vis<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_visible_in_view</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12:
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">q</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> ViewVisibility<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> view_visibility <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> q <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        view_visibility<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span></span></code></pre><h3 id=cleanup-visibility-module><a href=https://github.com/bevyengine/bevy/pull/9850>Cleanup <code>visibility</code> module</a> <a class=anchor-link href=#cleanup-visibility-module>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>The <code>check_visibility</code> system’s <code>Option<&NoFrustumCulling></code> parameter has been replaced by <code>Has&LTNoFrustumCulling></code>, if you were calling it manually, you should change the type to match it<h3 id=allow-other-plugins-to-create-renderer-resources><a href=https://github.com/bevyengine/bevy/pull/9925>Allow other plugins to create renderer resources</a> <a class=anchor-link href=#allow-other-plugins-to-create-renderer-resources>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>The <code>RenderPlugin</code> now takes a <code>RenderCreation</code> enum instead of <code>WgpuSettings</code>. <code>RenderSettings::default()</code> returns <code>RenderSettings::Automatic(WgpuSettings::default())</code>. <code>RenderSettings</code> also implements <code>From&LTWgpuSettings></code>.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust">RenderPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    wgpu_settings<span class="z-punctuation z-separator z-rust">:</span> WgpuSettings <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust">RenderPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    render_creation<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">RenderCreation<span class="z-punctuation z-accessor z-rust">::</span></span>Automatic<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>WgpuSettings <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> or
</span></span><span class="z-source z-rust">RenderPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    render_creation<span class="z-punctuation z-separator z-rust">:</span> WgpuSettings <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><h3 id=use-entityhashmap-entity-t-for-render-world-entity-storage-for-better-performance><a href=https://github.com/bevyengine/bevy/pull/9903>Use EntityHashMap&LTEntity, T> for render world entity storage for better performance</a> <a class=anchor-link href=#use-entityhashmap-entity-t-for-render-world-entity-storage-for-better-performance>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>Previously the render app extracted mesh entities and their component data from the main world and stored them as entities and components in the render world. Now they are extracted into essentially <code>EntityHashMap&LTEntity, T></code> where <code>T</code> are structs containing an appropriate group of data. This means that while extract set systems will continue to run extract queries against the main world they will store their data in hash maps. Also, systems in later sets will either need to look up entities in the available resources such as <code>RenderMeshInstances</code>, or maintain their own <code>EntityHashMap&LTEntity, T></code> for their own data.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">queue_custom</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">material_meshes</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, <span class="z-keyword z-operator z-rust">&</span>MeshTransforms, <span class="z-keyword z-operator z-rust">&</span><span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Mesh<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span>, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>InstanceMaterialData<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>entity<span class="z-punctuation z-separator z-rust">,</span> mesh_transforms<span class="z-punctuation z-separator z-rust">,</span> mesh_handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>material_meshes <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">queue_custom</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">render_mesh_instances</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>RenderMeshInstances<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">instance_entities</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Entity, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>InstanceMaterialData<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> entity <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>instance_entities <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>mesh_instance</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> render_mesh_instances<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-keyword z-control z-rust">continue</span><span class="z-punctuation z-terminator z-rust">;</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> The mesh handle in `AssetId&LTMesh>` form, and the `MeshTransforms` can now
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> be found in `mesh_instance` which is a `RenderMeshInstance`
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">...</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h3 id=pcf-for-directionallight-spotlight-shadows><a href=https://github.com/bevyengine/bevy/pull/8006>PCF For DirectionalLight/SpotLight Shadows</a> <a class=anchor-link href=#pcf-for-directionallight-spotlight-shadows>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>Shadows cast by directional lights or spotlights now have smoother edges. To revert to the old behavior, add <code>ShadowFilteringMethod::Hardware2x2</code> to your cameras.<h3 id=use-material-for-wireframes><a href=https://github.com/bevyengine/bevy/pull/5314>use <code>Material</code> for wireframes</a> <a class=anchor-link href=#use-material-for-wireframes>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p><code>WireframePipeline</code> was removed. If you were using it directly, please create an issue explaining your use case.<h3 id=deferred-renderer><a href=https://github.com/bevyengine/bevy/pull/9258>Deferred Renderer</a> <a class=anchor-link href=#deferred-renderer>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><h3 id=pbr-shader-cleanup><a href=https://github.com/bevyengine/bevy/pull/10105>pbr shader cleanup</a> <a class=anchor-link href=#pbr-shader-cleanup>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>in custom material shaders:<ul><li><code>pbr_functions::pbr</code> no longer calls to <code>pbr_functions::alpha_discard</code>. if you were using the <code>pbr</code> function in a custom shader with alpha mask mode you now also need to call alpha_discard manually<li>rename imports of <code>bevy_pbr::mesh_vertex_output</code> to <code>bevy_pbr::forward_io</code><li>rename instances of <code>MeshVertexOutput</code> to <code>VertexOutput</code></ul><p>in custom material prepass shaders:<ul><li>rename instances of <code>VertexOutput::clip_position</code> to <code>VertexOutput::position</code></ul><h3 id=prepass-shader-def-cleanup><a href=https://github.com/bevyengine/bevy/pull/10136><code>*_PREPASS</code> Shader Def Cleanup</a> <a class=anchor-link href=#prepass-shader-def-cleanup>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>When using functions from <code>bevy_pbr::prepass_utils</code> (<code>prepass_depth()</code>, <code>prepass_normal()</code>, <code>prepass_motion_vector()</code>) in contexts where these prepasses might be disabled, you should now wrap your calls with the appropriate <code>#ifdef</code> guards, (<code>#ifdef DEPTH_PREPASS</code>, <code>#ifdef NORMAL_PREPASS</code>, <code>#ifdef MOTION_VECTOR_PREPASS</code>) providing fallback logic where applicable.<h3 id=allow-extensions-to-standardmaterial><a href=https://github.com/bevyengine/bevy/pull/7820>Allow extensions to StandardMaterial</a> <a class=anchor-link href=#allow-extensions-to-standardmaterial>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>Manual implementations of <code>AsBindGroup</code> will need to be adjusted, the changes are pretty straightforward and can be seen in the diff for e.g. the <code>texture_binding_array</code> example.<h3 id=variable-meshpipeline-view-bind-group-layout><a href=https://github.com/bevyengine/bevy/pull/10156>Variable <code>MeshPipeline</code> View Bind Group Layout</a> <a class=anchor-link href=#variable-meshpipeline-view-bind-group-layout>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p><code>MeshPipeline::view_layout</code> and <code>MeshPipeline::view_layout_multisampled</code> have been replaced with a private array to accommodate for variable view bind group layouts. To obtain a view bind group layout for the current pipeline state, use the new <code>MeshPipeline::get_view_layout()</code> or <code>MeshPipeline::get_view_layout_from_key()</code> methods.<h3 id=update-shader-imports><a href=https://github.com/bevyengine/bevy/pull/10180>Update shader imports</a> <a class=anchor-link href=#update-shader-imports>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>naga_oil 0.10 reworks the import mechanism to support more syntax to make it more rusty, and test for item use before importing to determine which imports are modules and which are items, which allows:<ul><li>use rust-style imports</ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">pbr_functions<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>alpha_discard <span class="z-keyword z-operator z-rust">as</span> discard<span class="z-punctuation z-separator z-rust">,</span> apply_pbr_lighting</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    mesh_bindings<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><ul><li>import partial paths:</ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">part<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">of<span class="z-punctuation z-accessor z-rust">::</span></span>path
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">path<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">remainder<span class="z-punctuation z-accessor z-rust">::</span></span>function<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>which will call to <code>part::of::path::remainder::function</code><ul><li>use fully qualified paths without importing:</ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> #import bevy_pbr::pbr_functions
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">pbr_functions<span class="z-punctuation z-accessor z-rust">::</span></span>pbr<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><ul><li>use imported items without qualifying</ul><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">pbr_functions<span class="z-punctuation z-accessor z-rust">::</span></span>pbr
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> for backwards compatibility the old style is still supported:
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> #import bevy_pbr::pbr_functions pbr
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span><span class="z-source z-rust"><span class="z-support z-function z-rust">pbr</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><ul><li>allows most imported items to end with <code>_</code> and numbers (naga_oil#30). still doesn’t allow struct members to end with <code>_</code> or numbers but it’s progress.<li>the vast majority of existing shader code will work without changes, but will emit “deprecated” warnings for old-style imports. these can be suppressed with the <code>allow-deprecated</code> feature.<li>partly breaks overrides (as far as i’m aware nobody uses these yet) - now overrides will only be applied if the overriding module is added as an additional import in the arguments to <code>Composer::make_naga_module</code> or <code>Composer::add_composable_module</code>. this is necessary to support determining whether imports are modules or items.</ul><h3 id=bind-group-entries><a href=https://github.com/bevyengine/bevy/pull/9694>Bind group entries</a> <a class=anchor-link href=#bind-group-entries>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><ul><li>Calls to <code>RenderDevice::create_bind_group({BindGroupDescriptor { label, layout, entries })</code> must be amended to <code>RenderDevice::create_bind_group(label, layout, entries)</code>.<li>If <code>label</code>s have been specified as <code>"bind_group_name".into()</code>, they need to change to just <code>"bind_group_name"</code>. <code>Some("bind_group_name")</code> and <code>None</code> will still work, but <code>Some("bind_group_name")</code> can optionally be simplified to just <code>"bind_group_name"</code>.</ul><h3 id=detect-cubemap-for-dds-textures><a href=https://github.com/bevyengine/bevy/pull/10222>Detect cubemap for dds textures</a> <a class=anchor-link href=#detect-cubemap-for-dds-textures>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>If you are matching on a <code>TextureError</code>, you will need to add a new branch to handle <code>TextureError::IncompleteCubemap</code>.<h3 id=add-convenient-methods-for-image><a href=https://github.com/bevyengine/bevy/pull/10221>Add convenient methods for Image</a> <a class=anchor-link href=#add-convenient-methods-for-image>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>Replace calls to the <code>Image::size()</code> method with <code>size_f32()</code>. Replace calls to the <code>Image::aspect_2d()</code> method with <code>aspect_ratio()</code>.<h3 id=use-specular-occlusion-term-to-consistently-extinguish-fresnel-on-ambient-and-environment-map-lights><a href=https://github.com/bevyengine/bevy/pull/10182>Use “specular occlusion” term to consistently extinguish fresnel on Ambient and Environment Map lights</a> <a class=anchor-link href=#use-specular-occlusion-term-to-consistently-extinguish-fresnel-on-ambient-and-environment-map-lights>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><ul><li>If Fresnel highlights from Ambient and Environment Map lights are no longer visible in your materials, make sure you’re using a higher, physically plausible value of <code>reflectance</code> (⪆ 0.35).</ul><h3 id=fix-fog-color-being-inaccurate><a href=https://github.com/bevyengine/bevy/pull/10226>Fix fog color being inaccurate</a> <a class=anchor-link href=#fix-fog-color-being-inaccurate>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>Colors in <code>FogSettings</code> struct (<code>color</code> and <code>directional_light_color</code>) are now sent to the GPU in linear space. If you were using <code>Color::rgb()</code>/<code>Color::rgba()</code> and would like to retain the previous colors, you can quickly fix it by switching to <code>Color::rgb_linear()</code>/<code>Color::rgba_linear()</code>.<h3 id=image-sampler-improvements><a href=https://github.com/bevyengine/bevy/pull/10254>Image Sampler Improvements</a> <a class=anchor-link href=#image-sampler-improvements>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><ul><li>When using the <code>Image</code> API, use <code>ImageSamplerDescriptor</code> instead of <code>wgpu::SamplerDescriptor</code><li>If writing custom wgpu renderer features that work with <code>Image</code>, call <code>&image_sampler.as_wgpu()</code> to convert to a wgpu descriptor.</ul><h3 id=standardmaterial-light-transmission><a href=https://github.com/bevyengine/bevy/pull/8015><code>StandardMaterial</code> Light Transmission</a> <a class=anchor-link href=#standardmaterial-light-transmission>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><ul><li><code>SsaoPipelineKey::temporal_noise</code> has been renamed to <code>SsaoPipelineKey::temporal_jitter</code><li>The <code>TAA</code> shader def (controlled by the presence of the <code>TemporalAntiAliasSettings</code> component in the camera) has been replaced with the <code>TEMPORAL_JITTER</code> shader def (controlled by the presence of the <code>TemporalJitter</code> component in the camera)<li><code>MeshPipelineKey::TAA</code> has been replaced by <code>MeshPipelineKey::TEMPORAL_JITTER</code><li>The <code>TEMPORAL_NOISE</code> shader def has been consolidated with <code>TEMPORAL_JITTER</code></ul><h3 id=increase-default-normal-bias-to-avoid-common-artifacts><a href=https://github.com/bevyengine/bevy/pull/10346>Increase default normal bias to avoid common artifacts</a> <a class=anchor-link href=#increase-default-normal-bias-to-avoid-common-artifacts>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>The default <code>shadow_normal_bias</code> value for <code>DirectionalLight</code> and <code>SpotLight</code> has changed to accommodate artifacts introduced with the new shadow PCF changes. It is unlikely (especially given the new PCF shadow behaviors with these values), but you might need to manually tweak this value if your scene requires a lower bias and it relied on the previous default value.<h3 id=make-directionallight-cascades-computation-generic-over-cameraprojection><a href=https://github.com/bevyengine/bevy/pull/9226>Make <code>DirectionalLight</code> <code>Cascades</code> computation generic over <code>CameraProjection</code></a> <a class=anchor-link href=#make-directionallight-cascades-computation-generic-over-cameraprojection>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>If you have a component <code>MyCustomProjection</code> that implements <code>CameraProjection</code>:<ul><li>You need to implement a new required associated method, <code>get_frustum_corners</code>, returning an array of the corners of a subset of the frustum with given <code>z_near</code> and <code>z_far</code>, in local camera space.<li>You can now add the <code>build_directional_light_cascades::&LTMyCustomProjection></code> system in <code>SimulationLightSystems::UpdateDirectionalLightCascades</code> after <code>clear_directional_light_cascades</code> for your projection to work with directional lights.</ul><h3 id=move-skin-code-to-a-separate-module><a href=https://github.com/bevyengine/bevy/pull/9899>Move skin code to a separate module</a> <a class=anchor-link href=#move-skin-code-to-a-separate-module>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div><div class=migration-guide-area-tag>Animation</div></div><p>Renamed skinning systems, resources and components:<ul><li>extract_skinned_meshes -> extract_skins<li>prepare_skinned_meshes -> prepare_skins<li>SkinnedMeshUniform -> SkinUniform<li>SkinnedMeshJoints -> SkinIndex</ul><h3 id=move-scene-spawner-systems-to-spawnscene-schedule><a href=https://github.com/bevyengine/bevy/pull/9260>Move scene spawner systems to SpawnScene schedule</a> <a class=anchor-link href=#move-scene-spawner-systems-to-spawnscene-schedule>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Scenes</div></div><p><code>scene_spawner_system</code> was moved to a new <code>SpawnScene</code> schedule which is run between <code>Update</code> and <code>PostUpdate</code>.<p>If you were ordering your own systems to run before <code>scene_spawner_system</code> in <code>Update</code>, that might no longer be necessary. If your system needs to run after <code>scene_spawner_system</code>, it should be moved to the <code>SpawnScene</code> or <code>PostUpdate</code> schedule.<h3 id=remove-resource-and-add-debug-to-taskpooloptions><a href=https://github.com/bevyengine/bevy/pull/9485>Remove Resource and add Debug to TaskPoolOptions</a> <a class=anchor-link href=#remove-resource-and-add-debug-to-taskpooloptions>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Tasks</div></div><p>If for some reason anyone is still using <code>TaskPoolOptions</code> as a Resource, they would now have to use a wrapper type:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Resource</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyTaskPoolOptions</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>pub TaskPoolOptions</span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=global-taskpool-api-improvements><a href=https://github.com/bevyengine/bevy/pull/10008>Global TaskPool API improvements</a> <a class=anchor-link href=#global-taskpool-api-improvements>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Tasks</div></div><p>Uses of <code>ComputeTaskPool::init</code>, <code>AsyncComputeTaskPool::init</code> and <code>IoTaskPool::init</code> should be changed to <code>::get_or_init</code>.<h3 id=unify-fixedtime-and-time-while-fixing-several-problems><a href=https://github.com/bevyengine/bevy/pull/8964>Unify <code>FixedTime</code> and <code>Time</code> while fixing several problems</a> <a class=anchor-link href=#unify-fixedtime-and-time-while-fixing-several-problems>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Time</div></div><ul><li>Change all <code>Res&LTTime></code> instances that access <code>raw_delta()</code>, <code>raw_elapsed()</code> and related methods to <code>Res&LTTime&LTReal>></code> and <code>delta()</code>, <code>elapsed()</code>, etc.<li>Change access to <code>period</code> from <code>Res&LTFixedTime></code> to <code>Res&LTTime&LTFixed>></code> and use <code>delta()</code>.<li>The default timestep has been changed from 60 Hz to 64 Hz. If you wish to restore the old behaviour, use <code>app.insert_resource(Time::&LTFixed>::from_hz(60.0))</code>.<li>Change <code>app.insert_resource(FixedTime::new(duration))</code> to <code>app.insert_resource(Time::&LTFixed>::from_duration(duration))</code><li>Change <code>app.insert_resource(FixedTime::new_from_secs(secs))</code> to <code>app.insert_resource(Time::&LTFixed>::from_seconds(secs))</code><li>Change <code>system.on_fixed_timer(duration)</code> to <code>system.on_timer(duration)</code>. Timers in systems placed in <code>FixedUpdate</code> schedule automatically use the fixed time clock.<li>Change <code>ResMut&LTTime></code> calls to <code>pause()</code>, <code>is_paused()</code>, <code>set_relative_speed()</code> and related methods to <code>ResMut&LTTime&LTVirtual>></code> calls. The API is the same, with the exception that <code>relative_speed()</code> will return the actual last ste relative speed, while <code>effective_relative_speed()</code> returns 0.0 if the time is paused and corresponds to the speed that was set when the update for the current frame started.</ul><h3 id=change-the-default-for-the-measure-func-field-of-contentsize-to-none><a href=https://github.com/bevyengine/bevy/pull/9346>Change the default for the <code>measure_func</code> field of <code>ContentSize</code> to None.</a> <a class=anchor-link href=#change-the-default-for-the-measure-func-field-of-contentsize-to-none>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><p>The default for <code>ContentSize</code> now sets its <code>measure_func</code> to <code>None</code>, instead of a fixed size measure that returns <code>Vec2::ZERO</code>. The helper function <code>fixed_size</code> can be called with <code>ContentSize::fixed_size(Vec2::ZERO)</code> to get the previous behaviour.<h3 id=change-uiscale-to-a-tuple-struct><a href=https://github.com/bevyengine/bevy/pull/9444>Change <code>UiScale</code> to a tuple struct</a> <a class=anchor-link href=#change-uiscale-to-a-tuple-struct>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><p>Replace initialization of <code>UiScale</code> like <code>UiScale { scale: 1.0 }</code> with <code>UiScale(1.0)</code><h3 id=cleanup-some-bevy-text-pipeline-rs><a href=https://github.com/bevyengine/bevy/pull/9111>Cleanup some bevy_text pipeline.rs</a> <a class=anchor-link href=#cleanup-some-bevy-text-pipeline-rs>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><ul><li>The <code>ResMut&LTTextPipeline></code> argument to <code>measure_text_system</code> doesn’t exist anymore. If you were calling this system manually, you should remove the argument.<li>The <code>{min,max}_width_content_size</code> fields of <code>TextMeasureInfo</code> are renamed to <code>min</code> and <code>max</code> respectively<li>Other changes to <code>TextMeasureInfo</code> may also break your code if you were manually building it. Please consider using the new <code>TextMeasureInfo::from_text</code> to build one instead.<li><code>TextPipeline::create_text_measure</code> has been removed in favor of <code>TextMeasureInfo::from_text</code></ul><h3 id=make-gridplacement-s-fields-non-zero-and-add-accessor-functions><a href=https://github.com/bevyengine/bevy/pull/9486>Make <code>GridPlacement</code>'s fields non-zero and add accessor functions.</a> <a class=anchor-link href=#make-gridplacement-s-fields-non-zero-and-add-accessor-functions>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><p><code>GridPlacement</code>’s constructor functions no longer accept values of <code>0</code>. Given any argument of <code>0</code> they will panic with a <code>GridPlacementError</code>.<h3 id=remove-val-s-try-arithmetic-methods><a href=https://github.com/bevyengine/bevy/pull/9609>Remove <code>Val</code>'s <code>try_*</code> arithmetic methods</a> <a class=anchor-link href=#remove-val-s-try-arithmetic-methods>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><p><code>Val</code>’s <code>try_*</code> arithmetic methods have been removed. To perform arithmetic on <code>Val</code>s deconstruct them using pattern matching.<h3 id=rename-val-evaluate-to-resolve-and-implement-viewport-variant-support><a href=https://github.com/bevyengine/bevy/pull/9568>Rename <code>Val</code> <code>evaluate</code> to <code>resolve</code> and implement viewport variant support</a> <a class=anchor-link href=#rename-val-evaluate-to-resolve-and-implement-viewport-variant-support>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><ul><li>Renamed the following <code>Val</code> methods and added a <code>viewport_size</code> parameter: <ul><li><code>evaluate</code> to <code>resolve</code><li><code>try_add_with_size</code> to <code>try_add_with_context</code><li><code>try_add_assign_with_size</code> to <code>try_add_assign_with_context</code><li><code>try_sub_with_size</code> to <code>try_sub_with_context</code><li><code>try_sub_assign_with_size</code> to <code>try_sub_assign_with_context</code></ul></ul><h3 id=textlayoutinfo-size-should-hold-the-drawn-size-of-the-text-and-not-a-scaled-value><a href=https://github.com/bevyengine/bevy/pull/7794><code>TextLayoutInfo::size</code> should hold the drawn size of the text, and not a scaled value.</a> <a class=anchor-link href=#textlayoutinfo-size-should-hold-the-drawn-size-of-the-text-and-not-a-scaled-value>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><p>The <code>size</code> value of <code>TextLayoutInfo</code> is stored in logical pixels and has been renamed to <code>logical_size</code>. There is no longer any need to divide by the window’s scale factor to get the logical size.<h3 id=have-a-separate-implicit-viewport-node-per-root-node-make-viewport-node-display-grid><a href=https://github.com/bevyengine/bevy/pull/9637>Have a separate implicit viewport node per root node + make viewport node <code>Display::Grid</code></a> <a class=anchor-link href=#have-a-separate-implicit-viewport-node-per-root-node-make-viewport-node-display-grid>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><ul><li>Bevy UI now lays out root nodes independently of each other in separate layout contexts. If you were relying on your root nodes being able to affect each other’s layouts, then you may need to wrap them in a single root node.<li>The implicit viewport node (which contains each user-specified root node) is now <code>Display::Grid</code> with <code>align_items</code> and <code>justify_items</code> both set to <code>Start</code>. You may need to add <code>height: Val::Percent(100.)</code> to your root nodes if you were previously relying on being implicitly set.</ul><h3 id=rename-num-font-atlases-to-len><a href=https://github.com/bevyengine/bevy/pull/9879>Rename <code>num_font_atlases</code> to <code>len</code>.</a> <a class=anchor-link href=#rename-num-font-atlases-to-len>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><p>The <code>num_font_atlases</code> method of <code>FontAtlasSet</code> has been renamed to <code>len</code>.<h3 id=various-accessibility-api-updates><a href=https://github.com/bevyengine/bevy/pull/9989>Various accessibility API updates.</a> <a class=anchor-link href=#various-accessibility-api-updates>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><p>Change direct accesses of <code>AccessibilityRequested</code> to use <code>AccessibilityRequested.::get()</code>/<code>AccessibilityRequested::set()</code><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">sync<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">atomic<span class="z-punctuation z-accessor z-rust">::</span></span>Ordering<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> To access
</span></span><span class="z-source z-rust">accessibility_requested<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Ordering<span class="z-punctuation z-accessor z-rust">::</span></span>SeqCst</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> To update
</span></span><span class="z-source z-rust">accessibility_requested<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">store</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-language z-rust">true</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Ordering<span class="z-punctuation z-accessor z-rust">::</span></span>SeqCst</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> To access
</span></span><span class="z-source z-rust">accessibility_requested<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> To update
</span></span><span class="z-source z-rust">accessibility_requested<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-language z-rust">true</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=add-some-more-docs-for-bevy-text><a href=https://github.com/bevyengine/bevy/pull/9873>Add some more docs for bevy_text.</a> <a class=anchor-link href=#add-some-more-docs-for-bevy-text>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><p>Usages of <code>TextSettings.max_font_atlases</code> from <code>bevy_text</code> must be changed to <code>TextSettings.soft_max_font_atlases</code>.<h3 id=update-ui-alignment-docs><a href=https://github.com/bevyengine/bevy/pull/10303>Update UI alignment docs</a> <a class=anchor-link href=#update-ui-alignment-docs>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>UI</div></div><p>The <code>JustifyContents</code> enum has been expanded to include <code>JustifyContents::Stretch</code>.<h3 id=add-option-to-toggle-window-control-buttons><a href=https://github.com/bevyengine/bevy/pull/9083>Add option to toggle window control buttons</a> <a class=anchor-link href=#add-option-to-toggle-window-control-buttons>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Windowing</div></div><p>Added an <code>enabled_buttons</code> member to the <code>Window</code> struct through which users can enable or disable specific window control buttons.<h3 id=improve-bevy-winit-documentation><a href=https://github.com/bevyengine/bevy/pull/7609>Improve <code>bevy_winit</code> documentation</a> <a class=anchor-link href=#improve-bevy-winit-documentation>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Windowing</div></div><ul><li><code>UpdateMode::Reactive { max_wait: .. }</code> -> <code>UpdateMode::Reactive { wait: .. }</code><li><code>UpdateMode::ReactiveLowPower { max_wait: .. }</code> -> <code>UpdateMode::ReactiveLowPower { wait: .. }</code></ul><h3 id=work-around-naga-wgpu-wgsl-instance-index-glsl-gl-instanceid-bug-on-webgl2><a href=https://github.com/bevyengine/bevy/pull/9383>Work around naga/wgpu WGSL instance_index -> GLSL gl_InstanceID bug on WebGL2</a> <a class=anchor-link href=#work-around-naga-wgpu-wgsl-instance-index-glsl-gl-instanceid-bug-on-webgl2>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>Shader code before:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Vertex</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    @builtin(instance_index) <span class="z-variable z-other z-member z-rust">instance_index</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">u32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">...
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span>vertex
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">vertex</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">vertex_no_morph</span><span class="z-punctuation z-separator z-rust">:</span> Vertex</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> VertexOutput</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    var model <span class="z-keyword z-operator z-assignment z-rust">=</span> mesh<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>vertex_no_morph<span class="z-punctuation z-accessor z-dot z-rust">.</span>instance_index<span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>model<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>After:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_render<span class="z-punctuation z-accessor z-rust">::</span></span>instance_index
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Vertex</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    @builtin(instance_index) <span class="z-variable z-other z-member z-rust">instance_index</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">u32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">@</span>vertex
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">vertex</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">vertex_no_morph</span><span class="z-punctuation z-separator z-rust">:</span> Vertex</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> VertexOutput</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> instance_index <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">bevy_render<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">instance_index<span class="z-punctuation z-accessor z-rust">::</span></span>get_instance_index<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>vertex_no_morph<span class="z-punctuation z-accessor z-dot z-rust">.</span>instance_index</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    var model <span class="z-keyword z-operator z-assignment z-rust">=</span> mesh<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>instance_index<span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>model<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h3 id=remove-intoiterator-impl-for-mut-eventreader><a href=https://github.com/bevyengine/bevy/pull/9583>Remove <code>IntoIterator</code> impl for <code>&mut EventReader</code></a> <a class=anchor-link href=#remove-intoiterator-impl-for-mut-eventreader>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>No area label</div></div><p><code>&mut EventReader</code> does not implement <code>IntoIterator</code> anymore. replace <code>for foo in &mut events</code> by <code>for foo in events.iter()</code><h3 id=update-default-clearcolor-to-better-match-bevy-s-branding><a href=https://github.com/bevyengine/bevy/pull/10339>Update default `ClearColor`` to better match Bevy's branding</a> <a class=anchor-link href=#update-default-clearcolor-to-better-match-bevy-s-branding>#</a></h3><div class=migration-guide-area-tags><div class=migration-guide-area-tag>Rendering</div></div><p>The default app background color has changed. To use the old default, add a <code>ClearColor</code> resource.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>ClearColor<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">4</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">4</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">4</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre></div><h3 id=view-transformations><a href=https://github.com/bevyengine/bevy/pull/9726>View Transformations</a> <a class=anchor-link href=#view-transformations>#</a></h3><p><code>mesh_functions::mesh_position_world_to_clip</code> was moved and renamed to <code>view_transformations::position_world_to_clip</code>. It now also takes a <code>vec3</code> instead of a <code>vec4</code> so you will need to use <code>vec4.xyz</code> to get a <code>vec3</code>.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.11
</span></span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">mesh_functions<span class="z-punctuation z-accessor z-rust">::</span></span>mesh_position_world_to_clip
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">mesh_position_local_to_clip</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">model</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">mat4x4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">vertex_position</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> world_position <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">mesh_position_local_to_world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>model<span class="z-punctuation z-separator z-rust">,</span> vertex_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">return</span> <span class="z-support z-function z-rust">mesh_position_world_to_clip</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.12
</span></span><span class="z-source z-rust"><span class="z-keyword z-operator z-rust">#</span>import <span class="z-meta z-path z-rust">bevy_pbr<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">view_transformations<span class="z-punctuation z-accessor z-rust">::</span></span>position_world_to_clip<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">mesh_position_local_to_clip</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">model</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">mat4x4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>, <span class="z-variable z-parameter z-rust">vertex_position</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-generic z-rust">vec4<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> world_position <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">mesh_position_local_to_world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>model<span class="z-punctuation z-separator z-rust">,</span> vertex_position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">return</span> <span class="z-support z-function z-rust">position_world_to_clip</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world_position<span class="z-punctuation z-accessor z-dot z-rust">.</span>xyz</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre></div><div class="docs-footer print:hidden"><nav class=docs-footer__nav><a class="docs-footer__link docs-footer__link--next" data-docs-nav-next href=/learn/migration-guides/0-10-to-0-11/> <div class=docs-footer__label><div class=docs-footer__dir>Next</div> 0.10 to 0.11</div> <i class="docs-footer__chevron icon icon--chevron-right"></i> </a><a class="docs-footer__link docs-footer__link--prev" data-docs-nav-previous href=/learn/migration-guides/0-12-to-0-13/> <div class=docs-footer__label><div class=docs-footer__dir>Previous</div> 0.12 to 0.13</div> <i class="docs-footer__chevron icon icon--chevron-left"></i> </a></nav><div class=docs-footer__edit-wrapper><a class=docs-footer__edit href=https://github.com/bevyengine/bevy-website/edit/main/content/learn/migration-guides/0.11-to-0.12.md> <i class="icon icon--pencil"></i> Improve this page </a><a href="https://github.com/bevyengine/bevy-website/issues/new?template=docs.md&title=Issue%20on%20page%200.11%20to%200.12" class=docs-footer__edit> <i class="icon icon--github"></i> Report issue </a></div></div></div></div></div></div></div></main><footer class=print:hidden><div class=footer__social-container><a class=footer__social href=https://github.com/bevyengine/bevy title=GitHub> <img alt="GitHub logo" height=24 src=/assets/github-mark-white.svg width=24> </a><a class=footer__social href=https://discord.gg/bevy title=Discord> <img alt="Discord logo" height=24 src=/assets/discord.svg width=24> </a><a class=footer__social href=https://bsky.app/profile/bevy.org title=Bluesky> <img alt="Bluesky logo" height=24 src=/assets/bluesky.svg width=24> </a><a class=footer__social href=https://mastodon.social/@bevy title=Mastodon> <img alt="Mastodon logo" height=24 src=/assets/mastodon-logo-purple.svg width=24> </a><a class=footer__social href=https://www.reddit.com/r/bevy/ title=Reddit> <img alt="Reddit logo" height=24 src=/assets/reddit.svg width=24> </a><a class=footer__social href=https://itch.io/games/tag-bevy title=itch.io> <img alt="itch.io logo" height=24 src=/assets/itchio-textless.svg width=24> </a><a title="Bevy news feed" class=footer__social href=/atom.xml> <img alt="Bevy news feed" height=24 src=/assets/feed.svg width=24> </a></div></footer></div><script>const search_params=new URLSearchParams(window.location.search);if(search_params.has(`show_drafts`)||document.cookie.indexOf(`show_drafts`)>=0){let a=`show_drafts`;if(search_params.get(a)===`0`){document.cookie=`show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC`}else{document.cookie=`show_drafts=1;path=/`;document.body.classList.add(a)}}</script>